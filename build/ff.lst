ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.mem_cpy,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	mem_cpy:
  25              	.LFB129:
  26              		.file 1 "Middlewares/Third_Party/FatFs/src/ff.c"
   1:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/src/ff.c **** /  FatFs - FAT file system module  R0.11                 (C)ChaN, 2015
   3:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/src/ff.c **** / FatFs module is a free software that opened under license policy of
   5:Middlewares/Third_Party/FatFs/src/ff.c **** / following conditions.
   6:Middlewares/Third_Party/FatFs/src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/src/ff.c **** / Copyright (C) 2015, ChaN, all right reserved.
   8:Middlewares/Third_Party/FatFs/src/ff.c **** /
   9:Middlewares/Third_Party/FatFs/src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  10:Middlewares/Third_Party/FatFs/src/ff.c **** /    this condition and the following disclaimer.
  11:Middlewares/Third_Party/FatFs/src/ff.c **** /
  12:Middlewares/Third_Party/FatFs/src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  13:Middlewares/Third_Party/FatFs/src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  14:Middlewares/Third_Party/FatFs/src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  15:Middlewares/Third_Party/FatFs/src/ff.c **** / by use of this software.
  16:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
  17:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 26,'06 R0.00  Prototype.
  18:Middlewares/Third_Party/FatFs/src/ff.c **** /
  19:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 29,'06 R0.01  First stable version.
  20:Middlewares/Third_Party/FatFs/src/ff.c **** /
  21:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 01,'06 R0.02  Added FAT12 support.
  22:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Removed unbuffered mode.
  23:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a problem on small (<32M) partition.
  24:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
  25:Middlewares/Third_Party/FatFs/src/ff.c **** /
  26:Middlewares/Third_Party/FatFs/src/ff.c **** / Sep 22,'06 R0.03  Added f_rename().
  27:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
  28:Middlewares/Third_Party/FatFs/src/ff.c **** / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
  29:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkdir() creates incorrect directory on FAT32.
  30:Middlewares/Third_Party/FatFs/src/ff.c **** /
  31:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 04,'07 R0.04  Supported multiple drive system.
  32:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed some interfaces for multiple drive system.
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 2


  33:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed f_mountdrv() to f_mount().
  34:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_mkfs().
  35:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
  36:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a capability of extending file size to f_lseek().
  37:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added minimization level 3.
  38:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed an endian sensitive code in f_mkfs().
  39:Middlewares/Third_Party/FatFs/src/ff.c **** / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
  40:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added FSINFO support.
  41:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed DBCS name can result FR_INVALID_NAME.
  42:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed short seek (<= csize) collapses the file object.
  43:Middlewares/Third_Party/FatFs/src/ff.c **** /
  44:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
  45:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
  46:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
  47:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
  48:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed off by one error at FAT sub-type determination.
  49:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed btr in f_read() can be mistruncated.
  50:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed cached sector is not flushed when create and close without write.
  51:Middlewares/Third_Party/FatFs/src/ff.c **** /
  52:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
  53:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved performance of f_lseek() on moving to the same or following cluster.
  54:Middlewares/Third_Party/FatFs/src/ff.c **** /
  55:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
  56:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added long file name feature.
  57:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added multiple code page feature.
  58:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added re-entrancy for multitask operation.
  59:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added auto cluster size selection to f_mkfs().
  60:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added rewind option to f_readdir().
  61:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed result code of critical errors.
  62:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Renamed string functions to avoid name collision.
  63:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
  64:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added multiple sector size feature.
  65:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
  66:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed wrong cache control in f_lseek().
  67:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added relative path feature.
  68:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_chdir() and f_chdrive().
  69:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added proper case conversion to extended character.
  70:Middlewares/Third_Party/FatFs/src/ff.c **** / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
  71:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
  72:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed name matching error on the 13 character boundary.
  73:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a configuration option, _LFN_UNICODE.
  74:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
  75:Middlewares/Third_Party/FatFs/src/ff.c **** /
  76:Middlewares/Third_Party/FatFs/src/ff.c **** / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
  77:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added file lock feature. (_FS_SHARE)
  78:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added fast seek feature. (_USE_FASTSEEK)
  79:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed some types on the API, XCHAR->TCHAR.
  80:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed .fname in the FILINFO structure on Unicode cfg.
  81:Middlewares/Third_Party/FatFs/src/ff.c **** /                   String functions support UTF-8 encoding files on Unicode cfg.
  82:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 16,'10 R0.08a Added f_getcwd().
  83:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added sector erase feature. (_USE_ERASE)
  84:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Moved file lock semaphore table from fs object to the bss.
  85:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name con
  86:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkfs() creates wrong FAT32 volume.
  87:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
  88:Middlewares/Third_Party/FatFs/src/ff.c **** /                   f_lseek() reports required table size on creating CLMP.
  89:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Extended format syntax of f_printf().
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 3


  90:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Ignores duplicated directory separators in given path name.
  91:Middlewares/Third_Party/FatFs/src/ff.c **** /
  92:Middlewares/Third_Party/FatFs/src/ff.c **** / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature
  93:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_fdisk().
  94:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
  95:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed option name _FS_SHARE to _FS_LOCK.
  96:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
  97:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
  98:Middlewares/Third_Party/FatFs/src/ff.c **** /
  99:Middlewares/Third_Party/FatFs/src/ff.c **** / Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
 100:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_closedir().
 101:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
 102:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added forced mount feature with changes of f_mount().
 103:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved behavior of volume auto detection.
 104:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved write throughput of f_puts() and f_printf().
 105:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
 106:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_write() can be truncated when the file size is close to 4GB.
 107:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
 108:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 15,'14 R0.10a Added arbitrary strings as drive number in the path name. (_STR_VOLUME_ID)
 109:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a configuration option of minimum sector size. (_MIN_SS)
 110:Middlewares/Third_Party/FatFs/src/ff.c **** /                   2nd argument of f_rename() can have a drive number and it will be ignored.
 111:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mount() with forced mount fails when drive number is >= 1.
 112:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_close() invalidates the file object without volume lock.
 113:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_closedir() returns but the volume lock is left acquired.
 114:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed creation of an entry with LFN fails on too many SFN collisions.
 115:Middlewares/Third_Party/FatFs/src/ff.c **** / May 19,'14 R0.10b Fixed a hard error in the disk I/O layer can collapse the directory entry.
 116:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed LFN entry is not deleted on delete/rename an object with lossy converted 
 117:Middlewares/Third_Party/FatFs/src/ff.c **** / Nov  9,'14 R0.10c Added a configuration option for the platforms without RTC. (_FS_NORTC)
 118:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed volume label created by Mac OS X cannot be retrieved with f_getlabel(). (
 119:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a potential problem of FAT access that can appear on disk error.
 120:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed null pointer dereference on attempting to delete the root direcotry. (app
 121:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 02,'15 R0.11  Added f_findfirst() and f_findnext(). (_USE_FIND)
 122:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_unlink() does not remove cluster chain of the file. (appeared at R0.10c
 123:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed _FS_NORTC option does not work properly. (appeared at R0.10c)
 124:Middlewares/Third_Party/FatFs/src/ff.c **** /---------------------------------------------------------------------------*/
 125:Middlewares/Third_Party/FatFs/src/ff.c **** 
 126:Middlewares/Third_Party/FatFs/src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
 127:Middlewares/Third_Party/FatFs/src/ff.c **** #include "diskio.h"		/* Declarations of disk I/O functions */
 128:Middlewares/Third_Party/FatFs/src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/src/ff.c **** 
 130:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 131:Middlewares/Third_Party/FatFs/src/ff.c **** 
 132:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Definitions
 133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 134:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 135:Middlewares/Third_Party/FatFs/src/ff.c **** 
 136:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FATFS != 32020	/* Revision ID */
 137:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong include file (ff.h).
 138:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 139:Middlewares/Third_Party/FatFs/src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/src/ff.c **** 
 141:Middlewares/Third_Party/FatFs/src/ff.c **** /* Reentrancy related */
 142:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 143:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 144:Middlewares/Third_Party/FatFs/src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 145:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 146:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 4


 147:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 148:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 149:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)
 150:Middlewares/Third_Party/FatFs/src/ff.c **** #define LEAVE_FF(fs, res)	return res
 151:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 152:Middlewares/Third_Party/FatFs/src/ff.c **** 
 153:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 154:Middlewares/Third_Party/FatFs/src/ff.c **** 
 155:Middlewares/Third_Party/FatFs/src/ff.c **** 
 156:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of sector size */
 157:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 158:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong sector size configuration
 159:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 160:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS == _MIN_SS
 161:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 162:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 163:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 164:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 165:Middlewares/Third_Party/FatFs/src/ff.c **** 
 166:Middlewares/Third_Party/FatFs/src/ff.c **** 
 167:Middlewares/Third_Party/FatFs/src/ff.c **** /* Timestamp feature */
 168:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_NORTC == 1
 169:Middlewares/Third_Party/FatFs/src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 170:Middlewares/Third_Party/FatFs/src/ff.c **** #error Invalid _FS_NORTC settings
 171:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 172:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 173:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 174:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	get_fattime()
 175:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 176:Middlewares/Third_Party/FatFs/src/ff.c **** 
 177:Middlewares/Third_Party/FatFs/src/ff.c **** 
 178:Middlewares/Third_Party/FatFs/src/ff.c **** /* File access control feature */
 179:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 180:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_READONLY
 181:Middlewares/Third_Party/FatFs/src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 182:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 183:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
 184:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 185:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clu;		/* Object ID 2, directory (0:root) */
 186:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD idx;		/* Object ID 3, directory index */
 187:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 188:Middlewares/Third_Party/FatFs/src/ff.c **** } FILESEM;
 189:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 190:Middlewares/Third_Party/FatFs/src/ff.c **** 
 191:Middlewares/Third_Party/FatFs/src/ff.c **** 
 192:Middlewares/Third_Party/FatFs/src/ff.c **** 
 193:Middlewares/Third_Party/FatFs/src/ff.c **** /* DBCS code ranges and SBCS extend character conversion table */
 194:Middlewares/Third_Party/FatFs/src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
 196:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
 197:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
 198:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
 199:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
 200:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
 201:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
 202:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
 203:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 5


 204:Middlewares/Third_Party/FatFs/src/ff.c **** 
 205:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
 206:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 207:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 208:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
 209:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
 210:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80
 211:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
 212:Middlewares/Third_Party/FatFs/src/ff.c **** 
 213:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
 214:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 215:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 216:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x41
 217:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x5A
 218:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x61
 219:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0x7A
 220:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3S	0x81
 221:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3E	0xFE
 222:Middlewares/Third_Party/FatFs/src/ff.c **** 
 223:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
 224:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 225:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 226:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
 227:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
 228:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0xA1
 229:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
 230:Middlewares/Third_Party/FatFs/src/ff.c **** 
 231:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. (OEM) */
 232:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 233:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x9
 234:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 235:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 236:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 237:Middlewares/Third_Party/FatFs/src/ff.c **** 
 238:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic (OEM) */
 239:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 240:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x9
 241:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 242:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 243:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 244:Middlewares/Third_Party/FatFs/src/ff.c **** 
 245:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 737	/* Greek (OEM) */
 246:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 247:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 248:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,
 249:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 250:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 251:Middlewares/Third_Party/FatFs/src/ff.c **** 
 252:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic (OEM) */
 253:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 254:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x9
 255:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 256:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,
 257:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 259:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
 260:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 6


 261:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 262:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 263:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 264:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 265:Middlewares/Third_Party/FatFs/src/ff.c **** 
 266:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
 267:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 268:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x9
 269:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,
 270:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 271:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,
 272:Middlewares/Third_Party/FatFs/src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
 274:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 275:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x9
 276:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 277:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,
 278:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,
 279:Middlewares/Third_Party/FatFs/src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish (OEM) */
 281:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 282:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x9
 283:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 284:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 285:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,
 286:Middlewares/Third_Party/FatFs/src/ff.c **** 
 287:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
 288:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 289:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 290:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 291:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 292:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
 295:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 296:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 297:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 298:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 299:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 300:Middlewares/Third_Party/FatFs/src/ff.c **** 
 301:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 866	/* Russian (OEM) */
 302:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 303:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 304:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,
 305:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 306:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,
 307:Middlewares/Third_Party/FatFs/src/ff.c **** 
 308:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
 309:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 310:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 311:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 312:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 313:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 314:Middlewares/Third_Party/FatFs/src/ff.c **** 
 315:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
 316:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 317:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 7


 318:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 319:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 320:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 321:Middlewares/Third_Party/FatFs/src/ff.c **** 
 322:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
 323:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 324:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x8
 325:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 326:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 327:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 329:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
 330:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 331:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 332:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 333:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 334:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 335:Middlewares/Third_Party/FatFs/src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1253 /* Greek (Windows) */
 337:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 338:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 339:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 340:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 341:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 343:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
 344:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 345:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 346:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 347:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 348:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 349:Middlewares/Third_Party/FatFs/src/ff.c **** 
 350:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
 351:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 352:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 353:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 354:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 355:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 356:Middlewares/Third_Party/FatFs/src/ff.c **** 
 357:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
 358:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 359:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 360:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 361:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 362:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,
 363:Middlewares/Third_Party/FatFs/src/ff.c **** 
 364:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
 365:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 366:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 367:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 368:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 369:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 370:Middlewares/Third_Party/FatFs/src/ff.c **** 
 371:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
 372:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 373:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 374:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 8


 375:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 376:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 377:Middlewares/Third_Party/FatFs/src/ff.c **** 
 378:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 379:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 380:Middlewares/Third_Party/FatFs/src/ff.c **** #error Cannot use LFN feature without valid code page.
 381:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 382:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 383:Middlewares/Third_Party/FatFs/src/ff.c **** 
 384:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 385:Middlewares/Third_Party/FatFs/src/ff.c **** #error Unknown code page
 386:Middlewares/Third_Party/FatFs/src/ff.c **** 
 387:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 388:Middlewares/Third_Party/FatFs/src/ff.c **** 
 389:Middlewares/Third_Party/FatFs/src/ff.c **** 
 390:Middlewares/Third_Party/FatFs/src/ff.c **** /* Character code support macros */
 391:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 392:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 393:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 394:Middlewares/Third_Party/FatFs/src/ff.c **** 
 395:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S		/* Code page is DBCS */
 396:Middlewares/Third_Party/FatFs/src/ff.c **** 
 397:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 398:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 399:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* One 1st byte area */
 400:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 401:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 402:Middlewares/Third_Party/FatFs/src/ff.c **** 
 403:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 404:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 405:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Two 2nd byte areas */
 406:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 407:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 408:Middlewares/Third_Party/FatFs/src/ff.c **** 
 409:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Code page is SBCS */
 410:Middlewares/Third_Party/FatFs/src/ff.c **** 
 411:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	0
 412:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	0
 413:Middlewares/Third_Party/FatFs/src/ff.c **** 
 414:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _DF1S */
 415:Middlewares/Third_Party/FatFs/src/ff.c **** 
 416:Middlewares/Third_Party/FatFs/src/ff.c **** 
 417:Middlewares/Third_Party/FatFs/src/ff.c **** /* Name status flags */
 418:Middlewares/Third_Party/FatFs/src/ff.c **** #define NSFLAG		11		/* Index of name status byte in fn[] */
 419:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 420:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 421:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LAST		0x04	/* Last segment */
 422:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 423:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 424:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 425:Middlewares/Third_Party/FatFs/src/ff.c **** 
 426:Middlewares/Third_Party/FatFs/src/ff.c **** 
 427:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT sub-type boundaries (Differ from specs but correct for real DOS/Windows) */
 428:Middlewares/Third_Party/FatFs/src/ff.c **** #define MIN_FAT16	4086U	/* Minimum number of clusters as FAT16 */
 429:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MIN_FAT32	65526U	/* Minimum number of clusters as FAT32 */
 430:Middlewares/Third_Party/FatFs/src/ff.c **** 
 431:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 9


 432:Middlewares/Third_Party/FatFs/src/ff.c **** /* FatFs refers the members in the FAT structures as byte array instead of
 433:Middlewares/Third_Party/FatFs/src/ff.c **** / structure member because the structure is not binary compatible between
 434:Middlewares/Third_Party/FatFs/src/ff.c **** / different platforms */
 435:Middlewares/Third_Party/FatFs/src/ff.c **** 
 436:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_jmpBoot			0		/* x86 jump instruction (3) */
 437:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_OEMName			3		/* OEM name (8) */
 438:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (2) */
 439:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (1) */
 440:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (2) */
 441:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATs			16		/* Number of FAT copies (1) */
 442:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootEntCnt		17		/* Number of root directory entries for FAT12/16 (2) */
 443:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec16		19		/* Volume size [sector] (2) */
 444:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_Media			21		/* Media descriptor (1) */
 445:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz16			22		/* FAT size [sector] (2) */
 446:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerTrk		24		/* Track size [sector] (2) */
 447:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumHeads		26		/* Number of heads (2) */
 448:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_HiddSec			28		/* Number of special hidden sectors (4) */
 449:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec32		32		/* Volume size [sector] (4) */
 450:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum			36		/* Physical drive number (2) */
 451:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (1) */
 452:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID			39		/* Volume serial number (4) */
 453:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab			43		/* Volume label (8) */
 454:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType		54		/* File system type (1) */
 455:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz32			36		/* FAT size [sector] (4) */
 456:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ExtFlags		40		/* Extended flags (2) */
 457:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVer			42		/* File system version (2) */
 458:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClus		44		/* Root directory first cluster (4) */
 459:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSInfo			48		/* Offset of FSINFO sector (2) */
 460:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BkBootSec		50		/* Offset of backup boot sector (2) */
 461:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum32			64		/* Physical drive number (2) */
 462:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig32		66		/* Extended boot signature (1) */
 463:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID32			67		/* Volume serial number (4) */
 464:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab32			71		/* Volume label (8) */
 465:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType32		82		/* File system type (1) */
 466:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_LeadSig			0		/* FSI: Leading signature (4) */
 467:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_StrucSig		484		/* FSI: Structure signature (4) */
 468:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Free_Count		488		/* FSI: Number of free clusters (4) */
 469:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Nxt_Free		492		/* FSI: Last allocated cluster (4) */
 470:Middlewares/Third_Party/FatFs/src/ff.c **** #define MBR_Table			446		/* MBR: Partition table offset (2) */
 471:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 472:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_55AA				510		/* Signature word (2) */
 473:Middlewares/Third_Party/FatFs/src/ff.c **** 
 474:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Name			0		/* Short file name (11) */
 475:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Attr			11		/* Attribute (1) */
 476:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (1) */
 477:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_CrtTimeTenth	13		/* Created time sub-second (1) */
 478:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtTime			14		/* Created time (2) */
 479:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtDate			16		/* Created date (2) */
 480:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (2) */
 481:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (2) */
 482:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_WrtTime			22		/* Modified time (2) */
 483:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_WrtDate			24		/* Modified date (2) */
 484:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (2) */
 485:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FileSize		28		/* File size (4) */
 486:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Ord			0		/* LFN entry order and LLE flag (1) */
 487:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Attr			11		/* LFN attribute (1) */
 488:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Type			12		/* LFN type (1) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 10


 489:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Chksum			13		/* Sum of corresponding SFN entry */
 490:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_FstClusLO		26		/* Must be zero (0) */
 491:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_DIRE				32		/* Size of a directory entry */
 492:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 493:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark at DIR_Name[0] */
 494:Middlewares/Third_Party/FatFs/src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 495:Middlewares/Third_Party/FatFs/src/ff.c **** 
 496:Middlewares/Third_Party/FatFs/src/ff.c **** 
 497:Middlewares/Third_Party/FatFs/src/ff.c **** 
 498:Middlewares/Third_Party/FatFs/src/ff.c **** 
 499:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------*/
 500:Middlewares/Third_Party/FatFs/src/ff.c **** /* Module private work area                                   */
 501:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------*/
 502:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remark: Uninitialized variables with static duration are
 503:Middlewares/Third_Party/FatFs/src/ff.c **** /  guaranteed zero/null at start-up. If not, either the linker
 504:Middlewares/Third_Party/FatFs/src/ff.c **** /  or start-up routine being used is out of ANSI-C standard.
 505:Middlewares/Third_Party/FatFs/src/ff.c **** */
 506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 507:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 9
 508:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _VOLUMES setting
 509:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 510:Middlewares/Third_Party/FatFs/src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 511:Middlewares/Third_Party/FatFs/src/ff.c **** static WORD Fsid;				/* File system mount ID */
 512:Middlewares/Third_Party/FatFs/src/ff.c **** 
 513:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
 514:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE CurrVol;			/* Current drive */
 515:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 518:Middlewares/Third_Party/FatFs/src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 519:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 520:Middlewares/Third_Party/FatFs/src/ff.c **** 
 521:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 0			/* Non LFN feature */
 522:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 523:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		(dobj).fn = sfn
 524:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 525:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 526:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 527:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _MAX_LFN setting
 528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 529:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1			/* LFN feature with static working buffer */
 530:Middlewares/Third_Party/FatFs/src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];
 531:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 532:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
 533:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 534:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
 535:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR lbuf[_MAX_LFN + 1]
 536:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
 537:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 538:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
 539:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR *lfn
 540:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); if (!lfn) LEAVE_FF((dobj).fs, FR_N
 541:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()			ff_memfree(lfn)
 542:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 543:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _USE_LFN setting
 544:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 545:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 11


 546:Middlewares/Third_Party/FatFs/src/ff.c **** 
 547:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 548:Middlewares/Third_Party/FatFs/src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
 549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 550:Middlewares/Third_Party/FatFs/src/ff.c **** 
 551:Middlewares/Third_Party/FatFs/src/ff.c **** 
 552:Middlewares/Third_Party/FatFs/src/ff.c **** 
 553:Middlewares/Third_Party/FatFs/src/ff.c **** 
 554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/src/ff.c **** 
 556:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 557:Middlewares/Third_Party/FatFs/src/ff.c **** 
 558:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Functions
 559:Middlewares/Third_Party/FatFs/src/ff.c **** 
 560:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 561:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (FATFS* fs, DWORD clst);
 562:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (FATFS* fs,	DWORD clst);
 563:Middlewares/Third_Party/FatFs/src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 565:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (FATFS* fs,	DWORD clst,	DWORD val);
 566:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 567:Middlewares/Third_Party/FatFs/src/ff.c **** 
 568:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 569:Middlewares/Third_Party/FatFs/src/ff.c **** static void gen_numname (BYTE* dst, const BYTE* src, const WCHAR* lfn, UINT seq);
 570:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_USE_LFN */
 571:Middlewares/Third_Party/FatFs/src/ff.c **** 
 572:Middlewares/Third_Party/FatFs/src/ff.c **** 
 573:Middlewares/Third_Party/FatFs/src/ff.c **** 
 574:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 575:Middlewares/Third_Party/FatFs/src/ff.c **** /* String functions                                                      */
 576:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 577:Middlewares/Third_Party/FatFs/src/ff.c **** 
 578:Middlewares/Third_Party/FatFs/src/ff.c **** /* Copy memory to memory */
 579:Middlewares/Third_Party/FatFs/src/ff.c **** static
 580:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
  27              		.loc 1 580 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 581:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 582:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 583:Middlewares/Third_Party/FatFs/src/ff.c **** 
 584:Middlewares/Third_Party/FatFs/src/ff.c **** #if _WORD_ACCESS == 1
 585:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt >= sizeof (int)) {
 586:Middlewares/Third_Party/FatFs/src/ff.c **** 		*(int*)d = *(int*)s;
 587:Middlewares/Third_Party/FatFs/src/ff.c **** 		d += sizeof (int); s += sizeof (int);
 588:Middlewares/Third_Party/FatFs/src/ff.c **** 		cnt -= sizeof (int);
 589:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt--)
  33              		.loc 1 591 0
  34 0000 04E0     		b	.L2
  35              	.LVL1:
  36              	.L3:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 12


  37              		.loc 1 592 0
  38 0002 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
  39 0004 0270     		strb	r2, [r0]
  40 0006 0131     		adds	r1, r1, #1
  41              	.LVL2:
  42 0008 0130     		adds	r0, r0, #1
  43              	.LVL3:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
  44              		.loc 1 591 0
  45 000a 1A46     		mov	r2, r3
  46              	.LVL4:
  47              	.L2:
  48 000c 531E     		subs	r3, r2, #1
  49              	.LVL5:
  50 000e 002A     		cmp	r2, #0
  51 0010 F7D1     		bne	.L3
 593:Middlewares/Third_Party/FatFs/src/ff.c **** }
  52              		.loc 1 593 0
  53 0012 7047     		bx	lr
  54              		.cfi_endproc
  55              	.LFE129:
  57              		.section	.text.mem_set,"ax",%progbits
  58              		.align	1
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu fpv4-sp-d16
  64              	mem_set:
  65              	.LFB130:
 594:Middlewares/Third_Party/FatFs/src/ff.c **** 
 595:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill memory */
 596:Middlewares/Third_Party/FatFs/src/ff.c **** static
 597:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
  66              		.loc 1 597 0
  67              		.cfi_startproc
  68              		@ args = 0, pretend = 0, frame = 0
  69              		@ frame_needed = 0, uses_anonymous_args = 0
  70              		@ link register save eliminated.
  71              	.LVL6:
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 599:Middlewares/Third_Party/FatFs/src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt--)
  72              		.loc 1 600 0
  73 0000 02E0     		b	.L5
  74              	.LVL7:
  75              	.L6:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
  76              		.loc 1 601 0
  77 0002 0170     		strb	r1, [r0]
  78 0004 0130     		adds	r0, r0, #1
  79              	.LVL8:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
  80              		.loc 1 600 0
  81 0006 1A46     		mov	r2, r3
  82              	.LVL9:
  83              	.L5:
  84 0008 531E     		subs	r3, r2, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 13


  85              	.LVL10:
  86 000a 002A     		cmp	r2, #0
  87 000c F9D1     		bne	.L6
 602:Middlewares/Third_Party/FatFs/src/ff.c **** }
  88              		.loc 1 602 0
  89 000e 7047     		bx	lr
  90              		.cfi_endproc
  91              	.LFE130:
  93              		.section	.text.mem_cmp,"ax",%progbits
  94              		.align	1
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  98              		.fpu fpv4-sp-d16
 100              	mem_cmp:
 101              	.LFB131:
 603:Middlewares/Third_Party/FatFs/src/ff.c **** 
 604:Middlewares/Third_Party/FatFs/src/ff.c **** /* Compare memory to memory */
 605:Middlewares/Third_Party/FatFs/src/ff.c **** static
 606:Middlewares/Third_Party/FatFs/src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {
 102              		.loc 1 606 0
 103              		.cfi_startproc
 104              		@ args = 0, pretend = 0, frame = 0
 105              		@ frame_needed = 0, uses_anonymous_args = 0
 106              		@ link register save eliminated.
 107              	.LVL11:
 108 0000 70B4     		push	{r4, r5, r6}
 109              	.LCFI0:
 110              		.cfi_def_cfa_offset 12
 111              		.cfi_offset 4, -12
 112              		.cfi_offset 5, -8
 113              		.cfi_offset 6, -4
 114              	.LVL12:
 607:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 115              		.loc 1 607 0
 116 0002 0346     		mov	r3, r0
 608:Middlewares/Third_Party/FatFs/src/ff.c **** 	int r = 0;
 117              		.loc 1 608 0
 118 0004 0020     		movs	r0, #0
 119              	.LVL13:
 609:Middlewares/Third_Party/FatFs/src/ff.c **** 
 610:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 120              		.loc 1 610 0
 121 0006 01E0     		b	.L9
 122              	.LVL14:
 123              	.L10:
 124 0008 2946     		mov	r1, r5
 125 000a 3346     		mov	r3, r6
 126              	.LVL15:
 127              	.L9:
 128              		.loc 1 610 0 is_stmt 0 discriminator 2
 129 000c 541E     		subs	r4, r2, #1
 130              	.LVL16:
 131 000e 32B1     		cbz	r2, .L7
 132              		.loc 1 610 0 discriminator 1
 133 0010 5E1C     		adds	r6, r3, #1
 134              	.LVL17:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 14


 135 0012 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 136              	.LVL18:
 137 0014 4D1C     		adds	r5, r1, #1
 138              	.LVL19:
 139 0016 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 140              	.LVL20:
 141 0018 2246     		mov	r2, r4
 142 001a C01A     		subs	r0, r0, r3
 143              	.LVL21:
 144 001c F4D0     		beq	.L10
 145              	.LVL22:
 146              	.L7:
 611:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 612:Middlewares/Third_Party/FatFs/src/ff.c **** }
 147              		.loc 1 612 0 is_stmt 1
 148 001e 70BC     		pop	{r4, r5, r6}
 149              	.LCFI1:
 150              		.cfi_restore 6
 151              		.cfi_restore 5
 152              		.cfi_restore 4
 153              		.cfi_def_cfa_offset 0
 154              	.LVL23:
 155 0020 7047     		bx	lr
 156              		.cfi_endproc
 157              	.LFE131:
 159              		.section	.text.chk_chr,"ax",%progbits
 160              		.align	1
 161              		.syntax unified
 162              		.thumb
 163              		.thumb_func
 164              		.fpu fpv4-sp-d16
 166              	chk_chr:
 167              	.LFB132:
 613:Middlewares/Third_Party/FatFs/src/ff.c **** 
 614:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if chr is contained in the string */
 615:Middlewares/Third_Party/FatFs/src/ff.c **** static
 616:Middlewares/Third_Party/FatFs/src/ff.c **** int chk_chr (const char* str, int chr) {
 168              		.loc 1 616 0
 169              		.cfi_startproc
 170              		@ args = 0, pretend = 0, frame = 0
 171              		@ frame_needed = 0, uses_anonymous_args = 0
 172              		@ link register save eliminated.
 173              	.LVL24:
 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str && *str != chr) str++;
 174              		.loc 1 617 0
 175 0000 00E0     		b	.L13
 176              	.L15:
 177              		.loc 1 617 0 is_stmt 0 discriminator 3
 178 0002 0130     		adds	r0, r0, #1
 179              	.LVL25:
 180              	.L13:
 181              		.loc 1 617 0 discriminator 1
 182 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 183 0006 0BB1     		cbz	r3, .L14
 184              		.loc 1 617 0 discriminator 2
 185 0008 8B42     		cmp	r3, r1
 186 000a FAD1     		bne	.L15
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 15


 187              	.L14:
 618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 619:Middlewares/Third_Party/FatFs/src/ff.c **** }
 188              		.loc 1 619 0 is_stmt 1
 189 000c 1846     		mov	r0, r3
 190              	.LVL26:
 191 000e 7047     		bx	lr
 192              		.cfi_endproc
 193              	.LFE132:
 195              		.section	.text.chk_lock,"ax",%progbits
 196              		.align	1
 197              		.syntax unified
 198              		.thumb
 199              		.thumb_func
 200              		.fpu fpv4-sp-d16
 202              	chk_lock:
 203              	.LFB135:
 620:Middlewares/Third_Party/FatFs/src/ff.c **** 
 621:Middlewares/Third_Party/FatFs/src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/src/ff.c **** 
 623:Middlewares/Third_Party/FatFs/src/ff.c **** 
 624:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 625:Middlewares/Third_Party/FatFs/src/ff.c **** /* Request/Release grant to access the volume                            */
 626:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 627:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 628:Middlewares/Third_Party/FatFs/src/ff.c **** static
 629:Middlewares/Third_Party/FatFs/src/ff.c **** int lock_fs (
 630:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 631:Middlewares/Third_Party/FatFs/src/ff.c **** )
 632:Middlewares/Third_Party/FatFs/src/ff.c **** {
 633:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_req_grant(fs->sobj);
 634:Middlewares/Third_Party/FatFs/src/ff.c **** }
 635:Middlewares/Third_Party/FatFs/src/ff.c **** 
 636:Middlewares/Third_Party/FatFs/src/ff.c **** 
 637:Middlewares/Third_Party/FatFs/src/ff.c **** static
 638:Middlewares/Third_Party/FatFs/src/ff.c **** void unlock_fs (
 639:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 640:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res		/* Result code to be returned */
 641:Middlewares/Third_Party/FatFs/src/ff.c **** )
 642:Middlewares/Third_Party/FatFs/src/ff.c **** {
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs &&
 644:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_NOT_ENABLED &&
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_DRIVE &&
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_OBJECT &&
 647:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_TIMEOUT) {
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 649:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 650:Middlewares/Third_Party/FatFs/src/ff.c **** }
 651:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 652:Middlewares/Third_Party/FatFs/src/ff.c **** 
 653:Middlewares/Third_Party/FatFs/src/ff.c **** 
 654:Middlewares/Third_Party/FatFs/src/ff.c **** 
 655:Middlewares/Third_Party/FatFs/src/ff.c **** 
 656:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 657:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock control functions                                           */
 658:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 659:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 16


 660:Middlewares/Third_Party/FatFs/src/ff.c **** 
 661:Middlewares/Third_Party/FatFs/src/ff.c **** static
 662:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 663:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 664:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 665:Middlewares/Third_Party/FatFs/src/ff.c **** )
 666:Middlewares/Third_Party/FatFs/src/ff.c **** {
 204              		.loc 1 666 0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 0
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208              		@ link register save eliminated.
 209              	.LVL27:
 210 0000 30B4     		push	{r4, r5}
 211              	.LCFI2:
 212              		.cfi_def_cfa_offset 8
 213              		.cfi_offset 4, -8
 214              		.cfi_offset 5, -4
 215              	.LVL28:
 667:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, be;
 668:Middlewares/Third_Party/FatFs/src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Search file semaphore table */
 670:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 216              		.loc 1 670 0
 217 0002 0025     		movs	r5, #0
 218 0004 2B46     		mov	r3, r5
 219 0006 01E0     		b	.L17
 220              	.LVL29:
 221              	.L23:
 671:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->sclust &&
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].idx == dp->index) break;
 675:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 			be = 1;
 222              		.loc 1 676 0
 223 0008 0125     		movs	r5, #1
 224              	.LVL30:
 225              	.L18:
 670:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 226              		.loc 1 670 0 discriminator 2
 227 000a 0133     		adds	r3, r3, #1
 228              	.LVL31:
 229              	.L17:
 670:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 230              		.loc 1 670 0 is_stmt 0 discriminator 1
 231 000c 012B     		cmp	r3, #1
 232 000e 1ED8     		bhi	.L19
 671:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 233              		.loc 1 671 0 is_stmt 1
 234 0010 03EB4304 		add	r4, r3, r3, lsl #1
 235 0014 A200     		lsls	r2, r4, #2
 236 0016 1C4C     		ldr	r4, .L33
 237 0018 A258     		ldr	r2, [r4, r2]
 238 001a 002A     		cmp	r2, #0
 239 001c F4D0     		beq	.L23
 672:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->sclust &&
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 17


 240              		.loc 1 672 0
 241 001e D0F80042 		ldr	r4, [r0, #512]
 242 0022 A242     		cmp	r2, r4
 243 0024 F1D1     		bne	.L18
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].idx == dp->index) break;
 244              		.loc 1 673 0 discriminator 1
 245 0026 03EB4302 		add	r2, r3, r3, lsl #1
 246 002a 9400     		lsls	r4, r2, #2
 247 002c 164A     		ldr	r2, .L33
 248 002e 2244     		add	r2, r2, r4
 249 0030 5468     		ldr	r4, [r2, #4]
 250 0032 D0F80822 		ldr	r2, [r0, #520]
 672:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->sclust &&
 251              		.loc 1 672 0 discriminator 1
 252 0036 9442     		cmp	r4, r2
 253 0038 E7D1     		bne	.L18
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 254              		.loc 1 674 0
 255 003a 03EB4302 		add	r2, r3, r3, lsl #1
 256 003e 9400     		lsls	r4, r2, #2
 257 0040 114A     		ldr	r2, .L33
 258 0042 2244     		add	r2, r2, r4
 259 0044 1489     		ldrh	r4, [r2, #8]
 260 0046 B0F80622 		ldrh	r2, [r0, #518]
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].idx == dp->index) break;
 261              		.loc 1 673 0
 262 004a 9442     		cmp	r4, r2
 263 004c DDD1     		bne	.L18
 264              	.L19:
 677:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 678:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 679:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK)	/* The object is not opened */
 265              		.loc 1 679 0
 266 004e 022B     		cmp	r3, #2
 267 0050 03D0     		beq	.L29
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 681:Middlewares/Third_Party/FatFs/src/ff.c **** 
 682:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 683:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 268              		.loc 1 683 0
 269 0052 49B1     		cbz	r1, .L30
 270 0054 1020     		movs	r0, #16
 271              	.LVL32:
 272              	.L22:
 684:Middlewares/Third_Party/FatFs/src/ff.c **** }
 273              		.loc 1 684 0
 274 0056 30BC     		pop	{r4, r5}
 275              	.LCFI3:
 276              		.cfi_remember_state
 277              		.cfi_restore 5
 278              		.cfi_restore 4
 279              		.cfi_def_cfa_offset 0
 280              	.LVL33:
 281 0058 7047     		bx	lr
 282              	.LVL34:
 283              	.L29:
 284              	.LCFI4:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 18


 285              		.cfi_restore_state
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 286              		.loc 1 680 0
 287 005a 95B9     		cbnz	r5, .L24
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 288              		.loc 1 680 0 is_stmt 0 discriminator 2
 289 005c 0229     		cmp	r1, #2
 290 005e 01D0     		beq	.L31
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 291              		.loc 1 680 0
 292 0060 1220     		movs	r0, #18
 293              	.LVL35:
 294 0062 F8E7     		b	.L22
 295              	.LVL36:
 296              	.L31:
 297 0064 0020     		movs	r0, #0
 298              	.LVL37:
 299 0066 F6E7     		b	.L22
 300              	.LVL38:
 301              	.L30:
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
 302              		.loc 1 683 0 is_stmt 1 discriminator 2
 303 0068 03EB4303 		add	r3, r3, r3, lsl #1
 304              	.LVL39:
 305 006c 9A00     		lsls	r2, r3, #2
 306 006e 064B     		ldr	r3, .L33
 307 0070 1344     		add	r3, r3, r2
 308 0072 5B89     		ldrh	r3, [r3, #10]
 309 0074 B3F5807F 		cmp	r3, #256
 310 0078 01D0     		beq	.L32
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
 311              		.loc 1 683 0 is_stmt 0
 312 007a 0020     		movs	r0, #0
 313              	.LVL40:
 314 007c EBE7     		b	.L22
 315              	.LVL41:
 316              	.L32:
 317 007e 1020     		movs	r0, #16
 318              	.LVL42:
 319 0080 E9E7     		b	.L22
 320              	.LVL43:
 321              	.L24:
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 322              		.loc 1 680 0 is_stmt 1
 323 0082 0020     		movs	r0, #0
 324              	.LVL44:
 325 0084 E7E7     		b	.L22
 326              	.L34:
 327 0086 00BF     		.align	2
 328              	.L33:
 329 0088 00000000 		.word	.LANCHOR0
 330              		.cfi_endproc
 331              	.LFE135:
 333              		.section	.text.enq_lock,"ax",%progbits
 334              		.align	1
 335              		.syntax unified
 336              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 19


 337              		.thumb_func
 338              		.fpu fpv4-sp-d16
 340              	enq_lock:
 341              	.LFB136:
 685:Middlewares/Third_Party/FatFs/src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/src/ff.c **** static
 688:Middlewares/Third_Party/FatFs/src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 689:Middlewares/Third_Party/FatFs/src/ff.c **** {
 342              		.loc 1 689 0
 343              		.cfi_startproc
 344              		@ args = 0, pretend = 0, frame = 0
 345              		@ frame_needed = 0, uses_anonymous_args = 0
 346              		@ link register save eliminated.
 347              	.LVL45:
 690:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 691:Middlewares/Third_Party/FatFs/src/ff.c **** 
 692:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 348              		.loc 1 692 0
 349 0000 0020     		movs	r0, #0
 350 0002 00E0     		b	.L36
 351              	.LVL46:
 352              	.L38:
 353              		.loc 1 692 0 is_stmt 0 discriminator 4
 354 0004 0130     		adds	r0, r0, #1
 355              	.LVL47:
 356              	.L36:
 357              		.loc 1 692 0 discriminator 1
 358 0006 0128     		cmp	r0, #1
 359 0008 06D8     		bhi	.L37
 360              		.loc 1 692 0 discriminator 3
 361 000a 00EB4002 		add	r2, r0, r0, lsl #1
 362 000e 9300     		lsls	r3, r2, #2
 363 0010 034A     		ldr	r2, .L39
 364 0012 D358     		ldr	r3, [r2, r3]
 365 0014 002B     		cmp	r3, #0
 366 0016 F5D1     		bne	.L38
 367              	.L37:
 693:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 694:Middlewares/Third_Party/FatFs/src/ff.c **** }
 368              		.loc 1 694 0 is_stmt 1
 369 0018 0238     		subs	r0, r0, #2
 370              	.LVL48:
 371 001a 18BF     		it	ne
 372 001c 0120     		movne	r0, #1
 373              	.LVL49:
 374 001e 7047     		bx	lr
 375              	.L40:
 376              		.align	2
 377              	.L39:
 378 0020 00000000 		.word	.LANCHOR0
 379              		.cfi_endproc
 380              	.LFE136:
 382              		.section	.text.inc_lock,"ax",%progbits
 383              		.align	1
 384              		.syntax unified
 385              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 20


 386              		.thumb_func
 387              		.fpu fpv4-sp-d16
 389              	inc_lock:
 390              	.LFB137:
 695:Middlewares/Third_Party/FatFs/src/ff.c **** 
 696:Middlewares/Third_Party/FatFs/src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/src/ff.c **** static
 698:Middlewares/Third_Party/FatFs/src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 699:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 700:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 701:Middlewares/Third_Party/FatFs/src/ff.c **** )
 702:Middlewares/Third_Party/FatFs/src/ff.c **** {
 391              		.loc 1 702 0
 392              		.cfi_startproc
 393              		@ args = 0, pretend = 0, frame = 0
 394              		@ frame_needed = 0, uses_anonymous_args = 0
 395              		@ link register save eliminated.
 396              	.LVL50:
 397 0000 70B4     		push	{r4, r5, r6}
 398              	.LCFI5:
 399              		.cfi_def_cfa_offset 12
 400              		.cfi_offset 4, -12
 401              		.cfi_offset 5, -8
 402              		.cfi_offset 6, -4
 403              	.LVL51:
 703:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 704:Middlewares/Third_Party/FatFs/src/ff.c **** 
 705:Middlewares/Third_Party/FatFs/src/ff.c **** 
 706:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 404              		.loc 1 706 0
 405 0002 0023     		movs	r3, #0
 406 0004 00E0     		b	.L42
 407              	.LVL52:
 408              	.L43:
 409              		.loc 1 706 0 is_stmt 0 discriminator 2
 410 0006 0133     		adds	r3, r3, #1
 411              	.LVL53:
 412              	.L42:
 413              		.loc 1 706 0 discriminator 1
 414 0008 012B     		cmp	r3, #1
 415 000a 1CD8     		bhi	.L44
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->fs &&
 416              		.loc 1 707 0 is_stmt 1
 417 000c 03EB4304 		add	r4, r3, r3, lsl #1
 418 0010 A200     		lsls	r2, r4, #2
 419 0012 2E4C     		ldr	r4, .L59
 420 0014 A458     		ldr	r4, [r4, r2]
 421 0016 D0F80022 		ldr	r2, [r0, #512]
 422 001a 9442     		cmp	r4, r2
 423 001c F3D1     		bne	.L43
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->sclust &&
 424              		.loc 1 708 0 discriminator 1
 425 001e 03EB4302 		add	r2, r3, r3, lsl #1
 426 0022 9400     		lsls	r4, r2, #2
 427 0024 294A     		ldr	r2, .L59
 428 0026 2244     		add	r2, r2, r4
 429 0028 5468     		ldr	r4, [r2, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 21


 430 002a D0F80822 		ldr	r2, [r0, #520]
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->fs &&
 431              		.loc 1 707 0 discriminator 1
 432 002e 9442     		cmp	r4, r2
 433 0030 E9D1     		bne	.L43
 709:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].idx == dp->index) break;
 434              		.loc 1 709 0
 435 0032 03EB4302 		add	r2, r3, r3, lsl #1
 436 0036 9400     		lsls	r4, r2, #2
 437 0038 244A     		ldr	r2, .L59
 438 003a 2244     		add	r2, r2, r4
 439 003c 1489     		ldrh	r4, [r2, #8]
 440 003e B0F80622 		ldrh	r2, [r0, #518]
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->sclust &&
 441              		.loc 1 708 0
 442 0042 9442     		cmp	r4, r2
 443 0044 DFD1     		bne	.L43
 444              	.L44:
 710:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 711:Middlewares/Third_Party/FatFs/src/ff.c **** 
 712:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 445              		.loc 1 712 0
 446 0046 022B     		cmp	r3, #2
 447 0048 37D0     		beq	.L58
 448              	.LVL54:
 449              	.L47:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 714:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 715:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->fs;
 716:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->sclust;
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].idx = dp->index;
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 719:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 450              		.loc 1 721 0
 451 004a 39B1     		cbz	r1, .L51
 452              		.loc 1 721 0 is_stmt 0 discriminator 1
 453 004c 03EB4302 		add	r2, r3, r3, lsl #1
 454 0050 9000     		lsls	r0, r2, #2
 455 0052 1E4A     		ldr	r2, .L59
 456 0054 0244     		add	r2, r2, r0
 457 0056 5289     		ldrh	r2, [r2, #10]
 458 0058 002A     		cmp	r2, #0
 459 005a 35D1     		bne	.L55
 460              	.L51:
 722:Middlewares/Third_Party/FatFs/src/ff.c **** 
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 461              		.loc 1 723 0 is_stmt 1
 462 005c 79BB     		cbnz	r1, .L56
 463              		.loc 1 723 0 is_stmt 0 discriminator 1
 464 005e 03EB4302 		add	r2, r3, r3, lsl #1
 465 0062 9100     		lsls	r1, r2, #2
 466              	.LVL55:
 467 0064 194A     		ldr	r2, .L59
 468 0066 0A44     		add	r2, r2, r1
 469 0068 5189     		ldrh	r1, [r2, #10]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 22


 470 006a 0131     		adds	r1, r1, #1
 471 006c 89B2     		uxth	r1, r1
 472              	.L52:
 473              		.loc 1 723 0 discriminator 4
 474 006e 03EB4302 		add	r2, r3, r3, lsl #1
 475 0072 9000     		lsls	r0, r2, #2
 476 0074 154A     		ldr	r2, .L59
 477 0076 0244     		add	r2, r2, r0
 478 0078 5181     		strh	r1, [r2, #10]	@ movhi
 724:Middlewares/Third_Party/FatFs/src/ff.c **** 
 725:Middlewares/Third_Party/FatFs/src/ff.c **** 	return i + 1;
 479              		.loc 1 725 0 is_stmt 1 discriminator 4
 480 007a 581C     		adds	r0, r3, #1
 481              	.L41:
 726:Middlewares/Third_Party/FatFs/src/ff.c **** }
 482              		.loc 1 726 0
 483 007c 70BC     		pop	{r4, r5, r6}
 484              	.LCFI6:
 485              		.cfi_remember_state
 486              		.cfi_restore 6
 487              		.cfi_restore 5
 488              		.cfi_restore 4
 489              		.cfi_def_cfa_offset 0
 490 007e 7047     		bx	lr
 491              	.LVL56:
 492              	.L49:
 493              	.LCFI7:
 494              		.cfi_restore_state
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 495              		.loc 1 713 0 discriminator 4
 496 0080 0133     		adds	r3, r3, #1
 497              	.LVL57:
 498              	.L46:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 499              		.loc 1 713 0 is_stmt 0 discriminator 1
 500 0082 012B     		cmp	r3, #1
 501 0084 06D8     		bhi	.L48
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 502              		.loc 1 713 0 discriminator 3
 503 0086 03EB4304 		add	r4, r3, r3, lsl #1
 504 008a A200     		lsls	r2, r4, #2
 505 008c 0F4C     		ldr	r4, .L59
 506 008e A258     		ldr	r2, [r4, r2]
 507 0090 002A     		cmp	r2, #0
 508 0092 F5D1     		bne	.L49
 509              	.L48:
 714:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->fs;
 510              		.loc 1 714 0 is_stmt 1
 511 0094 022B     		cmp	r3, #2
 512 0096 15D0     		beq	.L54
 715:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->sclust;
 513              		.loc 1 715 0
 514 0098 D0F80052 		ldr	r5, [r0, #512]
 515 009c 0B4E     		ldr	r6, .L59
 516 009e 5A00     		lsls	r2, r3, #1
 517 00a0 1A44     		add	r2, r2, r3
 518 00a2 9400     		lsls	r4, r2, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 23


 519 00a4 3219     		adds	r2, r6, r4
 520 00a6 3551     		str	r5, [r6, r4]
 716:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].idx = dp->index;
 521              		.loc 1 716 0
 522 00a8 D0F80842 		ldr	r4, [r0, #520]
 523 00ac 5460     		str	r4, [r2, #4]
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 524              		.loc 1 717 0
 525 00ae B0F80602 		ldrh	r0, [r0, #518]
 526              	.LVL58:
 527 00b2 1081     		strh	r0, [r2, #8]	@ movhi
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 528              		.loc 1 718 0
 529 00b4 0020     		movs	r0, #0
 530 00b6 5081     		strh	r0, [r2, #10]	@ movhi
 531 00b8 C7E7     		b	.L47
 532              	.LVL59:
 533              	.L58:
 534 00ba 0023     		movs	r3, #0
 535              	.LVL60:
 536 00bc E1E7     		b	.L46
 537              	.LVL61:
 538              	.L56:
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 539              		.loc 1 723 0
 540 00be 4FF48071 		mov	r1, #256
 541              	.LVL62:
 542 00c2 D4E7     		b	.L52
 543              	.LVL63:
 544              	.L54:
 714:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->fs;
 545              		.loc 1 714 0
 546 00c4 0020     		movs	r0, #0
 547              	.LVL64:
 548 00c6 D9E7     		b	.L41
 549              	.L55:
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 
 550              		.loc 1 721 0
 551 00c8 0020     		movs	r0, #0
 552 00ca D7E7     		b	.L41
 553              	.L60:
 554              		.align	2
 555              	.L59:
 556 00cc 00000000 		.word	.LANCHOR0
 557              		.cfi_endproc
 558              	.LFE137:
 560              		.section	.text.dec_lock,"ax",%progbits
 561              		.align	1
 562              		.syntax unified
 563              		.thumb
 564              		.thumb_func
 565              		.fpu fpv4-sp-d16
 567              	dec_lock:
 568              	.LFB138:
 727:Middlewares/Third_Party/FatFs/src/ff.c **** 
 728:Middlewares/Third_Party/FatFs/src/ff.c **** 
 729:Middlewares/Third_Party/FatFs/src/ff.c **** static
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 24


 730:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 731:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 732:Middlewares/Third_Party/FatFs/src/ff.c **** )
 733:Middlewares/Third_Party/FatFs/src/ff.c **** {
 569              		.loc 1 733 0
 570              		.cfi_startproc
 571              		@ args = 0, pretend = 0, frame = 0
 572              		@ frame_needed = 0, uses_anonymous_args = 0
 573              		@ link register save eliminated.
 574              	.LVL65:
 734:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD n;
 735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/src/ff.c **** 
 738:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 575              		.loc 1 738 0
 576 0000 0138     		subs	r0, r0, #1
 577              	.LVL66:
 578 0002 0128     		cmp	r0, #1
 579 0004 01D9     		bls	.L68
 739:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 744:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 745:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 580              		.loc 1 746 0
 581 0006 0220     		movs	r0, #2
 582              	.LVL67:
 583 0008 7047     		bx	lr
 584              	.LVL68:
 585              	.L68:
 739:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 586              		.loc 1 739 0
 587 000a 00EB4003 		add	r3, r0, r0, lsl #1
 588 000e 9A00     		lsls	r2, r3, #2
 589 0010 0B4B     		ldr	r3, .L70
 590 0012 1344     		add	r3, r3, r2
 591 0014 5B89     		ldrh	r3, [r3, #10]
 592              	.LVL69:
 740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 593              		.loc 1 740 0
 594 0016 B3F5807F 		cmp	r3, #256
 595 001a 0DD0     		beq	.L69
 596              	.LVL70:
 597              	.L63:
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 598              		.loc 1 741 0
 599 001c 0BB1     		cbz	r3, .L64
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 600              		.loc 1 741 0 is_stmt 0 discriminator 1
 601 001e 013B     		subs	r3, r3, #1
 602              	.LVL71:
 603 0020 9BB2     		uxth	r3, r3
 604              	.LVL72:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 25


 605              	.L64:
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 606              		.loc 1 742 0 is_stmt 1
 607 0022 00EB4002 		add	r2, r0, r0, lsl #1
 608 0026 9100     		lsls	r1, r2, #2
 609 0028 054A     		ldr	r2, .L70
 610 002a 0A44     		add	r2, r2, r1
 611 002c 5381     		strh	r3, [r2, #10]	@ movhi
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 612              		.loc 1 743 0
 613 002e 2BB9     		cbnz	r3, .L67
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 614              		.loc 1 743 0 is_stmt 0 discriminator 1
 615 0030 0020     		movs	r0, #0
 616              	.LVL73:
 617 0032 034A     		ldr	r2, .L70
 618 0034 5050     		str	r0, [r2, r1]
 619 0036 7047     		bx	lr
 620              	.LVL74:
 621              	.L69:
 740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 622              		.loc 1 740 0 is_stmt 1
 623 0038 0023     		movs	r3, #0
 624              	.LVL75:
 625 003a EFE7     		b	.L63
 626              	.LVL76:
 627              	.L67:
 744:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 628              		.loc 1 744 0
 629 003c 0020     		movs	r0, #0
 630              	.LVL77:
 747:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 749:Middlewares/Third_Party/FatFs/src/ff.c **** }
 631              		.loc 1 749 0
 632 003e 7047     		bx	lr
 633              	.L71:
 634              		.align	2
 635              	.L70:
 636 0040 00000000 		.word	.LANCHOR0
 637              		.cfi_endproc
 638              	.LFE138:
 640              		.section	.text.clear_lock,"ax",%progbits
 641              		.align	1
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
 645              		.fpu fpv4-sp-d16
 647              	clear_lock:
 648              	.LFB139:
 750:Middlewares/Third_Party/FatFs/src/ff.c **** 
 751:Middlewares/Third_Party/FatFs/src/ff.c **** 
 752:Middlewares/Third_Party/FatFs/src/ff.c **** static
 753:Middlewares/Third_Party/FatFs/src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 754:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs
 755:Middlewares/Third_Party/FatFs/src/ff.c **** )
 756:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 26


 649              		.loc 1 756 0
 650              		.cfi_startproc
 651              		@ args = 0, pretend = 0, frame = 0
 652              		@ frame_needed = 0, uses_anonymous_args = 0
 653              		@ link register save eliminated.
 654              	.LVL78:
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 758:Middlewares/Third_Party/FatFs/src/ff.c **** 
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 655              		.loc 1 759 0
 656 0000 0023     		movs	r3, #0
 657              	.LVL79:
 658 0002 012B     		cmp	r3, #1
 659 0004 14D8     		bhi	.L79
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 660              		.loc 1 756 0
 661 0006 10B4     		push	{r4}
 662              	.LCFI8:
 663              		.cfi_def_cfa_offset 4
 664              		.cfi_offset 4, -4
 665              	.L75:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 666              		.loc 1 760 0
 667 0008 03EB4301 		add	r1, r3, r3, lsl #1
 668 000c 8A00     		lsls	r2, r1, #2
 669 000e 0949     		ldr	r1, .L81
 670 0010 8A58     		ldr	r2, [r1, r2]
 671 0012 8242     		cmp	r2, r0
 672 0014 05D0     		beq	.L80
 673              	.L74:
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 674              		.loc 1 759 0 discriminator 2
 675 0016 0133     		adds	r3, r3, #1
 676              	.LVL80:
 677 0018 012B     		cmp	r3, #1
 678 001a F5D9     		bls	.L75
 761:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 762:Middlewares/Third_Party/FatFs/src/ff.c **** }
 679              		.loc 1 762 0
 680 001c 5DF8044B 		ldr	r4, [sp], #4
 681              	.LCFI9:
 682              		.cfi_remember_state
 683              		.cfi_restore 4
 684              		.cfi_def_cfa_offset 0
 685 0020 7047     		bx	lr
 686              	.L80:
 687              	.LCFI10:
 688              		.cfi_restore_state
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 689              		.loc 1 760 0 discriminator 1
 690 0022 03EB4301 		add	r1, r3, r3, lsl #1
 691 0026 8A00     		lsls	r2, r1, #2
 692 0028 0024     		movs	r4, #0
 693 002a 0249     		ldr	r1, .L81
 694 002c 8C50     		str	r4, [r1, r2]
 695 002e F2E7     		b	.L74
 696              	.L79:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 27


 697              	.LCFI11:
 698              		.cfi_def_cfa_offset 0
 699              		.cfi_restore 4
 700 0030 7047     		bx	lr
 701              	.L82:
 702 0032 00BF     		.align	2
 703              	.L81:
 704 0034 00000000 		.word	.LANCHOR0
 705              		.cfi_endproc
 706              	.LFE139:
 708              		.section	.text.clmt_clust,"ax",%progbits
 709              		.align	1
 710              		.syntax unified
 711              		.thumb
 712              		.thumb_func
 713              		.fpu fpv4-sp-d16
 715              	clmt_clust:
 716              	.LFB148:
 763:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 764:Middlewares/Third_Party/FatFs/src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/src/ff.c **** 
 766:Middlewares/Third_Party/FatFs/src/ff.c **** 
 767:Middlewares/Third_Party/FatFs/src/ff.c **** 
 768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/src/ff.c **** /* Move/Flush disk access window in the file system object               */
 770:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 771:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 772:Middlewares/Third_Party/FatFs/src/ff.c **** static
 773:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_window (
 774:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 775:Middlewares/Third_Party/FatFs/src/ff.c **** )
 776:Middlewares/Third_Party/FatFs/src/ff.c **** {
 777:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 778:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 786:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 0;
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 792:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 793:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 794:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 795:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 796:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 797:Middlewares/Third_Party/FatFs/src/ff.c **** }
 798:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 799:Middlewares/Third_Party/FatFs/src/ff.c **** 
 800:Middlewares/Third_Party/FatFs/src/ff.c **** 
 801:Middlewares/Third_Party/FatFs/src/ff.c **** static
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 28


 802:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT move_window (
 803:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 804:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sector	/* Sector number to make appearance in the fs->win[].d8 */
 805:Middlewares/Third_Party/FatFs/src/ff.c **** )
 806:Middlewares/Third_Party/FatFs/src/ff.c **** {
 807:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 808:Middlewares/Third_Party/FatFs/src/ff.c **** 
 809:Middlewares/Third_Party/FatFs/src/ff.c **** 
 810:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 811:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 812:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 813:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = sector;
 820:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 821:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 822:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 823:Middlewares/Third_Party/FatFs/src/ff.c **** }
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 
 828:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 829:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize file system and strage device                             */
 830:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 831:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 832:Middlewares/Third_Party/FatFs/src/ff.c **** static
 833:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
 834:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 835:Middlewares/Third_Party/FatFs/src/ff.c **** )
 836:Middlewares/Third_Party/FatFs/src/ff.c **** {
 837:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 838:Middlewares/Third_Party/FatFs/src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/src/ff.c **** 
 840:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = sync_window(fs);
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 842:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSINFO sector if needed */
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 844:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 845:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = fs->volbase + 1;
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 855:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 856:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 29


 859:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 860:Middlewares/Third_Party/FatFs/src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 862:Middlewares/Third_Party/FatFs/src/ff.c **** }
 863:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 864:Middlewares/Third_Party/FatFs/src/ff.c **** 
 865:Middlewares/Third_Party/FatFs/src/ff.c **** 
 866:Middlewares/Third_Party/FatFs/src/ff.c **** 
 867:Middlewares/Third_Party/FatFs/src/ff.c **** 
 868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 869:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get sector# from cluster#                                             */
 870:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 871:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 872:Middlewares/Third_Party/FatFs/src/ff.c **** 
 873:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
 874:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 875:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 876:Middlewares/Third_Party/FatFs/src/ff.c **** )
 877:Middlewares/Third_Party/FatFs/src/ff.c **** {
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 880:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 881:Middlewares/Third_Party/FatFs/src/ff.c **** }
 882:Middlewares/Third_Party/FatFs/src/ff.c **** 
 883:Middlewares/Third_Party/FatFs/src/ff.c **** 
 884:Middlewares/Third_Party/FatFs/src/ff.c **** 
 885:Middlewares/Third_Party/FatFs/src/ff.c **** 
 886:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 887:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 888:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 889:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 890:Middlewares/Third_Party/FatFs/src/ff.c **** 
 891:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x0FFFFFFF:Cluster status */
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst	/* FAT index number (cluster number) to get the value */
 894:Middlewares/Third_Party/FatFs/src/ff.c **** )
 895:Middlewares/Third_Party/FatFs/src/ff.c **** {
 896:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 903:Middlewares/Third_Party/FatFs/src/ff.c **** 
 904:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
 906:Middlewares/Third_Party/FatFs/src/ff.c **** 
 907:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 908:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 911:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 915:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 30


 916:Middlewares/Third_Party/FatFs/src/ff.c **** 
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_WORD(p);
 921:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 922:Middlewares/Third_Party/FatFs/src/ff.c **** 
 923:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 928:Middlewares/Third_Party/FatFs/src/ff.c **** 
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = 1;	/* Internal error */
 931:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 932:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 934:Middlewares/Third_Party/FatFs/src/ff.c **** 	return val;
 935:Middlewares/Third_Party/FatFs/src/ff.c **** }
 936:Middlewares/Third_Party/FatFs/src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/src/ff.c **** 
 939:Middlewares/Third_Party/FatFs/src/ff.c **** 
 940:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 941:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Change value of a FAT entry                              */
 942:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 943:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 944:Middlewares/Third_Party/FatFs/src/ff.c **** 
 945:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 946:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* FAT index number (cluster number) to be changed */
 949:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val	/* New value to be set to the entry */
 950:Middlewares/Third_Party/FatFs/src/ff.c **** )
 951:Middlewares/Third_Party/FatFs/src/ff.c **** {
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 953:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 955:Middlewares/Third_Party/FatFs/src/ff.c **** 
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 962:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 31


 973:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 974:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 975:Middlewares/Third_Party/FatFs/src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 978:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 979:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 980:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(p, (WORD)val);
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 982:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 984:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 986:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 987:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(p, val);
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 991:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 992:Middlewares/Third_Party/FatFs/src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/src/ff.c **** 		default :
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INT_ERR;
 995:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 996:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 997:Middlewares/Third_Party/FatFs/src/ff.c **** 
 998:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 999:Middlewares/Third_Party/FatFs/src/ff.c **** }
1000:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1001:Middlewares/Third_Party/FatFs/src/ff.c **** 
1002:Middlewares/Third_Party/FatFs/src/ff.c **** 
1003:Middlewares/Third_Party/FatFs/src/ff.c **** 
1004:Middlewares/Third_Party/FatFs/src/ff.c **** 
1005:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1006:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1007:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1008:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1009:Middlewares/Third_Party/FatFs/src/ff.c **** static
1010:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT remove_chain (
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to remove a chain from */
1013:Middlewares/Third_Party/FatFs/src/ff.c **** )
1014:Middlewares/Third_Party/FatFs/src/ff.c **** {
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1016:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
1017:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1018:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD scl = clst, ecl = clst, rt[2];
1019:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1025:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 32


1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
1031:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clust++;
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
1036:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1037:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1038:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1039:Middlewares/Third_Party/FatFs/src/ff.c **** 				ecl = nxt;
1040:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* End of contiguous clusters */ 
1041:Middlewares/Third_Party/FatFs/src/ff.c **** 				rt[0] = clust2sect(fs, scl);					/* Start sector */
1042:Middlewares/Third_Party/FatFs/src/ff.c **** 				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1043:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Erase the block */
1044:Middlewares/Third_Party/FatFs/src/ff.c **** 				scl = ecl = nxt;
1045:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1046:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1047:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = nxt;	/* Next cluster */
1048:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1049:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1050:Middlewares/Third_Party/FatFs/src/ff.c **** 
1051:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1052:Middlewares/Third_Party/FatFs/src/ff.c **** }
1053:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1054:Middlewares/Third_Party/FatFs/src/ff.c **** 
1055:Middlewares/Third_Party/FatFs/src/ff.c **** 
1056:Middlewares/Third_Party/FatFs/src/ff.c **** 
1057:Middlewares/Third_Party/FatFs/src/ff.c **** 
1058:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1059:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Stretch or Create a cluster chain                      */
1060:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1061:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1062:Middlewares/Third_Party/FatFs/src/ff.c **** static
1063:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1064:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
1066:Middlewares/Third_Party/FatFs/src/ff.c **** )
1067:Middlewares/Third_Party/FatFs/src/ff.c **** {
1068:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
1069:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1070:Middlewares/Third_Party/FatFs/src/ff.c **** 
1071:Middlewares/Third_Party/FatFs/src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {		/* Create a new chain */
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
1075:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1076:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {					/* Stretch the current chain */
1077:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
1078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1080:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1081:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
1082:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1083:Middlewares/Third_Party/FatFs/src/ff.c **** 
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	ncl = scl;				/* Start cluster */
1085:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl++;							/* Next cluster */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 33


1087:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = 2;
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
1090:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(fs, ncl);			/* Get the cluster status */
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && clst != 0) {
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust--;
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
1107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ncl;		/* Return new cluster number or error code */
1113:Middlewares/Third_Party/FatFs/src/ff.c **** }
1114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1115:Middlewares/Third_Party/FatFs/src/ff.c **** 
1116:Middlewares/Third_Party/FatFs/src/ff.c **** 
1117:Middlewares/Third_Party/FatFs/src/ff.c **** 
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 
1119:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1120:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1121:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1122:Middlewares/Third_Party/FatFs/src/ff.c **** 
1123:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
1124:Middlewares/Third_Party/FatFs/src/ff.c **** static
1125:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1126:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1127:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* File offset to be converted to cluster# */
1128:Middlewares/Third_Party/FatFs/src/ff.c **** )
1129:Middlewares/Third_Party/FatFs/src/ff.c **** {
 717              		.loc 1 1129 0
 718              		.cfi_startproc
 719              		@ args = 0, pretend = 0, frame = 0
 720              		@ frame_needed = 0, uses_anonymous_args = 0
 721              		@ link register save eliminated.
 722              	.LVL81:
1130:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, ncl, *tbl;
1131:Middlewares/Third_Party/FatFs/src/ff.c **** 
1132:Middlewares/Third_Party/FatFs/src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
 723              		.loc 1 1133 0
 724 0000 D0F82432 		ldr	r3, [r0, #548]
 725 0004 0433     		adds	r3, r3, #4
 726              	.LVL82:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 34


1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
 727              		.loc 1 1134 0
 728 0006 490A     		lsrs	r1, r1, #9
 729              	.LVL83:
 730 0008 D0F80022 		ldr	r2, [r0, #512]
 731 000c 92F80222 		ldrb	r2, [r2, #514]	@ zero_extendqisi2
 732 0010 B1FBF2F1 		udiv	r1, r1, r2
 733              	.LVL84:
 734              	.L86:
1135:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
 735              		.loc 1 1136 0
 736 0014 1868     		ldr	r0, [r3]
 737              	.LVL85:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 738              		.loc 1 1137 0
 739 0016 30B1     		cbz	r0, .L83
1138:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 740              		.loc 1 1138 0
 741 0018 8142     		cmp	r1, r0
 742 001a 02D3     		bcc	.L85
1139:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 743              		.loc 1 1139 0
 744 001c 091A     		subs	r1, r1, r0
 745              	.LVL86:
 746 001e 0833     		adds	r3, r3, #8
 747              	.LVL87:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 748              		.loc 1 1136 0
 749 0020 F8E7     		b	.L86
 750              	.LVL88:
 751              	.L85:
1140:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1141:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
 752              		.loc 1 1141 0
 753 0022 5868     		ldr	r0, [r3, #4]
 754              	.LVL89:
 755 0024 0844     		add	r0, r0, r1
 756              	.L83:
1142:Middlewares/Third_Party/FatFs/src/ff.c **** }
 757              		.loc 1 1142 0
 758 0026 7047     		bx	lr
 759              		.cfi_endproc
 760              	.LFE148:
 762              		.section	.text.ld_clust,"ax",%progbits
 763              		.align	1
 764              		.syntax unified
 765              		.thumb
 766              		.thumb_func
 767              		.fpu fpv4-sp-d16
 769              	ld_clust:
 770              	.LFB152:
1143:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FASTSEEK */
1144:Middlewares/Third_Party/FatFs/src/ff.c **** 
1145:Middlewares/Third_Party/FatFs/src/ff.c **** 
1146:Middlewares/Third_Party/FatFs/src/ff.c **** 
1147:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 35


1148:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1149:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Set directory index                              */
1150:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1151:Middlewares/Third_Party/FatFs/src/ff.c **** 
1152:Middlewares/Third_Party/FatFs/src/ff.c **** static
1153:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_sdi (
1154:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1155:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT idx		/* Index of directory table */
1156:Middlewares/Third_Party/FatFs/src/ff.c **** )
1157:Middlewares/Third_Party/FatFs/src/ff.c **** {
1158:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
1159:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ic;
1160:Middlewares/Third_Party/FatFs/src/ff.c **** 
1161:Middlewares/Third_Party/FatFs/src/ff.c **** 
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->index = (WORD)idx;	/* Current index */
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
1168:Middlewares/Third_Party/FatFs/src/ff.c **** 
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INT_ERR;
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = dp->fs->dirbase;
1173:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1174:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {				/* Dynamic table (root-directory in FAT32 or sub-directory) */
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 		ic = SS(dp->fs) / SZ_DIRE * dp->fs->csize;	/* Entries per cluster */
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 			idx -= ic;
1182:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1183:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(dp->fs, clst);
1184:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->clust = clst;	/* Current cluster# */
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!sect) return FR_INT_ERR;
1187:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
1189:Middlewares/Third_Party/FatFs/src/ff.c **** 
1190:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1191:Middlewares/Third_Party/FatFs/src/ff.c **** }
1192:Middlewares/Third_Party/FatFs/src/ff.c **** 
1193:Middlewares/Third_Party/FatFs/src/ff.c **** 
1194:Middlewares/Third_Party/FatFs/src/ff.c **** 
1195:Middlewares/Third_Party/FatFs/src/ff.c **** 
1196:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1197:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Move directory table index next                  */
1198:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1199:Middlewares/Third_Party/FatFs/src/ff.c **** 
1200:Middlewares/Third_Party/FatFs/src/ff.c **** static
1201:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1202:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1203:Middlewares/Third_Party/FatFs/src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1204:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 36


1205:Middlewares/Third_Party/FatFs/src/ff.c **** {
1206:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst;
1207:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1208:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1209:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT c;
1210:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1211:Middlewares/Third_Party/FatFs/src/ff.c **** 
1212:Middlewares/Third_Party/FatFs/src/ff.c **** 
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = dp->index + 1;
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
1215:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
1216:Middlewares/Third_Party/FatFs/src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i % (SS(dp->fs) / SZ_DIRE))) {	/* Sector changed? */
1218:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;					/* Next sector */
1219:Middlewares/Third_Party/FatFs/src/ff.c **** 
1220:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->clust) {		/* Static table */
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
1222:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_NO_FILE;
1223:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1224:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {					/* Dynamic table */
1225:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (((i / (SS(dp->fs) / SZ_DIRE)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
1226:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1229:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
1230:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1231:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1236:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up stretched table */
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
1238:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
1241:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
1242:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
1243:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->winsect++;
1244:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1245:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->fs->winsect -= c;						/* Rewind window offset */
1246:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1247:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT (this is to suppress warni
1248:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_NO_FILE;							/* Report EOT */
1249:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1250:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1251:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->clust = clst;				/* Initialize data for new cluster */
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
1253:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1254:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1255:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1256:Middlewares/Third_Party/FatFs/src/ff.c **** 
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->index = (WORD)i;	/* Current index */
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
1259:Middlewares/Third_Party/FatFs/src/ff.c **** 
1260:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1261:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 37


1262:Middlewares/Third_Party/FatFs/src/ff.c **** 
1263:Middlewares/Third_Party/FatFs/src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1267:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Reserve directory entry                          */
1268:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1269:Middlewares/Third_Party/FatFs/src/ff.c **** 
1270:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1271:Middlewares/Third_Party/FatFs/src/ff.c **** static
1272:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_alloc (
1273:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Pointer to the directory object */
1274:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent	/* Number of contiguous entries to allocate (1-21) */
1275:Middlewares/Third_Party/FatFs/src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1279:Middlewares/Third_Party/FatFs/src/ff.c **** 
1280:Middlewares/Third_Party/FatFs/src/ff.c **** 
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);
1282:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1283:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
1284:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1285:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
1288:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1289:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
1294:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1297:Middlewares/Third_Party/FatFs/src/ff.c **** }
1298:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 
1303:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1304:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Load/Store start cluster number                  */
1305:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 
1307:Middlewares/Third_Party/FatFs/src/ff.c **** static
1308:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_clust (
1309:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1310:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir	/* Pointer to the directory entry */
1311:Middlewares/Third_Party/FatFs/src/ff.c **** )
1312:Middlewares/Third_Party/FatFs/src/ff.c **** {
 771              		.loc 1 1312 0
 772              		.cfi_startproc
 773              		@ args = 0, pretend = 0, frame = 0
 774              		@ frame_needed = 0, uses_anonymous_args = 0
 775              		@ link register save eliminated.
 776              	.LVL90:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 38


1313:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl;
1314:Middlewares/Third_Party/FatFs/src/ff.c **** 
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = LD_WORD(dir + DIR_FstClusLO);
 777              		.loc 1 1315 0
 778 0000 CA7E     		ldrb	r2, [r1, #27]	@ zero_extendqisi2
 779 0002 8B7E     		ldrb	r3, [r1, #26]	@ zero_extendqisi2
 780 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 781              	.LVL91:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 782              		.loc 1 1316 0
 783 0008 90F80022 		ldrb	r2, [r0, #512]	@ zero_extendqisi2
 784 000c 032A     		cmp	r2, #3
 785 000e 01D0     		beq	.L89
 786              	.LVL92:
 787              	.L87:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
1318:Middlewares/Third_Party/FatFs/src/ff.c **** 
1319:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl;
1320:Middlewares/Third_Party/FatFs/src/ff.c **** }
 788              		.loc 1 1320 0
 789 0010 1846     		mov	r0, r3
 790 0012 7047     		bx	lr
 791              	.LVL93:
 792              	.L89:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 793              		.loc 1 1317 0
 794 0014 487D     		ldrb	r0, [r1, #21]	@ zero_extendqisi2
 795              	.LVL94:
 796 0016 0A7D     		ldrb	r2, [r1, #20]	@ zero_extendqisi2
 797 0018 42EA0022 		orr	r2, r2, r0, lsl #8
 798 001c 43EA0243 		orr	r3, r3, r2, lsl #16
 799              	.LVL95:
1319:Middlewares/Third_Party/FatFs/src/ff.c **** }
 800              		.loc 1 1319 0
 801 0020 F6E7     		b	.L87
 802              		.cfi_endproc
 803              	.LFE152:
 805              		.section	.text.st_clust,"ax",%progbits
 806              		.align	1
 807              		.syntax unified
 808              		.thumb
 809              		.thumb_func
 810              		.fpu fpv4-sp-d16
 812              	st_clust:
 813              	.LFB153:
1321:Middlewares/Third_Party/FatFs/src/ff.c **** 
1322:Middlewares/Third_Party/FatFs/src/ff.c **** 
1323:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1324:Middlewares/Third_Party/FatFs/src/ff.c **** static
1325:Middlewares/Third_Party/FatFs/src/ff.c **** void st_clust (
1326:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,	/* Pointer to the directory entry */
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl	/* Value to be set */
1328:Middlewares/Third_Party/FatFs/src/ff.c **** )
1329:Middlewares/Third_Party/FatFs/src/ff.c **** {
 814              		.loc 1 1329 0
 815              		.cfi_startproc
 816              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 39


 817              		@ frame_needed = 0, uses_anonymous_args = 0
 818              		@ link register save eliminated.
 819              	.LVL96:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusLO, cl);
 820              		.loc 1 1330 0
 821 0000 8176     		strb	r1, [r0, #26]
 822 0002 C1F30723 		ubfx	r3, r1, #8, #8
 823 0006 C376     		strb	r3, [r0, #27]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 824              		.loc 1 1331 0
 825 0008 090C     		lsrs	r1, r1, #16
 826              	.LVL97:
 827 000a 0175     		strb	r1, [r0, #20]
 828 000c 090A     		lsrs	r1, r1, #8
 829 000e 4175     		strb	r1, [r0, #21]
 830 0010 7047     		bx	lr
 831              		.cfi_endproc
 832              	.LFE153:
 834              		.section	.text.get_fileinfo,"ax",%progbits
 835              		.align	1
 836              		.syntax unified
 837              		.thumb
 838              		.thumb_func
 839              		.fpu fpv4-sp-d16
 841              	get_fileinfo:
 842              	.LFB158:
1332:Middlewares/Third_Party/FatFs/src/ff.c **** }
1333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1334:Middlewares/Third_Party/FatFs/src/ff.c **** 
1335:Middlewares/Third_Party/FatFs/src/ff.c **** 
1336:Middlewares/Third_Party/FatFs/src/ff.c **** 
1337:Middlewares/Third_Party/FatFs/src/ff.c **** 
1338:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1339:Middlewares/Third_Party/FatFs/src/ff.c **** /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
1340:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1341:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1342:Middlewares/Third_Party/FatFs/src/ff.c **** static
1343:Middlewares/Third_Party/FatFs/src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1344:Middlewares/Third_Party/FatFs/src/ff.c **** 
1345:Middlewares/Third_Party/FatFs/src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/src/ff.c **** static
1347:Middlewares/Third_Party/FatFs/src/ff.c **** int cmp_lfn (			/* 1:Matched, 0:Not matched */
1348:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
1349:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
1350:Middlewares/Third_Party/FatFs/src/ff.c **** )
1351:Middlewares/Third_Party/FatFs/src/ff.c **** {
1352:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1353:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1354:Middlewares/Third_Party/FatFs/src/ff.c **** 
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Get offset in the LFN buffer */
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = 0; wc = 1;
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1359:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);	/* Pick an LFN character from the entry */
1360:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 40


1363:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;				/* Not matched */
1364:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1365:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;	/* Check filler */
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i])	/* Last segment matched but different length */
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
1371:Middlewares/Third_Party/FatFs/src/ff.c **** 
1372:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;						/* The part of LFN matched */
1373:Middlewares/Third_Party/FatFs/src/ff.c **** }
1374:Middlewares/Third_Party/FatFs/src/ff.c **** 
1375:Middlewares/Third_Party/FatFs/src/ff.c **** 
1376:Middlewares/Third_Party/FatFs/src/ff.c **** 
1377:Middlewares/Third_Party/FatFs/src/ff.c **** static
1378:Middlewares/Third_Party/FatFs/src/ff.c **** int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
1379:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
1380:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry */
1381:Middlewares/Third_Party/FatFs/src/ff.c **** )
1382:Middlewares/Third_Party/FatFs/src/ff.c **** {
1383:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1384:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1385:Middlewares/Third_Party/FatFs/src/ff.c **** 
1386:Middlewares/Third_Party/FatFs/src/ff.c **** 
1387:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1388:Middlewares/Third_Party/FatFs/src/ff.c **** 
1389:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = 0; wc = 1;
1390:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1391:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);		/* Pick an LFN character from the entry */
1392:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1393:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1394:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1395:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1396:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1397:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1398:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);						/* Read all character in the entry */
1399:Middlewares/Third_Party/FatFs/src/ff.c **** 
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;
1406:Middlewares/Third_Party/FatFs/src/ff.c **** }
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 
1409:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1410:Middlewares/Third_Party/FatFs/src/ff.c **** static
1411:Middlewares/Third_Party/FatFs/src/ff.c **** void fit_lfn (
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,				/* Pointer to the directory entry */
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord,				/* LFN order (1-20) */
1415:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum				/* SFN sum */
1416:Middlewares/Third_Party/FatFs/src/ff.c **** )
1417:Middlewares/Third_Party/FatFs/src/ff.c **** {
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 41


1420:Middlewares/Third_Party/FatFs/src/ff.c **** 
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 
1422:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1424:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Type] = 0;
1425:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + LDIR_FstClusLO, 0);
1426:Middlewares/Third_Party/FatFs/src/ff.c **** 
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
1428:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = wc = 0;
1429:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1430:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
1431:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
1432:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
1433:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
1434:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLEF;	/* Bottom LFN part is the start of LFN sequence */
1435:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1436:Middlewares/Third_Party/FatFs/src/ff.c **** }
1437:Middlewares/Third_Party/FatFs/src/ff.c **** 
1438:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1439:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1440:Middlewares/Third_Party/FatFs/src/ff.c **** 
1441:Middlewares/Third_Party/FatFs/src/ff.c **** 
1442:Middlewares/Third_Party/FatFs/src/ff.c **** 
1443:Middlewares/Third_Party/FatFs/src/ff.c **** 
1444:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1445:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create numbered name                                                  */
1446:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1447:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1448:Middlewares/Third_Party/FatFs/src/ff.c **** static
1449:Middlewares/Third_Party/FatFs/src/ff.c **** void gen_numname (
1450:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT seq			/* Sequence number */
1454:Middlewares/Third_Party/FatFs/src/ff.c **** )
1455:Middlewares/Third_Party/FatFs/src/ff.c **** {
1456:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns[8], c;
1457:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
1458:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1459:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sr;
1460:Middlewares/Third_Party/FatFs/src/ff.c **** 
1461:Middlewares/Third_Party/FatFs/src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dst, src, 11);
1463:Middlewares/Third_Party/FatFs/src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
1465:Middlewares/Third_Party/FatFs/src/ff.c **** 		sr = seq;
1466:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1467:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
1468:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
1469:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1470:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
1471:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1472:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1473:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq = (UINT)sr;
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 42


1477:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* itoa (hexdecimal) */
1478:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = 7;
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (seq % 16) + '0';
1481:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (seq);
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 	ns[i] = '~';
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 
1487:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Append the number */
1488:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(dst[j])) {
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (j == i - 1) break;
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 			j++;
1492:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1493:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
1497:Middlewares/Third_Party/FatFs/src/ff.c **** }
1498:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 
1500:Middlewares/Third_Party/FatFs/src/ff.c **** 
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 
1502:Middlewares/Third_Party/FatFs/src/ff.c **** 
1503:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1504:Middlewares/Third_Party/FatFs/src/ff.c **** /* Calculate sum of an SFN                                               */
1505:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1506:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1507:Middlewares/Third_Party/FatFs/src/ff.c **** static
1508:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE sum_sfn (
1509:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1510:Middlewares/Third_Party/FatFs/src/ff.c **** )
1511:Middlewares/Third_Party/FatFs/src/ff.c **** {
1512:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
1513:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n = 11;
1514:Middlewares/Third_Party/FatFs/src/ff.c **** 
1515:Middlewares/Third_Party/FatFs/src/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
1516:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1517:Middlewares/Third_Party/FatFs/src/ff.c **** }
1518:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1519:Middlewares/Third_Party/FatFs/src/ff.c **** 
1520:Middlewares/Third_Party/FatFs/src/ff.c **** 
1521:Middlewares/Third_Party/FatFs/src/ff.c **** 
1522:Middlewares/Third_Party/FatFs/src/ff.c **** 
1523:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1524:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Find an object in the directory                  */
1525:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1526:Middlewares/Third_Party/FatFs/src/ff.c **** 
1527:Middlewares/Third_Party/FatFs/src/ff.c **** static
1528:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_find (
1529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the directory object linked to the file name */
1530:Middlewares/Third_Party/FatFs/src/ff.c **** )
1531:Middlewares/Third_Party/FatFs/src/ff.c **** {
1532:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c, *dir;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 43


1534:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1535:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, ord, sum;
1536:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1540:Middlewares/Third_Party/FatFs/src/ff.c **** 
1541:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 	ord = sum = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1543:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1547:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1550:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->lfn) {
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dir[LDIR_Chksum];
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= ~LLEF; ord = c;	/* LFN start order */
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lfn_idx = dp->index;	/* Start index of LFN */
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1562:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
1563:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1564:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1565:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
1566:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
1567:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
1568:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1571:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
1573:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1574:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
1577:Middlewares/Third_Party/FatFs/src/ff.c **** 
1578:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1579:Middlewares/Third_Party/FatFs/src/ff.c **** }
1580:Middlewares/Third_Party/FatFs/src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/src/ff.c **** 
1584:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read an object from the directory                                     */
1586:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
1588:Middlewares/Third_Party/FatFs/src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_read (
1590:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 44


1591:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
1592:Middlewares/Third_Party/FatFs/src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c, *dir;
1596:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1597:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
1598:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = FR_NO_FILE;
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1605:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1607:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1609:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || (!_FS_RPATH && c == '.') || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF;
1611:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1613:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c & LLEF) {			/* Is it start of LFN sequence? */
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 					sum = dir[LDIR_Chksum];
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 					c &= ~LLEF; ord = c;
1616:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->lfn_idx = dp->index;
1617:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 				/* Check LFN validity and capture it */
1619:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1620:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
1621:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
1622:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
1623:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
1624:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1625:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1626:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != DDEM && (_FS_RPATH || c != '.') && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol)
1628:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1629:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);				/* Next entry */
1631:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1633:Middlewares/Third_Party/FatFs/src/ff.c **** 
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->sect = 0;
1635:Middlewares/Third_Party/FatFs/src/ff.c **** 
1636:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1637:Middlewares/Third_Party/FatFs/src/ff.c **** }
1638:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
1639:Middlewares/Third_Party/FatFs/src/ff.c **** 
1640:Middlewares/Third_Party/FatFs/src/ff.c **** 
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 
1642:Middlewares/Third_Party/FatFs/src/ff.c **** 
1643:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1644:Middlewares/Third_Party/FatFs/src/ff.c **** /* Register an object to the directory                                   */
1645:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1646:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1647:Middlewares/Third_Party/FatFs/src/ff.c **** static
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 45


1648:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_D
1649:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
1650:Middlewares/Third_Party/FatFs/src/ff.c **** )
1651:Middlewares/Third_Party/FatFs/src/ff.c **** {
1652:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1653:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1654:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n, nent;
1655:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sn[12], *fn, sum;
1656:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR *lfn;
1657:Middlewares/Third_Party/FatFs/src/ff.c **** 
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 
1659:Middlewares/Third_Party/FatFs/src/ff.c **** 	fn = dp->fn; lfn = dp->lfn;
1660:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(sn, fn, 12);
1661:Middlewares/Third_Party/FatFs/src/ff.c **** 
1662:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_FS_RPATH && (sn[NSFLAG] & NS_DOT))		/* Cannot create dot entry */
1663:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_NAME;
1664:Middlewares/Third_Party/FatFs/src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
1666:Middlewares/Third_Party/FatFs/src/ff.c **** 		fn[NSFLAG] = 0; dp->lfn = 0;			/* Find only SFN */
1667:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
1668:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
1669:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
1670:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1671:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1672:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
1673:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
1674:Middlewares/Third_Party/FatFs/src/ff.c **** 		fn[NSFLAG] = sn[NSFLAG]; dp->lfn = lfn;
1675:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1676:Middlewares/Third_Party/FatFs/src/ff.c **** 
1677:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
1678:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
1679:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = (n + 25) / 13;
1680:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
1681:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = 1;
1682:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1683:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
1684:Middlewares/Third_Party/FatFs/src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
1687:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
1689:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(dp->fs, dp->sect);
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->fs->wflag = 1;
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
1695:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1697:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1698:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non LFN configuration */
1699:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
1700:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1701:Middlewares/Third_Party/FatFs/src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {				/* Set SFN entry */
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 46


1705:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
1706:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
1707:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1708:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
1709:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1710:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1711:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1712:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1713:Middlewares/Third_Party/FatFs/src/ff.c **** 
1714:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1715:Middlewares/Third_Party/FatFs/src/ff.c **** }
1716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1717:Middlewares/Third_Party/FatFs/src/ff.c **** 
1718:Middlewares/Third_Party/FatFs/src/ff.c **** 
1719:Middlewares/Third_Party/FatFs/src/ff.c **** 
1720:Middlewares/Third_Party/FatFs/src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1722:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remove an object from the directory                                   */
1723:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1724:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && !_FS_MINIMIZE
1725:Middlewares/Third_Party/FatFs/src/ff.c **** static
1726:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
1728:Middlewares/Third_Party/FatFs/src/ff.c **** )
1729:Middlewares/Third_Party/FatFs/src/ff.c **** {
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1731:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1733:Middlewares/Third_Party/FatFs/src/ff.c **** 
1734:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = dp->index;	/* SFN index */
1735:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
1736:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1738:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1739:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1740:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1741:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
1742:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1743:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
1744:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
1745:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
1746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
1747:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1748:Middlewares/Third_Party/FatFs/src/ff.c **** 
1749:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Non LFN configuration */
1750:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->index);
1751:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
1756:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1757:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1758:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1759:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1760:Middlewares/Third_Party/FatFs/src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 47


1762:Middlewares/Third_Party/FatFs/src/ff.c **** }
1763:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1764:Middlewares/Third_Party/FatFs/src/ff.c **** 
1765:Middlewares/Third_Party/FatFs/src/ff.c **** 
1766:Middlewares/Third_Party/FatFs/src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/src/ff.c **** 
1768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1769:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get file information from directory entry                             */
1770:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1771:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1772:Middlewares/Third_Party/FatFs/src/ff.c **** static
1773:Middlewares/Third_Party/FatFs/src/ff.c **** void get_fileinfo (		/* No return code */
1774:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1775:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
1776:Middlewares/Third_Party/FatFs/src/ff.c **** )
1777:Middlewares/Third_Party/FatFs/src/ff.c **** {
 843              		.loc 1 1777 0
 844              		.cfi_startproc
 845              		@ args = 0, pretend = 0, frame = 0
 846              		@ frame_needed = 0, uses_anonymous_args = 0
 847              		@ link register save eliminated.
 848              	.LVL98:
 849 0000 30B4     		push	{r4, r5}
 850              	.LCFI12:
 851              		.cfi_def_cfa_offset 8
 852              		.cfi_offset 4, -8
 853              		.cfi_offset 5, -4
1778:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1779:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *p, c;
1780:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
1781:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1782:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
1783:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1784:Middlewares/Third_Party/FatFs/src/ff.c **** 
1785:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = fno->fname;
 854              		.loc 1 1785 0
 855 0002 01F10904 		add	r4, r1, #9
 856              	.LVL99:
1786:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->sect) {		/* Get SFN */
 857              		.loc 1 1786 0
 858 0006 D0F81032 		ldr	r3, [r0, #528]
 859 000a 6BB3     		cbz	r3, .L92
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;
 860              		.loc 1 1787 0
 861 000c D0F81402 		ldr	r0, [r0, #532]
 862              	.LVL100:
1788:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 863              		.loc 1 1788 0
 864 0010 0023     		movs	r3, #0
1789:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
 865              		.loc 1 1789 0
 866 0012 04E0     		b	.L93
 867              	.LVL101:
 868              	.L95:
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (TCHAR)dir[i++];
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == ' ') continue;				/* Skip padding spaces */
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 48


1793:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
 869              		.loc 1 1793 0
 870 0014 092A     		cmp	r2, #9
 871 0016 0CD0     		beq	.L100
 872              	.L96:
 873              	.LVL102:
1794:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1795:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
1796:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
1797:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
1798:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
1799:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = c << 8 | dir[i++];
1800:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ff_convert(c, 1);	/* OEM -> Unicode */
1801:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!c) c = '?';
1802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1803:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1804:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p++ = c;
 874              		.loc 1 1804 0
 875 0018 2370     		strb	r3, [r4]
 876 001a 0134     		adds	r4, r4, #1
 877              	.LVL103:
 878              	.L94:
 879 001c 1346     		mov	r3, r2
 880              	.LVL104:
 881              	.L93:
1789:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (TCHAR)dir[i++];
 882              		.loc 1 1789 0
 883 001e 0A2B     		cmp	r3, #10
 884 0020 0BD8     		bhi	.L101
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (TCHAR)dir[i++];
 885              		.loc 1 1790 0
 886 0022 5A1C     		adds	r2, r3, #1
 887              	.LVL105:
 888 0024 C35C     		ldrb	r3, [r0, r3]	@ zero_extendqisi2
 889              	.LVL106:
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 890              		.loc 1 1791 0
 891 0026 202B     		cmp	r3, #32
 892 0028 F8D0     		beq	.L94
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
 893              		.loc 1 1792 0
 894 002a 052B     		cmp	r3, #5
 895 002c F2D1     		bne	.L95
 896 002e E523     		movs	r3, #229
 897              	.LVL107:
 898 0030 F0E7     		b	.L95
 899              	.LVL108:
 900              	.L100:
1793:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 901              		.loc 1 1793 0 discriminator 1
 902 0032 2E25     		movs	r5, #46
 903 0034 2570     		strb	r5, [r4]
 904 0036 0134     		adds	r4, r4, #1
 905              	.LVL109:
 906 0038 EEE7     		b	.L96
 907              	.LVL110:
 908              	.L101:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 49


1805:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
 909              		.loc 1 1806 0
 910 003a C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 911              	.LVL111:
 912 003c 0B72     		strb	r3, [r1, #8]
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fsize = LD_DWORD(dir + DIR_FileSize);	/* Size */
 913              		.loc 1 1807 0
 914 003e C27F     		ldrb	r2, [r0, #31]	@ zero_extendqisi2
 915 0040 837F     		ldrb	r3, [r0, #30]	@ zero_extendqisi2
 916 0042 1B04     		lsls	r3, r3, #16
 917 0044 43EA0263 		orr	r3, r3, r2, lsl #24
 918 0048 427F     		ldrb	r2, [r0, #29]	@ zero_extendqisi2
 919 004a 43EA0223 		orr	r3, r3, r2, lsl #8
 920 004e 027F     		ldrb	r2, [r0, #28]	@ zero_extendqisi2
 921 0050 1343     		orrs	r3, r3, r2
 922 0052 0B60     		str	r3, [r1]
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fdate = LD_WORD(dir + DIR_WrtDate);	/* Date */
 923              		.loc 1 1808 0
 924 0054 427E     		ldrb	r2, [r0, #25]	@ zero_extendqisi2
 925 0056 037E     		ldrb	r3, [r0, #24]	@ zero_extendqisi2
 926 0058 43EA0223 		orr	r3, r3, r2, lsl #8
 927 005c 8B80     		strh	r3, [r1, #4]	@ movhi
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->ftime = LD_WORD(dir + DIR_WrtTime);	/* Time */
 928              		.loc 1 1809 0
 929 005e C27D     		ldrb	r2, [r0, #23]	@ zero_extendqisi2
 930 0060 837D     		ldrb	r3, [r0, #22]	@ zero_extendqisi2
 931 0062 43EA0223 		orr	r3, r3, r2, lsl #8
 932 0066 CB80     		strh	r3, [r1, #6]	@ movhi
 933              	.LVL112:
 934              	.L92:
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;		/* Terminate SFN string by a \0 */
 935              		.loc 1 1811 0
 936 0068 0023     		movs	r3, #0
 937 006a 2370     		strb	r3, [r4]
1812:Middlewares/Third_Party/FatFs/src/ff.c **** 
1813:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1814:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fno->lfname) {
1815:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0; p = fno->lfname;
1816:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
1817:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfn = dp->lfn;
1818:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
1819:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
1823:Middlewares/Third_Party/FatFs/src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
1824:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1825:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
1826:Middlewares/Third_Party/FatFs/src/ff.c **** 				p[i++] = (TCHAR)w;
1827:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1828:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1829:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[i] = 0;	/* Terminate LFN string by a \0 */
1830:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1831:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1832:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 50


 938              		.loc 1 1832 0
 939 006c 30BC     		pop	{r4, r5}
 940              	.LCFI13:
 941              		.cfi_restore 5
 942              		.cfi_restore 4
 943              		.cfi_def_cfa_offset 0
 944              	.LVL113:
 945 006e 7047     		bx	lr
 946              		.cfi_endproc
 947              	.LFE158:
 949              		.section	.text.create_name,"ax",%progbits
 950              		.align	1
 951              		.syntax unified
 952              		.thumb
 953              		.thumb_func
 954              		.fpu fpv4-sp-d16
 956              	create_name:
 957              	.LFB159:
1833:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1834:Middlewares/Third_Party/FatFs/src/ff.c **** 
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 
1836:Middlewares/Third_Party/FatFs/src/ff.c **** 
1837:Middlewares/Third_Party/FatFs/src/ff.c **** 
1838:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1839:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pattern matching                                                      */
1840:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1841:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
1842:Middlewares/Third_Party/FatFs/src/ff.c **** static
1843:Middlewares/Third_Party/FatFs/src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
1844:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
1845:Middlewares/Third_Party/FatFs/src/ff.c **** )
1846:Middlewares/Third_Party/FatFs/src/ff.c **** {
1847:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
1848:Middlewares/Third_Party/FatFs/src/ff.c **** 
1849:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1850:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
1851:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr))		/* Get DBC 2nd byte if needed */
1853:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
1854:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
1855:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
1856:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1857:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1858:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
1859:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1860:Middlewares/Third_Party/FatFs/src/ff.c **** 	return chr;
1861:Middlewares/Third_Party/FatFs/src/ff.c **** }
1862:Middlewares/Third_Party/FatFs/src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/src/ff.c **** static
1865:Middlewares/Third_Party/FatFs/src/ff.c **** int pattern_matching (	/* Return value: 0:mismatched, 1:matched */
1866:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
1867:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
1868:Middlewares/Third_Party/FatFs/src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
1869:Middlewares/Third_Party/FatFs/src/ff.c **** 	int inf				/* Infinite search (* specified) */
1870:Middlewares/Third_Party/FatFs/src/ff.c **** )
1871:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 51


1872:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *pp, *np;
1873:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR pc, nc;
1874:Middlewares/Third_Party/FatFs/src/ff.c **** 	int nm, nx;
1875:Middlewares/Third_Party/FatFs/src/ff.c **** 
1876:Middlewares/Third_Party/FatFs/src/ff.c **** 
1877:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
1878:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
1879:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1880:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
1881:Middlewares/Third_Party/FatFs/src/ff.c **** 
1882:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1883:Middlewares/Third_Party/FatFs/src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
1884:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
1885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
1886:Middlewares/Third_Party/FatFs/src/ff.c **** 				nm = nx = 0;
1887:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {				/* Analyze the wildcard chars */
1888:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
1889:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (*pp == '?' || *pp == '*');
1890:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
1891:Middlewares/Third_Party/FatFs/src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
1892:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1893:Middlewares/Third_Party/FatFs/src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
1894:Middlewares/Third_Party/FatFs/src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
1895:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
1896:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!pc) return 1;		/* Branch matched? (matched at end of both strings) */
1897:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1898:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_achar(&nam);			/* nam++ */
1899:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
1900:Middlewares/Third_Party/FatFs/src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 0;
1902:Middlewares/Third_Party/FatFs/src/ff.c **** }
1903:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
1904:Middlewares/Third_Party/FatFs/src/ff.c **** 
1905:Middlewares/Third_Party/FatFs/src/ff.c **** 
1906:Middlewares/Third_Party/FatFs/src/ff.c **** 
1907:Middlewares/Third_Party/FatFs/src/ff.c **** 
1908:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1909:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pick a segment and create the object name in directory form           */
1910:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1911:Middlewares/Third_Party/FatFs/src/ff.c **** 
1912:Middlewares/Third_Party/FatFs/src/ff.c **** static
1913:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT create_name (
1914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1915:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
1916:Middlewares/Third_Party/FatFs/src/ff.c **** )
1917:Middlewares/Third_Party/FatFs/src/ff.c **** {
 958              		.loc 1 1917 0
 959              		.cfi_startproc
 960              		@ args = 0, pretend = 0, frame = 0
 961              		@ frame_needed = 0, uses_anonymous_args = 0
 962              	.LVL114:
 963 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 964              	.LCFI14:
 965              		.cfi_def_cfa_offset 40
 966              		.cfi_offset 3, -40
 967              		.cfi_offset 4, -36
 968              		.cfi_offset 5, -32
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 52


 969              		.cfi_offset 6, -28
 970              		.cfi_offset 7, -24
 971              		.cfi_offset 8, -20
 972              		.cfi_offset 9, -16
 973              		.cfi_offset 10, -12
 974              		.cfi_offset 11, -8
 975              		.cfi_offset 14, -4
 976 0004 8946     		mov	r9, r1
1918:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1919:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, cf;
1920:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
1921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, ni, si, di;
1922:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *p;
1923:Middlewares/Third_Party/FatFs/src/ff.c **** 
1924:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create LFN in Unicode */
1925:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1926:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn = dp->lfn;
1927:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = di = 0;
1928:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1929:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = p[si++];					/* Get a character */
1930:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
1931:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
1932:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;
1933:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1934:Middlewares/Third_Party/FatFs/src/ff.c **** 		w &= 0xFF;
1935:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1936:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S
1937:Middlewares/Third_Party/FatFs/src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
1938:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
1939:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(b))
1940:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
1941:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1942:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1943:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
1944:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
1945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1946:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
1947:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;
1948:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
1949:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1950:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1951:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1952:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
1953:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') || /* Is this a dot entry? */
1954:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {
1955:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
1956:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)
1957:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
1958:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
1959:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
1960:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1961:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1962:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
1963:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
1964:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
1965:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
1966:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 53


1967:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
1968:Middlewares/Third_Party/FatFs/src/ff.c **** 
1969:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
1970:Middlewares/Third_Party/FatFs/src/ff.c **** 
1971:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create SFN in directory form */
1972:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dp->fn, ' ', 11);
1973:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
1974:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
1975:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
1976:Middlewares/Third_Party/FatFs/src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/src/ff.c **** 	b = i = 0; ni = 8;
1978:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1979:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
1980:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
1981:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
1982:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
1983:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1984:Middlewares/Third_Party/FatFs/src/ff.c **** 
1985:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
1986:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
1987:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
1988:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1989:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
1990:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
1991:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
1992:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
1993:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1994:Middlewares/Third_Party/FatFs/src/ff.c **** 
1995:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
1996:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
1997:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
1998:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
1999:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2000:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2001:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2002:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2003:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2004:Middlewares/Third_Party/FatFs/src/ff.c **** 
2005:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* DBC (always false at SBCS cfg) */
2006:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= ni - 1) {
2007:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2008:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2009:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2010:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2011:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2012:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2013:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2014:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2015:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
2016:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2017:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2018:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
2019:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2020:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2021:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2022:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2023:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i++] = (BYTE)w;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 54


2024:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2025:Middlewares/Third_Party/FatFs/src/ff.c **** 
2026:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with deleted mark, re
2027:Middlewares/Third_Party/FatFs/src/ff.c **** 
2028:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2029:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
2030:Middlewares/Third_Party/FatFs/src/ff.c **** 		cf |= NS_LFN;
2031:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2032:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2033:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2034:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2035:Middlewares/Third_Party/FatFs/src/ff.c **** 
2036:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2037:Middlewares/Third_Party/FatFs/src/ff.c **** 
2038:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2039:Middlewares/Third_Party/FatFs/src/ff.c **** 
2040:Middlewares/Third_Party/FatFs/src/ff.c **** 
2041:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non-LFN configuration */
2042:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, c, d, *sfn;
2043:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ni, si, i;
2044:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *p;
2045:Middlewares/Third_Party/FatFs/src/ff.c **** 
2046:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create file name in directory form */
2047:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
 977              		.loc 1 2047 0
 978 0006 0C68     		ldr	r4, [r1]
 979              	.LVL115:
 980 0008 00E0     		b	.L103
 981              	.L104:
 982              		.loc 1 2047 0 is_stmt 0 discriminator 5
 983 000a 0134     		adds	r4, r4, #1
 984              	.LVL116:
 985              	.L103:
 986              		.loc 1 2047 0 discriminator 1
 987 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 988 000e 2F2B     		cmp	r3, #47
 989 0010 FBD0     		beq	.L104
 990              		.loc 1 2047 0 discriminator 4
 991 0012 5C2B     		cmp	r3, #92
 992 0014 F9D0     		beq	.L104
2048:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn = dp->fn;
 993              		.loc 1 2048 0 is_stmt 1
 994 0016 D0F818A2 		ldr	r10, [r0, #536]
 995              	.LVL117:
2049:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(sfn, ' ', 11);
 996              		.loc 1 2049 0
 997 001a 0B22     		movs	r2, #11
 998 001c 2021     		movs	r1, #32
 999              	.LVL118:
 1000 001e 5046     		mov	r0, r10
 1001              	.LVL119:
 1002 0020 FFF7FEFF 		bl	mem_set
 1003              	.LVL120:
2050:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = i = b = 0; ni = 8;
 1004              		.loc 1 2050 0
 1005 0024 0026     		movs	r6, #0
 1006 0026 3346     		mov	r3, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 55


 1007 0028 0827     		movs	r7, #8
 1008 002a B046     		mov	r8, r6
 1009              	.LVL121:
 1010              	.L105:
2051:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
2052:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2053:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2054:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (BYTE)p[si++];
2055:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != '.' || si >= 3) break;
2056:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2057:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2059:Middlewares/Third_Party/FatFs/src/ff.c **** 		*path = &p[si];									/* Return pointer to the next segment */
2060:Middlewares/Third_Party/FatFs/src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
2061:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2062:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2064:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
 1011              		.loc 1 2065 0
 1012 002c 03F1010B 		add	fp, r3, #1
 1013              	.LVL122:
 1014 0030 E55C     		ldrb	r5, [r4, r3]	@ zero_extendqisi2
 1015              	.LVL123:
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 1016              		.loc 1 2066 0
 1017 0032 202D     		cmp	r5, #32
 1018 0034 3AD9     		bls	.L106
 1019              		.loc 1 2066 0 is_stmt 0 discriminator 1
 1020 0036 2F2D     		cmp	r5, #47
 1021 0038 38D0     		beq	.L106
 1022              		.loc 1 2066 0 discriminator 2
 1023 003a 5C2D     		cmp	r5, #92
 1024 003c 36D0     		beq	.L106
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
 1025              		.loc 1 2067 0 is_stmt 1
 1026 003e 2E2D     		cmp	r5, #46
 1027 0040 01D0     		beq	.L107
 1028              		.loc 1 2067 0 is_stmt 0 discriminator 1
 1029 0042 B742     		cmp	r7, r6
 1030 0044 0DD8     		bhi	.L108
 1031              	.L107:
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
 1032              		.loc 1 2068 0 is_stmt 1
 1033 0046 082F     		cmp	r7, #8
 1034 0048 5FD1     		bne	.L119
 1035              		.loc 1 2068 0 is_stmt 0 discriminator 2
 1036 004a 2E2D     		cmp	r5, #46
 1037 004c 02D0     		beq	.L125
 1038              		.loc 1 2068 0
 1039 004e 0620     		movs	r0, #6
 1040 0050 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1041              	.LVL124:
 1042              	.L125:
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
 1043              		.loc 1 2070 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 56


 1044 0054 4FEA8808 		lsl	r8, r8, #2
 1045              	.LVL125:
 1046 0058 5FFA88F8 		uxtb	r8, r8
 1047              	.LVL126:
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;
 1048              		.loc 1 2069 0
 1049 005c 3E46     		mov	r6, r7
 1050 005e 0B27     		movs	r7, #11
 1051              		.loc 1 2070 0
 1052 0060 12E0     		b	.L110
 1053              	.LVL127:
 1054              	.L108:
2071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
 1055              		.loc 1 2072 0
 1056 0062 15F0800F 		tst	r5, #128
 1057 0066 11D1     		bne	.L126
 1058              	.L111:
2073:Middlewares/Third_Party/FatFs/src/ff.c **** 			b |= 3;						/* Eliminate NT flag */
2074:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2075:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2076:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2077:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_DF1S
2078:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
2079:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2080:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2081:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2082:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2083:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2084:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
2085:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;
2086:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2087:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = d;
2088:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2089:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
 1059              		.loc 1 2089 0
 1060 0068 2946     		mov	r1, r5
 1061 006a 2B48     		ldr	r0, .L132
 1062 006c FFF7FEFF 		bl	chk_chr
 1063              	.LVL128:
 1064 0070 0028     		cmp	r0, #0
 1065 0072 4DD1     		bne	.L121
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
 1066              		.loc 1 2091 0
 1067 0074 A5F14103 		sub	r3, r5, #65
 1068 0078 DBB2     		uxtb	r3, r3
 1069 007a 192B     		cmp	r3, #25
 1070 007c 0CD8     		bhi	.L112
2092:Middlewares/Third_Party/FatFs/src/ff.c **** 				b |= 2;
 1071              		.loc 1 2092 0
 1072 007e 48F00208 		orr	r8, r8, #2
 1073              	.LVL129:
 1074              	.L113:
2093:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsLower(c)) {		/* ASCII small capital? */
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 1; c -= 0x20;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 57


2096:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2097:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1075              		.loc 1 2098 0
 1076 0082 0AF80650 		strb	r5, [r10, r6]
 1077 0086 0136     		adds	r6, r6, #1
 1078              	.LVL130:
 1079              	.L110:
 1080 0088 5B46     		mov	r3, fp
 1081 008a CFE7     		b	.L105
 1082              	.LVL131:
 1083              	.L126:
2073:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 1084              		.loc 1 2073 0
 1085 008c 48F00308 		orr	r8, r8, #3
 1086              	.LVL132:
2075:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1087              		.loc 1 2075 0
 1088 0090 803D     		subs	r5, r5, #128
 1089              	.LVL133:
 1090 0092 224B     		ldr	r3, .L132+4
 1091 0094 5D5D     		ldrb	r5, [r3, r5]	@ zero_extendqisi2
 1092              	.LVL134:
 1093 0096 E7E7     		b	.L111
 1094              	.L112:
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 1; c -= 0x20;
 1095              		.loc 1 2094 0
 1096 0098 A5F16103 		sub	r3, r5, #97
 1097 009c DBB2     		uxtb	r3, r3
 1098 009e 192B     		cmp	r3, #25
 1099 00a0 EFD8     		bhi	.L113
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1100              		.loc 1 2095 0
 1101 00a2 48F00108 		orr	r8, r8, #1
 1102              	.LVL135:
 1103 00a6 203D     		subs	r5, r5, #32
 1104              	.LVL136:
 1105 00a8 EDB2     		uxtb	r5, r5
 1106              	.LVL137:
 1107 00aa EAE7     		b	.L113
 1108              	.L106:
2099:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2100:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
 1109              		.loc 1 2101 0
 1110 00ac 5C44     		add	r4, r4, fp
 1111              	.LVL138:
 1112 00ae C9F80040 		str	r4, [r9]
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 1113              		.loc 1 2102 0
 1114 00b2 202D     		cmp	r5, #32
 1115 00b4 04D8     		bhi	.L122
 1116 00b6 0423     		movs	r3, #4
 1117              	.L114:
 1118              	.LVL139:
2103:Middlewares/Third_Party/FatFs/src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 58


 1119              		.loc 1 2104 0 discriminator 4
 1120 00b8 26B9     		cbnz	r6, .L127
 1121              		.loc 1 2104 0 is_stmt 0
 1122 00ba 0620     		movs	r0, #6
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
2106:Middlewares/Third_Party/FatFs/src/ff.c **** 
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
2110:Middlewares/Third_Party/FatFs/src/ff.c **** 
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = c;		/* Store NT flag, File name is created */
2112:Middlewares/Third_Party/FatFs/src/ff.c **** 
2113:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2115:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1123              		.loc 1 2115 0 is_stmt 1
 1124 00bc BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1125              	.LVL140:
 1126              	.L122:
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1127              		.loc 1 2102 0
 1128 00c0 0023     		movs	r3, #0
 1129 00c2 F9E7     		b	.L114
 1130              	.LVL141:
 1131              	.L127:
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
 1132              		.loc 1 2105 0
 1133 00c4 9AF80020 		ldrb	r2, [r10]	@ zero_extendqisi2
 1134 00c8 E52A     		cmp	r2, #229
 1135 00ca 0FD0     		beq	.L128
 1136              	.L115:
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
 1137              		.loc 1 2107 0
 1138 00cc 082F     		cmp	r7, #8
 1139 00ce 11D0     		beq	.L129
 1140              	.L116:
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 1141              		.loc 1 2108 0
 1142 00d0 08F00302 		and	r2, r8, #3
 1143 00d4 012A     		cmp	r2, #1
 1144 00d6 12D0     		beq	.L130
 1145              	.L117:
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1146              		.loc 1 2109 0
 1147 00d8 08F00C08 		and	r8, r8, #12
 1148              	.LVL142:
 1149 00dc B8F1040F 		cmp	r8, #4
 1150 00e0 10D0     		beq	.L131
 1151              	.L118:
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1152              		.loc 1 2111 0
 1153 00e2 8AF80B30 		strb	r3, [r10, #11]
2113:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1154              		.loc 1 2113 0
 1155 00e6 0020     		movs	r0, #0
 1156 00e8 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1157              	.LVL143:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 59


 1158              	.L128:
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1159              		.loc 1 2105 0 discriminator 1
 1160 00ec 0522     		movs	r2, #5
 1161 00ee 8AF80020 		strb	r2, [r10]
 1162 00f2 EBE7     		b	.L115
 1163              	.L129:
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
 1164              		.loc 1 2107 0 discriminator 1
 1165 00f4 4FEA8808 		lsl	r8, r8, #2
 1166              	.LVL144:
 1167 00f8 5FFA88F8 		uxtb	r8, r8
 1168              	.LVL145:
 1169 00fc E8E7     		b	.L116
 1170              	.L130:
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 1171              		.loc 1 2108 0 discriminator 1
 1172 00fe 43F01003 		orr	r3, r3, #16
 1173              	.LVL146:
 1174 0102 E9E7     		b	.L117
 1175              	.LVL147:
 1176              	.L131:
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1177              		.loc 1 2109 0 discriminator 1
 1178 0104 43F00803 		orr	r3, r3, #8
 1179              	.LVL148:
 1180 0108 EBE7     		b	.L118
 1181              	.LVL149:
 1182              	.L119:
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;
 1183              		.loc 1 2068 0
 1184 010a 0620     		movs	r0, #6
 1185 010c BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1186              	.LVL150:
 1187              	.L121:
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
 1188              		.loc 1 2090 0
 1189 0110 0620     		movs	r0, #6
 1190 0112 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1191              	.LVL151:
 1192              	.L133:
 1193 0116 00BF     		.align	2
 1194              	.L132:
 1195 0118 00000000 		.word	.LC0
 1196 011c 00000000 		.word	.LANCHOR1
 1197              		.cfi_endproc
 1198              	.LFE159:
 1200              		.section	.text.get_ldnumber,"ax",%progbits
 1201              		.align	1
 1202              		.syntax unified
 1203              		.thumb
 1204              		.thumb_func
 1205              		.fpu fpv4-sp-d16
 1207              	get_ldnumber:
 1208              	.LFB161:
2116:Middlewares/Third_Party/FatFs/src/ff.c **** 
2117:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 60


2118:Middlewares/Third_Party/FatFs/src/ff.c **** 
2119:Middlewares/Third_Party/FatFs/src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2121:Middlewares/Third_Party/FatFs/src/ff.c **** /* Follow a file path                                                    */
2122:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2123:Middlewares/Third_Party/FatFs/src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/src/ff.c **** static
2125:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2126:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2127:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2128:Middlewares/Third_Party/FatFs/src/ff.c **** )
2129:Middlewares/Third_Party/FatFs/src/ff.c **** {
2130:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2131:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir, ns;
2132:Middlewares/Third_Party/FatFs/src/ff.c **** 
2133:Middlewares/Third_Party/FatFs/src/ff.c **** 
2134:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* No heading separator */
2138:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
2139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2140:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
2144:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir = 0;
2149:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
2150:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2157:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
2158:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
2159:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2160:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;					/* Ended at the root directroy. Function completed. */
2161:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {							/* Could not find the object */
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2163:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2164:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2165:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2166:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2168:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
2171:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->sclust = ld_clust(dp->fs, dir);
2173:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 61


2175:Middlewares/Third_Party/FatFs/src/ff.c **** 
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2177:Middlewares/Third_Party/FatFs/src/ff.c **** }
2178:Middlewares/Third_Party/FatFs/src/ff.c **** 
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 
2180:Middlewares/Third_Party/FatFs/src/ff.c **** 
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 
2182:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2183:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get logical drive number from path name                               */
2184:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2185:Middlewares/Third_Party/FatFs/src/ff.c **** 
2186:Middlewares/Third_Party/FatFs/src/ff.c **** static
2187:Middlewares/Third_Party/FatFs/src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2189:Middlewares/Third_Party/FatFs/src/ff.c **** )
2190:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1209              		.loc 1 2190 0
 1210              		.cfi_startproc
 1211              		@ args = 0, pretend = 0, frame = 0
 1212              		@ frame_needed = 0, uses_anonymous_args = 0
 1213              		@ link register save eliminated.
 1214              	.LVL152:
2191:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
2192:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
2194:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2195:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char* const str[] = {_VOLUME_STRS};
2196:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *sp;
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	char c;
2198:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR tc;
2199:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2200:Middlewares/Third_Party/FatFs/src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/src/ff.c **** 
2202:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 1215              		.loc 1 2202 0
 1216 0000 0168     		ldr	r1, [r0]
 1217 0002 09B1     		cbz	r1, .L148
 1218 0004 0A46     		mov	r2, r1
 1219 0006 03E0     		b	.L135
 1220              	.L148:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1221              		.loc 1 2193 0
 1222 0008 4FF0FF33 		mov	r3, #-1
 1223 000c 08E0     		b	.L145
 1224              	.LVL153:
 1225              	.L138:
2203:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 1226              		.loc 1 2203 0 discriminator 4
 1227 000e 0132     		adds	r2, r2, #1
 1228              	.LVL154:
 1229              	.L135:
 1230              		.loc 1 2203 0 is_stmt 0 discriminator 1
 1231 0010 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1232 0012 202B     		cmp	r3, #32
 1233 0014 01D9     		bls	.L137
 1234              		.loc 1 2203 0 discriminator 3
 1235 0016 3A2B     		cmp	r3, #58
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 62


 1236 0018 F9D1     		bne	.L138
 1237              	.L137:
2204:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 1238              		.loc 1 2204 0 is_stmt 1
 1239 001a 3A2B     		cmp	r3, #58
 1240 001c 02D0     		beq	.L149
2205:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
2206:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = *tp++ - '0'; 
2207:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2209:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2210:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
2211:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2212:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2213:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; tt++;
2216:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
2217:Middlewares/Third_Party/FatFs/src/ff.c **** 					sp = str[i]; tp = *path;
2218:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {	/* Compare a string drive id with path name */
2219:Middlewares/Third_Party/FatFs/src/ff.c **** 						c = *sp++; tc = *tp++;
2220:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (c && (TCHAR)c == tc);
2222:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2223:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2224:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2225:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = tt;
2226:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2227:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2228:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2229:Middlewares/Third_Party/FatFs/src/ff.c **** 			return vol;
2230:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2231:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
2232:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = CurrVol;	/* Current drive */
2233:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2234:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = 0;		/* Drive 0 */
 1241              		.loc 1 2234 0
 1242 001e 0023     		movs	r3, #0
 1243              	.LVL155:
 1244              	.L145:
2235:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2236:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2237:Middlewares/Third_Party/FatFs/src/ff.c **** 	return vol;
2238:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1245              		.loc 1 2238 0
 1246 0020 1846     		mov	r0, r3
 1247              	.LVL156:
 1248 0022 7047     		bx	lr
 1249              	.LVL157:
 1250              	.L149:
2190:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
 1251              		.loc 1 2190 0
 1252 0024 10B4     		push	{r4}
 1253              	.LCFI15:
 1254              		.cfi_def_cfa_offset 4
 1255              		.cfi_offset 4, -4
 1256              	.LVL158:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 63


2206:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1257              		.loc 1 2206 0
 1258 0026 4C1C     		adds	r4, r1, #1
 1259              	.LVL159:
 1260 0028 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1261 002a 303B     		subs	r3, r3, #48
 1262              	.LVL160:
2207:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1263              		.loc 1 2207 0
 1264 002c 092B     		cmp	r3, #9
 1265 002e 08D8     		bhi	.L141
2207:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1266              		.loc 1 2207 0 is_stmt 0 discriminator 1
 1267 0030 A242     		cmp	r2, r4
 1268 0032 09D1     		bne	.L142
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1269              		.loc 1 2208 0 is_stmt 1
 1270 0034 5BB9     		cbnz	r3, .L143
 1271              	.LVL161:
2210:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1272              		.loc 1 2210 0
 1273 0036 0132     		adds	r2, r2, #1
 1274              	.LVL162:
 1275 0038 0260     		str	r2, [r0]
 1276              	.LVL163:
 1277              	.L134:
 1278              		.loc 1 2238 0
 1279 003a 1846     		mov	r0, r3
 1280              	.LVL164:
 1281 003c 5DF8044B 		ldr	r4, [sp], #4
 1282              	.LCFI16:
 1283              		.cfi_remember_state
 1284              		.cfi_restore 4
 1285              		.cfi_def_cfa_offset 0
 1286              	.LVL165:
 1287 0040 7047     		bx	lr
 1288              	.LVL166:
 1289              	.L141:
 1290              	.LCFI17:
 1291              		.cfi_restore_state
2193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1292              		.loc 1 2193 0
 1293 0042 4FF0FF33 		mov	r3, #-1
 1294              	.LVL167:
 1295 0046 F8E7     		b	.L134
 1296              	.LVL168:
 1297              	.L142:
 1298 0048 4FF0FF33 		mov	r3, #-1
 1299              	.LVL169:
 1300 004c F5E7     		b	.L134
 1301              	.LVL170:
 1302              	.L143:
 1303 004e 4FF0FF33 		mov	r3, #-1
 1304              	.LVL171:
 1305 0052 F2E7     		b	.L134
 1306              		.cfi_endproc
 1307              	.LFE161:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 64


 1309              		.section	.text.sync_window,"ax",%progbits
 1310              		.align	1
 1311              		.syntax unified
 1312              		.thumb
 1313              		.thumb_func
 1314              		.fpu fpv4-sp-d16
 1316              	sync_window:
 1317              	.LFB140:
 776:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1318              		.loc 1 776 0
 1319              		.cfi_startproc
 1320              		@ args = 0, pretend = 0, frame = 0
 1321              		@ frame_needed = 0, uses_anonymous_args = 0
 1322              	.LVL172:
 1323 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1324              	.LCFI18:
 1325              		.cfi_def_cfa_offset 24
 1326              		.cfi_offset 3, -24
 1327              		.cfi_offset 4, -20
 1328              		.cfi_offset 5, -16
 1329              		.cfi_offset 6, -12
 1330              		.cfi_offset 7, -8
 1331              		.cfi_offset 14, -4
 1332              	.LVL173:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1333              		.loc 1 782 0
 1334 0002 90F80432 		ldrb	r3, [r0, #516]	@ zero_extendqisi2
 1335 0006 0BB9     		cbnz	r3, .L158
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1336              		.loc 1 779 0
 1337 0008 0020     		movs	r0, #0
 1338              	.LVL174:
 1339 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1340              	.LVL175:
 1341              	.L158:
 1342 000c 0446     		mov	r4, r0
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 1343              		.loc 1 783 0
 1344 000e D0F83062 		ldr	r6, [r0, #560]
 1345              	.LVL176:
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1346              		.loc 1 784 0
 1347 0012 0746     		mov	r7, r0
 1348 0014 0123     		movs	r3, #1
 1349 0016 3246     		mov	r2, r6
 1350 0018 0146     		mov	r1, r0
 1351 001a 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 1352              	.LVL177:
 1353 001e FFF7FEFF 		bl	disk_write
 1354              	.LVL178:
 1355 0022 D8B9     		cbnz	r0, .L155
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1356              		.loc 1 787 0
 1357 0024 0023     		movs	r3, #0
 1358 0026 84F80432 		strb	r3, [r4, #516]
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1359              		.loc 1 788 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 65


 1360 002a D4F82432 		ldr	r3, [r4, #548]
 1361 002e F31A     		subs	r3, r6, r3
 1362 0030 D4F81C22 		ldr	r2, [r4, #540]
 1363 0034 9342     		cmp	r3, r2
 1364 0036 13D2     		bcs	.L156
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1365              		.loc 1 789 0
 1366 0038 94F80352 		ldrb	r5, [r4, #515]	@ zero_extendqisi2
 1367              	.LVL179:
 1368 003c 0AE0     		b	.L152
 1369              	.L153:
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 1370              		.loc 1 790 0 discriminator 3
 1371 003e D4F81C32 		ldr	r3, [r4, #540]
 1372 0042 1E44     		add	r6, r6, r3
 1373              	.LVL180:
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1374              		.loc 1 791 0 discriminator 3
 1375 0044 0123     		movs	r3, #1
 1376 0046 3246     		mov	r2, r6
 1377 0048 3946     		mov	r1, r7
 1378 004a 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 1379 004e FFF7FEFF 		bl	disk_write
 1380              	.LVL181:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1381              		.loc 1 789 0 discriminator 3
 1382 0052 013D     		subs	r5, r5, #1
 1383              	.LVL182:
 1384              	.L152:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1385              		.loc 1 789 0 is_stmt 0 discriminator 1
 1386 0054 012D     		cmp	r5, #1
 1387 0056 F2D8     		bhi	.L153
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1388              		.loc 1 779 0 is_stmt 1
 1389 0058 0020     		movs	r0, #0
 1390 005a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1391              	.LVL183:
 1392              	.L155:
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 1393              		.loc 1 785 0
 1394 005c 0120     		movs	r0, #1
 1395 005e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1396              	.LVL184:
 1397              	.L156:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1398              		.loc 1 779 0
 1399 0060 0020     		movs	r0, #0
 1400              	.LVL185:
 797:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1401              		.loc 1 797 0
 1402 0062 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1403              		.cfi_endproc
 1404              	.LFE140:
 1406              		.section	.text.move_window,"ax",%progbits
 1407              		.align	1
 1408              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 66


 1409              		.thumb
 1410              		.thumb_func
 1411              		.fpu fpv4-sp-d16
 1413              	move_window:
 1414              	.LFB141:
 806:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1415              		.loc 1 806 0
 1416              		.cfi_startproc
 1417              		@ args = 0, pretend = 0, frame = 0
 1418              		@ frame_needed = 0, uses_anonymous_args = 0
 1419              	.LVL186:
 1420 0000 70B5     		push	{r4, r5, r6, lr}
 1421              	.LCFI19:
 1422              		.cfi_def_cfa_offset 16
 1423              		.cfi_offset 4, -16
 1424              		.cfi_offset 5, -12
 1425              		.cfi_offset 6, -8
 1426              		.cfi_offset 14, -4
 1427              	.LVL187:
 810:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1428              		.loc 1 810 0
 1429 0002 D0F83032 		ldr	r3, [r0, #560]
 1430 0006 8B42     		cmp	r3, r1
 1431 0008 15D0     		beq	.L162
 1432 000a 0446     		mov	r4, r0
 1433 000c 0D46     		mov	r5, r1
 812:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1434              		.loc 1 812 0
 1435 000e FFF7FEFF 		bl	sync_window
 1436              	.LVL188:
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 1437              		.loc 1 814 0
 1438 0012 0646     		mov	r6, r0
 1439 0014 08B1     		cbz	r0, .L165
 1440              	.LVL189:
 1441              	.L160:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1442              		.loc 1 823 0
 1443 0016 3046     		mov	r0, r6
 1444 0018 70BD     		pop	{r4, r5, r6, pc}
 1445              	.LVL190:
 1446              	.L165:
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1447              		.loc 1 815 0
 1448 001a 0123     		movs	r3, #1
 1449 001c 2A46     		mov	r2, r5
 1450 001e 2146     		mov	r1, r4
 1451 0020 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 1452              	.LVL191:
 1453 0024 FFF7FEFF 		bl	disk_read
 1454              	.LVL192:
 1455 0028 10B1     		cbz	r0, .L161
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 1456              		.loc 1 817 0
 1457 002a 0126     		movs	r6, #1
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 1458              		.loc 1 816 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 67


 1459 002c 4FF0FF35 		mov	r5, #-1
 1460              	.LVL193:
 1461              	.L161:
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1462              		.loc 1 819 0
 1463 0030 C4F83052 		str	r5, [r4, #560]
 1464 0034 EFE7     		b	.L160
 1465              	.LVL194:
 1466              	.L162:
 807:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1467              		.loc 1 807 0
 1468 0036 0026     		movs	r6, #0
 1469 0038 EDE7     		b	.L160
 1470              		.cfi_endproc
 1471              	.LFE141:
 1473              		.section	.text.check_fs,"ax",%progbits
 1474              		.align	1
 1475              		.syntax unified
 1476              		.thumb
 1477              		.thumb_func
 1478              		.fpu fpv4-sp-d16
 1480              	check_fs:
 1481              	.LFB162:
2239:Middlewares/Third_Party/FatFs/src/ff.c **** 
2240:Middlewares/Third_Party/FatFs/src/ff.c **** 
2241:Middlewares/Third_Party/FatFs/src/ff.c **** 
2242:Middlewares/Third_Party/FatFs/src/ff.c **** 
2243:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2244:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2245:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2246:Middlewares/Third_Party/FatFs/src/ff.c **** 
2247:Middlewares/Third_Party/FatFs/src/ff.c **** static
2248:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk 
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
2251:Middlewares/Third_Party/FatFs/src/ff.c **** )
2252:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1482              		.loc 1 2252 0
 1483              		.cfi_startproc
 1484              		@ args = 0, pretend = 0, frame = 0
 1485              		@ frame_needed = 0, uses_anonymous_args = 0
 1486              	.LVL195:
 1487 0000 10B5     		push	{r4, lr}
 1488              	.LCFI20:
 1489              		.cfi_def_cfa_offset 8
 1490              		.cfi_offset 4, -8
 1491              		.cfi_offset 14, -4
 1492 0002 0446     		mov	r4, r0
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 1493              		.loc 1 2253 0
 1494 0004 0023     		movs	r3, #0
 1495 0006 80F80432 		strb	r3, [r0, #516]
 1496 000a 4FF0FF33 		mov	r3, #-1
 1497 000e C0F83032 		str	r3, [r0, #560]
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
 1498              		.loc 1 2254 0
 1499 0012 FFF7FEFF 		bl	move_window
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 68


 1500              	.LVL196:
 1501 0016 08B1     		cbz	r0, .L173
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 3;
 1502              		.loc 1 2255 0
 1503 0018 0320     		movs	r0, #3
 1504 001a 10BD     		pop	{r4, pc}
 1505              	.LVL197:
 1506              	.L173:
2256:Middlewares/Third_Party/FatFs/src/ff.c **** 
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (LD_WORD(&fs->win.d8[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offs
 1507              		.loc 1 2257 0
 1508 001c 94F8FF21 		ldrb	r2, [r4, #511]	@ zero_extendqisi2
 1509 0020 94F8FE31 		ldrb	r3, [r4, #510]	@ zero_extendqisi2
 1510 0024 43EA0223 		orr	r3, r3, r2, lsl #8
 1511 0028 1BB2     		sxth	r3, r3
 1512 002a 184A     		ldr	r2, .L176
 1513 002c 9342     		cmp	r3, r2
 1514 002e 01D0     		beq	.L174
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 2;
 1515              		.loc 1 2258 0
 1516 0030 0220     		movs	r0, #2
 1517 0032 10BD     		pop	{r4, pc}
 1518              	.LVL198:
 1519              	.L174:
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
 1520              		.loc 1 2260 0
 1521 0034 94F83920 		ldrb	r2, [r4, #57]	@ zero_extendqisi2
 1522 0038 94F83830 		ldrb	r3, [r4, #56]	@ zero_extendqisi2
 1523 003c 1B04     		lsls	r3, r3, #16
 1524 003e 43EA0263 		orr	r3, r3, r2, lsl #24
 1525 0042 94F83720 		ldrb	r2, [r4, #55]	@ zero_extendqisi2
 1526 0046 43EA0223 		orr	r3, r3, r2, lsl #8
 1527 004a 94F83620 		ldrb	r2, [r4, #54]	@ zero_extendqisi2
 1528 004e 1343     		orrs	r3, r3, r2
 1529 0050 23F07F43 		bic	r3, r3, #-16777216
 1530 0054 0E4A     		ldr	r2, .L176+4
 1531 0056 9342     		cmp	r3, r2
 1532 0058 15D0     		beq	.L170
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 1533              		.loc 1 2262 0
 1534 005a 94F85520 		ldrb	r2, [r4, #85]	@ zero_extendqisi2
 1535 005e 94F85430 		ldrb	r3, [r4, #84]	@ zero_extendqisi2
 1536 0062 1B04     		lsls	r3, r3, #16
 1537 0064 43EA0263 		orr	r3, r3, r2, lsl #24
 1538 0068 94F85320 		ldrb	r2, [r4, #83]	@ zero_extendqisi2
 1539 006c 43EA0223 		orr	r3, r3, r2, lsl #8
 1540 0070 94F85220 		ldrb	r2, [r4, #82]	@ zero_extendqisi2
 1541 0074 1343     		orrs	r3, r3, r2
 1542 0076 23F07F43 		bic	r3, r3, #-16777216
 1543 007a 054A     		ldr	r2, .L176+4
 1544 007c 9342     		cmp	r3, r2
 1545 007e 01D0     		beq	.L175
2263:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
2264:Middlewares/Third_Party/FatFs/src/ff.c **** 
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 69


 1546              		.loc 1 2265 0
 1547 0080 0120     		movs	r0, #1
2266:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1548              		.loc 1 2266 0
 1549 0082 10BD     		pop	{r4, pc}
 1550              	.LVL199:
 1551              	.L175:
 1552 0084 10BD     		pop	{r4, pc}
 1553              	.LVL200:
 1554              	.L170:
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
 1555              		.loc 1 2261 0
 1556 0086 0020     		movs	r0, #0
 1557 0088 10BD     		pop	{r4, pc}
 1558              	.LVL201:
 1559              	.L177:
 1560 008a 00BF     		.align	2
 1561              	.L176:
 1562 008c 55AAFFFF 		.word	-21931
 1563 0090 46415400 		.word	5521734
 1564              		.cfi_endproc
 1565              	.LFE162:
 1567              		.section	.text.lock_fs,"ax",%progbits
 1568              		.align	1
 1569              		.syntax unified
 1570              		.thumb
 1571              		.thumb_func
 1572              		.fpu fpv4-sp-d16
 1574              	lock_fs:
 1575              	.LFB133:
 632:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_req_grant(fs->sobj);
 1576              		.loc 1 632 0
 1577              		.cfi_startproc
 1578              		@ args = 0, pretend = 0, frame = 0
 1579              		@ frame_needed = 0, uses_anonymous_args = 0
 1580              	.LVL202:
 1581 0000 08B5     		push	{r3, lr}
 1582              	.LCFI21:
 1583              		.cfi_def_cfa_offset 8
 1584              		.cfi_offset 3, -8
 1585              		.cfi_offset 14, -4
 633:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1586              		.loc 1 633 0
 1587 0002 D0F80C02 		ldr	r0, [r0, #524]
 1588              	.LVL203:
 1589 0006 FFF7FEFF 		bl	ff_req_grant
 1590              	.LVL204:
 634:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1591              		.loc 1 634 0
 1592 000a 08BD     		pop	{r3, pc}
 1593              		.cfi_endproc
 1594              	.LFE133:
 1596              		.section	.text.find_volume,"ax",%progbits
 1597              		.align	1
 1598              		.syntax unified
 1599              		.thumb
 1600              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 70


 1601              		.fpu fpv4-sp-d16
 1603              	find_volume:
 1604              	.LFB163:
2267:Middlewares/Third_Party/FatFs/src/ff.c **** 
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 
2271:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2272:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2273:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 
2275:Middlewares/Third_Party/FatFs/src/ff.c **** static
2276:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2279:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE wmode			/* !=0: Check write protection for write access */
2280:Middlewares/Third_Party/FatFs/src/ff.c **** )
2281:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1605              		.loc 1 2281 0
 1606              		.cfi_startproc
 1607              		@ args = 0, pretend = 0, frame = 16
 1608              		@ frame_needed = 0, uses_anonymous_args = 0
 1609              	.LVL205:
 1610 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1611              	.LCFI22:
 1612              		.cfi_def_cfa_offset 20
 1613              		.cfi_offset 4, -20
 1614              		.cfi_offset 5, -16
 1615              		.cfi_offset 6, -12
 1616              		.cfi_offset 7, -8
 1617              		.cfi_offset 14, -4
 1618 0002 85B0     		sub	sp, sp, #20
 1619              	.LCFI23:
 1620              		.cfi_def_cfa_offset 40
 1621 0004 0446     		mov	r4, r0
 1622 0006 1746     		mov	r7, r2
2282:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
2283:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2284:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
2285:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
2286:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
2287:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
2288:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2289:Middlewares/Third_Party/FatFs/src/ff.c **** 
2290:Middlewares/Third_Party/FatFs/src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number from the path name */
2292:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = 0;
 1623              		.loc 1 2292 0
 1624 0008 0023     		movs	r3, #0
 1625 000a 0360     		str	r3, [r0]
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 1626              		.loc 1 2293 0
 1627 000c 0846     		mov	r0, r1
 1628              	.LVL206:
 1629 000e FFF7FEFF 		bl	get_ldnumber
 1630              	.LVL207:
2294:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 71


 1631              		.loc 1 2294 0
 1632 0012 061E     		subs	r6, r0, #0
 1633 0014 C0F28E81 		blt	.L198
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check if the file system object is valid or not */
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
 1634              		.loc 1 2297 0
 1635 0018 C84B     		ldr	r3, .L233
 1636 001a 53F82650 		ldr	r5, [r3, r6, lsl #2]
 1637              	.LVL208:
2298:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1638              		.loc 1 2298 0
 1639 001e 002D     		cmp	r5, #0
 1640 0020 00F09681 		beq	.L199
2299:Middlewares/Third_Party/FatFs/src/ff.c **** 
2300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
 1641              		.loc 1 2300 0
 1642 0024 2846     		mov	r0, r5
 1643              	.LVL209:
 1644 0026 FFF7FEFF 		bl	lock_fs
 1645              	.LVL210:
 1646 002a 08B9     		cbnz	r0, .L224
 1647 002c 0F20     		movs	r0, #15
 1648 002e 82E1     		b	.L181
 1649              	.L224:
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 1650              		.loc 1 2301 0
 1651 0030 2560     		str	r5, [r4]
2302:Middlewares/Third_Party/FatFs/src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 1652              		.loc 1 2303 0
 1653 0032 95F80032 		ldrb	r3, [r5, #512]	@ zero_extendqisi2
 1654 0036 83B1     		cbz	r3, .L182
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 1655              		.loc 1 2304 0
 1656 0038 95F80102 		ldrb	r0, [r5, #513]	@ zero_extendqisi2
 1657 003c FFF7FEFF 		bl	disk_status
 1658              	.LVL211:
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1659              		.loc 1 2305 0
 1660 0040 10F0010F 		tst	r0, #1
 1661 0044 09D1     		bne	.L182
2306:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1662              		.loc 1 2306 0
 1663 0046 002F     		cmp	r7, #0
 1664 0048 00F08481 		beq	.L201
 1665              		.loc 1 2306 0 is_stmt 0 discriminator 1
 1666 004c 10F0040F 		tst	r0, #4
 1667 0050 01D0     		beq	.L225
2307:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 1668              		.loc 1 2307 0 is_stmt 1
 1669 0052 0A20     		movs	r0, #10
 1670              	.LVL212:
 1671 0054 6FE1     		b	.L181
 1672              	.LVL213:
 1673              	.L225:
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 72


 1674              		.loc 1 2308 0
 1675 0056 0020     		movs	r0, #0
 1676              	.LVL214:
 1677 0058 6DE1     		b	.L181
 1678              	.L182:
2309:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2310:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2311:Middlewares/Third_Party/FatFs/src/ff.c **** 
2312:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The file system object is not valid. */
2313:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
2314:Middlewares/Third_Party/FatFs/src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 1679              		.loc 1 2315 0
 1680 005a 0023     		movs	r3, #0
 1681 005c 85F80032 		strb	r3, [r5, #512]
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1682              		.loc 1 2316 0
 1683 0060 F0B2     		uxtb	r0, r6
 1684 0062 85F80102 		strb	r0, [r5, #513]
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1685              		.loc 1 2317 0
 1686 0066 FFF7FEFF 		bl	disk_initialize
 1687              	.LVL215:
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 1688              		.loc 1 2318 0
 1689 006a 10F0010F 		tst	r0, #1
 1690 006e 01D0     		beq	.L226
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1691              		.loc 1 2319 0
 1692 0070 0320     		movs	r0, #3
 1693              	.LVL216:
 1694 0072 60E1     		b	.L181
 1695              	.LVL217:
 1696              	.L226:
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 1697              		.loc 1 2320 0
 1698 0074 27B1     		cbz	r7, .L183
 1699              		.loc 1 2320 0 is_stmt 0 discriminator 1
 1700 0076 10F0040F 		tst	r0, #4
 1701 007a 01D0     		beq	.L183
2321:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 1702              		.loc 1 2321 0 is_stmt 1
 1703 007c 0A20     		movs	r0, #10
 1704              	.LVL218:
 1705 007e 5AE1     		b	.L181
 1706              	.LVL219:
 1707              	.L183:
2322:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
2323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK
2324:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| SS(fs) < _MIN_SS || SS(fs) > _MAX_SS) return FR_DISK_ERR;
2325:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 	bsect = 0;
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1708              		.loc 1 2328 0
 1709 0080 0021     		movs	r1, #0
 1710 0082 2846     		mov	r0, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 73


 1711              	.LVL220:
 1712 0084 FFF7FEFF 		bl	check_fs
 1713              	.LVL221:
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1714              		.loc 1 2329 0
 1715 0088 0128     		cmp	r0, #1
 1716 008a 21D0     		beq	.L205
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1717              		.loc 1 2327 0
 1718 008c 0026     		movs	r6, #0
 1719              	.LVL222:
 1720              	.L185:
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
2333:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2334:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i) i--;
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {								/* Find an FAT volume */
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
 1721              		.loc 1 2341 0
 1722 008e 0328     		cmp	r0, #3
 1723 0090 00F06281 		beq	.L208
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1724              		.loc 1 2342 0
 1725 0094 88B3     		cbz	r0, .L227
 1726 0096 0D20     		movs	r0, #13
 1727              	.LVL223:
 1728 0098 4DE1     		b	.L181
 1729              	.LVL224:
 1730              	.L206:
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1731              		.loc 1 2332 0
 1732 009a 0023     		movs	r3, #0
 1733              	.LVL225:
 1734              	.L186:
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1735              		.loc 1 2332 0 is_stmt 0 discriminator 4
 1736 009c 04AA     		add	r2, sp, #16
 1737 009e 02EB8102 		add	r2, r2, r1, lsl #2
 1738 00a2 42F8103C 		str	r3, [r2, #-16]
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
 1739              		.loc 1 2330 0 is_stmt 1 discriminator 4
 1740 00a6 0131     		adds	r1, r1, #1
 1741              	.LVL226:
 1742              	.L184:
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
 1743              		.loc 1 2330 0 is_stmt 0 discriminator 2
 1744 00a8 0329     		cmp	r1, #3
 1745 00aa 13D8     		bhi	.L228
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1746              		.loc 1 2331 0 is_stmt 1
 1747 00ac 0B01     		lsls	r3, r1, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 74


 1748 00ae 03F5DF73 		add	r3, r3, #446
 1749 00b2 2B44     		add	r3, r3, r5
 1750              	.LVL227:
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1751              		.loc 1 2332 0
 1752 00b4 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 1753 00b6 002A     		cmp	r2, #0
 1754 00b8 EFD0     		beq	.L206
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1755              		.loc 1 2332 0 is_stmt 0 discriminator 1
 1756 00ba D87A     		ldrb	r0, [r3, #11]	@ zero_extendqisi2
 1757 00bc 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 1758 00be 1204     		lsls	r2, r2, #16
 1759 00c0 42EA0062 		orr	r2, r2, r0, lsl #24
 1760 00c4 587A     		ldrb	r0, [r3, #9]	@ zero_extendqisi2
 1761 00c6 42EA0022 		orr	r2, r2, r0, lsl #8
 1762 00ca 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1763              	.LVL228:
 1764 00cc 1343     		orrs	r3, r3, r2
 1765 00ce E5E7     		b	.L186
 1766              	.LVL229:
 1767              	.L205:
 1768 00d0 0021     		movs	r1, #0
 1769 00d2 E9E7     		b	.L184
 1770              	.LVL230:
 1771              	.L228:
 1772 00d4 0024     		movs	r4, #0
 1773              	.LVL231:
 1774              	.L189:
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
 1775              		.loc 1 2337 0 is_stmt 1
 1776 00d6 04AB     		add	r3, sp, #16
 1777 00d8 03EB8403 		add	r3, r3, r4, lsl #2
 1778 00dc 53F8106C 		ldr	r6, [r3, #-16]
 1779              	.LVL232:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1780              		.loc 1 2338 0
 1781 00e0 36B9     		cbnz	r6, .L229
 1782 00e2 0220     		movs	r0, #2
 1783              	.L188:
 1784              	.LVL233:
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1785              		.loc 1 2339 0 discriminator 4
 1786 00e4 0028     		cmp	r0, #0
 1787 00e6 D2D0     		beq	.L185
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1788              		.loc 1 2339 0 is_stmt 0 discriminator 1
 1789 00e8 0134     		adds	r4, r4, #1
 1790              	.LVL234:
 1791 00ea 032C     		cmp	r4, #3
 1792 00ec F3D9     		bls	.L189
 1793 00ee CEE7     		b	.L185
 1794              	.LVL235:
 1795              	.L229:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1796              		.loc 1 2338 0 is_stmt 1 discriminator 1
 1797 00f0 3146     		mov	r1, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 75


 1798 00f2 2846     		mov	r0, r5
 1799 00f4 FFF7FEFF 		bl	check_fs
 1800              	.LVL236:
 1801 00f8 F4E7     		b	.L188
 1802              	.LVL237:
 1803              	.L227:
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 
2344:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* An FAT volume is found. Following code initializes the file system object */
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 
2346:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (LD_WORD(fs->win.d8 + BPB_BytsPerSec) != SS(fs))	/* (BPB_BytsPerSec must be equal to the physic
 1804              		.loc 1 2346 0
 1805 00fa 2A7B     		ldrb	r2, [r5, #12]	@ zero_extendqisi2
 1806 00fc EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 1807 00fe 43EA0223 		orr	r3, r3, r2, lsl #8
 1808 0102 1BB2     		sxth	r3, r3
 1809 0104 B3F5007F 		cmp	r3, #512
 1810 0108 01D0     		beq	.L230
2347:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1811              		.loc 1 2347 0
 1812 010a 0D20     		movs	r0, #13
 1813              	.LVL238:
 1814 010c 13E1     		b	.L181
 1815              	.LVL239:
 1816              	.L230:
2348:Middlewares/Third_Party/FatFs/src/ff.c **** 
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	fasize = LD_WORD(fs->win.d8 + BPB_FATSz16);			/* Number of sectors per FAT */
 1817              		.loc 1 2349 0
 1818 010e EB7D     		ldrb	r3, [r5, #23]	@ zero_extendqisi2
 1819 0110 AA7D     		ldrb	r2, [r5, #22]	@ zero_extendqisi2
 1820              	.LVL240:
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
 1821              		.loc 1 2350 0
 1822 0112 52EA0322 		orrs	r2, r2, r3, lsl #8
 1823              	.LVL241:
 1824 0116 0DD1     		bne	.L190
 1825              		.loc 1 2350 0 is_stmt 0 discriminator 1
 1826 0118 95F82730 		ldrb	r3, [r5, #39]	@ zero_extendqisi2
 1827 011c 95F82620 		ldrb	r2, [r5, #38]	@ zero_extendqisi2
 1828              	.LVL242:
 1829 0120 1204     		lsls	r2, r2, #16
 1830 0122 42EA0362 		orr	r2, r2, r3, lsl #24
 1831 0126 95F82530 		ldrb	r3, [r5, #37]	@ zero_extendqisi2
 1832 012a 42EA0322 		orr	r2, r2, r3, lsl #8
 1833 012e 95F82430 		ldrb	r3, [r5, #36]	@ zero_extendqisi2
 1834 0132 1A43     		orrs	r2, r2, r3
 1835              	.LVL243:
 1836              	.L190:
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsize = fasize;
 1837              		.loc 1 2351 0 is_stmt 1
 1838 0134 C5F81C22 		str	r2, [r5, #540]
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_fats = fs->win.d8[BPB_NumFATs];					/* Number of FAT copies */
 1839              		.loc 1 2353 0
 1840 0138 297C     		ldrb	r1, [r5, #16]	@ zero_extendqisi2
 1841 013a 85F80312 		strb	r1, [r5, #515]
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1842              		.loc 1 2354 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 76


 1843 013e 4B1E     		subs	r3, r1, #1
 1844 0140 DBB2     		uxtb	r3, r3
 1845 0142 012B     		cmp	r3, #1
 1846 0144 01D9     		bls	.L231
2355:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1847              		.loc 1 2355 0
 1848 0146 0D20     		movs	r0, #13
 1849              	.LVL244:
 1850 0148 F5E0     		b	.L181
 1851              	.LVL245:
 1852              	.L231:
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
 1853              		.loc 1 2356 0
 1854 014a 01FB02F1 		mul	r1, r1, r2
 1855              	.LVL246:
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->csize = fs->win.d8[BPB_SecPerClus];				/* Number of sectors per cluster */
 1856              		.loc 1 2358 0
 1857 014e 6C7B     		ldrb	r4, [r5, #13]	@ zero_extendqisi2
 1858 0150 85F80242 		strb	r4, [r5, #514]
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1859              		.loc 1 2359 0
 1860 0154 0CB9     		cbnz	r4, .L232
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1861              		.loc 1 2360 0
 1862 0156 0D20     		movs	r0, #13
 1863              	.LVL247:
 1864 0158 EDE0     		b	.L181
 1865              	.LVL248:
 1866              	.L232:
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1867              		.loc 1 2359 0 discriminator 1
 1868 015a 631E     		subs	r3, r4, #1
 1869 015c 1C42     		tst	r4, r3
 1870 015e 40F0FD80 		bne	.L213
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win.d8 + BPB_RootEntCnt);	/* Number of root directory entries */
 1871              		.loc 1 2362 0
 1872 0162 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 1873 0164 687C     		ldrb	r0, [r5, #17]	@ zero_extendqisi2
 1874              	.LVL249:
 1875 0166 40EA0320 		orr	r0, r0, r3, lsl #8
 1876 016a A5F80802 		strh	r0, [r5, #520]	@ movhi
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
 1877              		.loc 1 2363 0
 1878 016e 10F00F0F 		tst	r0, #15
 1879 0172 40F0F580 		bne	.L214
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2365:Middlewares/Third_Party/FatFs/src/ff.c **** 
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	tsect = LD_WORD(fs->win.d8 + BPB_TotSec16);			/* Number of sectors on the volume */
 1880              		.loc 1 2366 0
 1881 0176 2F7D     		ldrb	r7, [r5, #20]	@ zero_extendqisi2
 1882 0178 EB7C     		ldrb	r3, [r5, #19]	@ zero_extendqisi2
 1883              	.LVL250:
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win.d8 + BPB_TotSec32);
 1884              		.loc 1 2367 0
 1885 017a 53EA0723 		orrs	r3, r3, r7, lsl #8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 77


 1886              	.LVL251:
 1887 017e 0DD1     		bne	.L191
 1888              		.loc 1 2367 0 is_stmt 0 discriminator 1
 1889 0180 95F82370 		ldrb	r7, [r5, #35]	@ zero_extendqisi2
 1890 0184 95F82230 		ldrb	r3, [r5, #34]	@ zero_extendqisi2
 1891              	.LVL252:
 1892 0188 1B04     		lsls	r3, r3, #16
 1893 018a 43EA0763 		orr	r3, r3, r7, lsl #24
 1894 018e 95F82170 		ldrb	r7, [r5, #33]	@ zero_extendqisi2
 1895 0192 43EA0723 		orr	r3, r3, r7, lsl #8
 1896 0196 95F82070 		ldrb	r7, [r5, #32]	@ zero_extendqisi2
 1897 019a 3B43     		orrs	r3, r3, r7
 1898              	.LVL253:
 1899              	.L191:
2368:Middlewares/Third_Party/FatFs/src/ff.c **** 
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 	nrsv = LD_WORD(fs->win.d8 + BPB_RsvdSecCnt);			/* Number of reserved sectors */
 1900              		.loc 1 2369 0 is_stmt 1
 1901 019c 95F80FE0 		ldrb	lr, [r5, #15]	@ zero_extendqisi2
 1902 01a0 AF7B     		ldrb	r7, [r5, #14]	@ zero_extendqisi2
 1903              	.LVL254:
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1904              		.loc 1 2370 0
 1905 01a2 57EA0E27 		orrs	r7, r7, lr, lsl #8
 1906              	.LVL255:
 1907 01a6 00F0DD80 		beq	.L215
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine the FAT sub type */
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIRE);	/* RSV + FAT + DIR */
 1908              		.loc 1 2373 0
 1909 01aa 01EB070E 		add	lr, r1, r7
 1910              	.LVL256:
 1911 01ae 0EEB101E 		add	lr, lr, r0, lsr #4
 1912              	.LVL257:
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1913              		.loc 1 2374 0
 1914 01b2 7345     		cmp	r3, lr
 1915 01b4 C0F0D880 		bcc	.L216
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1916              		.loc 1 2375 0
 1917 01b8 A3EB0E03 		sub	r3, r3, lr
 1918              	.LVL258:
 1919 01bc B3FBF4F3 		udiv	r3, r3, r4
 1920              	.LVL259:
2376:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1921              		.loc 1 2376 0
 1922 01c0 002B     		cmp	r3, #0
 1923 01c2 00F0D380 		beq	.L217
 1924              	.LVL260:
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
2378:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 1925              		.loc 1 2378 0
 1926 01c6 40F6F574 		movw	r4, #4085
 1927 01ca A342     		cmp	r3, r4
 1928 01cc 00F2A180 		bhi	.L218
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
 1929              		.loc 1 2377 0
 1930 01d0 0124     		movs	r4, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 78


 1931              	.L192:
 1932              	.LVL261:
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1933              		.loc 1 2379 0
 1934 01d2 4FF6F57C 		movw	ip, #65525
 1935 01d6 6345     		cmp	r3, ip
 1936 01d8 00D9     		bls	.L193
 1937 01da 0324     		movs	r4, #3
 1938              	.LVL262:
 1939              	.L193:
2380:Middlewares/Third_Party/FatFs/src/ff.c **** 
2381:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Boundaries and Limits */
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 1940              		.loc 1 2382 0
 1941 01dc 0233     		adds	r3, r3, #2
 1942              	.LVL263:
 1943 01de C5F81832 		str	r3, [r5, #536]
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1944              		.loc 1 2383 0
 1945 01e2 C5F82062 		str	r6, [r5, #544]
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1946              		.loc 1 2384 0
 1947 01e6 3744     		add	r7, r7, r6
 1948 01e8 C5F82472 		str	r7, [r5, #548]
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1949              		.loc 1 2385 0
 1950 01ec B644     		add	lr, lr, r6
 1951              	.LVL264:
 1952 01ee C5F82CE2 		str	lr, [r5, #556]
2386:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1953              		.loc 1 2386 0
 1954 01f2 032C     		cmp	r4, #3
 1955 01f4 40F08F80 		bne	.L194
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 1956              		.loc 1 2387 0
 1957 01f8 0028     		cmp	r0, #0
 1958 01fa 40F0B980 		bne	.L220
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
 1959              		.loc 1 2388 0
 1960 01fe 95F82F00 		ldrb	r0, [r5, #47]	@ zero_extendqisi2
 1961              	.LVL265:
 1962 0202 95F82E10 		ldrb	r1, [r5, #46]	@ zero_extendqisi2
 1963              	.LVL266:
 1964 0206 0904     		lsls	r1, r1, #16
 1965 0208 41EA0061 		orr	r1, r1, r0, lsl #24
 1966 020c 95F82D00 		ldrb	r0, [r5, #45]	@ zero_extendqisi2
 1967 0210 41EA0021 		orr	r1, r1, r0, lsl #8
 1968 0214 95F82C00 		ldrb	r0, [r5, #44]	@ zero_extendqisi2
 1969 0218 0143     		orrs	r1, r1, r0
 1970 021a C5F82812 		str	r1, [r5, #552]
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1971              		.loc 1 2389 0
 1972 021e 9B00     		lsls	r3, r3, #2
 1973              	.LVL267:
 1974              	.L195:
2390:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 79


2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
2393:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
2395:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than the size nee
 1975              		.loc 1 2396 0
 1976 0220 03F2FF13 		addw	r3, r3, #511
 1977              	.LVL268:
 1978 0224 B2EB532F 		cmp	r2, r3, lsr #9
 1979 0228 C0F0A680 		bcc	.L222
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2398:Middlewares/Third_Party/FatFs/src/ff.c **** 
2399:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize cluster allocation information */
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
 1980              		.loc 1 2401 0
 1981 022c 4FF0FF33 		mov	r3, #-1
 1982              	.LVL269:
 1983 0230 C5F81432 		str	r3, [r5, #532]
 1984 0234 C5F81032 		str	r3, [r5, #528]
2402:Middlewares/Third_Party/FatFs/src/ff.c **** 
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get fsinfo if available */
2404:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsi_flag = 0x80;
 1985              		.loc 1 2404 0
 1986 0238 8023     		movs	r3, #128
 1987 023a 85F80532 		strb	r3, [r5, #517]
2405:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
 1988              		.loc 1 2406 0
 1989 023e 032C     		cmp	r4, #3
 1990 0240 59D1     		bne	.L197
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& LD_WORD(fs->win.d8 + BPB_FSInfo) == 1
 1991              		.loc 1 2407 0
 1992 0242 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 1993              	.LVL270:
 1994 0246 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 1995 024a 43EA0223 		orr	r3, r3, r2, lsl #8
 1996 024e 1BB2     		sxth	r3, r3
 1997 0250 012B     		cmp	r3, #1
 1998 0252 50D1     		bne	.L197
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1999              		.loc 1 2408 0
 2000 0254 711C     		adds	r1, r6, #1
 2001 0256 2846     		mov	r0, r5
 2002 0258 FFF7FEFF 		bl	move_window
 2003              	.LVL271:
 2004 025c 0028     		cmp	r0, #0
 2005 025e 4AD1     		bne	.L197
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0;
 2006              		.loc 1 2410 0
 2007 0260 0023     		movs	r3, #0
 2008 0262 85F80532 		strb	r3, [r5, #517]
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2009              		.loc 1 2411 0
 2010 0266 95F8FF21 		ldrb	r2, [r5, #511]	@ zero_extendqisi2
 2011 026a 95F8FE31 		ldrb	r3, [r5, #510]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 80


 2012 026e 43EA0223 		orr	r3, r3, r2, lsl #8
 2013 0272 1BB2     		sxth	r3, r3
 2014 0274 324A     		ldr	r2, .L233+4
 2015 0276 9342     		cmp	r3, r2
 2016 0278 3DD1     		bne	.L197
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
 2017              		.loc 1 2412 0
 2018 027a EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
 2019 027c AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 2020 027e 1B04     		lsls	r3, r3, #16
 2021 0280 43EA0263 		orr	r3, r3, r2, lsl #24
 2022 0284 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 2023 0286 43EA0223 		orr	r3, r3, r2, lsl #8
 2024 028a 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 2025 028c 1343     		orrs	r3, r3, r2
 2026 028e 2D4A     		ldr	r2, .L233+8
 2027 0290 9342     		cmp	r3, r2
 2028 0292 30D1     		bne	.L197
2413:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_StrucSig) == 0x61417272)
 2029              		.loc 1 2413 0
 2030 0294 95F8E721 		ldrb	r2, [r5, #487]	@ zero_extendqisi2
 2031 0298 95F8E631 		ldrb	r3, [r5, #486]	@ zero_extendqisi2
 2032 029c 1B04     		lsls	r3, r3, #16
 2033 029e 43EA0263 		orr	r3, r3, r2, lsl #24
 2034 02a2 95F8E521 		ldrb	r2, [r5, #485]	@ zero_extendqisi2
 2035 02a6 43EA0223 		orr	r3, r3, r2, lsl #8
 2036 02aa 95F8E421 		ldrb	r2, [r5, #484]	@ zero_extendqisi2
 2037 02ae 1343     		orrs	r3, r3, r2
 2038 02b0 254A     		ldr	r2, .L233+12
 2039 02b2 9342     		cmp	r3, r2
 2040 02b4 1FD1     		bne	.L197
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
2415:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust = LD_DWORD(fs->win.d8 + FSI_Free_Count);
 2041              		.loc 1 2416 0
 2042 02b6 95F8EB21 		ldrb	r2, [r5, #491]	@ zero_extendqisi2
 2043 02ba 95F8EA31 		ldrb	r3, [r5, #490]	@ zero_extendqisi2
 2044 02be 1B04     		lsls	r3, r3, #16
 2045 02c0 43EA0263 		orr	r3, r3, r2, lsl #24
 2046 02c4 95F8E921 		ldrb	r2, [r5, #489]	@ zero_extendqisi2
 2047 02c8 43EA0223 		orr	r3, r3, r2, lsl #8
 2048 02cc 95F8E821 		ldrb	r2, [r5, #488]	@ zero_extendqisi2
 2049 02d0 1343     		orrs	r3, r3, r2
 2050 02d2 C5F81432 		str	r3, [r5, #532]
2417:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2418:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->last_clust = LD_DWORD(fs->win.d8 + FSI_Nxt_Free);
 2051              		.loc 1 2419 0
 2052 02d6 95F8EF21 		ldrb	r2, [r5, #495]	@ zero_extendqisi2
 2053 02da 95F8EE31 		ldrb	r3, [r5, #494]	@ zero_extendqisi2
 2054 02de 1B04     		lsls	r3, r3, #16
 2055 02e0 43EA0263 		orr	r3, r3, r2, lsl #24
 2056 02e4 95F8ED21 		ldrb	r2, [r5, #493]	@ zero_extendqisi2
 2057 02e8 43EA0223 		orr	r3, r3, r2, lsl #8
 2058 02ec 95F8EC21 		ldrb	r2, [r5, #492]	@ zero_extendqisi2
 2059 02f0 1343     		orrs	r3, r3, r2
 2060 02f2 C5F81032 		str	r3, [r5, #528]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 81


 2061              	.L197:
2420:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2422:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2423:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2424:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = fmt;	/* FAT sub-type */
 2062              		.loc 1 2425 0
 2063 02f6 85F80042 		strb	r4, [r5, #512]
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
 2064              		.loc 1 2426 0
 2065 02fa 144A     		ldr	r2, .L233+16
 2066 02fc 1388     		ldrh	r3, [r2]
 2067 02fe 0133     		adds	r3, r3, #1
 2068 0300 9BB2     		uxth	r3, r3
 2069 0302 1380     		strh	r3, [r2]	@ movhi
 2070 0304 A5F80632 		strh	r3, [r5, #518]	@ movhi
2427:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
2428:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->cdir = 0;		/* Set current directory to root */
2429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK			/* Clear file lock semaphores */
2431:Middlewares/Third_Party/FatFs/src/ff.c **** 	clear_lock(fs);
 2071              		.loc 1 2431 0
 2072 0308 2846     		mov	r0, r5
 2073 030a FFF7FEFF 		bl	clear_lock
 2074              	.LVL272:
2432:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2433:Middlewares/Third_Party/FatFs/src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
 2075              		.loc 1 2434 0
 2076 030e 0020     		movs	r0, #0
 2077 0310 11E0     		b	.L181
 2078              	.LVL273:
 2079              	.L218:
2378:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 2080              		.loc 1 2378 0
 2081 0312 0224     		movs	r4, #2
 2082 0314 5DE7     		b	.L192
 2083              	.LVL274:
 2084              	.L194:
2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 2085              		.loc 1 2391 0
 2086 0316 68B3     		cbz	r0, .L221
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 2087              		.loc 1 2392 0
 2088 0318 3944     		add	r1, r1, r7
 2089              	.LVL275:
 2090 031a C5F82812 		str	r1, [r5, #552]
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2091              		.loc 1 2394 0
 2092 031e 022C     		cmp	r4, #2
 2093 0320 01D1     		bne	.L196
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2094              		.loc 1 2394 0 is_stmt 0 discriminator 1
 2095 0322 5B00     		lsls	r3, r3, #1
 2096              	.LVL276:
 2097 0324 7CE7     		b	.L195
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 82


 2098              	.LVL277:
 2099              	.L196:
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2100              		.loc 1 2394 0 discriminator 2
 2101 0326 03EB4301 		add	r1, r3, r3, lsl #1
 2102 032a 03F00103 		and	r3, r3, #1
 2103              	.LVL278:
 2104 032e 03EB5103 		add	r3, r3, r1, lsr #1
 2105 0332 75E7     		b	.L195
 2106              	.LVL279:
 2107              	.L198:
2294:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2108              		.loc 1 2294 0 is_stmt 1
 2109 0334 0B20     		movs	r0, #11
 2110              	.LVL280:
 2111              	.L181:
2435:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2112              		.loc 1 2435 0
 2113 0336 05B0     		add	sp, sp, #20
 2114              	.LCFI24:
 2115              		.cfi_remember_state
 2116              		.cfi_def_cfa_offset 20
 2117              		@ sp needed
 2118 0338 F0BD     		pop	{r4, r5, r6, r7, pc}
 2119              	.L234:
 2120 033a 00BF     		.align	2
 2121              	.L233:
 2122 033c 00000000 		.word	.LANCHOR2
 2123 0340 55AAFFFF 		.word	-21931
 2124 0344 52526141 		.word	1096897106
 2125 0348 72724161 		.word	1631679090
 2126 034c 00000000 		.word	.LANCHOR3
 2127              	.LVL281:
 2128              	.L199:
 2129              	.LCFI25:
 2130              		.cfi_restore_state
2298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2131              		.loc 1 2298 0
 2132 0350 0C20     		movs	r0, #12
 2133              	.LVL282:
 2134 0352 F0E7     		b	.L181
 2135              	.LVL283:
 2136              	.L201:
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2137              		.loc 1 2308 0
 2138 0354 0020     		movs	r0, #0
 2139              	.LVL284:
 2140 0356 EEE7     		b	.L181
 2141              	.LVL285:
 2142              	.L208:
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 2143              		.loc 1 2341 0
 2144 0358 0120     		movs	r0, #1
 2145              	.LVL286:
 2146 035a ECE7     		b	.L181
 2147              	.LVL287:
 2148              	.L213:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 83


2360:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2149              		.loc 1 2360 0
 2150 035c 0D20     		movs	r0, #13
 2151              	.LVL288:
 2152 035e EAE7     		b	.L181
 2153              	.L214:
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2154              		.loc 1 2364 0
 2155 0360 0D20     		movs	r0, #13
 2156 0362 E8E7     		b	.L181
 2157              	.LVL289:
 2158              	.L215:
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2159              		.loc 1 2370 0
 2160 0364 0D20     		movs	r0, #13
 2161 0366 E6E7     		b	.L181
 2162              	.LVL290:
 2163              	.L216:
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 2164              		.loc 1 2374 0
 2165 0368 0D20     		movs	r0, #13
 2166 036a E4E7     		b	.L181
 2167              	.LVL291:
 2168              	.L217:
2376:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
 2169              		.loc 1 2376 0
 2170 036c 0D20     		movs	r0, #13
 2171 036e E2E7     		b	.L181
 2172              	.LVL292:
 2173              	.L220:
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
 2174              		.loc 1 2387 0
 2175 0370 0D20     		movs	r0, #13
 2176              	.LVL293:
 2177 0372 E0E7     		b	.L181
 2178              	.LVL294:
 2179              	.L221:
2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 2180              		.loc 1 2391 0
 2181 0374 0D20     		movs	r0, #13
 2182              	.LVL295:
 2183 0376 DEE7     		b	.L181
 2184              	.LVL296:
 2185              	.L222:
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2186              		.loc 1 2397 0
 2187 0378 0D20     		movs	r0, #13
 2188 037a DCE7     		b	.L181
 2189              		.cfi_endproc
 2190              	.LFE163:
 2192              		.section	.text.validate,"ax",%progbits
 2193              		.align	1
 2194              		.syntax unified
 2195              		.thumb
 2196              		.thumb_func
 2197              		.fpu fpv4-sp-d16
 2199              	validate:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 84


 2200              	.LFB164:
2436:Middlewares/Third_Party/FatFs/src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/src/ff.c **** 
2439:Middlewares/Third_Party/FatFs/src/ff.c **** 
2440:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2441:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if the file/directory object is valid or not                    */
2442:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2443:Middlewares/Third_Party/FatFs/src/ff.c **** 
2444:Middlewares/Third_Party/FatFs/src/ff.c **** static
2445:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
2446:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* obj		/* Pointer to the object FIL/DIR to check validity */
2447:Middlewares/Third_Party/FatFs/src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/src/ff.c **** {
 2201              		.loc 1 2448 0
 2202              		.cfi_startproc
 2203              		@ args = 0, pretend = 0, frame = 0
 2204              		@ frame_needed = 0, uses_anonymous_args = 0
 2205              	.LVL297:
2449:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
2450:Middlewares/Third_Party/FatFs/src/ff.c **** 
2451:Middlewares/Third_Party/FatFs/src/ff.c **** 
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id || (disk_status(fil->fs->drv) 
 2206              		.loc 1 2452 0
 2207 0000 08B3     		cbz	r0, .L237
2448:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
 2208              		.loc 1 2448 0 discriminator 1
 2209 0002 10B5     		push	{r4, lr}
 2210              	.LCFI26:
 2211              		.cfi_def_cfa_offset 8
 2212              		.cfi_offset 4, -8
 2213              		.cfi_offset 14, -4
 2214 0004 0446     		mov	r4, r0
 2215              		.loc 1 2452 0 discriminator 1
 2216 0006 D0F80032 		ldr	r3, [r0, #512]
 2217 000a F3B1     		cbz	r3, .L238
 2218              		.loc 1 2452 0 is_stmt 0 discriminator 2
 2219 000c 93F80012 		ldrb	r1, [r3, #512]	@ zero_extendqisi2
 2220 0010 09B9     		cbnz	r1, .L247
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 2221              		.loc 1 2453 0 is_stmt 1
 2222 0012 0920     		movs	r0, #9
 2223              	.LVL298:
 2224 0014 10BD     		pop	{r4, pc}
 2225              	.LVL299:
 2226              	.L247:
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 2227              		.loc 1 2452 0 discriminator 3
 2228 0016 B3F80602 		ldrh	r0, [r3, #518]
 2229              	.LVL300:
 2230 001a B4F80412 		ldrh	r1, [r4, #516]
 2231 001e 8842     		cmp	r0, r1
 2232 0020 01D0     		beq	.L248
 2233              		.loc 1 2453 0
 2234 0022 0920     		movs	r0, #9
 2235 0024 10BD     		pop	{r4, pc}
 2236              	.LVL301:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 85


 2237              	.L248:
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 2238              		.loc 1 2452 0 discriminator 4
 2239 0026 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 2240 002a FFF7FEFF 		bl	disk_status
 2241              	.LVL302:
 2242 002e 10F0010F 		tst	r0, #1
 2243 0032 01D0     		beq	.L249
 2244              		.loc 1 2453 0
 2245 0034 0920     		movs	r0, #9
 2246 0036 10BD     		pop	{r4, pc}
 2247              	.LVL303:
 2248              	.L249:
2454:Middlewares/Third_Party/FatFs/src/ff.c **** 
2455:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fil->fs);		/* Lock file system */
 2249              		.loc 1 2455 0
 2250 0038 D4F80002 		ldr	r0, [r4, #512]
 2251 003c FFF7FEFF 		bl	lock_fs
 2252              	.LVL304:
 2253 0040 28B9     		cbnz	r0, .L242
 2254 0042 0F20     		movs	r0, #15
 2255 0044 10BD     		pop	{r4, pc}
 2256              	.LVL305:
 2257              	.L237:
 2258              	.LCFI27:
 2259              		.cfi_def_cfa_offset 0
 2260              		.cfi_restore 4
 2261              		.cfi_restore 14
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2262              		.loc 1 2453 0
 2263 0046 0920     		movs	r0, #9
 2264              	.LVL306:
 2265 0048 7047     		bx	lr
 2266              	.LVL307:
 2267              	.L238:
 2268              	.LCFI28:
 2269              		.cfi_def_cfa_offset 8
 2270              		.cfi_offset 4, -8
 2271              		.cfi_offset 14, -4
 2272 004a 0920     		movs	r0, #9
 2273              	.LVL308:
 2274 004c 10BD     		pop	{r4, pc}
 2275              	.LVL309:
 2276              	.L242:
2456:Middlewares/Third_Party/FatFs/src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
 2277              		.loc 1 2457 0
 2278 004e 0020     		movs	r0, #0
2458:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2279              		.loc 1 2458 0
 2280 0050 10BD     		pop	{r4, pc}
 2281              		.cfi_endproc
 2282              	.LFE164:
 2284              		.section	.text.unlock_fs,"ax",%progbits
 2285              		.align	1
 2286              		.syntax unified
 2287              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 86


 2288              		.thumb_func
 2289              		.fpu fpv4-sp-d16
 2291              	unlock_fs:
 2292              	.LFB134:
 642:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs &&
 2293              		.loc 1 642 0
 2294              		.cfi_startproc
 2295              		@ args = 0, pretend = 0, frame = 0
 2296              		@ frame_needed = 0, uses_anonymous_args = 0
 2297              	.LVL310:
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_NOT_ENABLED &&
 2298              		.loc 1 643 0
 2299 0000 68B1     		cbz	r0, .L253
 642:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs &&
 2300              		.loc 1 642 0 discriminator 1
 2301 0002 08B5     		push	{r3, lr}
 2302              	.LCFI29:
 2303              		.cfi_def_cfa_offset 8
 2304              		.cfi_offset 3, -8
 2305              		.cfi_offset 14, -4
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_NOT_ENABLED &&
 2306              		.loc 1 643 0 discriminator 1
 2307 0004 0C29     		cmp	r1, #12
 2308 0006 09D0     		beq	.L250
 644:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_DRIVE &&
 2309              		.loc 1 644 0
 2310 0008 0B29     		cmp	r1, #11
 2311 000a 07D0     		beq	.L250
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_OBJECT &&
 2312              		.loc 1 645 0
 2313 000c 0929     		cmp	r1, #9
 2314 000e 05D0     		beq	.L250
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_TIMEOUT) {
 2315              		.loc 1 646 0
 2316 0010 0F29     		cmp	r1, #15
 2317 0012 03D0     		beq	.L250
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2318              		.loc 1 648 0
 2319 0014 D0F80C02 		ldr	r0, [r0, #524]
 2320              	.LVL311:
 2321 0018 FFF7FEFF 		bl	ff_rel_grant
 2322              	.LVL312:
 2323              	.L250:
 2324 001c 08BD     		pop	{r3, pc}
 2325              	.LVL313:
 2326              	.L253:
 2327              	.LCFI30:
 2328              		.cfi_def_cfa_offset 0
 2329              		.cfi_restore 3
 2330              		.cfi_restore 14
 2331 001e 7047     		bx	lr
 2332              		.cfi_endproc
 2333              	.LFE134:
 2335              		.section	.text.sync_fs,"ax",%progbits
 2336              		.align	1
 2337              		.syntax unified
 2338              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 87


 2339              		.thumb_func
 2340              		.fpu fpv4-sp-d16
 2342              	sync_fs:
 2343              	.LFB142:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 2344              		.loc 1 836 0
 2345              		.cfi_startproc
 2346              		@ args = 0, pretend = 0, frame = 0
 2347              		@ frame_needed = 0, uses_anonymous_args = 0
 2348              	.LVL314:
 2349 0000 38B5     		push	{r3, r4, r5, lr}
 2350              	.LCFI31:
 2351              		.cfi_def_cfa_offset 16
 2352              		.cfi_offset 3, -16
 2353              		.cfi_offset 4, -12
 2354              		.cfi_offset 5, -8
 2355              		.cfi_offset 14, -4
 2356 0002 0446     		mov	r4, r0
 840:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 2357              		.loc 1 840 0
 2358 0004 FFF7FEFF 		bl	sync_window
 2359              	.LVL315:
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSINFO sector if needed */
 2360              		.loc 1 841 0
 2361 0008 0546     		mov	r5, r0
 2362 000a 58B9     		cbnz	r0, .L257
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 2363              		.loc 1 843 0
 2364 000c 94F80032 		ldrb	r3, [r4, #512]	@ zero_extendqisi2
 2365 0010 032B     		cmp	r3, #3
 2366 0012 09D0     		beq	.L261
 2367              	.LVL316:
 2368              	.L258:
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 2369              		.loc 1 857 0
 2370 0014 0022     		movs	r2, #0
 2371 0016 1146     		mov	r1, r2
 2372 0018 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 2373 001c FFF7FEFF 		bl	disk_ioctl
 2374              	.LVL317:
 2375 0020 00B1     		cbz	r0, .L257
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2376              		.loc 1 858 0
 2377 0022 0125     		movs	r5, #1
 2378              	.L257:
 2379              	.LVL318:
 862:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2380              		.loc 1 862 0
 2381 0024 2846     		mov	r0, r5
 2382 0026 38BD     		pop	{r3, r4, r5, pc}
 2383              	.LVL319:
 2384              	.L261:
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 2385              		.loc 1 843 0 discriminator 1
 2386 0028 94F80532 		ldrb	r3, [r4, #517]	@ zero_extendqisi2
 2387 002c 012B     		cmp	r3, #1
 2388 002e F1D1     		bne	.L258
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 88


 845:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);
 2389              		.loc 1 845 0
 2390 0030 4FF40072 		mov	r2, #512
 2391 0034 0021     		movs	r1, #0
 2392 0036 2046     		mov	r0, r4
 2393              	.LVL320:
 2394 0038 FFF7FEFF 		bl	mem_set
 2395              	.LVL321:
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 2396              		.loc 1 846 0
 2397 003c 5523     		movs	r3, #85
 2398 003e 84F8FE31 		strb	r3, [r4, #510]
 2399 0042 AA23     		movs	r3, #170
 2400 0044 84F8FF31 		strb	r3, [r4, #511]
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 2401              		.loc 1 847 0
 2402 0048 5223     		movs	r3, #82
 2403 004a 2370     		strb	r3, [r4]
 2404 004c 6370     		strb	r3, [r4, #1]
 2405 004e 6123     		movs	r3, #97
 2406 0050 A370     		strb	r3, [r4, #2]
 2407 0052 4122     		movs	r2, #65
 2408 0054 E270     		strb	r2, [r4, #3]
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 2409              		.loc 1 848 0
 2410 0056 7221     		movs	r1, #114
 2411 0058 84F8E411 		strb	r1, [r4, #484]
 2412 005c 84F8E511 		strb	r1, [r4, #485]
 2413 0060 84F8E621 		strb	r2, [r4, #486]
 2414 0064 84F8E731 		strb	r3, [r4, #487]
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 2415              		.loc 1 849 0
 2416 0068 D4F81432 		ldr	r3, [r4, #532]
 2417 006c 84F8E831 		strb	r3, [r4, #488]
 2418 0070 C3F30722 		ubfx	r2, r3, #8, #8
 2419 0074 84F8E921 		strb	r2, [r4, #489]
 2420 0078 C3F30742 		ubfx	r2, r3, #16, #8
 2421 007c 84F8EA21 		strb	r2, [r4, #490]
 2422 0080 1B0E     		lsrs	r3, r3, #24
 2423 0082 84F8EB31 		strb	r3, [r4, #491]
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 2424              		.loc 1 850 0
 2425 0086 D4F81032 		ldr	r3, [r4, #528]
 2426 008a 84F8EC31 		strb	r3, [r4, #492]
 2427 008e C3F30722 		ubfx	r2, r3, #8, #8
 2428 0092 84F8ED21 		strb	r2, [r4, #493]
 2429 0096 C3F30742 		ubfx	r2, r3, #16, #8
 2430 009a 84F8EE21 		strb	r2, [r4, #494]
 2431 009e 1B0E     		lsrs	r3, r3, #24
 2432 00a0 84F8EF31 		strb	r3, [r4, #495]
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 2433              		.loc 1 852 0
 2434 00a4 D4F82022 		ldr	r2, [r4, #544]
 2435 00a8 0132     		adds	r2, r2, #1
 2436 00aa C4F83022 		str	r2, [r4, #560]
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 2437              		.loc 1 853 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 89


 2438 00ae 0123     		movs	r3, #1
 2439 00b0 2146     		mov	r1, r4
 2440 00b2 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 2441 00b6 FFF7FEFF 		bl	disk_write
 2442              	.LVL322:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2443              		.loc 1 854 0
 2444 00ba 0023     		movs	r3, #0
 2445 00bc 84F80532 		strb	r3, [r4, #517]
 2446 00c0 A8E7     		b	.L258
 2447              		.cfi_endproc
 2448              	.LFE142:
 2450              		.section	.text.clust2sect,"ax",%progbits
 2451              		.align	1
 2452              		.global	clust2sect
 2453              		.syntax unified
 2454              		.thumb
 2455              		.thumb_func
 2456              		.fpu fpv4-sp-d16
 2458              	clust2sect:
 2459              	.LFB143:
 877:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 2460              		.loc 1 877 0
 2461              		.cfi_startproc
 2462              		@ args = 0, pretend = 0, frame = 0
 2463              		@ frame_needed = 0, uses_anonymous_args = 0
 2464              		@ link register save eliminated.
 2465              	.LVL323:
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 2466              		.loc 1 878 0
 2467 0000 0239     		subs	r1, r1, #2
 2468              	.LVL324:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2469              		.loc 1 879 0
 2470 0002 D0F81832 		ldr	r3, [r0, #536]
 2471 0006 023B     		subs	r3, r3, #2
 2472 0008 9942     		cmp	r1, r3
 2473 000a 06D2     		bcs	.L264
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2474              		.loc 1 880 0
 2475 000c 90F80232 		ldrb	r3, [r0, #514]	@ zero_extendqisi2
 2476 0010 D0F82C02 		ldr	r0, [r0, #556]
 2477              	.LVL325:
 2478 0014 03FB0100 		mla	r0, r3, r1, r0
 2479 0018 7047     		bx	lr
 2480              	.LVL326:
 2481              	.L264:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2482              		.loc 1 879 0
 2483 001a 0020     		movs	r0, #0
 2484              	.LVL327:
 881:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2485              		.loc 1 881 0
 2486 001c 7047     		bx	lr
 2487              		.cfi_endproc
 2488              	.LFE143:
 2490              		.section	.text.get_fat,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 90


 2491              		.align	1
 2492              		.global	get_fat
 2493              		.syntax unified
 2494              		.thumb
 2495              		.thumb_func
 2496              		.fpu fpv4-sp-d16
 2498              	get_fat:
 2499              	.LFB144:
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 2500              		.loc 1 895 0
 2501              		.cfi_startproc
 2502              		@ args = 0, pretend = 0, frame = 0
 2503              		@ frame_needed = 0, uses_anonymous_args = 0
 2504              	.LVL328:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2505              		.loc 1 901 0
 2506 0000 0129     		cmp	r1, #1
 2507 0002 66D9     		bls	.L271
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 2508              		.loc 1 895 0 discriminator 1
 2509 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2510              	.LCFI32:
 2511              		.cfi_def_cfa_offset 24
 2512              		.cfi_offset 3, -24
 2513              		.cfi_offset 4, -20
 2514              		.cfi_offset 5, -16
 2515              		.cfi_offset 6, -12
 2516              		.cfi_offset 7, -8
 2517              		.cfi_offset 14, -4
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2518              		.loc 1 901 0 discriminator 1
 2519 0006 D0F81832 		ldr	r3, [r0, #536]
 2520 000a 9942     		cmp	r1, r3
 2521 000c 63D2     		bcs	.L272
 2522 000e 0C46     		mov	r4, r1
 2523 0010 0646     		mov	r6, r0
 2524              	.LVL329:
 907:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2525              		.loc 1 907 0
 2526 0012 90F80032 		ldrb	r3, [r0, #512]	@ zero_extendqisi2
 2527 0016 022B     		cmp	r3, #2
 2528 0018 2DD0     		beq	.L267
 2529 001a 032B     		cmp	r3, #3
 2530 001c 3ED0     		beq	.L268
 2531 001e 012B     		cmp	r3, #1
 2532 0020 01D0     		beq	.L283
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2533              		.loc 1 930 0
 2534 0022 0120     		movs	r0, #1
 2535              	.LVL330:
 2536 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2537              	.LVL331:
 2538              	.L283:
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2539              		.loc 1 909 0
 2540 0026 01EB5105 		add	r5, r1, r1, lsr #1
 2541              	.LVL332:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 91


 910:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 2542              		.loc 1 910 0
 2543 002a D0F82412 		ldr	r1, [r0, #548]
 2544              	.LVL333:
 2545 002e 01EB5521 		add	r1, r1, r5, lsr #9
 2546 0032 FFF7FEFF 		bl	move_window
 2547              	.LVL334:
 2548 0036 10B1     		cbz	r0, .L284
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2549              		.loc 1 905 0
 2550 0038 4FF0FF30 		mov	r0, #-1
 2551 003c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2552              	.LVL335:
 2553              	.L284:
 911:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2554              		.loc 1 911 0
 2555 003e 6F1C     		adds	r7, r5, #1
 2556              	.LVL336:
 2557 0040 C5F30805 		ubfx	r5, r5, #0, #9
 2558 0044 755D     		ldrb	r5, [r6, r5]	@ zero_extendqisi2
 2559              	.LVL337:
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 2560              		.loc 1 912 0
 2561 0046 D6F82412 		ldr	r1, [r6, #548]
 2562 004a 01EB5721 		add	r1, r1, r7, lsr #9
 2563 004e 3046     		mov	r0, r6
 2564 0050 FFF7FEFF 		bl	move_window
 2565              	.LVL338:
 2566 0054 10B1     		cbz	r0, .L285
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2567              		.loc 1 905 0
 2568 0056 4FF0FF30 		mov	r0, #-1
 2569 005a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2570              	.LVL339:
 2571              	.L285:
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 2572              		.loc 1 913 0
 2573 005c C7F30807 		ubfx	r7, r7, #0, #9
 2574              	.LVL340:
 2575 0060 F05D     		ldrb	r0, [r6, r7]	@ zero_extendqisi2
 2576 0062 45EA0020 		orr	r0, r5, r0, lsl #8
 2577              	.LVL341:
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2578              		.loc 1 914 0
 2579 0066 14F0010F 		tst	r4, #1
 2580 006a 01D0     		beq	.L270
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2581              		.loc 1 914 0 is_stmt 0 discriminator 1
 2582 006c 0009     		lsrs	r0, r0, #4
 2583              	.LVL342:
 2584 006e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2585              	.LVL343:
 2586              	.L270:
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2587              		.loc 1 914 0 discriminator 2
 2588 0070 C0F30B00 		ubfx	r0, r0, #0, #12
 2589              	.LVL344:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 92


 2590 0074 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2591              	.LVL345:
 2592              	.L267:
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 2593              		.loc 1 918 0 is_stmt 1
 2594 0076 D0F82412 		ldr	r1, [r0, #548]
 2595              	.LVL346:
 2596 007a 01EB1421 		add	r1, r1, r4, lsr #8
 2597 007e FFF7FEFF 		bl	move_window
 2598              	.LVL347:
 2599 0082 10B1     		cbz	r0, .L286
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2600              		.loc 1 905 0
 2601 0084 4FF0FF30 		mov	r0, #-1
 2602 0088 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2603              	.LVL348:
 2604              	.L286:
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_WORD(p);
 2605              		.loc 1 919 0
 2606 008a 6100     		lsls	r1, r4, #1
 2607 008c 01F4FF71 		and	r1, r1, #510
 2608 0090 7318     		adds	r3, r6, r1
 2609              	.LVL349:
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2610              		.loc 1 920 0
 2611 0092 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2612              	.LVL350:
 2613 0094 705C     		ldrb	r0, [r6, r1]	@ zero_extendqisi2
 2614 0096 40EA0320 		orr	r0, r0, r3, lsl #8
 2615              	.LVL351:
 921:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2616              		.loc 1 921 0
 2617 009a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2618              	.LVL352:
 2619              	.L268:
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 2620              		.loc 1 924 0
 2621 009c D0F82412 		ldr	r1, [r0, #548]
 2622              	.LVL353:
 2623 00a0 01EBD411 		add	r1, r1, r4, lsr #7
 2624 00a4 FFF7FEFF 		bl	move_window
 2625              	.LVL354:
 2626 00a8 10B1     		cbz	r0, .L287
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2627              		.loc 1 905 0
 2628 00aa 4FF0FF30 		mov	r0, #-1
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2629              		.loc 1 935 0
 2630 00ae F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2631              	.LVL355:
 2632              	.L287:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 2633              		.loc 1 925 0
 2634 00b0 A100     		lsls	r1, r4, #2
 2635 00b2 01F4FE71 		and	r1, r1, #508
 2636 00b6 7218     		adds	r2, r6, r1
 2637              	.LVL356:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 93


 926:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2638              		.loc 1 926 0
 2639 00b8 D078     		ldrb	r0, [r2, #3]	@ zero_extendqisi2
 2640 00ba 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 2641 00bc 1B04     		lsls	r3, r3, #16
 2642 00be 43EA0063 		orr	r3, r3, r0, lsl #24
 2643 00c2 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 2644 00c4 43EA0023 		orr	r3, r3, r0, lsl #8
 2645 00c8 705C     		ldrb	r0, [r6, r1]	@ zero_extendqisi2
 2646 00ca 1843     		orrs	r0, r0, r3
 2647 00cc 20F07040 		bic	r0, r0, #-268435456
 2648              	.LVL357:
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2649              		.loc 1 927 0
 2650 00d0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2651              	.LVL358:
 2652              	.L271:
 2653              	.LCFI33:
 2654              		.cfi_def_cfa_offset 0
 2655              		.cfi_restore 3
 2656              		.cfi_restore 4
 2657              		.cfi_restore 5
 2658              		.cfi_restore 6
 2659              		.cfi_restore 7
 2660              		.cfi_restore 14
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2661              		.loc 1 902 0
 2662 00d2 0120     		movs	r0, #1
 2663              	.LVL359:
 2664 00d4 7047     		bx	lr
 2665              	.LVL360:
 2666              	.L272:
 2667              	.LCFI34:
 2668              		.cfi_def_cfa_offset 24
 2669              		.cfi_offset 3, -24
 2670              		.cfi_offset 4, -20
 2671              		.cfi_offset 5, -16
 2672              		.cfi_offset 6, -12
 2673              		.cfi_offset 7, -8
 2674              		.cfi_offset 14, -4
 2675 00d6 0120     		movs	r0, #1
 2676              	.LVL361:
 2677 00d8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2678              		.cfi_endproc
 2679              	.LFE144:
 2681              		.section	.text.dir_sdi,"ax",%progbits
 2682              		.align	1
 2683              		.syntax unified
 2684              		.thumb
 2685              		.thumb_func
 2686              		.fpu fpv4-sp-d16
 2688              	dir_sdi:
 2689              	.LFB149:
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 2690              		.loc 1 1157 0
 2691              		.cfi_startproc
 2692              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 94


 2693              		@ frame_needed = 0, uses_anonymous_args = 0
 2694              	.LVL362:
 2695 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2696              	.LCFI35:
 2697              		.cfi_def_cfa_offset 24
 2698              		.cfi_offset 3, -24
 2699              		.cfi_offset 4, -20
 2700              		.cfi_offset 5, -16
 2701              		.cfi_offset 6, -12
 2702              		.cfi_offset 7, -8
 2703              		.cfi_offset 14, -4
 2704 0002 0546     		mov	r5, r0
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
 2705              		.loc 1 1162 0
 2706 0004 A0F80612 		strh	r1, [r0, #518]	@ movhi
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
 2707              		.loc 1 1163 0
 2708 0008 D0F80842 		ldr	r4, [r0, #520]
 2709              	.LVL363:
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 2710              		.loc 1 1164 0
 2711 000c 012C     		cmp	r4, #1
 2712 000e 4AD0     		beq	.L295
 2713 0010 0E46     		mov	r6, r1
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 2714              		.loc 1 1164 0 is_stmt 0 discriminator 1
 2715 0012 D0F80032 		ldr	r3, [r0, #512]
 2716 0016 D3F81822 		ldr	r2, [r3, #536]
 2717 001a 9442     		cmp	r4, r2
 2718 001c 01D3     		bcc	.L303
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 2719              		.loc 1 1165 0 is_stmt 1
 2720 001e 0220     		movs	r0, #2
 2721              	.LVL364:
 2722 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2723              	.LVL365:
 2724              	.L303:
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
 2725              		.loc 1 1166 0
 2726 0022 1CB9     		cbnz	r4, .L290
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
 2727              		.loc 1 1166 0 is_stmt 0 discriminator 1
 2728 0024 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
 2729 0028 032A     		cmp	r2, #3
 2730 002a 06D0     		beq	.L304
 2731              	.L290:
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
 2732              		.loc 1 1169 0 is_stmt 1
 2733 002c 7CB9     		cbnz	r4, .L291
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INT_ERR;
 2734              		.loc 1 1170 0
 2735 002e B3F80822 		ldrh	r2, [r3, #520]
 2736 0032 9642     		cmp	r6, r2
 2737 0034 04D3     		bcc	.L305
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = dp->fs->dirbase;
 2738              		.loc 1 1171 0
 2739 0036 0220     		movs	r0, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 95


 2740              	.LVL366:
 2741 0038 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2742              	.LVL367:
 2743              	.L304:
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2744              		.loc 1 1167 0
 2745 003a D3F82842 		ldr	r4, [r3, #552]
 2746              	.LVL368:
 2747 003e F5E7     		b	.L290
 2748              	.L305:
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2749              		.loc 1 1172 0
 2750 0040 D3F82802 		ldr	r0, [r3, #552]
 2751              	.LVL369:
 2752              	.L292:
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!sect) return FR_INT_ERR;
 2753              		.loc 1 1185 0
 2754 0044 C5F80C42 		str	r4, [r5, #524]
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 2755              		.loc 1 1186 0
 2756 0048 F8B9     		cbnz	r0, .L306
 2757 004a 0220     		movs	r0, #2
 2758              	.LVL370:
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2759              		.loc 1 1191 0
 2760 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2761              	.LVL371:
 2762              	.L291:
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 2763              		.loc 1 1175 0
 2764 004e 93F80272 		ldrb	r7, [r3, #514]	@ zero_extendqisi2
 2765 0052 3F01     		lsls	r7, r7, #4
 2766              	.LVL372:
 2767              	.L293:
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 2768              		.loc 1 1176 0
 2769 0054 BE42     		cmp	r6, r7
 2770 0056 12D3     		bcc	.L307
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 2771              		.loc 1 1177 0
 2772 0058 2146     		mov	r1, r4
 2773 005a D5F80002 		ldr	r0, [r5, #512]
 2774 005e FFF7FEFF 		bl	get_fat
 2775              	.LVL373:
 2776 0062 0446     		mov	r4, r0
 2777              	.LVL374:
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 2778              		.loc 1 1178 0
 2779 0064 B0F1FF3F 		cmp	r0, #-1
 2780 0068 1FD0     		beq	.L298
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
 2781              		.loc 1 1179 0
 2782 006a 0128     		cmp	r0, #1
 2783 006c 1FD9     		bls	.L299
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
 2784              		.loc 1 1179 0 is_stmt 0 discriminator 1
 2785 006e D5F80032 		ldr	r3, [r5, #512]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 96


 2786 0072 D3F81832 		ldr	r3, [r3, #536]
 2787 0076 9842     		cmp	r0, r3
 2788 0078 1BD2     		bcs	.L300
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2789              		.loc 1 1181 0 is_stmt 1
 2790 007a F61B     		subs	r6, r6, r7
 2791              	.LVL375:
 2792 007c EAE7     		b	.L293
 2793              	.LVL376:
 2794              	.L307:
1183:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2795              		.loc 1 1183 0
 2796 007e 2146     		mov	r1, r4
 2797 0080 D5F80002 		ldr	r0, [r5, #512]
 2798 0084 FFF7FEFF 		bl	clust2sect
 2799              	.LVL377:
 2800 0088 DCE7     		b	.L292
 2801              	.LVL378:
 2802              	.L306:
1187:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
 2803              		.loc 1 1187 0
 2804 008a 00EB1610 		add	r0, r0, r6, lsr #4
 2805              	.LVL379:
 2806 008e C5F81002 		str	r0, [r5, #528]
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2807              		.loc 1 1188 0
 2808 0092 D5F80032 		ldr	r3, [r5, #512]
 2809 0096 06F00F06 		and	r6, r6, #15
 2810              	.LVL380:
 2811 009a 03EB4616 		add	r6, r3, r6, lsl #5
 2812 009e C5F81462 		str	r6, [r5, #532]
1190:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2813              		.loc 1 1190 0
 2814 00a2 0020     		movs	r0, #0
 2815 00a4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2816              	.LVL381:
 2817              	.L295:
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 2818              		.loc 1 1165 0
 2819 00a6 0220     		movs	r0, #2
 2820              	.LVL382:
 2821 00a8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2822              	.LVL383:
 2823              	.L298:
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 2824              		.loc 1 1178 0
 2825 00aa 0120     		movs	r0, #1
 2826              	.LVL384:
 2827 00ac F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2828              	.LVL385:
 2829              	.L299:
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 			idx -= ic;
 2830              		.loc 1 1180 0
 2831 00ae 0220     		movs	r0, #2
 2832              	.LVL386:
 2833 00b0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2834              	.LVL387:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 97


 2835              	.L300:
 2836 00b2 0220     		movs	r0, #2
 2837              	.LVL388:
 2838 00b4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2839              		.cfi_endproc
 2840              	.LFE149:
 2842              		.section	.text.dir_remove,"ax",%progbits
 2843              		.align	1
 2844              		.syntax unified
 2845              		.thumb
 2846              		.thumb_func
 2847              		.fpu fpv4-sp-d16
 2849              	dir_remove:
 2850              	.LFB157:
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 2851              		.loc 1 1729 0
 2852              		.cfi_startproc
 2853              		@ args = 0, pretend = 0, frame = 0
 2854              		@ frame_needed = 0, uses_anonymous_args = 0
 2855              	.LVL389:
 2856 0000 38B5     		push	{r3, r4, r5, lr}
 2857              	.LCFI36:
 2858              		.cfi_def_cfa_offset 16
 2859              		.cfi_offset 3, -16
 2860              		.cfi_offset 4, -12
 2861              		.cfi_offset 5, -8
 2862              		.cfi_offset 14, -4
 2863 0002 0446     		mov	r4, r0
1750:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 2864              		.loc 1 1750 0
 2865 0004 B0F80612 		ldrh	r1, [r0, #518]
 2866 0008 FFF7FEFF 		bl	dir_sdi
 2867              	.LVL390:
1751:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 2868              		.loc 1 1751 0
 2869 000c 0546     		mov	r5, r0
 2870 000e 08B1     		cbz	r0, .L311
 2871              	.LVL391:
 2872              	.L309:
1762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2873              		.loc 1 1762 0
 2874 0010 2846     		mov	r0, r5
 2875 0012 38BD     		pop	{r3, r4, r5, pc}
 2876              	.LVL392:
 2877              	.L311:
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 2878              		.loc 1 1752 0
 2879 0014 D4F81012 		ldr	r1, [r4, #528]
 2880 0018 D4F80002 		ldr	r0, [r4, #512]
 2881              	.LVL393:
 2882 001c FFF7FEFF 		bl	move_window
 2883              	.LVL394:
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
 2884              		.loc 1 1753 0
 2885 0020 0546     		mov	r5, r0
 2886 0022 0028     		cmp	r0, #0
 2887 0024 F4D1     		bne	.L309
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 98


1754:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
 2888              		.loc 1 1754 0
 2889 0026 2022     		movs	r2, #32
 2890 0028 0021     		movs	r1, #0
 2891 002a D4F81402 		ldr	r0, [r4, #532]
 2892              	.LVL395:
 2893 002e FFF7FEFF 		bl	mem_set
 2894              	.LVL396:
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
 2895              		.loc 1 1755 0
 2896 0032 D4F81432 		ldr	r3, [r4, #532]
 2897 0036 E522     		movs	r2, #229
 2898 0038 1A70     		strb	r2, [r3]
1756:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2899              		.loc 1 1756 0
 2900 003a D4F80032 		ldr	r3, [r4, #512]
 2901 003e 0122     		movs	r2, #1
 2902 0040 83F80422 		strb	r2, [r3, #516]
 2903 0044 E4E7     		b	.L309
 2904              		.cfi_endproc
 2905              	.LFE157:
 2907              		.section	.text.put_fat,"ax",%progbits
 2908              		.align	1
 2909              		.global	put_fat
 2910              		.syntax unified
 2911              		.thumb
 2912              		.thumb_func
 2913              		.fpu fpv4-sp-d16
 2915              	put_fat:
 2916              	.LFB145:
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2917              		.loc 1 951 0
 2918              		.cfi_startproc
 2919              		@ args = 0, pretend = 0, frame = 0
 2920              		@ frame_needed = 0, uses_anonymous_args = 0
 2921              	.LVL397:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 2922              		.loc 1 957 0
 2923 0000 0129     		cmp	r1, #1
 2924 0002 40F28C80 		bls	.L321
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 2925              		.loc 1 957 0 is_stmt 0 discriminator 1
 2926 0006 D0F81832 		ldr	r3, [r0, #536]
 2927 000a 9942     		cmp	r1, r3
 2928 000c 01D3     		bcc	.L329
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2929              		.loc 1 958 0 is_stmt 1
 2930 000e 0223     		movs	r3, #2
 2931 0010 86E0     		b	.L326
 2932              	.L329:
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2933              		.loc 1 951 0
 2934 0012 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2935              	.LCFI37:
 2936              		.cfi_def_cfa_offset 24
 2937              		.cfi_offset 4, -24
 2938              		.cfi_offset 5, -20
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 99


 2939              		.cfi_offset 6, -16
 2940              		.cfi_offset 7, -12
 2941              		.cfi_offset 8, -8
 2942              		.cfi_offset 14, -4
 2943 0016 1646     		mov	r6, r2
 2944 0018 0C46     		mov	r4, r1
 2945 001a 0546     		mov	r5, r0
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2946              		.loc 1 961 0
 2947 001c 90F80032 		ldrb	r3, [r0, #512]	@ zero_extendqisi2
 2948 0020 022B     		cmp	r3, #2
 2949 0022 45D0     		beq	.L314
 2950 0024 032B     		cmp	r3, #3
 2951 0026 58D0     		beq	.L315
 2952 0028 012B     		cmp	r3, #1
 2953 002a 03D0     		beq	.L330
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2954              		.loc 1 994 0
 2955 002c 0223     		movs	r3, #2
 2956              	.LVL398:
 2957              	.L313:
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2958              		.loc 1 999 0
 2959 002e 1846     		mov	r0, r3
 2960 0030 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2961              	.LVL399:
 2962              	.L330:
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2963              		.loc 1 963 0
 2964 0034 01EB5107 		add	r7, r1, r1, lsr #1
 2965              	.LVL400:
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2966              		.loc 1 964 0
 2967 0038 D0F82412 		ldr	r1, [r0, #548]
 2968              	.LVL401:
 2969 003c 01EB5721 		add	r1, r1, r7, lsr #9
 2970 0040 FFF7FEFF 		bl	move_window
 2971              	.LVL402:
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 2972              		.loc 1 965 0
 2973 0044 0346     		mov	r3, r0
 2974 0046 0028     		cmp	r0, #0
 2975 0048 F1D1     		bne	.L313
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2976              		.loc 1 966 0
 2977 004a 07F10108 		add	r8, r7, #1
 2978              	.LVL403:
 2979 004e C7F30807 		ubfx	r7, r7, #0, #9
 2980              	.LVL404:
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2981              		.loc 1 967 0
 2982 0052 14F00104 		ands	r4, r4, #1
 2983              	.LVL405:
 2984 0056 20D0     		beq	.L317
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2985              		.loc 1 967 0 is_stmt 0 discriminator 1
 2986 0058 EB57     		ldrsb	r3, [r5, r7]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 100


 2987 005a 03F00F03 		and	r3, r3, #15
 2988 005e 3201     		lsls	r2, r6, #4
 2989 0060 02F47F62 		and	r2, r2, #4080
 2990 0064 1343     		orrs	r3, r3, r2
 2991 0066 DBB2     		uxtb	r3, r3
 2992              	.L318:
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2993              		.loc 1 967 0 discriminator 4
 2994 0068 EB55     		strb	r3, [r5, r7]
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2995              		.loc 1 968 0 is_stmt 1 discriminator 4
 2996 006a 0123     		movs	r3, #1
 2997 006c 85F80432 		strb	r3, [r5, #516]
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2998              		.loc 1 969 0 discriminator 4
 2999 0070 D5F82412 		ldr	r1, [r5, #548]
 3000 0074 01EB5821 		add	r1, r1, r8, lsr #9
 3001 0078 2846     		mov	r0, r5
 3002              	.LVL406:
 3003 007a FFF7FEFF 		bl	move_window
 3004              	.LVL407:
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 3005              		.loc 1 970 0 discriminator 4
 3006 007e 0346     		mov	r3, r0
 3007 0080 0028     		cmp	r0, #0
 3008 0082 D4D1     		bne	.L313
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 3009              		.loc 1 971 0
 3010 0084 C8F30808 		ubfx	r8, r8, #0, #9
 3011              	.LVL408:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3012              		.loc 1 972 0
 3013 0088 4CB1     		cbz	r4, .L319
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3014              		.loc 1 972 0 is_stmt 0 discriminator 1
 3015 008a C6F30712 		ubfx	r2, r6, #4, #8
 3016              	.LVL409:
 3017              	.L320:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3018              		.loc 1 972 0 discriminator 4
 3019 008e 05F80820 		strb	r2, [r5, r8]
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3020              		.loc 1 973 0 is_stmt 1 discriminator 4
 3021 0092 0122     		movs	r2, #1
 3022 0094 85F80422 		strb	r2, [r5, #516]
 974:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3023              		.loc 1 974 0 discriminator 4
 3024 0098 C9E7     		b	.L313
 3025              	.LVL410:
 3026              	.L317:
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3027              		.loc 1 967 0 discriminator 2
 3028 009a F3B2     		uxtb	r3, r6
 3029 009c E4E7     		b	.L318
 3030              	.LVL411:
 3031              	.L319:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 101


 3032              		.loc 1 972 0 discriminator 2
 3033 009e 15F90820 		ldrsb	r2, [r5, r8]
 3034 00a2 22F00F02 		bic	r2, r2, #15
 3035 00a6 C6F30326 		ubfx	r6, r6, #8, #4
 3036              	.LVL412:
 3037 00aa 3243     		orrs	r2, r2, r6
 3038 00ac D2B2     		uxtb	r2, r2
 3039 00ae EEE7     		b	.L320
 3040              	.LVL413:
 3041              	.L314:
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3042              		.loc 1 977 0
 3043 00b0 D0F82412 		ldr	r1, [r0, #548]
 3044              	.LVL414:
 3045 00b4 01EB1421 		add	r1, r1, r4, lsr #8
 3046 00b8 FFF7FEFF 		bl	move_window
 3047              	.LVL415:
 978:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 3048              		.loc 1 978 0
 3049 00bc 0346     		mov	r3, r0
 3050 00be 0028     		cmp	r0, #0
 3051 00c0 B5D1     		bne	.L313
 979:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(p, (WORD)val);
 3052              		.loc 1 979 0
 3053 00c2 6100     		lsls	r1, r4, #1
 3054 00c4 01F4FF71 		and	r1, r1, #510
 3055 00c8 6818     		adds	r0, r5, r1
 3056              	.LVL416:
 980:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3057              		.loc 1 980 0
 3058 00ca 6E54     		strb	r6, [r5, r1]
 3059 00cc C6F30722 		ubfx	r2, r6, #8, #8
 3060 00d0 4270     		strb	r2, [r0, #1]
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3061              		.loc 1 981 0
 3062 00d2 0122     		movs	r2, #1
 3063 00d4 85F80422 		strb	r2, [r5, #516]
 982:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3064              		.loc 1 982 0
 3065 00d8 A9E7     		b	.L313
 3066              	.LVL417:
 3067              	.L315:
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3068              		.loc 1 985 0
 3069 00da D0F82412 		ldr	r1, [r0, #548]
 3070              	.LVL418:
 3071 00de 01EBD411 		add	r1, r1, r4, lsr #7
 3072 00e2 FFF7FEFF 		bl	move_window
 3073              	.LVL419:
 986:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 3074              		.loc 1 986 0
 3075 00e6 0346     		mov	r3, r0
 3076 00e8 0028     		cmp	r0, #0
 3077 00ea A0D1     		bne	.L313
 987:Middlewares/Third_Party/FatFs/src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 3078              		.loc 1 987 0
 3079 00ec A100     		lsls	r1, r4, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 102


 3080 00ee 01F4FE71 		and	r1, r1, #508
 3081 00f2 6818     		adds	r0, r5, r1
 3082              	.LVL420:
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(p, val);
 3083              		.loc 1 988 0
 3084 00f4 C478     		ldrb	r4, [r0, #3]	@ zero_extendqisi2
 3085              	.LVL421:
 3086 00f6 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 3087 00f8 1204     		lsls	r2, r2, #16
 3088 00fa 42EA0462 		orr	r2, r2, r4, lsl #24
 3089 00fe 02F07042 		and	r2, r2, #-268435456
 3090 0102 3243     		orrs	r2, r2, r6
 3091              	.LVL422:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3092              		.loc 1 989 0
 3093 0104 6A54     		strb	r2, [r5, r1]
 3094 0106 C2F30721 		ubfx	r1, r2, #8, #8
 3095 010a 4170     		strb	r1, [r0, #1]
 3096 010c C2F30741 		ubfx	r1, r2, #16, #8
 3097 0110 8170     		strb	r1, [r0, #2]
 3098 0112 120E     		lsrs	r2, r2, #24
 3099              	.LVL423:
 3100 0114 C270     		strb	r2, [r0, #3]
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3101              		.loc 1 990 0
 3102 0116 0122     		movs	r2, #1
 3103 0118 85F80422 		strb	r2, [r5, #516]
 991:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3104              		.loc 1 991 0
 3105 011c 87E7     		b	.L313
 3106              	.LVL424:
 3107              	.L321:
 3108              	.LCFI38:
 3109              		.cfi_def_cfa_offset 0
 3110              		.cfi_restore 4
 3111              		.cfi_restore 5
 3112              		.cfi_restore 6
 3113              		.cfi_restore 7
 3114              		.cfi_restore 8
 3115              		.cfi_restore 14
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3116              		.loc 1 958 0
 3117 011e 0223     		movs	r3, #2
 3118              	.L326:
 3119              	.LVL425:
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 3120              		.loc 1 999 0
 3121 0120 1846     		mov	r0, r3
 3122              	.LVL426:
 3123 0122 7047     		bx	lr
 3124              		.cfi_endproc
 3125              	.LFE145:
 3127              		.section	.text.create_chain,"ax",%progbits
 3128              		.align	1
 3129              		.syntax unified
 3130              		.thumb
 3131              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 103


 3132              		.fpu fpv4-sp-d16
 3134              	create_chain:
 3135              	.LFB147:
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3136              		.loc 1 1067 0
 3137              		.cfi_startproc
 3138              		@ args = 0, pretend = 0, frame = 0
 3139              		@ frame_needed = 0, uses_anonymous_args = 0
 3140              	.LVL427:
 3141 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3142              	.LCFI39:
 3143              		.cfi_def_cfa_offset 24
 3144              		.cfi_offset 3, -24
 3145              		.cfi_offset 4, -20
 3146              		.cfi_offset 5, -16
 3147              		.cfi_offset 6, -12
 3148              		.cfi_offset 7, -8
 3149              		.cfi_offset 14, -4
 3150 0002 0546     		mov	r5, r0
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 3151              		.loc 1 1072 0
 3152 0004 0F46     		mov	r7, r1
 3153 0006 41B9     		cbnz	r1, .L332
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 3154              		.loc 1 1073 0
 3155 0008 D0F81062 		ldr	r6, [r0, #528]
 3156              	.LVL428:
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3157              		.loc 1 1074 0
 3158 000c 9EB1     		cbz	r6, .L340
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3159              		.loc 1 1074 0 is_stmt 0 discriminator 2
 3160 000e D0F81832 		ldr	r3, [r0, #536]
 3161 0012 9E42     		cmp	r6, r3
 3162 0014 10D3     		bcc	.L333
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3163              		.loc 1 1074 0
 3164 0016 0126     		movs	r6, #1
 3165              	.LVL429:
 3166 0018 0EE0     		b	.L333
 3167              	.LVL430:
 3168              	.L332:
1077:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
 3169              		.loc 1 1077 0 is_stmt 1
 3170 001a FFF7FEFF 		bl	get_fat
 3171              	.LVL431:
 3172 001e 0346     		mov	r3, r0
 3173              	.LVL432:
1078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3174              		.loc 1 1078 0
 3175 0020 0128     		cmp	r0, #1
 3176 0022 4BD9     		bls	.L342
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3177              		.loc 1 1079 0
 3178 0024 B0F1FF3F 		cmp	r0, #-1
 3179 0028 4DD0     		beq	.L331
1080:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 104


 3180              		.loc 1 1080 0
 3181 002a D5F81822 		ldr	r2, [r5, #536]
 3182 002e 9042     		cmp	r0, r2
 3183 0030 49D3     		bcc	.L331
1081:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3184              		.loc 1 1081 0
 3185 0032 3E46     		mov	r6, r7
 3186 0034 00E0     		b	.L333
 3187              	.LVL433:
 3188              	.L340:
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3189              		.loc 1 1074 0
 3190 0036 0126     		movs	r6, #1
 3191              	.LVL434:
 3192              	.L333:
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 3193              		.loc 1 1084 0
 3194 0038 3446     		mov	r4, r6
 3195 003a 0CE0     		b	.L337
 3196              	.LVL435:
 3197              	.L335:
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 3198              		.loc 1 1091 0
 3199 003c 2146     		mov	r1, r4
 3200 003e 2846     		mov	r0, r5
 3201 0040 FFF7FEFF 		bl	get_fat
 3202              	.LVL436:
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 3203              		.loc 1 1092 0
 3204 0044 0346     		mov	r3, r0
 3205 0046 78B1     		cbz	r0, .L336
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
 3206              		.loc 1 1093 0
 3207 0048 B0F1FF3F 		cmp	r0, #-1
 3208 004c 3BD0     		beq	.L331
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
 3209              		.loc 1 1093 0 is_stmt 0 discriminator 1
 3210 004e 0128     		cmp	r0, #1
 3211 0050 39D0     		beq	.L331
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3212              		.loc 1 1095 0 is_stmt 1
 3213 0052 B442     		cmp	r4, r6
 3214 0054 36D0     		beq	.L348
 3215              	.LVL437:
 3216              	.L337:
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
 3217              		.loc 1 1086 0
 3218 0056 0134     		adds	r4, r4, #1
 3219              	.LVL438:
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = 2;
 3220              		.loc 1 1087 0
 3221 0058 D5F81832 		ldr	r3, [r5, #536]
 3222 005c 9C42     		cmp	r4, r3
 3223 005e EDD3     		bcc	.L335
 3224              	.LVL439:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3225              		.loc 1 1089 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 105


 3226 0060 012E     		cmp	r6, #1
 3227 0062 2DD9     		bls	.L343
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 3228              		.loc 1 1088 0
 3229 0064 0224     		movs	r4, #2
 3230 0066 E9E7     		b	.L335
 3231              	.LVL440:
 3232              	.L336:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && clst != 0) {
 3233              		.loc 1 1098 0
 3234 0068 6FF07042 		mvn	r2, #-268435456
 3235 006c 2146     		mov	r1, r4
 3236 006e 2846     		mov	r0, r5
 3237              	.LVL441:
 3238 0070 FFF7FEFF 		bl	put_fat
 3239              	.LVL442:
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 3240              		.loc 1 1099 0
 3241 0074 0346     		mov	r3, r0
 3242 0076 00B9     		cbnz	r0, .L338
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 3243              		.loc 1 1099 0 is_stmt 0 discriminator 1
 3244 0078 97B9     		cbnz	r7, .L349
 3245              	.LVL443:
 3246              	.L338:
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 3247              		.loc 1 1102 0 is_stmt 1
 3248 007a C3B9     		cbnz	r3, .L339
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 3249              		.loc 1 1103 0
 3250 007c C5F81042 		str	r4, [r5, #528]
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust--;
 3251              		.loc 1 1104 0
 3252 0080 D5F81432 		ldr	r3, [r5, #532]
 3253              	.LVL444:
 3254 0084 B3F1FF3F 		cmp	r3, #-1
 3255 0088 1FD0     		beq	.L345
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3256              		.loc 1 1105 0
 3257 008a 013B     		subs	r3, r3, #1
 3258 008c C5F81432 		str	r3, [r5, #532]
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3259              		.loc 1 1106 0
 3260 0090 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
 3261 0094 43F00103 		orr	r3, r3, #1
 3262 0098 85F80532 		strb	r3, [r5, #517]
 3263 009c 2346     		mov	r3, r4
 3264 009e 12E0     		b	.L331
 3265              	.LVL445:
 3266              	.L349:
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3267              		.loc 1 1100 0
 3268 00a0 2246     		mov	r2, r4
 3269 00a2 3946     		mov	r1, r7
 3270 00a4 2846     		mov	r0, r5
 3271              	.LVL446:
 3272 00a6 FFF7FEFF 		bl	put_fat
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 106


 3273              	.LVL447:
 3274 00aa 0346     		mov	r3, r0
 3275              	.LVL448:
 3276 00ac E5E7     		b	.L338
 3277              	.L339:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3278              		.loc 1 1109 0
 3279 00ae 012B     		cmp	r3, #1
 3280 00b0 01D0     		beq	.L350
 3281 00b2 0123     		movs	r3, #1
 3282              	.LVL449:
 3283 00b4 07E0     		b	.L331
 3284              	.LVL450:
 3285              	.L350:
 3286 00b6 4FF0FF33 		mov	r3, #-1
 3287              	.LVL451:
 3288 00ba 04E0     		b	.L331
 3289              	.LVL452:
 3290              	.L342:
1078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3291              		.loc 1 1078 0
 3292 00bc 0123     		movs	r3, #1
 3293 00be 02E0     		b	.L331
 3294              	.LVL453:
 3295              	.L343:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3296              		.loc 1 1089 0
 3297 00c0 0023     		movs	r3, #0
 3298 00c2 00E0     		b	.L331
 3299              	.LVL454:
 3300              	.L348:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3301              		.loc 1 1095 0
 3302 00c4 0023     		movs	r3, #0
 3303              	.LVL455:
 3304              	.L331:
1113:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 3305              		.loc 1 1113 0
 3306 00c6 1846     		mov	r0, r3
 3307 00c8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3308              	.LVL456:
 3309              	.L345:
 3310 00ca 2346     		mov	r3, r4
 3311 00cc FBE7     		b	.L331
 3312              		.cfi_endproc
 3313              	.LFE147:
 3315              		.section	.text.dir_next,"ax",%progbits
 3316              		.align	1
 3317              		.syntax unified
 3318              		.thumb
 3319              		.thumb_func
 3320              		.fpu fpv4-sp-d16
 3322              	dir_next:
 3323              	.LFB150:
1205:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst;
 3324              		.loc 1 1205 0
 3325              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 107


 3326              		@ args = 0, pretend = 0, frame = 0
 3327              		@ frame_needed = 0, uses_anonymous_args = 0
 3328              	.LVL457:
 3329 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3330              	.LCFI40:
 3331              		.cfi_def_cfa_offset 32
 3332              		.cfi_offset 3, -32
 3333              		.cfi_offset 4, -28
 3334              		.cfi_offset 5, -24
 3335              		.cfi_offset 6, -20
 3336              		.cfi_offset 7, -16
 3337              		.cfi_offset 8, -12
 3338              		.cfi_offset 9, -8
 3339              		.cfi_offset 14, -4
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 3340              		.loc 1 1213 0
 3341 0004 B0F80642 		ldrh	r4, [r0, #518]
 3342 0008 0134     		adds	r4, r4, #1
 3343              	.LVL458:
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
 3344              		.loc 1 1214 0
 3345 000a A3B2     		uxth	r3, r4
 3346 000c 13B9     		cbnz	r3, .L370
1215:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3347              		.loc 1 1215 0
 3348 000e 0420     		movs	r0, #4
 3349              	.LVL459:
 3350 0010 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3351              	.LVL460:
 3352              	.L370:
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
 3353              		.loc 1 1214 0 discriminator 1
 3354 0014 D0F81032 		ldr	r3, [r0, #528]
 3355 0018 13B9     		cbnz	r3, .L371
1215:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3356              		.loc 1 1215 0
 3357 001a 0420     		movs	r0, #4
 3358              	.LVL461:
 3359 001c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3360              	.LVL462:
 3361              	.L371:
 3362 0020 0E46     		mov	r6, r1
 3363 0022 0546     		mov	r5, r0
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;					/* Next sector */
 3364              		.loc 1 1217 0
 3365 0024 14F00F07 		ands	r7, r4, #15
 3366 0028 16D1     		bne	.L353
1218:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3367              		.loc 1 1218 0
 3368 002a 0133     		adds	r3, r3, #1
 3369 002c C0F81032 		str	r3, [r0, #528]
1220:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 3370              		.loc 1 1220 0
 3371 0030 D0F80C12 		ldr	r1, [r0, #524]
 3372              	.LVL463:
 3373 0034 41B9     		cbnz	r1, .L354
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_NO_FILE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 108


 3374              		.loc 1 1221 0
 3375 0036 D0F80032 		ldr	r3, [r0, #512]
 3376 003a B3F80832 		ldrh	r3, [r3, #520]
 3377 003e 9C42     		cmp	r4, r3
 3378 0040 0AD3     		bcc	.L353
1222:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3379              		.loc 1 1222 0
 3380 0042 0420     		movs	r0, #4
 3381              	.LVL464:
 3382 0044 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3383              	.LVL465:
 3384              	.L354:
1225:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 3385              		.loc 1 1225 0
 3386 0048 D0F80002 		ldr	r0, [r0, #512]
 3387              	.LVL466:
 3388 004c 90F80232 		ldrb	r3, [r0, #514]	@ zero_extendqisi2
 3389 0050 013B     		subs	r3, r3, #1
 3390 0052 13EA1418 		ands	r8, r3, r4, lsr #4
 3391 0056 0AD0     		beq	.L372
 3392              	.LVL467:
 3393              	.L353:
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
 3394              		.loc 1 1257 0
 3395 0058 A5F80642 		strh	r4, [r5, #518]	@ movhi
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3396              		.loc 1 1258 0
 3397 005c D5F80032 		ldr	r3, [r5, #512]
 3398 0060 03EB4713 		add	r3, r3, r7, lsl #5
 3399 0064 C5F81432 		str	r3, [r5, #532]
1260:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3400              		.loc 1 1260 0
 3401 0068 0020     		movs	r0, #0
 3402 006a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3403              	.LVL468:
 3404              	.L372:
1226:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 3405              		.loc 1 1226 0
 3406 006e FFF7FEFF 		bl	get_fat
 3407              	.LVL469:
 3408 0072 8146     		mov	r9, r0
 3409              	.LVL470:
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 3410              		.loc 1 1227 0
 3411 0074 0128     		cmp	r0, #1
 3412 0076 57D9     		bls	.L361
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 3413              		.loc 1 1228 0
 3414 0078 B0F1FF3F 		cmp	r0, #-1
 3415 007c 57D0     		beq	.L362
1229:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3416              		.loc 1 1229 0
 3417 007e D5F80002 		ldr	r0, [r5, #512]
 3418              	.LVL471:
 3419 0082 D0F81832 		ldr	r3, [r0, #536]
 3420 0086 9945     		cmp	r9, r3
 3421 0088 44D3     		bcc	.L355
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 109


1231:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 3422              		.loc 1 1231 0
 3423 008a 16B9     		cbnz	r6, .L373
 3424 008c 0420     		movs	r0, #4
 3425 008e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3426              	.LVL472:
 3427              	.L373:
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 3428              		.loc 1 1232 0
 3429 0092 D5F80C12 		ldr	r1, [r5, #524]
 3430 0096 FFF7FEFF 		bl	create_chain
 3431              	.LVL473:
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 3432              		.loc 1 1233 0
 3433 009a 8146     		mov	r9, r0
 3434 009c 10B9     		cbnz	r0, .L374
 3435 009e 0720     		movs	r0, #7
 3436              	.LVL474:
 3437 00a0 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3438              	.LVL475:
 3439              	.L374:
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 3440              		.loc 1 1234 0
 3441 00a4 0128     		cmp	r0, #1
 3442 00a6 45D0     		beq	.L365
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up stretched table */
 3443              		.loc 1 1235 0
 3444 00a8 B0F1FF3F 		cmp	r0, #-1
 3445 00ac 45D0     		beq	.L366
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
 3446              		.loc 1 1237 0
 3447 00ae D5F80002 		ldr	r0, [r5, #512]
 3448              	.LVL476:
 3449 00b2 FFF7FEFF 		bl	sync_window
 3450              	.LVL477:
 3451 00b6 0028     		cmp	r0, #0
 3452 00b8 42D1     		bne	.L367
1238:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
 3453              		.loc 1 1238 0
 3454 00ba 4FF40072 		mov	r2, #512
 3455 00be 0021     		movs	r1, #0
 3456 00c0 D5F80002 		ldr	r0, [r5, #512]
 3457 00c4 FFF7FEFF 		bl	mem_set
 3458              	.LVL478:
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 3459              		.loc 1 1239 0
 3460 00c8 D5F80062 		ldr	r6, [r5, #512]
 3461              	.LVL479:
 3462 00cc 4946     		mov	r1, r9
 3463 00ce 3046     		mov	r0, r6
 3464 00d0 FFF7FEFF 		bl	clust2sect
 3465              	.LVL480:
 3466 00d4 C6F83002 		str	r0, [r6, #560]
 3467              	.LVL481:
 3468              	.L356:
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
 3469              		.loc 1 1240 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 110


 3470 00d8 D5F80032 		ldr	r3, [r5, #512]
 3471 00dc 93F80222 		ldrb	r2, [r3, #514]	@ zero_extendqisi2
 3472 00e0 9045     		cmp	r8, r2
 3473 00e2 11D2     		bcs	.L375
1241:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 3474              		.loc 1 1241 0
 3475 00e4 0122     		movs	r2, #1
 3476 00e6 83F80422 		strb	r2, [r3, #516]
1242:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->winsect++;
 3477              		.loc 1 1242 0
 3478 00ea D5F80002 		ldr	r0, [r5, #512]
 3479 00ee FFF7FEFF 		bl	sync_window
 3480              	.LVL482:
 3481 00f2 40BB     		cbnz	r0, .L368
1243:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3482              		.loc 1 1243 0 discriminator 2
 3483 00f4 D5F80022 		ldr	r2, [r5, #512]
 3484 00f8 D2F83032 		ldr	r3, [r2, #560]
 3485 00fc 0133     		adds	r3, r3, #1
 3486 00fe C2F83032 		str	r3, [r2, #560]
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
 3487              		.loc 1 1240 0 discriminator 2
 3488 0102 08F10108 		add	r8, r8, #1
 3489              	.LVL483:
 3490 0106 E7E7     		b	.L356
 3491              	.L375:
1245:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 3492              		.loc 1 1245 0
 3493 0108 D3F83022 		ldr	r2, [r3, #560]
 3494 010c A2EB0802 		sub	r2, r2, r8
 3495 0110 C3F83022 		str	r2, [r3, #560]
 3496              	.LVL484:
 3497              	.L355:
1251:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
 3498              		.loc 1 1251 0
 3499 0114 C5F80C92 		str	r9, [r5, #524]
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3500              		.loc 1 1252 0
 3501 0118 4946     		mov	r1, r9
 3502 011a D5F80002 		ldr	r0, [r5, #512]
 3503 011e FFF7FEFF 		bl	clust2sect
 3504              	.LVL485:
 3505 0122 C5F81002 		str	r0, [r5, #528]
 3506 0126 97E7     		b	.L353
 3507              	.LVL486:
 3508              	.L361:
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 3509              		.loc 1 1227 0
 3510 0128 0220     		movs	r0, #2
 3511              	.LVL487:
 3512 012a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3513              	.LVL488:
 3514              	.L362:
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 3515              		.loc 1 1228 0
 3516 012e 0120     		movs	r0, #1
 3517              	.LVL489:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 111


 3518 0130 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3519              	.LVL490:
 3520              	.L365:
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 3521              		.loc 1 1234 0
 3522 0134 0220     		movs	r0, #2
 3523              	.LVL491:
 3524 0136 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3525              	.LVL492:
 3526              	.L366:
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up stretched table */
 3527              		.loc 1 1235 0
 3528 013a 0120     		movs	r0, #1
 3529              	.LVL493:
 3530 013c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3531              	.LVL494:
 3532              	.L367:
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
 3533              		.loc 1 1237 0
 3534 0140 0120     		movs	r0, #1
 3535 0142 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3536              	.LVL495:
 3537              	.L368:
1242:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->winsect++;
 3538              		.loc 1 1242 0
 3539 0146 0120     		movs	r0, #1
1261:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3540              		.loc 1 1261 0
 3541 0148 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3542              		.cfi_endproc
 3543              	.LFE150:
 3545              		.section	.text.dir_find,"ax",%progbits
 3546              		.align	1
 3547              		.syntax unified
 3548              		.thumb
 3549              		.thumb_func
 3550              		.fpu fpv4-sp-d16
 3552              	dir_find:
 3553              	.LFB154:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3554              		.loc 1 1531 0
 3555              		.cfi_startproc
 3556              		@ args = 0, pretend = 0, frame = 0
 3557              		@ frame_needed = 0, uses_anonymous_args = 0
 3558              	.LVL496:
 3559 0000 38B5     		push	{r3, r4, r5, lr}
 3560              	.LCFI41:
 3561              		.cfi_def_cfa_offset 16
 3562              		.cfi_offset 3, -16
 3563              		.cfi_offset 4, -12
 3564              		.cfi_offset 5, -8
 3565              		.cfi_offset 14, -4
 3566 0002 0446     		mov	r4, r0
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 3567              		.loc 1 1538 0
 3568 0004 0021     		movs	r1, #0
 3569 0006 FFF7FEFF 		bl	dir_sdi
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 112


 3570              	.LVL497:
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3571              		.loc 1 1539 0
 3572 000a 0546     		mov	r5, r0
 3573 000c 40B1     		cbz	r0, .L379
 3574              	.LVL498:
 3575              	.L377:
1579:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3576              		.loc 1 1579 0
 3577 000e 2846     		mov	r0, r5
 3578 0010 38BD     		pop	{r3, r4, r5, pc}
 3579              	.LVL499:
 3580              	.L378:
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 3581              		.loc 1 1575 0
 3582 0012 0021     		movs	r1, #0
 3583 0014 2046     		mov	r0, r4
 3584 0016 FFF7FEFF 		bl	dir_next
 3585              	.LVL500:
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3586              		.loc 1 1576 0
 3587 001a 0546     		mov	r5, r0
 3588 001c 0028     		cmp	r0, #0
 3589 001e F6D1     		bne	.L377
 3590              	.L379:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3591              		.loc 1 1545 0
 3592 0020 D4F81012 		ldr	r1, [r4, #528]
 3593 0024 D4F80002 		ldr	r0, [r4, #512]
 3594              	.LVL501:
 3595 0028 FFF7FEFF 		bl	move_window
 3596              	.LVL502:
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 3597              		.loc 1 1546 0
 3598 002c 0546     		mov	r5, r0
 3599 002e 0028     		cmp	r0, #0
 3600 0030 EDD1     		bne	.L377
1547:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
 3601              		.loc 1 1547 0
 3602 0032 D4F81402 		ldr	r0, [r4, #532]
 3603              	.LVL503:
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 3604              		.loc 1 1548 0
 3605 0036 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 3606              	.LVL504:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3607              		.loc 1 1549 0
 3608 0038 5BB1     		cbz	r3, .L380
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3609              		.loc 1 1572 0
 3610 003a C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 3611              	.LVL505:
 3612 003c 13F0080F 		tst	r3, #8
 3613 0040 E7D1     		bne	.L378
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3614              		.loc 1 1572 0 is_stmt 0 discriminator 1
 3615 0042 0B22     		movs	r2, #11
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 113


 3616 0044 D4F81812 		ldr	r1, [r4, #536]
 3617 0048 FFF7FEFF 		bl	mem_cmp
 3618              	.LVL506:
 3619 004c 0028     		cmp	r0, #0
 3620 004e E0D1     		bne	.L378
 3621 0050 DDE7     		b	.L377
 3622              	.LVL507:
 3623              	.L380:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3624              		.loc 1 1549 0 is_stmt 1
 3625 0052 0425     		movs	r5, #4
 3626 0054 DBE7     		b	.L377
 3627              		.cfi_endproc
 3628              	.LFE154:
 3630              		.section	.text.follow_path,"ax",%progbits
 3631              		.align	1
 3632              		.syntax unified
 3633              		.thumb
 3634              		.thumb_func
 3635              		.fpu fpv4-sp-d16
 3637              	follow_path:
 3638              	.LFB160:
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3639              		.loc 1 2129 0
 3640              		.cfi_startproc
 3641              		@ args = 0, pretend = 0, frame = 8
 3642              		@ frame_needed = 0, uses_anonymous_args = 0
 3643              	.LVL508:
 3644 0000 10B5     		push	{r4, lr}
 3645              	.LCFI42:
 3646              		.cfi_def_cfa_offset 8
 3647              		.cfi_offset 4, -8
 3648              		.cfi_offset 14, -4
 3649 0002 82B0     		sub	sp, sp, #8
 3650              	.LCFI43:
 3651              		.cfi_def_cfa_offset 16
 3652 0004 0446     		mov	r4, r0
 3653 0006 0191     		str	r1, [sp, #4]
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
 3654              		.loc 1 2141 0
 3655 0008 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 3656 000a 2F2B     		cmp	r3, #47
 3657 000c 26D0     		beq	.L383
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
 3658              		.loc 1 2141 0 is_stmt 0 discriminator 1
 3659 000e 5C2B     		cmp	r3, #92
 3660 0010 24D0     		beq	.L383
 3661              	.LVL509:
 3662              	.L384:
2143:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3663              		.loc 1 2143 0 is_stmt 1
 3664 0012 0023     		movs	r3, #0
 3665 0014 C4F80832 		str	r3, [r4, #520]
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 3666              		.loc 1 2146 0
 3667 0018 019B     		ldr	r3, [sp, #4]
 3668 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 114


 3669 001c 1F2B     		cmp	r3, #31
 3670 001e 20D9     		bls	.L391
 3671              	.LVL510:
 3672              	.L385:
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3673              		.loc 1 2151 0
 3674 0020 01A9     		add	r1, sp, #4
 3675 0022 2046     		mov	r0, r4
 3676 0024 FFF7FEFF 		bl	create_name
 3677              	.LVL511:
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
 3678              		.loc 1 2152 0
 3679 0028 0346     		mov	r3, r0
 3680 002a 10BB     		cbnz	r0, .L386
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 3681              		.loc 1 2153 0
 3682 002c 2046     		mov	r0, r4
 3683              	.LVL512:
 3684 002e FFF7FEFF 		bl	dir_find
 3685              	.LVL513:
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 3686              		.loc 1 2154 0
 3687 0032 D4F81832 		ldr	r3, [r4, #536]
 3688 0036 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 3689              	.LVL514:
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 3690              		.loc 1 2155 0
 3691 0038 0346     		mov	r3, r0
 3692 003a E8B9     		cbnz	r0, .L392
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
 3693              		.loc 1 2167 0
 3694 003c 12F0040F 		tst	r2, #4
 3695 0040 17D1     		bne	.L386
2168:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
 3696              		.loc 1 2168 0
 3697 0042 D4F81412 		ldr	r1, [r4, #532]
 3698              	.LVL515:
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 3699              		.loc 1 2169 0
 3700 0046 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 3701 0048 13F0100F 		tst	r3, #16
 3702 004c 1BD0     		beq	.L389
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3703              		.loc 1 2172 0
 3704 004e D4F80002 		ldr	r0, [r4, #512]
 3705              	.LVL516:
 3706 0052 FFF7FEFF 		bl	ld_clust
 3707              	.LVL517:
 3708 0056 C4F80802 		str	r0, [r4, #520]
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3709              		.loc 1 2151 0
 3710 005a E1E7     		b	.L385
 3711              	.LVL518:
 3712              	.L383:
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 3713              		.loc 1 2142 0
 3714 005c 0131     		adds	r1, r1, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 115


 3715              	.LVL519:
 3716 005e 0191     		str	r1, [sp, #4]
 3717              	.LVL520:
 3718 0060 D7E7     		b	.L384
 3719              	.LVL521:
 3720              	.L391:
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir = 0;
 3721              		.loc 1 2147 0
 3722 0062 0021     		movs	r1, #0
 3723 0064 2046     		mov	r0, r4
 3724              	.LVL522:
 3725 0066 FFF7FEFF 		bl	dir_sdi
 3726              	.LVL523:
 3727 006a 0346     		mov	r3, r0
 3728              	.LVL524:
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
 3729              		.loc 1 2148 0
 3730 006c 0022     		movs	r2, #0
 3731 006e C4F81422 		str	r2, [r4, #532]
 3732              	.LVL525:
 3733              	.L386:
2177:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3734              		.loc 1 2177 0
 3735 0072 1846     		mov	r0, r3
 3736 0074 02B0     		add	sp, sp, #8
 3737              	.LCFI44:
 3738              		.cfi_remember_state
 3739              		.cfi_def_cfa_offset 8
 3740              		@ sp needed
 3741 0076 10BD     		pop	{r4, pc}
 3742              	.LVL526:
 3743              	.L392:
 3744              	.LCFI45:
 3745              		.cfi_restore_state
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
 3746              		.loc 1 2156 0
 3747 0078 0428     		cmp	r0, #4
 3748 007a FAD1     		bne	.L386
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3749              		.loc 1 2162 0
 3750 007c 12F0040F 		tst	r2, #4
 3751 0080 F7D1     		bne	.L386
 3752 0082 0523     		movs	r3, #5
 3753 0084 F5E7     		b	.L386
 3754              	.LVL527:
 3755              	.L389:
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3756              		.loc 1 2170 0
 3757 0086 0523     		movs	r3, #5
 3758 0088 F3E7     		b	.L386
 3759              		.cfi_endproc
 3760              	.LFE160:
 3762              		.section	.text.dir_alloc,"ax",%progbits
 3763              		.align	1
 3764              		.syntax unified
 3765              		.thumb
 3766              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 116


 3767              		.fpu fpv4-sp-d16
 3769              	dir_alloc:
 3770              	.LFB151:
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3771              		.loc 1 1276 0
 3772              		.cfi_startproc
 3773              		@ args = 0, pretend = 0, frame = 0
 3774              		@ frame_needed = 0, uses_anonymous_args = 0
 3775              	.LVL528:
 3776 0000 70B5     		push	{r4, r5, r6, lr}
 3777              	.LCFI46:
 3778              		.cfi_def_cfa_offset 16
 3779              		.cfi_offset 4, -16
 3780              		.cfi_offset 5, -12
 3781              		.cfi_offset 6, -8
 3782              		.cfi_offset 14, -4
 3783 0002 0446     		mov	r4, r0
 3784 0004 0E46     		mov	r6, r1
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3785              		.loc 1 1281 0
 3786 0006 0021     		movs	r1, #0
 3787              	.LVL529:
 3788 0008 FFF7FEFF 		bl	dir_sdi
 3789              	.LVL530:
1282:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 3790              		.loc 1 1282 0
 3791 000c 0246     		mov	r2, r0
 3792 000e D8B9     		cbnz	r0, .L394
 3793 0010 0025     		movs	r5, #0
 3794 0012 08E0     		b	.L397
 3795              	.LVL531:
 3796              	.L395:
1288:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 3797              		.loc 1 1288 0
 3798 0014 0135     		adds	r5, r5, #1
 3799              	.LVL532:
 3800 0016 B542     		cmp	r5, r6
 3801 0018 16D0     		beq	.L394
 3802              	.LVL533:
 3803              	.L396:
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
 3804              		.loc 1 1292 0
 3805 001a 0121     		movs	r1, #1
 3806 001c 2046     		mov	r0, r4
 3807              	.LVL534:
 3808 001e FFF7FEFF 		bl	dir_next
 3809              	.LVL535:
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3810              		.loc 1 1293 0
 3811 0022 0246     		mov	r2, r0
 3812 0024 80B9     		cbnz	r0, .L394
 3813              	.LVL536:
 3814              	.L397:
1285:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3815              		.loc 1 1285 0
 3816 0026 D4F81012 		ldr	r1, [r4, #528]
 3817 002a D4F80002 		ldr	r0, [r4, #512]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 117


 3818              	.LVL537:
 3819 002e FFF7FEFF 		bl	move_window
 3820              	.LVL538:
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
 3821              		.loc 1 1286 0
 3822 0032 0246     		mov	r2, r0
 3823 0034 40B9     		cbnz	r0, .L394
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3824              		.loc 1 1287 0
 3825 0036 D4F81432 		ldr	r3, [r4, #532]
 3826 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3827 003c E52B     		cmp	r3, #229
 3828 003e E9D0     		beq	.L395
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3829              		.loc 1 1287 0 is_stmt 0 discriminator 1
 3830 0040 002B     		cmp	r3, #0
 3831 0042 E7D0     		beq	.L395
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3832              		.loc 1 1290 0 is_stmt 1
 3833 0044 0025     		movs	r5, #0
 3834              	.LVL539:
 3835 0046 E8E7     		b	.L396
 3836              	.L394:
 3837              	.LVL540:
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3838              		.loc 1 1295 0
 3839 0048 042A     		cmp	r2, #4
 3840 004a 01D0     		beq	.L402
 3841              	.LVL541:
 3842              	.L398:
1297:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3843              		.loc 1 1297 0
 3844 004c 1046     		mov	r0, r2
 3845 004e 70BD     		pop	{r4, r5, r6, pc}
 3846              	.LVL542:
 3847              	.L402:
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3848              		.loc 1 1295 0
 3849 0050 0722     		movs	r2, #7
 3850              	.LVL543:
 3851 0052 FBE7     		b	.L398
 3852              		.cfi_endproc
 3853              	.LFE151:
 3855              		.section	.text.dir_register,"ax",%progbits
 3856              		.align	1
 3857              		.syntax unified
 3858              		.thumb
 3859              		.thumb_func
 3860              		.fpu fpv4-sp-d16
 3862              	dir_register:
 3863              	.LFB156:
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3864              		.loc 1 1651 0
 3865              		.cfi_startproc
 3866              		@ args = 0, pretend = 0, frame = 0
 3867              		@ frame_needed = 0, uses_anonymous_args = 0
 3868              	.LVL544:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 118


 3869 0000 38B5     		push	{r3, r4, r5, lr}
 3870              	.LCFI47:
 3871              		.cfi_def_cfa_offset 16
 3872              		.cfi_offset 3, -16
 3873              		.cfi_offset 4, -12
 3874              		.cfi_offset 5, -8
 3875              		.cfi_offset 14, -4
 3876 0002 0546     		mov	r5, r0
1699:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3877              		.loc 1 1699 0
 3878 0004 0121     		movs	r1, #1
 3879 0006 FFF7FEFF 		bl	dir_alloc
 3880              	.LVL545:
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3881              		.loc 1 1702 0
 3882 000a 0446     		mov	r4, r0
 3883 000c 08B1     		cbz	r0, .L406
 3884              	.LVL546:
 3885              	.L404:
1715:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 3886              		.loc 1 1715 0
 3887 000e 2046     		mov	r0, r4
 3888 0010 38BD     		pop	{r3, r4, r5, pc}
 3889              	.LVL547:
 3890              	.L406:
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 3891              		.loc 1 1703 0
 3892 0012 D5F81012 		ldr	r1, [r5, #528]
 3893 0016 D5F80002 		ldr	r0, [r5, #512]
 3894              	.LVL548:
 3895 001a FFF7FEFF 		bl	move_window
 3896              	.LVL549:
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
 3897              		.loc 1 1704 0
 3898 001e 0446     		mov	r4, r0
 3899 0020 0028     		cmp	r0, #0
 3900 0022 F4D1     		bne	.L404
1705:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
 3901              		.loc 1 1705 0
 3902 0024 2022     		movs	r2, #32
 3903 0026 0021     		movs	r1, #0
 3904 0028 D5F81402 		ldr	r0, [r5, #532]
 3905              	.LVL550:
 3906 002c FFF7FEFF 		bl	mem_set
 3907              	.LVL551:
1706:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 3908              		.loc 1 1706 0
 3909 0030 0B22     		movs	r2, #11
 3910 0032 D5F81812 		ldr	r1, [r5, #536]
 3911 0036 D5F81402 		ldr	r0, [r5, #532]
 3912 003a FFF7FEFF 		bl	mem_cpy
 3913              	.LVL552:
1710:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3914              		.loc 1 1710 0
 3915 003e D5F80032 		ldr	r3, [r5, #512]
 3916 0042 0122     		movs	r2, #1
 3917 0044 83F80422 		strb	r2, [r3, #516]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 119


 3918 0048 E1E7     		b	.L404
 3919              		.cfi_endproc
 3920              	.LFE156:
 3922              		.section	.text.dir_read,"ax",%progbits
 3923              		.align	1
 3924              		.syntax unified
 3925              		.thumb
 3926              		.thumb_func
 3927              		.fpu fpv4-sp-d16
 3929              	dir_read:
 3930              	.LFB155:
1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3931              		.loc 1 1593 0
 3932              		.cfi_startproc
 3933              		@ args = 0, pretend = 0, frame = 0
 3934              		@ frame_needed = 0, uses_anonymous_args = 0
 3935              	.LVL553:
 3936 0000 70B5     		push	{r4, r5, r6, lr}
 3937              	.LCFI48:
 3938              		.cfi_def_cfa_offset 16
 3939              		.cfi_offset 4, -16
 3940              		.cfi_offset 5, -12
 3941              		.cfi_offset 6, -8
 3942              		.cfi_offset 14, -4
 3943 0002 0446     		mov	r4, r0
 3944 0004 0D46     		mov	r5, r1
 3945              	.LVL554:
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
 3946              		.loc 1 1600 0
 3947 0006 0426     		movs	r6, #4
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3948              		.loc 1 1601 0
 3949 0008 05E0     		b	.L408
 3950              	.LVL555:
 3951              	.L410:
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3952              		.loc 1 1630 0
 3953 000a 0021     		movs	r1, #0
 3954 000c 2046     		mov	r0, r4
 3955              	.LVL556:
 3956 000e FFF7FEFF 		bl	dir_next
 3957              	.LVL557:
1631:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3958              		.loc 1 1631 0
 3959 0012 0646     		mov	r6, r0
 3960 0014 F8B9     		cbnz	r0, .L409
 3961              	.LVL558:
 3962              	.L408:
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3963              		.loc 1 1601 0
 3964 0016 D4F81012 		ldr	r1, [r4, #528]
 3965 001a E1B1     		cbz	r1, .L409
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3966              		.loc 1 1602 0
 3967 001c D4F80002 		ldr	r0, [r4, #512]
 3968 0020 FFF7FEFF 		bl	move_window
 3969              	.LVL559:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 120


1603:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 3970              		.loc 1 1603 0
 3971 0024 0646     		mov	r6, r0
 3972 0026 B0B9     		cbnz	r0, .L409
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
 3973              		.loc 1 1604 0
 3974 0028 D4F81432 		ldr	r3, [r4, #532]
 3975              	.LVL560:
1605:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 3976              		.loc 1 1605 0
 3977 002c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3978              	.LVL561:
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 3979              		.loc 1 1606 0
 3980 002e 8AB1     		cbz	r2, .L413
1607:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3981              		.loc 1 1607 0
 3982 0030 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 3983              	.LVL562:
 3984 0032 03F03F03 		and	r3, r3, #63
 3985              	.LVL563:
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3986              		.loc 1 1627 0
 3987 0036 E52A     		cmp	r2, #229
 3988 0038 E7D0     		beq	.L410
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3989              		.loc 1 1627 0 is_stmt 0 discriminator 1
 3990 003a 2E2A     		cmp	r2, #46
 3991 003c E5D0     		beq	.L410
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3992              		.loc 1 1627 0 discriminator 2
 3993 003e 0F2B     		cmp	r3, #15
 3994 0040 E3D0     		beq	.L410
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3995              		.loc 1 1627 0 discriminator 3
 3996 0042 23F02003 		bic	r3, r3, #32
 3997              	.LVL564:
 3998 0046 082B     		cmp	r3, #8
 3999 0048 14BF     		ite	ne
 4000 004a 0023     		movne	r3, #0
 4001 004c 0123     		moveq	r3, #1
 4002 004e AB42     		cmp	r3, r5
 4003 0050 DBD1     		bne	.L410
 4004 0052 00E0     		b	.L409
 4005              	.LVL565:
 4006              	.L413:
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4007              		.loc 1 1606 0 is_stmt 1
 4008 0054 0426     		movs	r6, #4
 4009              	.LVL566:
 4010              	.L409:
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4011              		.loc 1 1634 0
 4012 0056 16B1     		cbz	r6, .L412
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4013              		.loc 1 1634 0 is_stmt 0 discriminator 1
 4014 0058 0023     		movs	r3, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 121


 4015 005a C4F81032 		str	r3, [r4, #528]
 4016              	.L412:
1637:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
 4017              		.loc 1 1637 0 is_stmt 1
 4018 005e 3046     		mov	r0, r6
 4019 0060 70BD     		pop	{r4, r5, r6, pc}
 4020              		.cfi_endproc
 4021              	.LFE155:
 4023              		.section	.text.remove_chain,"ax",%progbits
 4024              		.align	1
 4025              		.syntax unified
 4026              		.thumb
 4027              		.thumb_func
 4028              		.fpu fpv4-sp-d16
 4030              	remove_chain:
 4031              	.LFB146:
1014:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4032              		.loc 1 1014 0
 4033              		.cfi_startproc
 4034              		@ args = 0, pretend = 0, frame = 0
 4035              		@ frame_needed = 0, uses_anonymous_args = 0
 4036              	.LVL567:
 4037 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4038              	.LCFI49:
 4039              		.cfi_def_cfa_offset 24
 4040              		.cfi_offset 3, -24
 4041              		.cfi_offset 4, -20
 4042              		.cfi_offset 5, -16
 4043              		.cfi_offset 6, -12
 4044              		.cfi_offset 7, -8
 4045              		.cfi_offset 14, -4
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 4046              		.loc 1 1021 0
 4047 0002 0129     		cmp	r1, #1
 4048 0004 2FD9     		bls	.L420
 4049 0006 0446     		mov	r4, r0
 4050 0008 0D46     		mov	r5, r1
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 4051              		.loc 1 1021 0 is_stmt 0 discriminator 1
 4052 000a D0F81832 		ldr	r3, [r0, #536]
 4053 000e 9942     		cmp	r1, r3
 4054 0010 01D3     		bcc	.L425
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4055              		.loc 1 1022 0 is_stmt 1
 4056 0012 0227     		movs	r7, #2
 4057 0014 28E0     		b	.L416
 4058              	.L425:
 4059 0016 0027     		movs	r7, #0
 4060 0018 00E0     		b	.L417
 4061              	.LVL568:
 4062              	.L418:
 4063 001a 3546     		mov	r5, r6
 4064              	.LVL569:
 4065              	.L417:
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 4066              		.loc 1 1026 0
 4067 001c D4F81832 		ldr	r3, [r4, #536]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 122


 4068 0020 9D42     		cmp	r5, r3
 4069 0022 21D2     		bcs	.L416
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 4070              		.loc 1 1027 0
 4071 0024 2946     		mov	r1, r5
 4072 0026 2046     		mov	r0, r4
 4073 0028 FFF7FEFF 		bl	get_fat
 4074              	.LVL570:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 4075              		.loc 1 1028 0
 4076 002c 0646     		mov	r6, r0
 4077 002e D8B1     		cbz	r0, .L416
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4078              		.loc 1 1029 0
 4079 0030 0128     		cmp	r0, #1
 4080 0032 1BD0     		beq	.L422
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4081              		.loc 1 1030 0
 4082 0034 B0F1FF3F 		cmp	r0, #-1
 4083 0038 1AD0     		beq	.L423
1031:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4084              		.loc 1 1031 0
 4085 003a 0022     		movs	r2, #0
 4086 003c 2946     		mov	r1, r5
 4087 003e 2046     		mov	r0, r4
 4088              	.LVL571:
 4089 0040 FFF7FEFF 		bl	put_fat
 4090              	.LVL572:
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 4091              		.loc 1 1032 0
 4092 0044 0746     		mov	r7, r0
 4093 0046 78B9     		cbnz	r0, .L416
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clust++;
 4094              		.loc 1 1033 0
 4095 0048 D4F81432 		ldr	r3, [r4, #532]
 4096 004c B3F1FF3F 		cmp	r3, #-1
 4097 0050 E3D0     		beq	.L418
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
 4098              		.loc 1 1034 0
 4099 0052 0133     		adds	r3, r3, #1
 4100 0054 C4F81432 		str	r3, [r4, #532]
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4101              		.loc 1 1035 0
 4102 0058 94F80532 		ldrb	r3, [r4, #517]	@ zero_extendqisi2
 4103 005c 43F00103 		orr	r3, r3, #1
 4104 0060 84F80532 		strb	r3, [r4, #517]
 4105 0064 D9E7     		b	.L418
 4106              	.LVL573:
 4107              	.L420:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4108              		.loc 1 1022 0
 4109 0066 0227     		movs	r7, #2
 4110              	.LVL574:
 4111              	.L416:
1052:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4112              		.loc 1 1052 0
 4113 0068 3846     		mov	r0, r7
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 123


 4114 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4115              	.LVL575:
 4116              	.L422:
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4117              		.loc 1 1029 0
 4118 006c 0227     		movs	r7, #2
 4119              	.LVL576:
 4120 006e FBE7     		b	.L416
 4121              	.LVL577:
 4122              	.L423:
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4123              		.loc 1 1030 0
 4124 0070 0127     		movs	r7, #1
 4125              	.LVL578:
 4126 0072 F9E7     		b	.L416
 4127              		.cfi_endproc
 4128              	.LFE146:
 4130              		.section	.text.f_mount,"ax",%progbits
 4131              		.align	1
 4132              		.global	f_mount
 4133              		.syntax unified
 4134              		.thumb
 4135              		.thumb_func
 4136              		.fpu fpv4-sp-d16
 4138              	f_mount:
 4139              	.LFB165:
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 
2460:Middlewares/Third_Party/FatFs/src/ff.c **** 
2461:Middlewares/Third_Party/FatFs/src/ff.c **** 
2462:Middlewares/Third_Party/FatFs/src/ff.c **** 
2463:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
2464:Middlewares/Third_Party/FatFs/src/ff.c **** 
2465:Middlewares/Third_Party/FatFs/src/ff.c ****    Public Functions
2466:Middlewares/Third_Party/FatFs/src/ff.c **** 
2467:Middlewares/Third_Party/FatFs/src/ff.c **** --------------------------------------------------------------------------*/
2468:Middlewares/Third_Party/FatFs/src/ff.c **** 
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 
2470:Middlewares/Third_Party/FatFs/src/ff.c **** 
2471:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2472:Middlewares/Third_Party/FatFs/src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
2473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 
2475:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mount (
2476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
2477:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
2478:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
2479:Middlewares/Third_Party/FatFs/src/ff.c **** )
2480:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4140              		.loc 1 2480 0
 4141              		.cfi_startproc
 4142              		@ args = 0, pretend = 0, frame = 16
 4143              		@ frame_needed = 0, uses_anonymous_args = 0
 4144              	.LVL579:
 4145 0000 70B5     		push	{r4, r5, r6, lr}
 4146              	.LCFI50:
 4147              		.cfi_def_cfa_offset 16
 4148              		.cfi_offset 4, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 124


 4149              		.cfi_offset 5, -12
 4150              		.cfi_offset 6, -8
 4151              		.cfi_offset 14, -4
 4152 0002 84B0     		sub	sp, sp, #16
 4153              	.LCFI51:
 4154              		.cfi_def_cfa_offset 32
 4155 0004 0190     		str	r0, [sp, #4]
 4156 0006 0091     		str	r1, [sp]
 4157 0008 1646     		mov	r6, r2
2481:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2483:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2484:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
 4158              		.loc 1 2484 0
 4159 000a 04A8     		add	r0, sp, #16
 4160              	.LVL580:
 4161 000c 40F8041D 		str	r1, [r0, #-4]!
2485:Middlewares/Third_Party/FatFs/src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 
2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&rp);
 4162              		.loc 1 2487 0
 4163 0010 FFF7FEFF 		bl	get_ldnumber
 4164              	.LVL581:
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 4165              		.loc 1 2488 0
 4166 0014 051E     		subs	r5, r0, #0
 4167 0016 31DB     		blt	.L430
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 4168              		.loc 1 2489 0
 4169 0018 1B4B     		ldr	r3, .L438
 4170 001a 53F82540 		ldr	r4, [r3, r5, lsl #2]
 4171              	.LVL582:
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cfs) {
 4172              		.loc 1 2491 0
 4173 001e 64B1     		cbz	r4, .L428
2492:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 		clear_lock(cfs);
 4174              		.loc 1 2493 0
 4175 0020 2046     		mov	r0, r4
 4176              	.LVL583:
 4177 0022 FFF7FEFF 		bl	clear_lock
 4178              	.LVL584:
2494:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2495:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
2496:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
 4179              		.loc 1 2496 0
 4180 0026 D4F80C02 		ldr	r0, [r4, #524]
 4181 002a FFF7FEFF 		bl	ff_del_syncobj
 4182              	.LVL585:
 4183 002e 08B9     		cbnz	r0, .L436
 4184 0030 0224     		movs	r4, #2
 4185              	.LVL586:
 4186 0032 24E0     		b	.L427
 4187              	.LVL587:
 4188              	.L436:
2497:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 125


2498:Middlewares/Third_Party/FatFs/src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
 4189              		.loc 1 2498 0
 4190 0034 0023     		movs	r3, #0
 4191 0036 84F80032 		strb	r3, [r4, #512]
 4192              	.L428:
2499:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2500:Middlewares/Third_Party/FatFs/src/ff.c **** 
2501:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs) {
 4193              		.loc 1 2501 0
 4194 003a 0199     		ldr	r1, [sp, #4]
 4195 003c 51B1     		cbz	r1, .L429
2502:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 4196              		.loc 1 2502 0
 4197 003e 0023     		movs	r3, #0
 4198 0040 81F80032 		strb	r3, [r1, #512]
2503:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
 4199              		.loc 1 2504 0
 4200 0044 01F50371 		add	r1, r1, #524
 4201 0048 E8B2     		uxtb	r0, r5
 4202 004a FFF7FEFF 		bl	ff_cre_syncobj
 4203              	.LVL588:
 4204 004e 08B9     		cbnz	r0, .L429
 4205 0050 0224     		movs	r4, #2
 4206              	.LVL589:
 4207 0052 14E0     		b	.L427
 4208              	.LVL590:
 4209              	.L429:
2505:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
 4210              		.loc 1 2507 0
 4211 0054 019B     		ldr	r3, [sp, #4]
 4212 0056 0C4A     		ldr	r2, .L438
 4213 0058 42F82530 		str	r3, [r2, r5, lsl #2]
2508:Middlewares/Third_Party/FatFs/src/ff.c **** 
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
 4214              		.loc 1 2509 0
 4215 005c 93B1     		cbz	r3, .L433
 4216              		.loc 1 2509 0 is_stmt 0 discriminator 2
 4217 005e 012E     		cmp	r6, #1
 4218 0060 01D0     		beq	.L437
 4219              		.loc 1 2509 0
 4220 0062 0024     		movs	r4, #0
 4221              	.LVL591:
 4222 0064 0BE0     		b	.L427
 4223              	.LVL592:
 4224              	.L437:
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
 4225              		.loc 1 2511 0 is_stmt 1
 4226 0066 0022     		movs	r2, #0
 4227 0068 6946     		mov	r1, sp
 4228 006a 01A8     		add	r0, sp, #4
 4229 006c FFF7FEFF 		bl	find_volume
 4230              	.LVL593:
 4231 0070 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 126


 4232              	.LVL594:
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 4233              		.loc 1 2512 0
 4234 0072 0146     		mov	r1, r0
 4235 0074 0198     		ldr	r0, [sp, #4]
 4236              	.LVL595:
 4237 0076 FFF7FEFF 		bl	unlock_fs
 4238              	.LVL596:
 4239 007a 00E0     		b	.L427
 4240              	.LVL597:
 4241              	.L430:
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 4242              		.loc 1 2488 0
 4243 007c 0B24     		movs	r4, #11
 4244              	.LVL598:
 4245              	.L427:
2513:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4246              		.loc 1 2513 0
 4247 007e 2046     		mov	r0, r4
 4248 0080 04B0     		add	sp, sp, #16
 4249              	.LCFI52:
 4250              		.cfi_remember_state
 4251              		.cfi_def_cfa_offset 16
 4252              		@ sp needed
 4253 0082 70BD     		pop	{r4, r5, r6, pc}
 4254              	.LVL599:
 4255              	.L433:
 4256              	.LCFI53:
 4257              		.cfi_restore_state
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4258              		.loc 1 2509 0
 4259 0084 0024     		movs	r4, #0
 4260              	.LVL600:
 4261 0086 FAE7     		b	.L427
 4262              	.L439:
 4263              		.align	2
 4264              	.L438:
 4265 0088 00000000 		.word	.LANCHOR2
 4266              		.cfi_endproc
 4267              	.LFE165:
 4269              		.section	.text.f_open,"ax",%progbits
 4270              		.align	1
 4271              		.global	f_open
 4272              		.syntax unified
 4273              		.thumb
 4274              		.thumb_func
 4275              		.fpu fpv4-sp-d16
 4277              	f_open:
 4278              	.LFB166:
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 
2515:Middlewares/Third_Party/FatFs/src/ff.c **** 
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 
2517:Middlewares/Third_Party/FatFs/src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2519:Middlewares/Third_Party/FatFs/src/ff.c **** /* Open or Create a File                                                 */
2520:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 127


2522:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_open (
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
2525:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
2526:Middlewares/Third_Party/FatFs/src/ff.c **** )
2527:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4279              		.loc 1 2527 0
 4280              		.cfi_startproc
 4281              		@ args = 0, pretend = 0, frame = 568
 4282              		@ frame_needed = 0, uses_anonymous_args = 0
 4283              	.LVL601:
 4284 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4285              	.LCFI54:
 4286              		.cfi_def_cfa_offset 28
 4287              		.cfi_offset 4, -28
 4288              		.cfi_offset 5, -24
 4289              		.cfi_offset 6, -20
 4290              		.cfi_offset 7, -16
 4291              		.cfi_offset 8, -12
 4292              		.cfi_offset 9, -8
 4293              		.cfi_offset 14, -4
 4294 0004 ADF50F7D 		sub	sp, sp, #572
 4295              	.LCFI55:
 4296              		.cfi_def_cfa_offset 600
 4297 0008 0191     		str	r1, [sp, #4]
2528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
2532:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2533:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw, cl;
2534:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2535:Middlewares/Third_Party/FatFs/src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/src/ff.c **** 
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
 4298              		.loc 1 2537 0
 4299 000a 0028     		cmp	r0, #0
 4300 000c 00F0EC80 		beq	.L451
 4301 0010 0446     		mov	r4, r0
 4302 0012 1646     		mov	r6, r2
2538:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 4303              		.loc 1 2538 0
 4304 0014 0023     		movs	r3, #0
 4305 0016 C0F80032 		str	r3, [r0, #512]
2539:Middlewares/Third_Party/FatFs/src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
2541:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2542:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
 4306              		.loc 1 2542 0
 4307 001a 02F01F07 		and	r7, r2, #31
 4308              	.LVL602:
2543:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
 4309              		.loc 1 2543 0
 4310 001e 02F01E02 		and	r2, r2, #30
 4311 0022 01A9     		add	r1, sp, #4
 4312              	.LVL603:
 4313 0024 86A8     		add	r0, sp, #536
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 128


 4314              	.LVL604:
 4315 0026 FFF7FEFF 		bl	find_volume
 4316              	.LVL605:
2544:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2545:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= FA_READ;
2546:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2547:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2548:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4317              		.loc 1 2548 0
 4318 002a 0546     		mov	r5, r0
 4319 002c 40B1     		cbz	r0, .L460
 4320              	.LVL606:
 4321              	.L442:
2549:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
2550:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
2551:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dj.dir;
2552:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir)	/* Default directory itself */
2555:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
2556:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2557:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
2558:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2559:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2560:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2561:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create or Open a file */
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
2563:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
2564:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
2565:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2566:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
2567:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2568:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&dj);
2569:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2570:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;					/* New entry */
2572:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2573:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {								/* Any object is already existing */
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
2576:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_EXIST;
2579:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2580:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_CrtTime, dw);
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 					dw = dj.fs->winsect;
2591:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, cl);
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 129


2593:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(dj.fs, dw);
2595:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2596:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2597:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2599:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {	/* Open an existing file */
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Follow succeeded */
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
2603:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
2606:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2607:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2608:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2609:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA__WRITTEN;
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
2613:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dir;
2614:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2615:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2616:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
2617:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2618:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2619:Middlewares/Third_Party/FatFs/src/ff.c **** 
2620:Middlewares/Third_Party/FatFs/src/ff.c **** #else				/* R/O configuration */
2621:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow succeeded */
2622:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
2623:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Current directory itself */
2624:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
2625:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2626:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
2627:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
2628:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2629:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2630:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2631:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;					/* File access mode */
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;						/* Clear error flag */
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;						/* File pointer */
2639:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = 0;
2640:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2641:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->cltbl = 0;						/* Normal seek mode */
2642:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fs = dj.fs;	 					/* Validate file object */
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->id = fp->fs->id;
2645:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2647:Middlewares/Third_Party/FatFs/src/ff.c **** 
2648:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
 4322              		.loc 1 2648 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 130


 4323 002e 2946     		mov	r1, r5
 4324 0030 8698     		ldr	r0, [sp, #536]
 4325 0032 FFF7FEFF 		bl	unlock_fs
 4326              	.LVL607:
 4327              	.L441:
2649:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4328              		.loc 1 2649 0
 4329 0036 2846     		mov	r0, r5
 4330 0038 0DF50F7D 		add	sp, sp, #572
 4331              	.LCFI56:
 4332              		.cfi_remember_state
 4333              		.cfi_def_cfa_offset 28
 4334              		@ sp needed
 4335 003c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4336              	.LVL608:
 4337              	.L460:
 4338              	.LCFI57:
 4339              		.cfi_restore_state
2549:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 4340              		.loc 1 2549 0
 4341 0040 03AB     		add	r3, sp, #12
 4342 0042 8C93     		str	r3, [sp, #560]
2550:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dj.dir;
 4343              		.loc 1 2550 0
 4344 0044 0199     		ldr	r1, [sp, #4]
 4345 0046 06A8     		add	r0, sp, #24
 4346              	.LVL609:
 4347 0048 FFF7FEFF 		bl	follow_path
 4348              	.LVL610:
2551:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 4349              		.loc 1 2551 0
 4350 004c DDF82C82 		ldr	r8, [sp, #556]
 4351              	.LVL611:
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir)	/* Default directory itself */
 4352              		.loc 1 2553 0
 4353 0050 0546     		mov	r5, r0
 4354 0052 58B9     		cbnz	r0, .L443
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 4355              		.loc 1 2554 0
 4356 0054 B8F1000F 		cmp	r8, #0
 4357 0058 5CD0     		beq	.L452
2558:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4358              		.loc 1 2558 0
 4359 005a 37F00103 		bics	r3, r7, #1
 4360 005e 14BF     		ite	ne
 4361 0060 0121     		movne	r1, #1
 4362 0062 0021     		moveq	r1, #0
 4363 0064 06A8     		add	r0, sp, #24
 4364              	.LVL612:
 4365 0066 FFF7FEFF 		bl	chk_lock
 4366              	.LVL613:
 4367 006a 0546     		mov	r5, r0
 4368              	.LVL614:
 4369              	.L443:
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 4370              		.loc 1 2562 0
 4371 006c 16F01C0F 		tst	r6, #28
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 131


 4372 0070 00F0A680 		beq	.L444
2563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 4373              		.loc 1 2563 0
 4374 0074 002D     		cmp	r5, #0
 4375 0076 59D0     		beq	.L445
2564:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4376              		.loc 1 2564 0
 4377 0078 042D     		cmp	r5, #4
 4378 007a 4DD0     		beq	.L461
 4379              	.LVL615:
 4380              	.L446:
2570:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;					/* New entry */
 4381              		.loc 1 2570 0
 4382 007c 47F00807 		orr	r7, r7, #8
 4383              	.LVL616:
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4384              		.loc 1 2571 0
 4385 0080 DDF82C82 		ldr	r8, [sp, #556]
 4386              	.LVL617:
 4387              	.L447:
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 4388              		.loc 1 2581 0
 4389 0084 15B9     		cbnz	r5, .L448
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 4390              		.loc 1 2581 0 is_stmt 0 discriminator 1
 4391 0086 17F0080F 		tst	r7, #8
 4392 008a 5BD1     		bne	.L462
 4393              	.LVL618:
 4394              	.L448:
2609:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 4395              		.loc 1 2609 0 is_stmt 1
 4396 008c BDB9     		cbnz	r5, .L449
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA__WRITTEN;
 4397              		.loc 1 2610 0
 4398 008e 17F0080F 		tst	r7, #8
 4399 0092 01D0     		beq	.L450
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
 4400              		.loc 1 2611 0
 4401 0094 47F02007 		orr	r7, r7, #32
 4402              	.LVL619:
 4403              	.L450:
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dir;
 4404              		.loc 1 2612 0
 4405 0098 869B     		ldr	r3, [sp, #536]
 4406 009a D3F83032 		ldr	r3, [r3, #560]
 4407 009e C4F81C32 		str	r3, [r4, #540]
2613:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4408              		.loc 1 2613 0
 4409 00a2 C4F82082 		str	r8, [r4, #544]
2615:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
 4410              		.loc 1 2615 0
 4411 00a6 37F00103 		bics	r3, r7, #1
 4412 00aa 14BF     		ite	ne
 4413 00ac 0121     		movne	r1, #1
 4414 00ae 0021     		moveq	r1, #0
 4415 00b0 06A8     		add	r0, sp, #24
 4416 00b2 FFF7FEFF 		bl	inc_lock
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 132


 4417              	.LVL620:
 4418 00b6 C4F82802 		str	r0, [r4, #552]
2616:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4419              		.loc 1 2616 0
 4420 00ba 00B9     		cbnz	r0, .L449
 4421 00bc 0225     		movs	r5, #2
 4422              	.LVL621:
 4423              	.L449:
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;					/* File access mode */
 4424              		.loc 1 2633 0
 4425 00be 002D     		cmp	r5, #0
 4426 00c0 B5D1     		bne	.L442
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;						/* Clear error flag */
 4427              		.loc 1 2634 0
 4428 00c2 84F80672 		strb	r7, [r4, #518]
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 4429              		.loc 1 2635 0
 4430 00c6 0026     		movs	r6, #0
 4431 00c8 84F80762 		strb	r6, [r4, #519]
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
 4432              		.loc 1 2636 0
 4433 00cc 869F     		ldr	r7, [sp, #536]
 4434              	.LVL622:
 4435 00ce 4146     		mov	r1, r8
 4436 00d0 3846     		mov	r0, r7
 4437 00d2 FFF7FEFF 		bl	ld_clust
 4438              	.LVL623:
 4439 00d6 C4F81002 		str	r0, [r4, #528]
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 4440              		.loc 1 2637 0
 4441 00da 98F81F20 		ldrb	r2, [r8, #31]	@ zero_extendqisi2
 4442 00de 98F81E30 		ldrb	r3, [r8, #30]	@ zero_extendqisi2
 4443 00e2 1B04     		lsls	r3, r3, #16
 4444 00e4 43EA0263 		orr	r3, r3, r2, lsl #24
 4445 00e8 98F81D20 		ldrb	r2, [r8, #29]	@ zero_extendqisi2
 4446 00ec 43EA0223 		orr	r3, r3, r2, lsl #8
 4447 00f0 98F81C20 		ldrb	r2, [r8, #28]	@ zero_extendqisi2
 4448 00f4 1343     		orrs	r3, r3, r2
 4449 00f6 C4F80C32 		str	r3, [r4, #524]
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = 0;
 4450              		.loc 1 2638 0
 4451 00fa C4F80862 		str	r6, [r4, #520]
2639:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
 4452              		.loc 1 2639 0
 4453 00fe C4F81862 		str	r6, [r4, #536]
2641:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4454              		.loc 1 2641 0
 4455 0102 C4F82462 		str	r6, [r4, #548]
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->id = fp->fs->id;
 4456              		.loc 1 2643 0
 4457 0106 C4F80072 		str	r7, [r4, #512]
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4458              		.loc 1 2644 0
 4459 010a B7F80632 		ldrh	r3, [r7, #518]
 4460 010e A4F80432 		strh	r3, [r4, #516]	@ movhi
 4461 0112 8CE7     		b	.L442
 4462              	.LVL624:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 133


 4463              	.L452:
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4464              		.loc 1 2555 0
 4465 0114 0625     		movs	r5, #6
 4466 0116 A9E7     		b	.L443
 4467              	.LVL625:
 4468              	.L461:
2566:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4469              		.loc 1 2566 0
 4470 0118 FFF7FEFF 		bl	enq_lock
 4471              	.LVL626:
 4472 011c 08B9     		cbnz	r0, .L463
 4473 011e 1225     		movs	r5, #18
 4474              	.LVL627:
 4475 0120 ACE7     		b	.L446
 4476              	.LVL628:
 4477              	.L463:
2566:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4478              		.loc 1 2566 0 is_stmt 0 discriminator 1
 4479 0122 06A8     		add	r0, sp, #24
 4480 0124 FFF7FEFF 		bl	dir_register
 4481              	.LVL629:
 4482 0128 0546     		mov	r5, r0
 4483              	.LVL630:
 4484 012a A7E7     		b	.L446
 4485              	.LVL631:
 4486              	.L445:
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 4487              		.loc 1 2574 0 is_stmt 1
 4488 012c 98F80B30 		ldrb	r3, [r8, #11]	@ zero_extendqisi2
 4489 0130 13F0110F 		tst	r3, #17
 4490 0134 04D1     		bne	.L454
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_EXIST;
 4491              		.loc 1 2577 0
 4492 0136 16F0040F 		tst	r6, #4
 4493 013a A3D0     		beq	.L447
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4494              		.loc 1 2578 0
 4495 013c 0825     		movs	r5, #8
 4496              	.LVL632:
 4497 013e A1E7     		b	.L447
 4498              	.LVL633:
 4499              	.L454:
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4500              		.loc 1 2575 0
 4501 0140 0725     		movs	r5, #7
 4502              	.LVL634:
 4503 0142 9FE7     		b	.L447
 4504              	.LVL635:
 4505              	.L462:
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_CrtTime, dw);
 4506              		.loc 1 2582 0
 4507 0144 FFF7FEFF 		bl	get_fattime
 4508              	.LVL636:
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 4509              		.loc 1 2583 0
 4510 0148 88F80E00 		strb	r0, [r8, #14]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 134


 4511 014c C0F30723 		ubfx	r3, r0, #8, #8
 4512 0150 88F80F30 		strb	r3, [r8, #15]
 4513 0154 C0F30743 		ubfx	r3, r0, #16, #8
 4514 0158 88F81030 		strb	r3, [r8, #16]
 4515 015c 000E     		lsrs	r0, r0, #24
 4516              	.LVL637:
 4517 015e 88F81100 		strb	r0, [r8, #17]
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
 4518              		.loc 1 2584 0
 4519 0162 0026     		movs	r6, #0
 4520 0164 88F80B60 		strb	r6, [r8, #11]
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 4521              		.loc 1 2585 0
 4522 0168 88F81C60 		strb	r6, [r8, #28]
 4523 016c 88F81D60 		strb	r6, [r8, #29]
 4524 0170 88F81E60 		strb	r6, [r8, #30]
 4525 0174 88F81F60 		strb	r6, [r8, #31]
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
 4526              		.loc 1 2586 0
 4527 0178 4146     		mov	r1, r8
 4528 017a 8698     		ldr	r0, [sp, #536]
 4529 017c FFF7FEFF 		bl	ld_clust
 4530              	.LVL638:
 4531 0180 8146     		mov	r9, r0
 4532              	.LVL639:
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 4533              		.loc 1 2587 0
 4534 0182 3146     		mov	r1, r6
 4535 0184 4046     		mov	r0, r8
 4536              	.LVL640:
 4537 0186 FFF7FEFF 		bl	st_clust
 4538              	.LVL641:
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 4539              		.loc 1 2588 0
 4540 018a 8698     		ldr	r0, [sp, #536]
 4541 018c 0123     		movs	r3, #1
 4542 018e 80F80432 		strb	r3, [r0, #516]
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 					dw = dj.fs->winsect;
 4543              		.loc 1 2589 0
 4544 0192 B9F1000F 		cmp	r9, #0
 4545 0196 3FF479AF 		beq	.L448
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, cl);
 4546              		.loc 1 2590 0
 4547 019a D0F83062 		ldr	r6, [r0, #560]
 4548              	.LVL642:
2591:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 4549              		.loc 1 2591 0
 4550 019e 4946     		mov	r1, r9
 4551 01a0 FFF7FEFF 		bl	remove_chain
 4552              	.LVL643:
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 4553              		.loc 1 2592 0
 4554 01a4 0546     		mov	r5, r0
 4555 01a6 0028     		cmp	r0, #0
 4556 01a8 7FF470AF 		bne	.L448
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(dj.fs, dw);
 4557              		.loc 1 2593 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 135


 4558 01ac 8698     		ldr	r0, [sp, #536]
 4559              	.LVL644:
 4560 01ae 09F1FF33 		add	r3, r9, #-1
 4561 01b2 C0F81032 		str	r3, [r0, #528]
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4562              		.loc 1 2594 0
 4563 01b6 3146     		mov	r1, r6
 4564 01b8 FFF7FEFF 		bl	move_window
 4565              	.LVL645:
 4566 01bc 0546     		mov	r5, r0
 4567              	.LVL646:
 4568 01be 65E7     		b	.L448
 4569              	.LVL647:
 4570              	.L444:
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
 4571              		.loc 1 2600 0
 4572 01c0 002D     		cmp	r5, #0
 4573 01c2 7FF463AF 		bne	.L448
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 4574              		.loc 1 2601 0
 4575 01c6 98F80B30 		ldrb	r3, [r8, #11]	@ zero_extendqisi2
 4576 01ca 13F0100F 		tst	r3, #16
 4577 01ce 09D1     		bne	.L456
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 4578              		.loc 1 2604 0
 4579 01d0 16F0020F 		tst	r6, #2
 4580 01d4 3FF45AAF 		beq	.L448
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 4581              		.loc 1 2604 0 is_stmt 0 discriminator 1
 4582 01d8 13F0010F 		tst	r3, #1
 4583 01dc 3FF456AF 		beq	.L448
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4584              		.loc 1 2605 0 is_stmt 1
 4585 01e0 0725     		movs	r5, #7
 4586              	.LVL648:
 4587 01e2 53E7     		b	.L448
 4588              	.LVL649:
 4589              	.L456:
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4590              		.loc 1 2602 0
 4591 01e4 0425     		movs	r5, #4
 4592              	.LVL650:
 4593 01e6 51E7     		b	.L448
 4594              	.LVL651:
 4595              	.L451:
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 4596              		.loc 1 2537 0
 4597 01e8 0925     		movs	r5, #9
 4598 01ea 24E7     		b	.L441
 4599              		.cfi_endproc
 4600              	.LFE166:
 4602              		.section	.text.f_read,"ax",%progbits
 4603              		.align	1
 4604              		.global	f_read
 4605              		.syntax unified
 4606              		.thumb
 4607              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 136


 4608              		.fpu fpv4-sp-d16
 4610              	f_read:
 4611              	.LFB167:
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 
2651:Middlewares/Third_Party/FatFs/src/ff.c **** 
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 
2653:Middlewares/Third_Party/FatFs/src/ff.c **** 
2654:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2655:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read File                                                             */
2656:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 
2658:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_read (
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 		/* Pointer to the file object */
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* buff,		/* Pointer to data buffer */
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btr,		/* Number of bytes to read */
2662:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* br		/* Pointer to number of bytes read */
2663:Middlewares/Third_Party/FatFs/src/ff.c **** )
2664:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4612              		.loc 1 2664 0
 4613              		.cfi_startproc
 4614              		@ args = 0, pretend = 0, frame = 8
 4615              		@ frame_needed = 0, uses_anonymous_args = 0
 4616              	.LVL652:
 4617 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4618              	.LCFI58:
 4619              		.cfi_def_cfa_offset 36
 4620              		.cfi_offset 4, -36
 4621              		.cfi_offset 5, -32
 4622              		.cfi_offset 6, -28
 4623              		.cfi_offset 7, -24
 4624              		.cfi_offset 8, -20
 4625              		.cfi_offset 9, -16
 4626              		.cfi_offset 10, -12
 4627              		.cfi_offset 11, -8
 4628              		.cfi_offset 14, -4
 4629 0004 83B0     		sub	sp, sp, #12
 4630              	.LCFI59:
 4631              		.cfi_def_cfa_offset 48
 4632 0006 0446     		mov	r4, r0
 4633 0008 8846     		mov	r8, r1
 4634 000a 1646     		mov	r6, r2
 4635 000c 9A46     		mov	r10, r3
 4636              	.LVL653:
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect, remain;
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc;
2668:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect, *rbuff = (BYTE*)buff;
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 
2671:Middlewares/Third_Party/FatFs/src/ff.c **** 	*br = 0;	/* Clear read byte counter */
 4637              		.loc 1 2671 0
 4638 000e 0023     		movs	r3, #0
 4639              	.LVL654:
 4640 0010 CAF80030 		str	r3, [r10]
2672:Middlewares/Third_Party/FatFs/src/ff.c **** 
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);							/* Check validity */
 4641              		.loc 1 2673 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 137


 4642 0014 FFF7FEFF 		bl	validate
 4643              	.LVL655:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 4644              		.loc 1 2674 0
 4645 0018 0190     		str	r0, [sp, #4]
 4646 001a 88B9     		cbnz	r0, .L492
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)								/* Check error */
 4647              		.loc 1 2675 0
 4648 001c 94F80712 		ldrb	r1, [r4, #519]	@ zero_extendqisi2
 4649 0020 A1B9     		cbnz	r1, .L493
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2677:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 4650              		.loc 1 2677 0
 4651 0022 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4652 0026 13F0010F 		tst	r3, #1
 4653 002a 17D0     		beq	.L494
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
 4654              		.loc 1 2679 0
 4655 002c D4F80C32 		ldr	r3, [r4, #524]
 4656 0030 D4F80822 		ldr	r2, [r4, #520]
 4657 0034 9B1A     		subs	r3, r3, r2
 4658              	.LVL656:
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 4659              		.loc 1 2680 0
 4660 0036 B342     		cmp	r3, r6
 4661 0038 80F09480 		bcs	.L470
 4662 003c 1E46     		mov	r6, r3
 4663              	.LVL657:
 4664 003e 91E0     		b	.L470
 4665              	.LVL658:
 4666              	.L492:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)								/* Check error */
 4667              		.loc 1 2674 0 discriminator 1
 4668 0040 0146     		mov	r1, r0
 4669 0042 D4F80002 		ldr	r0, [r4, #512]
 4670              	.LVL659:
 4671 0046 FFF7FEFF 		bl	unlock_fs
 4672              	.LVL660:
 4673 004a 0EE0     		b	.L466
 4674              	.LVL661:
 4675              	.L493:
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 4676              		.loc 1 2676 0
 4677 004c D4F80002 		ldr	r0, [r4, #512]
 4678              	.LVL662:
 4679 0050 FFF7FEFF 		bl	unlock_fs
 4680              	.LVL663:
 4681 0054 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 4682 0058 0193     		str	r3, [sp, #4]
 4683 005a 06E0     		b	.L466
 4684              	.LVL664:
 4685              	.L494:
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
 4686              		.loc 1 2678 0
 4687 005c 0721     		movs	r1, #7
 4688 005e D4F80002 		ldr	r0, [r4, #512]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 138


 4689              	.LVL665:
 4690 0062 FFF7FEFF 		bl	unlock_fs
 4691              	.LVL666:
 4692 0066 0723     		movs	r3, #7
 4693 0068 0193     		str	r3, [sp, #4]
 4694              	.LVL667:
 4695              	.L466:
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
2689:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
2690:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl)
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
2694:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
2696:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
2700:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
2704:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
2709:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2710:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
2711:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win.d8, SS(fp->fs));
2714:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
2717:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2718:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
2721:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2722:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
2723:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
2724:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2730:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 139


2731:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)	/* Fill sector cache */
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2734:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = sect;
2736:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer 
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;
2739:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)		/* Move sector window */
2741:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2742:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, &fp->fs->win.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2743:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2744:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, &fp->buf.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2745:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2746:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2747:Middlewares/Third_Party/FatFs/src/ff.c **** 
2748:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2749:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4696              		.loc 1 2749 0
 4697 006a 0198     		ldr	r0, [sp, #4]
 4698 006c 03B0     		add	sp, sp, #12
 4699              	.LCFI60:
 4700              		.cfi_remember_state
 4701              		.cfi_def_cfa_offset 36
 4702              		@ sp needed
 4703 006e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4704              	.LVL668:
 4705              	.L473:
 4706              	.LCFI61:
 4707              		.cfi_restore_state
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 4708              		.loc 1 2691 0
 4709 0072 D4F82432 		ldr	r3, [r4, #548]
 4710 0076 1BB1     		cbz	r3, .L475
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
 4711              		.loc 1 2692 0
 4712 0078 2046     		mov	r0, r4
 4713              	.LVL669:
 4714 007a FFF7FEFF 		bl	clmt_clust
 4715              	.LVL670:
 4716 007e 87E0     		b	.L474
 4717              	.LVL671:
 4718              	.L475:
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4719              		.loc 1 2695 0
 4720 0080 D4F81412 		ldr	r1, [r4, #532]
 4721              	.LVL672:
 4722 0084 FFF7FEFF 		bl	get_fat
 4723              	.LVL673:
 4724 0088 82E0     		b	.L474
 4725              	.L498:
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4726              		.loc 1 2697 0 discriminator 1
 4727 008a 0225     		movs	r5, #2
 4728 008c 84F80752 		strb	r5, [r4, #519]
 4729 0090 2946     		mov	r1, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 140


 4730 0092 D4F80002 		ldr	r0, [r4, #512]
 4731              	.LVL674:
 4732 0096 FFF7FEFF 		bl	unlock_fs
 4733              	.LVL675:
 4734 009a 0195     		str	r5, [sp, #4]
 4735 009c E5E7     		b	.L466
 4736              	.LVL676:
 4737              	.L499:
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 4738              		.loc 1 2698 0 discriminator 1
 4739 009e 0125     		movs	r5, #1
 4740 00a0 84F80752 		strb	r5, [r4, #519]
 4741 00a4 2946     		mov	r1, r5
 4742 00a6 D4F80002 		ldr	r0, [r4, #512]
 4743              	.LVL677:
 4744 00aa FFF7FEFF 		bl	unlock_fs
 4745              	.LVL678:
 4746 00ae 0195     		str	r5, [sp, #4]
 4747 00b0 DBE7     		b	.L466
 4748              	.LVL679:
 4749              	.L500:
2702:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 4750              		.loc 1 2702 0 discriminator 1
 4751 00b2 0225     		movs	r5, #2
 4752 00b4 84F80752 		strb	r5, [r4, #519]
 4753 00b8 2946     		mov	r1, r5
 4754 00ba 5846     		mov	r0, fp
 4755              	.LVL680:
 4756 00bc FFF7FEFF 		bl	unlock_fs
 4757              	.LVL681:
 4758 00c0 0195     		str	r5, [sp, #4]
 4759 00c2 D2E7     		b	.L466
 4760              	.LVL682:
 4761              	.L501:
2709:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 4762              		.loc 1 2709 0
 4763 00c4 0125     		movs	r5, #1
 4764              	.LVL683:
 4765 00c6 84F80752 		strb	r5, [r4, #519]
 4766 00ca 2946     		mov	r1, r5
 4767 00cc D4F80002 		ldr	r0, [r4, #512]
 4768 00d0 FFF7FEFF 		bl	unlock_fs
 4769              	.LVL684:
 4770 00d4 0195     		str	r5, [sp, #4]
 4771 00d6 C8E7     		b	.L466
 4772              	.LVL685:
 4773              	.L502:
2716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4774              		.loc 1 2716 0
 4775 00d8 4FF40072 		mov	r2, #512
 4776 00dc 2146     		mov	r1, r4
 4777 00de 08EB4020 		add	r0, r8, r0, lsl #9
 4778 00e2 FFF7FEFF 		bl	mem_cpy
 4779              	.LVL686:
 4780 00e6 85E0     		b	.L482
 4781              	.L479:
2723:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 141


 4782              		.loc 1 2723 0
 4783 00e8 D4F81822 		ldr	r2, [r4, #536]
 4784 00ec 9145     		cmp	r9, r2
 4785 00ee 1DD0     		beq	.L484
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4786              		.loc 1 2725 0
 4787 00f0 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4788 00f4 13F0400F 		tst	r3, #64
 4789 00f8 0DD0     		beq	.L485
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 4790              		.loc 1 2726 0
 4791 00fa 0123     		movs	r3, #1
 4792 00fc 2146     		mov	r1, r4
 4793 00fe 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 4794 0102 FFF7FEFF 		bl	disk_write
 4795              	.LVL687:
 4796 0106 0028     		cmp	r0, #0
 4797 0108 76D1     		bne	.L495
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4798              		.loc 1 2728 0
 4799 010a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4800 010e 23F04003 		bic	r3, r3, #64
 4801 0112 84F80632 		strb	r3, [r4, #518]
 4802              	.L485:
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4803              		.loc 1 2731 0
 4804 0116 D4F80002 		ldr	r0, [r4, #512]
 4805 011a 0123     		movs	r3, #1
 4806 011c 4A46     		mov	r2, r9
 4807 011e 2146     		mov	r1, r4
 4808 0120 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4809 0124 FFF7FEFF 		bl	disk_read
 4810              	.LVL688:
 4811 0128 0028     		cmp	r0, #0
 4812 012a 6FD1     		bne	.L496
 4813              	.L484:
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4814              		.loc 1 2735 0
 4815 012c C4F81892 		str	r9, [r4, #536]
 4816              	.LVL689:
 4817              	.L471:
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;
 4818              		.loc 1 2737 0
 4819 0130 D4F80812 		ldr	r1, [r4, #520]
 4820 0134 C1F30801 		ubfx	r1, r1, #0, #9
 4821 0138 C1F50075 		rsb	r5, r1, #512
 4822              	.LVL690:
2738:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 4823              		.loc 1 2738 0
 4824 013c AE42     		cmp	r6, r5
 4825 013e 00D2     		bcs	.L487
 4826 0140 3546     		mov	r5, r6
 4827              	.LVL691:
 4828              	.L487:
2744:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4829              		.loc 1 2744 0
 4830 0142 2A46     		mov	r2, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 142


 4831 0144 2144     		add	r1, r1, r4
 4832 0146 4046     		mov	r0, r8
 4833 0148 FFF7FEFF 		bl	mem_cpy
 4834              	.LVL692:
 4835              	.L483:
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 4836              		.loc 1 2683 0
 4837 014c A844     		add	r8, r8, r5
 4838              	.LVL693:
 4839 014e D4F80832 		ldr	r3, [r4, #520]
 4840 0152 2B44     		add	r3, r3, r5
 4841 0154 C4F80832 		str	r3, [r4, #520]
 4842 0158 DAF80030 		ldr	r3, [r10]
 4843 015c 2B44     		add	r3, r3, r5
 4844 015e CAF80030 		str	r3, [r10]
 4845 0162 761B     		subs	r6, r6, r5
 4846              	.LVL694:
 4847              	.L470:
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 4848              		.loc 1 2682 0
 4849 0164 002E     		cmp	r6, #0
 4850 0166 5BD0     		beq	.L497
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4851              		.loc 1 2684 0
 4852 0168 D4F80812 		ldr	r1, [r4, #520]
 4853 016c C1F30803 		ubfx	r3, r1, #0, #9
 4854 0170 002B     		cmp	r3, #0
 4855 0172 DDD1     		bne	.L471
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 4856              		.loc 1 2685 0
 4857 0174 D4F80002 		ldr	r0, [r4, #512]
 4858 0178 90F80272 		ldrb	r7, [r0, #514]	@ zero_extendqisi2
 4859 017c 013F     		subs	r7, r7, #1
 4860 017e FFB2     		uxtb	r7, r7
 4861              	.LVL695:
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 4862              		.loc 1 2686 0
 4863 0180 17EA5127 		ands	r7, r7, r1, lsr #9
 4864              	.LVL696:
 4865 0184 0CD1     		bne	.L472
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 4866              		.loc 1 2687 0
 4867 0186 0029     		cmp	r1, #0
 4868 0188 7FF473AF 		bne	.L473
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 4869              		.loc 1 2688 0
 4870 018c D4F81002 		ldr	r0, [r4, #528]
 4871              	.LVL697:
 4872              	.L474:
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4873              		.loc 1 2697 0
 4874 0190 0128     		cmp	r0, #1
 4875 0192 7FF67AAF 		bls	.L498
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 4876              		.loc 1 2698 0
 4877 0196 B0F1FF3F 		cmp	r0, #-1
 4878 019a 80D0     		beq	.L499
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 143


2699:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4879              		.loc 1 2699 0
 4880 019c C4F81402 		str	r0, [r4, #532]
 4881              	.LVL698:
 4882              	.L472:
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 4883              		.loc 1 2701 0
 4884 01a0 D4F800B2 		ldr	fp, [r4, #512]
 4885 01a4 D4F81412 		ldr	r1, [r4, #532]
 4886 01a8 5846     		mov	r0, fp
 4887 01aa FFF7FEFF 		bl	clust2sect
 4888              	.LVL699:
2702:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 4889              		.loc 1 2702 0
 4890 01ae 8146     		mov	r9, r0
 4891 01b0 0028     		cmp	r0, #0
 4892 01b2 3FF47EAF 		beq	.L500
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
 4893              		.loc 1 2703 0
 4894 01b6 B944     		add	r9, r9, r7
 4895              	.LVL700:
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4896              		.loc 1 2705 0
 4897 01b8 750A     		lsrs	r5, r6, #9
 4898              	.LVL701:
 4899 01ba 95D0     		beq	.L479
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
 4900              		.loc 1 2706 0
 4901 01bc 7B19     		adds	r3, r7, r5
 4902 01be 9BF80222 		ldrb	r2, [fp, #514]	@ zero_extendqisi2
 4903 01c2 9342     		cmp	r3, r2
 4904 01c4 00D9     		bls	.L480
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
 4905              		.loc 1 2707 0
 4906 01c6 D51B     		subs	r5, r2, r7
 4907              	.LVL702:
 4908              	.L480:
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4909              		.loc 1 2708 0
 4910 01c8 2B46     		mov	r3, r5
 4911 01ca 4A46     		mov	r2, r9
 4912 01cc 4146     		mov	r1, r8
 4913 01ce 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 4914 01d2 FFF7FEFF 		bl	disk_read
 4915              	.LVL703:
 4916 01d6 0028     		cmp	r0, #0
 4917 01d8 7FF474AF 		bne	.L501
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
 4918              		.loc 1 2715 0
 4919 01dc 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4920 01e0 13F0400F 		tst	r3, #64
 4921 01e4 06D0     		beq	.L482
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
 4922              		.loc 1 2715 0 is_stmt 0 discriminator 1
 4923 01e6 D4F81802 		ldr	r0, [r4, #536]
 4924 01ea A0EB0900 		sub	r0, r0, r9
 4925 01ee 8542     		cmp	r5, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 144


 4926 01f0 3FF672AF 		bhi	.L502
 4927              	.L482:
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 4928              		.loc 1 2719 0 is_stmt 1
 4929 01f4 6D02     		lsls	r5, r5, #9
 4930              	.LVL704:
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4931              		.loc 1 2720 0
 4932 01f6 A9E7     		b	.L483
 4933              	.LVL705:
 4934              	.L495:
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 4935              		.loc 1 2727 0
 4936 01f8 0125     		movs	r5, #1
 4937              	.LVL706:
 4938 01fa 84F80752 		strb	r5, [r4, #519]
 4939 01fe 2946     		mov	r1, r5
 4940 0200 D4F80002 		ldr	r0, [r4, #512]
 4941 0204 FFF7FEFF 		bl	unlock_fs
 4942              	.LVL707:
 4943 0208 0195     		str	r5, [sp, #4]
 4944 020a 2EE7     		b	.L466
 4945              	.LVL708:
 4946              	.L496:
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4947              		.loc 1 2732 0
 4948 020c 0125     		movs	r5, #1
 4949              	.LVL709:
 4950 020e 84F80752 		strb	r5, [r4, #519]
 4951 0212 2946     		mov	r1, r5
 4952 0214 D4F80002 		ldr	r0, [r4, #512]
 4953 0218 FFF7FEFF 		bl	unlock_fs
 4954              	.LVL710:
 4955 021c 0195     		str	r5, [sp, #4]
 4956 021e 24E7     		b	.L466
 4957              	.LVL711:
 4958              	.L497:
2748:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4959              		.loc 1 2748 0
 4960 0220 0021     		movs	r1, #0
 4961 0222 D4F80002 		ldr	r0, [r4, #512]
 4962 0226 FFF7FEFF 		bl	unlock_fs
 4963              	.LVL712:
 4964 022a 1EE7     		b	.L466
 4965              		.cfi_endproc
 4966              	.LFE167:
 4968              		.section	.text.f_write,"ax",%progbits
 4969              		.align	1
 4970              		.global	f_write
 4971              		.syntax unified
 4972              		.thumb
 4973              		.thumb_func
 4974              		.fpu fpv4-sp-d16
 4976              	f_write:
 4977              	.LFB168:
2750:Middlewares/Third_Party/FatFs/src/ff.c **** 
2751:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 145


2752:Middlewares/Third_Party/FatFs/src/ff.c **** 
2753:Middlewares/Third_Party/FatFs/src/ff.c **** 
2754:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2755:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2756:Middlewares/Third_Party/FatFs/src/ff.c **** /* Write File                                                            */
2757:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2758:Middlewares/Third_Party/FatFs/src/ff.c **** 
2759:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_write (
2760:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
2761:Middlewares/Third_Party/FatFs/src/ff.c **** 	const void *buff,	/* Pointer to the data to be written */
2762:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btw,			/* Number of bytes to write */
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
2764:Middlewares/Third_Party/FatFs/src/ff.c **** )
2765:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4978              		.loc 1 2765 0
 4979              		.cfi_startproc
 4980              		@ args = 0, pretend = 0, frame = 8
 4981              		@ frame_needed = 0, uses_anonymous_args = 0
 4982              	.LVL713:
 4983 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4984              	.LCFI62:
 4985              		.cfi_def_cfa_offset 36
 4986              		.cfi_offset 4, -36
 4987              		.cfi_offset 5, -32
 4988              		.cfi_offset 6, -28
 4989              		.cfi_offset 7, -24
 4990              		.cfi_offset 8, -20
 4991              		.cfi_offset 9, -16
 4992              		.cfi_offset 10, -12
 4993              		.cfi_offset 11, -8
 4994              		.cfi_offset 14, -4
 4995 0004 83B0     		sub	sp, sp, #12
 4996              	.LCFI63:
 4997              		.cfi_def_cfa_offset 48
 4998 0006 0446     		mov	r4, r0
 4999 0008 8846     		mov	r8, r1
 5000 000a 1646     		mov	r6, r2
 5001 000c 9946     		mov	r9, r3
 5002              	.LVL714:
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2767:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
2768:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc;
2769:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect;
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 
2773:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
 5003              		.loc 1 2773 0
 5004 000e 0023     		movs	r3, #0
 5005              	.LVL715:
 5006 0010 C9F80030 		str	r3, [r9]
2774:Middlewares/Third_Party/FatFs/src/ff.c **** 
2775:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);						/* Check validity */
 5007              		.loc 1 2775 0
 5008 0014 FFF7FEFF 		bl	validate
 5009              	.LVL716:
2776:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 146


 5010              		.loc 1 2776 0
 5011 0018 0190     		str	r0, [sp, #4]
 5012 001a 70B9     		cbnz	r0, .L533
2777:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)							/* Check error */
 5013              		.loc 1 2777 0
 5014 001c 94F80712 		ldrb	r1, [r4, #519]	@ zero_extendqisi2
 5015 0020 89B9     		cbnz	r1, .L534
2778:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2779:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 5016              		.loc 1 2779 0
 5017 0022 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5018 0026 13F0020F 		tst	r3, #2
 5019 002a 14D0     		beq	.L535
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2781:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 5020              		.loc 1 2781 0
 5021 002c D4F80832 		ldr	r3, [r4, #520]
 5022 0030 F342     		cmn	r3, r6
 5023 0032 C0F0DD80 		bcc	.L509
 5024 0036 0026     		movs	r6, #0
 5025              	.LVL717:
 5026 0038 DAE0     		b	.L509
 5027              	.LVL718:
 5028              	.L533:
2776:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)							/* Check error */
 5029              		.loc 1 2776 0 discriminator 1
 5030 003a 0146     		mov	r1, r0
 5031 003c D4F80002 		ldr	r0, [r4, #512]
 5032              	.LVL719:
 5033 0040 FFF7FEFF 		bl	unlock_fs
 5034              	.LVL720:
 5035 0044 0EE0     		b	.L505
 5036              	.LVL721:
 5037              	.L534:
2778:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 5038              		.loc 1 2778 0
 5039 0046 D4F80002 		ldr	r0, [r4, #512]
 5040              	.LVL722:
 5041 004a FFF7FEFF 		bl	unlock_fs
 5042              	.LVL723:
 5043 004e 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 5044 0052 0193     		str	r3, [sp, #4]
 5045 0054 06E0     		b	.L505
 5046              	.LVL724:
 5047              	.L535:
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
 5048              		.loc 1 2780 0
 5049 0056 0721     		movs	r1, #7
 5050 0058 D4F80002 		ldr	r0, [r4, #512]
 5051              	.LVL725:
 5052 005c FFF7FEFF 		bl	unlock_fs
 5053              	.LVL726:
 5054 0060 0723     		movs	r3, #7
 5055 0062 0193     		str	r3, [sp, #4]
 5056              	.LVL727:
 5057              	.L505:
2782:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 147


2783:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* Middle or end of the file */
2793:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl)
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
2797:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2803:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
2805:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2806:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2807:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
2808:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2809:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2810:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2812:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2813:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2814:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2815:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2816:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
2824:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2825:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
2826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2827:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct 
2828:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->fs->win.d8, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
2829:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fs->wflag = 0;
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2831:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
2833:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2835:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2836:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2837:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 148


2840:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2841:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2842:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
2843:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
2844:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->winsect = sect;
2845:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2846:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2847:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr < fp->fsize &&
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2852:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = sect;
2854:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;
2857:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)	/* Move sector window */
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(&fp->fs->win.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fs->wflag = 1;
2862:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(&fp->buf.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA__DIRTY;
2865:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2866:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
2870:Middlewares/Third_Party/FatFs/src/ff.c **** 
2871:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2872:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5058              		.loc 1 2872 0
 5059 0064 0198     		ldr	r0, [sp, #4]
 5060 0066 03B0     		add	sp, sp, #12
 5061              	.LCFI64:
 5062              		.cfi_remember_state
 5063              		.cfi_def_cfa_offset 36
 5064              		@ sp needed
 5065 0068 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5066              	.LVL728:
 5067              	.L512:
 5068              	.LCFI65:
 5069              		.cfi_restore_state
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5070              		.loc 1 2794 0
 5071 006c D4F82422 		ldr	r2, [r4, #548]
 5072 0070 002A     		cmp	r2, #0
 5073 0072 3AD0     		beq	.L514
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
 5074              		.loc 1 2795 0
 5075 0074 2046     		mov	r0, r4
 5076 0076 FFF7FEFF 		bl	clmt_clust
 5077              	.LVL729:
 5078              	.L513:
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 149


 5079              		.loc 1 2800 0
 5080 007a 0028     		cmp	r0, #0
 5081 007c 00F0E880 		beq	.L515
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5082              		.loc 1 2801 0
 5083 0080 0128     		cmp	r0, #1
 5084 0082 38D0     		beq	.L536
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 5085              		.loc 1 2802 0
 5086 0084 B0F1FF3F 		cmp	r0, #-1
 5087 0088 3FD0     		beq	.L537
2803:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
 5088              		.loc 1 2803 0
 5089 008a C4F81402 		str	r0, [r4, #532]
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5090              		.loc 1 2804 0
 5091 008e D4F81032 		ldr	r3, [r4, #528]
 5092 0092 0BB9     		cbnz	r3, .L511
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5093              		.loc 1 2804 0 is_stmt 0 discriminator 1
 5094 0094 C4F81002 		str	r0, [r4, #528]
 5095              	.LVL730:
 5096              	.L511:
2810:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5097              		.loc 1 2810 0 is_stmt 1
 5098 0098 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5099 009c 13F0400F 		tst	r3, #64
 5100 00a0 3DD1     		bne	.L538
 5101              	.L518:
2816:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 5102              		.loc 1 2816 0
 5103 00a2 D4F800B2 		ldr	fp, [r4, #512]
 5104 00a6 D4F81412 		ldr	r1, [r4, #532]
 5105 00aa 5846     		mov	r0, fp
 5106 00ac FFF7FEFF 		bl	clust2sect
 5107              	.LVL731:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5108              		.loc 1 2817 0
 5109 00b0 8246     		mov	r10, r0
 5110 00b2 0028     		cmp	r0, #0
 5111 00b4 4FD0     		beq	.L539
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
 5112              		.loc 1 2818 0
 5113 00b6 BA44     		add	r10, r10, r7
 5114              	.LVL732:
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 5115              		.loc 1 2820 0
 5116 00b8 750A     		lsrs	r5, r6, #9
 5117              	.LVL733:
 5118 00ba 6DD0     		beq	.L521
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
 5119              		.loc 1 2821 0
 5120 00bc 7B19     		adds	r3, r7, r5
 5121 00be 9BF80222 		ldrb	r2, [fp, #514]	@ zero_extendqisi2
 5122 00c2 9342     		cmp	r3, r2
 5123 00c4 00D9     		bls	.L522
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 150


 5124              		.loc 1 2822 0
 5125 00c6 D51B     		subs	r5, r2, r7
 5126              	.LVL734:
 5127              	.L522:
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 5128              		.loc 1 2823 0
 5129 00c8 2B46     		mov	r3, r5
 5130 00ca 5246     		mov	r2, r10
 5131 00cc 4146     		mov	r1, r8
 5132 00ce 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 5133 00d2 FFF7FEFF 		bl	disk_write
 5134              	.LVL735:
 5135 00d6 0028     		cmp	r0, #0
 5136 00d8 46D1     		bne	.L540
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 5137              		.loc 1 2832 0
 5138 00da D4F81812 		ldr	r1, [r4, #536]
 5139 00de A1EB0A01 		sub	r1, r1, r10
 5140 00e2 8D42     		cmp	r5, r1
 5141 00e4 4AD8     		bhi	.L541
 5142              	.L524:
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 5143              		.loc 1 2838 0
 5144 00e6 6D02     		lsls	r5, r5, #9
 5145              	.LVL736:
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5146              		.loc 1 2839 0
 5147 00e8 76E0     		b	.L525
 5148              	.LVL737:
 5149              	.L514:
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5150              		.loc 1 2798 0
 5151 00ea D4F81412 		ldr	r1, [r4, #532]
 5152              	.LVL738:
 5153 00ee 1846     		mov	r0, r3
 5154 00f0 FFF7FEFF 		bl	create_chain
 5155              	.LVL739:
 5156 00f4 C1E7     		b	.L513
 5157              	.L536:
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5158              		.loc 1 2801 0 discriminator 1
 5159 00f6 0225     		movs	r5, #2
 5160 00f8 84F80752 		strb	r5, [r4, #519]
 5161 00fc 2946     		mov	r1, r5
 5162 00fe D4F80002 		ldr	r0, [r4, #512]
 5163              	.LVL740:
 5164 0102 FFF7FEFF 		bl	unlock_fs
 5165              	.LVL741:
 5166 0106 0195     		str	r5, [sp, #4]
 5167 0108 ACE7     		b	.L505
 5168              	.LVL742:
 5169              	.L537:
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 5170              		.loc 1 2802 0 discriminator 1
 5171 010a 0125     		movs	r5, #1
 5172 010c 84F80752 		strb	r5, [r4, #519]
 5173 0110 2946     		mov	r1, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 151


 5174 0112 D4F80002 		ldr	r0, [r4, #512]
 5175              	.LVL743:
 5176 0116 FFF7FEFF 		bl	unlock_fs
 5177              	.LVL744:
 5178 011a 0195     		str	r5, [sp, #4]
 5179 011c A2E7     		b	.L505
 5180              	.L538:
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 5181              		.loc 1 2811 0
 5182 011e D4F80002 		ldr	r0, [r4, #512]
 5183 0122 0123     		movs	r3, #1
 5184 0124 D4F81822 		ldr	r2, [r4, #536]
 5185 0128 2146     		mov	r1, r4
 5186 012a 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 5187 012e FFF7FEFF 		bl	disk_write
 5188              	.LVL745:
 5189 0132 30B9     		cbnz	r0, .L542
2813:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5190              		.loc 1 2813 0
 5191 0134 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5192 0138 23F04003 		bic	r3, r3, #64
 5193 013c 84F80632 		strb	r3, [r4, #518]
 5194 0140 AFE7     		b	.L518
 5195              	.L542:
2812:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 5196              		.loc 1 2812 0
 5197 0142 0125     		movs	r5, #1
 5198 0144 84F80752 		strb	r5, [r4, #519]
 5199 0148 2946     		mov	r1, r5
 5200 014a D4F80002 		ldr	r0, [r4, #512]
 5201 014e FFF7FEFF 		bl	unlock_fs
 5202              	.LVL746:
 5203 0152 0195     		str	r5, [sp, #4]
 5204 0154 86E7     		b	.L505
 5205              	.LVL747:
 5206              	.L539:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5207              		.loc 1 2817 0 discriminator 1
 5208 0156 0225     		movs	r5, #2
 5209 0158 84F80752 		strb	r5, [r4, #519]
 5210 015c 2946     		mov	r1, r5
 5211 015e 5846     		mov	r0, fp
 5212              	.LVL748:
 5213 0160 FFF7FEFF 		bl	unlock_fs
 5214              	.LVL749:
 5215 0164 0195     		str	r5, [sp, #4]
 5216 0166 7DE7     		b	.L505
 5217              	.LVL750:
 5218              	.L540:
2824:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 5219              		.loc 1 2824 0
 5220 0168 0125     		movs	r5, #1
 5221              	.LVL751:
 5222 016a 84F80752 		strb	r5, [r4, #519]
 5223 016e 2946     		mov	r1, r5
 5224 0170 D4F80002 		ldr	r0, [r4, #512]
 5225 0174 FFF7FEFF 		bl	unlock_fs
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 152


 5226              	.LVL752:
 5227 0178 0195     		str	r5, [sp, #4]
 5228 017a 73E7     		b	.L505
 5229              	.LVL753:
 5230              	.L541:
2833:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 5231              		.loc 1 2833 0
 5232 017c 4FF40072 		mov	r2, #512
 5233 0180 08EB4121 		add	r1, r8, r1, lsl #9
 5234 0184 2046     		mov	r0, r4
 5235 0186 FFF7FEFF 		bl	mem_cpy
 5236              	.LVL754:
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5237              		.loc 1 2834 0
 5238 018a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5239 018e 23F04003 		bic	r3, r3, #64
 5240 0192 84F80632 		strb	r3, [r4, #518]
 5241 0196 A6E7     		b	.L524
 5242              	.L521:
2847:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr < fp->fsize &&
 5243              		.loc 1 2847 0
 5244 0198 D4F81832 		ldr	r3, [r4, #536]
 5245 019c 9A45     		cmp	r10, r3
 5246 019e 05D0     		beq	.L526
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 5247              		.loc 1 2848 0
 5248 01a0 D4F80822 		ldr	r2, [r4, #520]
 5249 01a4 D4F80C32 		ldr	r3, [r4, #524]
 5250 01a8 9A42     		cmp	r2, r3
 5251 01aa 3ED3     		bcc	.L543
 5252              	.L526:
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5253              		.loc 1 2853 0
 5254 01ac C4F818A2 		str	r10, [r4, #536]
 5255              	.LVL755:
 5256              	.L510:
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 5257              		.loc 1 2855 0
 5258 01b0 D4F80802 		ldr	r0, [r4, #520]
 5259 01b4 C0F30800 		ubfx	r0, r0, #0, #9
 5260 01b8 C0F50075 		rsb	r5, r0, #512
 5261              	.LVL756:
2856:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 5262              		.loc 1 2856 0
 5263 01bc AE42     		cmp	r6, r5
 5264 01be 00D2     		bcs	.L527
 5265 01c0 3546     		mov	r5, r6
 5266              	.LVL757:
 5267              	.L527:
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA__DIRTY;
 5268              		.loc 1 2863 0
 5269 01c2 2A46     		mov	r2, r5
 5270 01c4 4146     		mov	r1, r8
 5271 01c6 2044     		add	r0, r0, r4
 5272 01c8 FFF7FEFF 		bl	mem_cpy
 5273              	.LVL758:
2864:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 153


 5274              		.loc 1 2864 0
 5275 01cc 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5276 01d0 43F04003 		orr	r3, r3, #64
 5277 01d4 84F80632 		strb	r3, [r4, #518]
 5278              	.L525:
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 5279              		.loc 1 2784 0
 5280 01d8 A844     		add	r8, r8, r5
 5281              	.LVL759:
 5282 01da D4F80832 		ldr	r3, [r4, #520]
 5283 01de 2B44     		add	r3, r3, r5
 5284 01e0 C4F80832 		str	r3, [r4, #520]
 5285 01e4 D9F80030 		ldr	r3, [r9]
 5286 01e8 2B44     		add	r3, r3, r5
 5287 01ea C9F80030 		str	r3, [r9]
 5288 01ee 761B     		subs	r6, r6, r5
 5289              	.LVL760:
 5290              	.L509:
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 5291              		.loc 1 2783 0
 5292 01f0 76B3     		cbz	r6, .L515
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 5293              		.loc 1 2785 0
 5294 01f2 D4F80812 		ldr	r1, [r4, #520]
 5295 01f6 C1F30803 		ubfx	r3, r1, #0, #9
 5296 01fa 002B     		cmp	r3, #0
 5297 01fc D8D1     		bne	.L510
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 5298              		.loc 1 2786 0
 5299 01fe D4F80032 		ldr	r3, [r4, #512]
 5300 0202 93F80272 		ldrb	r7, [r3, #514]	@ zero_extendqisi2
 5301 0206 013F     		subs	r7, r7, #1
 5302 0208 FFB2     		uxtb	r7, r7
 5303              	.LVL761:
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 5304              		.loc 1 2787 0
 5305 020a 17EA5127 		ands	r7, r7, r1, lsr #9
 5306              	.LVL762:
 5307 020e 7FF443AF 		bne	.L511
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 5308              		.loc 1 2788 0
 5309 0212 0029     		cmp	r1, #0
 5310 0214 7FF42AAF 		bne	.L512
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 5311              		.loc 1 2789 0
 5312 0218 D4F81002 		ldr	r0, [r4, #528]
 5313              	.LVL763:
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 5314              		.loc 1 2790 0
 5315 021c 0028     		cmp	r0, #0
 5316 021e 7FF42CAF 		bne	.L513
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* Middle or end of the file */
 5317              		.loc 1 2791 0
 5318 0222 1846     		mov	r0, r3
 5319              	.LVL764:
 5320 0224 FFF7FEFF 		bl	create_chain
 5321              	.LVL765:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 154


 5322 0228 27E7     		b	.L513
 5323              	.LVL766:
 5324              	.L543:
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 5325              		.loc 1 2849 0 discriminator 1
 5326 022a 0123     		movs	r3, #1
 5327 022c 5246     		mov	r2, r10
 5328 022e 2146     		mov	r1, r4
 5329 0230 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 5330 0234 FFF7FEFF 		bl	disk_read
 5331              	.LVL767:
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 5332              		.loc 1 2848 0 discriminator 1
 5333 0238 0028     		cmp	r0, #0
 5334 023a B7D0     		beq	.L526
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5335              		.loc 1 2850 0
 5336 023c 0125     		movs	r5, #1
 5337              	.LVL768:
 5338 023e 84F80752 		strb	r5, [r4, #519]
 5339 0242 2946     		mov	r1, r5
 5340 0244 D4F80002 		ldr	r0, [r4, #512]
 5341 0248 FFF7FEFF 		bl	unlock_fs
 5342              	.LVL769:
 5343 024c 0195     		str	r5, [sp, #4]
 5344 024e 09E7     		b	.L505
 5345              	.LVL770:
 5346              	.L515:
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 5347              		.loc 1 2868 0
 5348 0250 D4F80832 		ldr	r3, [r4, #520]
 5349 0254 D4F80C22 		ldr	r2, [r4, #524]
 5350 0258 9342     		cmp	r3, r2
 5351 025a 01D9     		bls	.L529
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 5352              		.loc 1 2868 0 is_stmt 0 discriminator 1
 5353 025c C4F80C32 		str	r3, [r4, #524]
 5354              	.L529:
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5355              		.loc 1 2869 0 is_stmt 1
 5356 0260 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5357 0264 43F02003 		orr	r3, r3, #32
 5358 0268 84F80632 		strb	r3, [r4, #518]
2871:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5359              		.loc 1 2871 0
 5360 026c 0021     		movs	r1, #0
 5361 026e D4F80002 		ldr	r0, [r4, #512]
 5362 0272 FFF7FEFF 		bl	unlock_fs
 5363              	.LVL771:
 5364 0276 F5E6     		b	.L505
 5365              		.cfi_endproc
 5366              	.LFE168:
 5368              		.section	.text.putc_bfd,"ax",%progbits
 5369              		.align	1
 5370              		.syntax unified
 5371              		.thumb
 5372              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 155


 5373              		.fpu fpv4-sp-d16
 5375              	putc_bfd:
 5376              	.LFB185:
2873:Middlewares/Third_Party/FatFs/src/ff.c **** 
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 
2876:Middlewares/Third_Party/FatFs/src/ff.c **** 
2877:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2878:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize the File                                                  */
2879:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2880:Middlewares/Third_Party/FatFs/src/ff.c **** 
2881:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_sync (
2882:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
2883:Middlewares/Third_Party/FatFs/src/ff.c **** )
2884:Middlewares/Third_Party/FatFs/src/ff.c **** {
2885:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
2887:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 
2889:Middlewares/Third_Party/FatFs/src/ff.c **** 
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
2893:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write-back dirty buffer */
2894:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2899:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2900:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2901:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Update the directory entry */
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
2903:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
2904:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fp->dir_ptr;
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
2906:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
2907:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
2914:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2915:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2916:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2917:Middlewares/Third_Party/FatFs/src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
2919:Middlewares/Third_Party/FatFs/src/ff.c **** }
2920:Middlewares/Third_Party/FatFs/src/ff.c **** 
2921:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 
2926:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 156


2927:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close File                                                            */
2928:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2929:Middlewares/Third_Party/FatFs/src/ff.c **** 
2930:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_close (
2931:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fp		/* Pointer to the file object to be closed */
2932:Middlewares/Third_Party/FatFs/src/ff.c **** )
2933:Middlewares/Third_Party/FatFs/src/ff.c **** {
2934:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2935:Middlewares/Third_Party/FatFs/src/ff.c **** 
2936:Middlewares/Third_Party/FatFs/src/ff.c **** 
2937:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
2939:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
2940:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2941:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = validate(fp);				/* Lock volume */
2943:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2944:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
2945:Middlewares/Third_Party/FatFs/src/ff.c **** 			FATFS *fs = fp->fs;
2946:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2947:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2948:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(fp->lockid);	/* Decrement file open counter */
2949:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
2950:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2951:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs = 0;				/* Invalidate file object */
2952:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
2953:Middlewares/Third_Party/FatFs/src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
2954:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2955:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2956:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2957:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2958:Middlewares/Third_Party/FatFs/src/ff.c **** }
2959:Middlewares/Third_Party/FatFs/src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/src/ff.c **** 
2961:Middlewares/Third_Party/FatFs/src/ff.c **** 
2962:Middlewares/Third_Party/FatFs/src/ff.c **** 
2963:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2964:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
2965:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2966:Middlewares/Third_Party/FatFs/src/ff.c **** 
2967:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 1
2968:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
2969:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdrive (
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Drive number */
2971:Middlewares/Third_Party/FatFs/src/ff.c **** )
2972:Middlewares/Third_Party/FatFs/src/ff.c **** {
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2974:Middlewares/Third_Party/FatFs/src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2978:Middlewares/Third_Party/FatFs/src/ff.c **** 
2979:Middlewares/Third_Party/FatFs/src/ff.c **** 	CurrVol = (BYTE)vol;
2980:Middlewares/Third_Party/FatFs/src/ff.c **** 
2981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
2983:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 157


2984:Middlewares/Third_Party/FatFs/src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdir (
2987:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
2988:Middlewares/Third_Party/FatFs/src/ff.c **** )
2989:Middlewares/Third_Party/FatFs/src/ff.c **** {
2990:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2991:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
2992:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
2993:Middlewares/Third_Party/FatFs/src/ff.c **** 
2994:Middlewares/Third_Party/FatFs/src/ff.c **** 
2995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
2996:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2997:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dj.dir) {
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
3006:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
3007:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3008:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3012:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3013:Middlewares/Third_Party/FatFs/src/ff.c **** 
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3015:Middlewares/Third_Party/FatFs/src/ff.c **** }
3016:Middlewares/Third_Party/FatFs/src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 
3018:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 2
3019:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getcwd (
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len		/* Size of path */
3022:Middlewares/Third_Party/FatFs/src/ff.c **** )
3023:Middlewares/Third_Party/FatFs/src/ff.c **** {
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3026:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n;
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ccl;
3028:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *tp;
3029:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO fno;
3030:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3031:Middlewares/Third_Party/FatFs/src/ff.c **** 
3032:Middlewares/Third_Party/FatFs/src/ff.c **** 
3033:Middlewares/Third_Party/FatFs/src/ff.c **** 	*buff = 0;
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3039:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 158


3041:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(&dj, 1);			/* Get parent directory */
3042:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3043:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(&dj, 0);
3044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3045:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
3046:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(&dj, 0);
3047:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3048:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {							/* Find the entry links to the child directory */
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_read(&dj, 0);
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(&dj, 0);	
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK);
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3055:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3056:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3057:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno.lfname = buff;
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno.lfsize = i;
3059:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = fno.fname;
3062:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*buff) tp = buff;
3064:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3065:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (n = 0; tp[n]; n++) ;
3066:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < n + 3) {
3067:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE; break;
3068:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3069:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (n) buff[--i] = tp[--n];
3070:Middlewares/Third_Party/FatFs/src/ff.c **** 			buff[--i] = '/';
3071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3072:Middlewares/Third_Party/FatFs/src/ff.c **** 		tp = buff;
3073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3074:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3075:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3076:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = ':';
3077:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3078:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == len) {					/* Root-directory */
3079:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tp++ = '/';
3080:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* Sub-directroy */
3081:Middlewares/Third_Party/FatFs/src/ff.c **** 				do		/* Add stacked path str */
3082:Middlewares/Third_Party/FatFs/src/ff.c **** 					*tp++ = buff[i++];
3083:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (i < len);
3084:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3085:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3086:Middlewares/Third_Party/FatFs/src/ff.c **** 		*tp = 0;
3087:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3088:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3089:Middlewares/Third_Party/FatFs/src/ff.c **** 
3090:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3091:Middlewares/Third_Party/FatFs/src/ff.c **** }
3092:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 2 */
3093:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 1 */
3094:Middlewares/Third_Party/FatFs/src/ff.c **** 
3095:Middlewares/Third_Party/FatFs/src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/src/ff.c **** 
3097:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 159


3098:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3099:Middlewares/Third_Party/FatFs/src/ff.c **** /* Seek File R/W Pointer                                                 */
3100:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3101:Middlewares/Third_Party/FatFs/src/ff.c **** 
3102:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_lseek (
3103:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
3104:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* File pointer from top of file */
3105:Middlewares/Third_Party/FatFs/src/ff.c **** )
3106:Middlewares/Third_Party/FatFs/src/ff.c **** {
3107:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3108:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect, ifptr;
3109:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3110:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
3111:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/src/ff.c **** 
3113:Middlewares/Third_Party/FatFs/src/ff.c **** 
3114:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)						/* Check error */
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 
3119:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(fp->fs, cl);
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
3137:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen)
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
3146:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* Fast seek */
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs > fp->fsize)		/* Clip offset at the file size */
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs = fp->fsize;
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 160


3155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
3156:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3157:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= ~FA__DIRTY;
3162:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3163:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_read(fp->fs->drv, fp->buf.d8, dsc, 1) != RES_OK)	/* Load current sector */
3165:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
3166:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->dsect = dsc;
3168:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3169:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
3172:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3173:Middlewares/Third_Party/FatFs/src/ff.c **** 
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Normal Seek */
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
3177:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3178:Middlewares/Third_Party/FatFs/src/ff.c **** 			 && !(fp->flag & FA_WRITE)
3179:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 			) ofs = fp->fsize;
3181:Middlewares/Third_Party/FatFs/src/ff.c **** 
3182:Middlewares/Third_Party/FatFs/src/ff.c **** 		ifptr = fp->fptr;
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
3184:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
3187:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
3188:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
3192:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
3193:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
3195:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(fp->fs, 0);
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
3197:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3198:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust = clst;
3199:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3200:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3201:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
3202:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst != 0) {
3204:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
3205:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
3209:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = bcs; break;
3210:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3211:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 161


3212:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3213:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
3216:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fptr += bcs;
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
3219:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr += ofs;
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fp->fs)) {
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += ofs / SS(fp->fs);
3225:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
3229:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3230:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
3235:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3236:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf.d8, nsect, 1) != RES_OK)	/* Fill sector cache */
3238:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
3239:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = nsect;
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3242:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
3246:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3247:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3248:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3249:Middlewares/Third_Party/FatFs/src/ff.c **** 
3250:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
3251:Middlewares/Third_Party/FatFs/src/ff.c **** }
3252:Middlewares/Third_Party/FatFs/src/ff.c **** 
3253:Middlewares/Third_Party/FatFs/src/ff.c **** 
3254:Middlewares/Third_Party/FatFs/src/ff.c **** 
3255:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1
3256:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3257:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory Object                                             */
3258:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3259:Middlewares/Third_Party/FatFs/src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_opendir (
3261:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3263:Middlewares/Third_Party/FatFs/src/ff.c **** )
3264:Middlewares/Third_Party/FatFs/src/ff.c **** {
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs;
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 162


3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
3271:Middlewares/Third_Party/FatFs/src/ff.c **** 
3272:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&fs, &path, 0);
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fs = fs;
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(*dp);
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
3278:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
3280:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
3281:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
3283:Middlewares/Third_Party/FatFs/src/ff.c **** 				else							/* The object is a file */
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;
3285:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->id = fs->id;
3288:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
3289:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3291:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dp->sclust) {
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!dp->lockid)
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = 0;	/* Root directory need not to be locked */
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3298:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3299:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3300:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3301:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3303:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
3305:Middlewares/Third_Party/FatFs/src/ff.c **** 
3306:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3307:Middlewares/Third_Party/FatFs/src/ff.c **** }
3308:Middlewares/Third_Party/FatFs/src/ff.c **** 
3309:Middlewares/Third_Party/FatFs/src/ff.c **** 
3310:Middlewares/Third_Party/FatFs/src/ff.c **** 
3311:Middlewares/Third_Party/FatFs/src/ff.c **** 
3312:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3313:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close Directory                                                       */
3314:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 
3316:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_closedir (
3317:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
3318:Middlewares/Third_Party/FatFs/src/ff.c **** )
3319:Middlewares/Third_Party/FatFs/src/ff.c **** {
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3321:Middlewares/Third_Party/FatFs/src/ff.c **** 
3322:Middlewares/Third_Party/FatFs/src/ff.c **** 
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(dp);
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3325:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 163


3326:Middlewares/Third_Party/FatFs/src/ff.c **** 		FATFS *fs = dp->fs;
3327:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3328:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->lockid)				/* Decrement sub-directory open counter */
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->lockid);
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3333:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs = 0;				/* Invalidate directory object */
3334:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
3336:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3337:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3338:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3339:Middlewares/Third_Party/FatFs/src/ff.c **** }
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 
3341:Middlewares/Third_Party/FatFs/src/ff.c **** 
3342:Middlewares/Third_Party/FatFs/src/ff.c **** 
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 
3344:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3345:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read Directory Entries in Sequence                                    */
3346:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 
3348:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_readdir (
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
3350:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3351:Middlewares/Third_Party/FatFs/src/ff.c **** )
3352:Middlewares/Third_Party/FatFs/src/ff.c **** {
3353:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3355:Middlewares/Third_Party/FatFs/src/ff.c **** 
3356:Middlewares/Third_Party/FatFs/src/ff.c **** 
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(dp);						/* Check validity of the object */
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
3361:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			INIT_BUF(*dp);
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
3365:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0;
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3367:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0;
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_OK;
3374:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3375:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3376:Middlewares/Third_Party/FatFs/src/ff.c **** 			FREE_BUF();
3377:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3378:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3379:Middlewares/Third_Party/FatFs/src/ff.c **** 
3380:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dp->fs, res);
3381:Middlewares/Third_Party/FatFs/src/ff.c **** }
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 164


3383:Middlewares/Third_Party/FatFs/src/ff.c **** 
3384:Middlewares/Third_Party/FatFs/src/ff.c **** 
3385:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND
3386:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3387:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find next file                                                        */
3388:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3389:Middlewares/Third_Party/FatFs/src/ff.c **** 
3390:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findnext (
3391:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
3393:Middlewares/Third_Party/FatFs/src/ff.c **** )
3394:Middlewares/Third_Party/FatFs/src/ff.c **** {
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
3399:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
3401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fno->lfname && pattern_matching(dp->pat, fno->lfname, 0, 0)) break;	/* Test for LFN if exist 
3403:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;	/* Test for SFN */
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3407:Middlewares/Third_Party/FatFs/src/ff.c **** 
3408:Middlewares/Third_Party/FatFs/src/ff.c **** }
3409:Middlewares/Third_Party/FatFs/src/ff.c **** 
3410:Middlewares/Third_Party/FatFs/src/ff.c **** 
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 
3412:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3413:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find first file                                                       */
3414:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3415:Middlewares/Third_Party/FatFs/src/ff.c **** 
3416:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findfirst (
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
3418:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
3419:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
3420:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
3421:Middlewares/Third_Party/FatFs/src/ff.c **** )
3422:Middlewares/Third_Party/FatFs/src/ff.c **** {
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 
3426:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
3427:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
3429:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
3430:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3431:Middlewares/Third_Party/FatFs/src/ff.c **** }
3432:Middlewares/Third_Party/FatFs/src/ff.c **** 
3433:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FIND */
3434:Middlewares/Third_Party/FatFs/src/ff.c **** 
3435:Middlewares/Third_Party/FatFs/src/ff.c **** 
3436:Middlewares/Third_Party/FatFs/src/ff.c **** 
3437:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE == 0
3438:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3439:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get File Status                                                       */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 165


3440:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3441:Middlewares/Third_Party/FatFs/src/ff.c **** 
3442:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_stat (
3443:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3444:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3445:Middlewares/Third_Party/FatFs/src/ff.c **** )
3446:Middlewares/Third_Party/FatFs/src/ff.c **** {
3447:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3448:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3449:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3450:Middlewares/Third_Party/FatFs/src/ff.c **** 
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.dir) {		/* Found an object */
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
3460:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3468:Middlewares/Third_Party/FatFs/src/ff.c **** }
3469:Middlewares/Third_Party/FatFs/src/ff.c **** 
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 
3471:Middlewares/Third_Party/FatFs/src/ff.c **** 
3472:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3474:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Number of Free Clusters                                           */
3475:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 
3477:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getfree (
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
3480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
3481:Middlewares/Third_Party/FatFs/src/ff.c **** )
3482:Middlewares/Third_Party/FatFs/src/ff.c **** {
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n, clst, sect, stat;
3486:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
3487:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fat, *p;
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 
3489:Middlewares/Third_Party/FatFs/src/ff.c **** 
3490:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(fatfs, &path, 0);
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = *fatfs;
3493:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3494:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust <= fs->n_fatent - 2) {
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clust;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 166


3497:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3498:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get number of free clusters */
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 			fat = fs->fs_type;
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = 0;
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fat == FS_FAT12) {
3502:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2;
3503:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(fs, clst);
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
3509:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3510:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fs->n_fatent;
3511:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect = fs->fatbase;
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; p = 0;
3513:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!i) {
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(fs, sect++);
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 						p = fs->win.d8;
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = SS(fs);
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fat == FS_FAT16) {
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 2; i -= 2;
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 4; i -= 4;
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (--clst);
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust = n;
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = n;
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3535:Middlewares/Third_Party/FatFs/src/ff.c **** }
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 
3540:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3541:Middlewares/Third_Party/FatFs/src/ff.c **** /* Truncate File                                                         */
3542:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 
3544:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_truncate (
3545:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3546:Middlewares/Third_Party/FatFs/src/ff.c **** )
3547:Middlewares/Third_Party/FatFs/src/ff.c **** {
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);						/* Check validity of the object */
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 167


3554:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->err) {						/* Check error */
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = (FRESULT)fp->err;
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DENIED;
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3561:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3562:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fsize > fp->fptr) {
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->sclust = 0;
3568:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
3573:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
3576:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3577:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DISK_ERR;
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
3584:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3585:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3586:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) fp->err = (FRESULT)res;
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3589:Middlewares/Third_Party/FatFs/src/ff.c **** 
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
3591:Middlewares/Third_Party/FatFs/src/ff.c **** }
3592:Middlewares/Third_Party/FatFs/src/ff.c **** 
3593:Middlewares/Third_Party/FatFs/src/ff.c **** 
3594:Middlewares/Third_Party/FatFs/src/ff.c **** 
3595:Middlewares/Third_Party/FatFs/src/ff.c **** 
3596:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3597:Middlewares/Third_Party/FatFs/src/ff.c **** /* Delete a File or Directory                                            */
3598:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3599:Middlewares/Third_Party/FatFs/src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_unlink (
3601:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
3602:Middlewares/Third_Party/FatFs/src/ff.c **** )
3603:Middlewares/Third_Party/FatFs/src/ff.c **** {
3604:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3605:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
3606:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3607:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
3608:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3609:Middlewares/Third_Party/FatFs/src/ff.c **** 
3610:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 168


3611:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
3618:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open object */
3620:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 				dclst = ld_clust(dj.fs, dir);
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dclst && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-directory ? */
3632:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
3633:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dclst == dj.fs->cdir) {		 		/* Is it the current directory? */
3634:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3636:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(&sdj, &dj, sizeof (DIR));	/* Open the sub-directory */
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.sclust = dclst;
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 2);
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3646:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3650:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3660:Middlewares/Third_Party/FatFs/src/ff.c **** }
3661:Middlewares/Third_Party/FatFs/src/ff.c **** 
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 
3663:Middlewares/Third_Party/FatFs/src/ff.c **** 
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 
3665:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3666:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory                                                    */
3667:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 169


3668:Middlewares/Third_Party/FatFs/src/ff.c **** 
3669:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkdir (
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
3671:Middlewares/Third_Party/FatFs/src/ff.c **** )
3672:Middlewares/Third_Party/FatFs/src/ff.c **** {
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir, n;
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm = GET_FATTIME();
3677:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3678:Middlewares/Third_Party/FatFs/src/ff.c **** 
3679:Middlewares/Third_Party/FatFs/src/ff.c **** 
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
3690:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
3694:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_window(dj.fs);
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.fs->win.d8;
3699:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Name] = '.';
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dir + SZ_DIRE, dir, SZ_DIRE); 	/* Create ".." entry */
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir + SZ_DIRE, pcl);
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(dj.fs);
3714:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
3716:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3717:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
3721:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 170


3725:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3728:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3729:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3730:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3731:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3732:Middlewares/Third_Party/FatFs/src/ff.c **** 
3733:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3734:Middlewares/Third_Party/FatFs/src/ff.c **** }
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 
3739:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3740:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Attribute                                                      */
3741:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3742:Middlewares/Third_Party/FatFs/src/ff.c **** 
3743:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chmod (
3744:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE attr,			/* Attribute bits */
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mask			/* Attribute mask to change */
3747:Middlewares/Third_Party/FatFs/src/ff.c **** )
3748:Middlewares/Third_Party/FatFs/src/ff.c **** {
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3752:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3753:Middlewares/Third_Party/FatFs/src/ff.c **** 
3754:Middlewares/Third_Party/FatFs/src/ff.c **** 
3755:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3756:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3760:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3761:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3762:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3767:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* File or sub directory */
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = (attr & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3772:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3773:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3777:Middlewares/Third_Party/FatFs/src/ff.c **** }
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 
3779:Middlewares/Third_Party/FatFs/src/ff.c **** 
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 171


3782:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3783:Middlewares/Third_Party/FatFs/src/ff.c **** /* Rename File/Directory                                                 */
3784:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 
3786:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_rename (
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object to be renamed */
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
3789:Middlewares/Third_Party/FatFs/src/ff.c **** )
3790:Middlewares/Third_Party/FatFs/src/ff.c **** {
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[21], *dir;
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3796:Middlewares/Third_Party/FatFs/src/ff.c **** 
3797:Middlewares/Third_Party/FatFs/src/ff.c **** 
3798:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number of the source object */
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&djo.fs, &path_old, 1);
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 		djn.fs = djo.fs;
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(djo);
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
3804:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
3805:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3806:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3807:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&djo, 2);
3808:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3809:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
3811:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_FILE;
3812:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3813:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about object except name */
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
3815:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_INVALID_DRIVE;
3819:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
3820:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
3822:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
3823:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
3827:Middlewares/Third_Party/FatFs/src/ff.c **** 						djo.fs->wflag = 1;
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
3830:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = move_window(djo.fs, dw);
3834:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
3836:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 									djo.fs->wflag = 1;
3838:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 172


3839:Middlewares/Third_Party/FatFs/src/ff.c **** 							}
3840:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK)
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = sync_fs(djo.fs);
3845:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3846:Middlewares/Third_Party/FatFs/src/ff.c **** /* End of critical section */
3847:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3848:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3850:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3851:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3852:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3853:Middlewares/Third_Party/FatFs/src/ff.c **** 
3854:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(djo.fs, res);
3855:Middlewares/Third_Party/FatFs/src/ff.c **** }
3856:Middlewares/Third_Party/FatFs/src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/src/ff.c **** 
3859:Middlewares/Third_Party/FatFs/src/ff.c **** 
3860:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3861:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Timestamp                                                      */
3862:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3863:Middlewares/Third_Party/FatFs/src/ff.c **** 
3864:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_utime (
3865:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
3866:Middlewares/Third_Party/FatFs/src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
3867:Middlewares/Third_Party/FatFs/src/ff.c **** )
3868:Middlewares/Third_Party/FatFs/src/ff.c **** {
3869:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3872:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 
3875:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3880:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3881:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3882:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {					/* Root directory */
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3887:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* File or sub-directory */
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtTime, fno->ftime);
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3892:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3893:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3895:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 173


3896:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3897:Middlewares/Third_Party/FatFs/src/ff.c **** }
3898:Middlewares/Third_Party/FatFs/src/ff.c **** 
3899:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
3900:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
3901:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
3902:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
3903:Middlewares/Third_Party/FatFs/src/ff.c **** 
3904:Middlewares/Third_Party/FatFs/src/ff.c **** 
3905:Middlewares/Third_Party/FatFs/src/ff.c **** 
3906:Middlewares/Third_Party/FatFs/src/ff.c **** 
3907:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LABEL
3908:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3909:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get volume label                                                      */
3910:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3911:Middlewares/Third_Party/FatFs/src/ff.c **** 
3912:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getlabel (
3913:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3914:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
3915:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
3916:Middlewares/Third_Party/FatFs/src/ff.c **** )
3917:Middlewares/Third_Party/FatFs/src/ff.c **** {
3918:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3919:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3920:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
3921:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3922:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
3923:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3924:Middlewares/Third_Party/FatFs/src/ff.c **** 
3925:Middlewares/Third_Party/FatFs/src/ff.c **** 
3926:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3927:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3928:Middlewares/Third_Party/FatFs/src/ff.c **** 
3929:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume label */
3930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && label) {
3931:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
3932:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(&dj, 0);
3933:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3934:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
3935:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
3936:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3937:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = j = 0;
3938:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3939:Middlewares/Third_Party/FatFs/src/ff.c **** 					w = (i < 11) ? dj.dir[i++] : ' ';
3940:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
3941:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = w << 8 | dj.dir[i++];
3942:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
3943:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (j < 11);
3944:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3945:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(label, dj.dir, 11);
3946:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3947:Middlewares/Third_Party/FatFs/src/ff.c **** 				j = 11;
3948:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3949:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[j] = 0;
3950:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!j) break;
3951:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (label[--j] == ' ');
3952:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 174


3953:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {	/* No label, return nul string */
3954:Middlewares/Third_Party/FatFs/src/ff.c **** 				label[0] = 0;
3955:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3956:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3957:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3958:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3959:Middlewares/Third_Party/FatFs/src/ff.c **** 
3960:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume serial number */
3961:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && vsn) {
3962:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
3963:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3964:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
3965:Middlewares/Third_Party/FatFs/src/ff.c **** 			*vsn = LD_DWORD(&dj.fs->win.d8[i]);
3966:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3967:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3968:Middlewares/Third_Party/FatFs/src/ff.c **** 
3969:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3970:Middlewares/Third_Party/FatFs/src/ff.c **** }
3971:Middlewares/Third_Party/FatFs/src/ff.c **** 
3972:Middlewares/Third_Party/FatFs/src/ff.c **** 
3973:Middlewares/Third_Party/FatFs/src/ff.c **** 
3974:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3975:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3976:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set volume label                                                      */
3977:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3978:Middlewares/Third_Party/FatFs/src/ff.c **** 
3979:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_setlabel (
3980:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
3981:Middlewares/Third_Party/FatFs/src/ff.c **** )
3982:Middlewares/Third_Party/FatFs/src/ff.c **** {
3983:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3984:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3985:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE vn[11];
3986:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, sl;
3987:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
3988:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
3989:Middlewares/Third_Party/FatFs/src/ff.c **** 
3990:Middlewares/Third_Party/FatFs/src/ff.c **** 
3991:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3992:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &label, 1);
3993:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
3994:Middlewares/Third_Party/FatFs/src/ff.c **** 
3995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create a volume label in directory form */
3996:Middlewares/Third_Party/FatFs/src/ff.c **** 	vn[0] = 0;
3997:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
3998:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ; sl && label[sl - 1] == ' '; sl--) ;	/* Remove trailing spaces */
3999:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
4000:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = j = 0;
4001:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
4002:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(label[i++]), 0);
4004:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (BYTE)label[i++];
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(w))
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
4008:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
4009:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 175


4010:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4011:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
4012:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
4014:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4015:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
4016:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4017:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4018:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject i
4020:Middlewares/Third_Party/FatFs/src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
4022:Middlewares/Third_Party/FatFs/src/ff.c **** 			vn[j++] = (BYTE)w;
4023:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (i < sl);
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j < 11) vn[j++] = ' ';	/* Fill remaining name field */
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (vn[0] == DDEM) LEAVE_FF(dj.fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set volume label */
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.sclust = 0;					/* Open root directory */
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(&dj, 0);
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (vn[0]) {
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dj.dir + DIR_WrtTime, tm);
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[0] = DDEM;			/* Remove the volume label */
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.fs->wflag = 1;
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = sync_fs(dj.fs);
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {					/* No volume label is found or error */
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (vn[0]) {				/* Create volume label as new */
4047:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4049:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIRE);	/* Set volume label */
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 						tm = GET_FATTIME();
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 						ST_DWORD(dj.dir + DIR_WrtTime, tm);
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->wflag = 1;
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = sync_fs(dj.fs);
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4058:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4059:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4060:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
4063:Middlewares/Third_Party/FatFs/src/ff.c **** }
4064:Middlewares/Third_Party/FatFs/src/ff.c **** 
4065:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LABEL */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 176


4067:Middlewares/Third_Party/FatFs/src/ff.c **** 
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 
4070:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4071:Middlewares/Third_Party/FatFs/src/ff.c **** /* Forward data to the stream directly (available on only tiny cfg)      */
4072:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4073:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FORWARD && _FS_TINY
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 
4075:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_forward (
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
4077:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
4079:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
4080:Middlewares/Third_Party/FatFs/src/ff.c **** )
4081:Middlewares/Third_Party/FatFs/src/ff.c **** {
4082:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD remain, clst, sect;
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt;
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect;
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);								/* Check validity of the object */
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
4092:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)									/* Check error */
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
4094:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ))						/* Check access mode */
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 
4100:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
4101:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {							/* On the cluster boundary? */
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
4106:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust : get_fat(fp->fs, fp->clust);
4107:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
4110:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect += csect;
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, sect) != FR_OK)		/* Move sector window */
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->dsect = sect;
4118:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btf) rcnt = btf;
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = (*func)(&fp->fs->win.d8[(WORD)fp->fptr % SS(fp->fs)], rcnt);
4121:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 177


4124:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
4125:Middlewares/Third_Party/FatFs/src/ff.c **** }
4126:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FORWARD */
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 
4130:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_MKFS && !_FS_READONLY
4131:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4132:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create file system on the logical drive                               */
4133:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4134:Middlewares/Third_Party/FatFs/src/ff.c **** #define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
4135:Middlewares/Third_Party/FatFs/src/ff.c **** #define N_FATS		1		/* Number of FATs (1 or 2) */
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 
4138:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkfs (
4139:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
4140:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT au				/* Size of allocation unit in unit of byte or sector */
4142:Middlewares/Third_Party/FatFs/src/ff.c **** )
4143:Middlewares/Third_Party/FatFs/src/ff.c **** {
4144:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
4145:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
4146:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
4147:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n_clst, vs, n, wsect;
4149:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
4150:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
4151:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
4152:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4153:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
4154:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
4155:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD eb[2];
4156:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4157:Middlewares/Third_Party/FatFs/src/ff.c **** 
4158:Middlewares/Third_Party/FatFs/src/ff.c **** 
4159:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check mounted drive and clear work area */
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get disk statics */
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4173:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
4174:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS || SS(fs) < _MIN_SS)
4175:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
4176:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part) {
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, fs->win.d8, 0, 1) != RES_OK) return FR_DISK_ERR;
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 178


4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = LD_DWORD(tbl + 8);	/* Volume start sector */
4184:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol = LD_DWORD(tbl + 12);	/* Volume size */
4185:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4186:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a partition in this function */
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au & (au - 1)) au = 0;
4194:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au >= _MIN_SS) au /= SS(fs);	/* Number of sectors per cluster */
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au > 128) au = 128;
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Pre-compute number of clusters and FAT sub-type */
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 	n_clst = n_vol / au;
4205:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine offset and size of FAT structure */
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 32;
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = 0;
4214:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 1;
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
4219:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
4221:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
4224:Middlewares/Third_Party/FatFs/src/ff.c **** 
4225:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Align data start sector to erase block boundary (for flash memory media) */
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (n - b_data) / N_FATS;
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
4230:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv += n;
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat += n;
4232:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat += n;
4234:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine number of clusters and final check of validity of the FAT sub-type */
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 179


4238:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
4241:Middlewares/Third_Party/FatFs/src/ff.c **** 
4242:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine system ID in the partition table */
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x0C;		/* FAT32X */
4245:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT12 && n_vol < 0x10000) {
4247:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
4248:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
4250:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4251:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4252:Middlewares/Third_Party/FatFs/src/ff.c **** 
4253:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part) {
4254:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
4255:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4256:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[4] = sys;
4257:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to teh MBR */
4258:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4259:Middlewares/Third_Party/FatFs/src/ff.c **** 		md = 0xF8;
4260:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4261:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sfd) {	/* No partition table (SFD) */
4262:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF0;
4263:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {	/* Create partition table (FDISK) */
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
4265:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fs->win.d8 + MBR_Table;	/* Create partition table for single partition in the drive */
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[1] = 1;						/* Partition start head */
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
4268:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[4] = sys;					/* System type */
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF8;
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create BPB in the VBR */
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fs->win.d8;							/* Clear sector */
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(tbl, 0, SS(fs));
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
4287:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SS(fs);								/* Sector size */
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_BytsPerSec, i);
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 180


4295:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
4296:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4297:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_TotSec32, n_vol);
4298:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4299:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
4304:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
4313:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID, n);		/* VSN */
4315:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
4319:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
4322:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
4323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR + 6) */
4324:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
4325:Middlewares/Third_Party/FatFs/src/ff.c **** 
4326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize FAT area */
4327:Middlewares/Third_Party/FatFs/src/ff.c **** 	wsect = b_fat;
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = md;								/* Media descriptor byte */
4331:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt != FS_FAT32) {
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
4334:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= 0xFFFFFF00;
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
4339:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4342:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4345:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
4346:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4347:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4348:Middlewares/Third_Party/FatFs/src/ff.c **** 
4349:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize root directory */
4350:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? au : (UINT)n_dir;
4351:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 181


4352:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4353:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--i);
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 
4356:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM	/* Erase data area if needed */
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, eb);
4360:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4361:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4362:Middlewares/Third_Party/FatFs/src/ff.c **** 
4363:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create FSINFO if needed */
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4373:Middlewares/Third_Party/FatFs/src/ff.c **** 
4374:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
4375:Middlewares/Third_Party/FatFs/src/ff.c **** }
4376:Middlewares/Third_Party/FatFs/src/ff.c **** 
4377:Middlewares/Third_Party/FatFs/src/ff.c **** 
4378:Middlewares/Third_Party/FatFs/src/ff.c **** 
4379:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
4380:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4381:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create partition table on the physical drive                          */
4382:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4383:Middlewares/Third_Party/FatFs/src/ff.c **** 
4384:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_fdisk (
4385:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
4386:Middlewares/Third_Party/FatFs/src/ff.c **** 	const DWORD szt[],	/* Pointer to the size table for each partitions */
4387:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work			/* Pointer to the working buffer */
4388:Middlewares/Third_Party/FatFs/src/ff.c **** )
4389:Middlewares/Third_Party/FatFs/src/ff.c **** {
4390:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
4391:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
4392:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine CHS in the table regardless of the drive geometry */
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n == 256) n--;
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 	e_hd = n - 1;
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_cyl = 63 * n;
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create partition table */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 182


4409:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
4410:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!p_cyl) continue;
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 1;
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_part += 63; sz_part -= 63;
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4420:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 0;
4421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4422:Middlewares/Third_Party/FatFs/src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;
4423:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
4424:Middlewares/Third_Party/FatFs/src/ff.c **** 
4425:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Set partition table */
4426:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[1] = s_hd;						/* Start head */
4427:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
4428:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[4] = 0x06;						/* System type (temporary setting) */
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[5] = e_hd;						/* End head */
4431:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
4434:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(p + 12, sz_part);			/* Partition size */
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Next partition */
4437:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_cyl += p_cyl;
4438:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(p, 0xAA55);
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Write it to the MBR */
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DI
4443:Middlewares/Third_Party/FatFs/src/ff.c **** }
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 
4446:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _MULTI_PARTITION */
4447:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
4448:Middlewares/Third_Party/FatFs/src/ff.c **** 
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 
4452:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_STRFUNC
4453:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4454:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get a string from the file                                            */
4455:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 
4457:Middlewares/Third_Party/FatFs/src/ff.c **** TCHAR* f_gets (
4458:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 	int len,		/* Size of string buffer (characters) */
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp			/* Pointer to the file object */
4461:Middlewares/Third_Party/FatFs/src/ff.c **** )
4462:Middlewares/Third_Party/FatFs/src/ff.c **** {
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
4465:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 183


4466:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
4467:Middlewares/Third_Party/FatFs/src/ff.c **** 
4468:Middlewares/Third_Party/FatFs/src/ff.c **** 
4469:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
4470:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4471:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
4472:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4473:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4475:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {
4476:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
4477:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence */
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 				f_read(fp, s, 1, &rc);
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (rc != 1) break;
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0x80) c = '?';
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4483:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence */
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 					f_read(fp, s, 2, &rc);
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (rc != 2) break;
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c < 0x800) c = '?';
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {			/* Reject four-byte sequence */
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = '?';
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4492:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4493:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[1] + (s[0] << 8);
4497:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
4499:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
4500:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0] + (s[1] << 8);
4501:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character in ANSI/OEM */
4502:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4503:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 			f_read(fp, s, 1, &rc);
4507:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (rc != 1) break;
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (c << 8) + s[0];
4509:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4510:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
4511:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
4512:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4513:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character without conversion */
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
4516:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4517:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
4522:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 184


4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;
4524:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
4525:Middlewares/Third_Party/FatFs/src/ff.c **** }
4526:Middlewares/Third_Party/FatFs/src/ff.c **** 
4527:Middlewares/Third_Party/FatFs/src/ff.c **** 
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 
4530:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4531:Middlewares/Third_Party/FatFs/src/ff.c **** #include <stdarg.h>
4532:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4533:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a character to the file                                           */
4534:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4535:Middlewares/Third_Party/FatFs/src/ff.c **** 
4536:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
4537:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp;
4538:Middlewares/Third_Party/FatFs/src/ff.c **** 	int idx, nchr;
4539:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[64];
4540:Middlewares/Third_Party/FatFs/src/ff.c **** } putbuff;
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 
4543:Middlewares/Third_Party/FatFs/src/ff.c **** static
4544:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_bfd (
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
4546:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c
4547:Middlewares/Third_Party/FatFs/src/ff.c **** )
4548:Middlewares/Third_Party/FatFs/src/ff.c **** {
 5377              		.loc 1 4548 0
 5378              		.cfi_startproc
 5379              		@ args = 0, pretend = 0, frame = 8
 5380              		@ frame_needed = 0, uses_anonymous_args = 0
 5381              	.LVL772:
 5382 0000 70B5     		push	{r4, r5, r6, lr}
 5383              	.LCFI66:
 5384              		.cfi_def_cfa_offset 16
 5385              		.cfi_offset 4, -16
 5386              		.cfi_offset 5, -12
 5387              		.cfi_offset 6, -8
 5388              		.cfi_offset 14, -4
 5389 0002 82B0     		sub	sp, sp, #8
 5390              	.LCFI67:
 5391              		.cfi_def_cfa_offset 24
 5392 0004 0446     		mov	r4, r0
 5393 0006 0E46     		mov	r6, r1
4549:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
4550:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n')	 /* LF -> CRLF conversion */
 5394              		.loc 1 4553 0
 5395 0008 0A29     		cmp	r1, #10
 5396 000a 0DD0     		beq	.L551
 5397              	.LVL773:
 5398              	.L545:
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = pb->idx;	/* Buffer write index (-1:error) */
 5399              		.loc 1 4556 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 185


 5400 000c 6368     		ldr	r3, [r4, #4]
 5401              	.LVL774:
4557:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 5402              		.loc 1 4557 0
 5403 000e 002B     		cmp	r3, #0
 5404 0010 08DB     		blt	.L544
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 
4559:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4560:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
4561:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
4562:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)c;
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4564:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
4565:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
4566:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* 16-bit */
4567:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
4568:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4570:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
4571:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4572:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
4573:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4574:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4575:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
4576:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4577:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4578:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character in ANSI/OEM */
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
4580:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!c) c = '?';
4581:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c >= 0x100)
4582:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
4583:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4585:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character without conversion */
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
 5405              		.loc 1 4586 0
 5406 0012 5D1C     		adds	r5, r3, #1
 5407              	.LVL775:
 5408 0014 2344     		add	r3, r3, r4
 5409 0016 1E73     		strb	r6, [r3, #12]
4587:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
 5410              		.loc 1 4589 0
 5411 0018 3C2D     		cmp	r5, #60
 5412 001a 09DC     		bgt	.L552
 5413              	.LVL776:
 5414              	.L547:
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
4592:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->idx = i;
 5415              		.loc 1 4593 0
 5416 001c 6560     		str	r5, [r4, #4]
4594:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 5417              		.loc 1 4594 0
 5418 001e A368     		ldr	r3, [r4, #8]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 186


 5419 0020 0133     		adds	r3, r3, #1
 5420 0022 A360     		str	r3, [r4, #8]
 5421              	.LVL777:
 5422              	.L544:
4595:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5423              		.loc 1 4595 0
 5424 0024 02B0     		add	sp, sp, #8
 5425              	.LCFI68:
 5426              		.cfi_remember_state
 5427              		.cfi_def_cfa_offset 16
 5428              		@ sp needed
 5429 0026 70BD     		pop	{r4, r5, r6, pc}
 5430              	.LVL778:
 5431              	.L551:
 5432              	.LCFI69:
 5433              		.cfi_restore_state
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5434              		.loc 1 4554 0
 5435 0028 0D21     		movs	r1, #13
 5436              	.LVL779:
 5437 002a FFF7E9FF 		bl	putc_bfd
 5438              	.LVL780:
 5439 002e EDE7     		b	.L545
 5440              	.LVL781:
 5441              	.L552:
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 5442              		.loc 1 4590 0
 5443 0030 01AB     		add	r3, sp, #4
 5444 0032 2A46     		mov	r2, r5
 5445 0034 04F10C01 		add	r1, r4, #12
 5446 0038 2068     		ldr	r0, [r4]
 5447 003a FFF7FEFF 		bl	f_write
 5448              	.LVL782:
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5449              		.loc 1 4591 0
 5450 003e 019B     		ldr	r3, [sp, #4]
 5451 0040 9D42     		cmp	r5, r3
 5452 0042 02D0     		beq	.L553
 5453 0044 4FF0FF35 		mov	r5, #-1
 5454              	.LVL783:
 5455 0048 E8E7     		b	.L547
 5456              	.LVL784:
 5457              	.L553:
 5458 004a 0025     		movs	r5, #0
 5459              	.LVL785:
 5460 004c E6E7     		b	.L547
 5461              		.cfi_endproc
 5462              	.LFE185:
 5464              		.section	.text.f_sync,"ax",%progbits
 5465              		.align	1
 5466              		.global	f_sync
 5467              		.syntax unified
 5468              		.thumb
 5469              		.thumb_func
 5470              		.fpu fpv4-sp-d16
 5472              	f_sync:
 5473              	.LFB169:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 187


2884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5474              		.loc 1 2884 0
 5475              		.cfi_startproc
 5476              		@ args = 0, pretend = 0, frame = 0
 5477              		@ frame_needed = 0, uses_anonymous_args = 0
 5478              	.LVL786:
 5479 0000 38B5     		push	{r3, r4, r5, lr}
 5480              	.LCFI70:
 5481              		.cfi_def_cfa_offset 16
 5482              		.cfi_offset 3, -16
 5483              		.cfi_offset 4, -12
 5484              		.cfi_offset 5, -8
 5485              		.cfi_offset 14, -4
 5486 0002 0446     		mov	r4, r0
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5487              		.loc 1 2890 0
 5488 0004 FFF7FEFF 		bl	validate
 5489              	.LVL787:
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 5490              		.loc 1 2891 0
 5491 0008 0546     		mov	r5, r0
 5492 000a 00BB     		cbnz	r0, .L555
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write-back dirty buffer */
 5493              		.loc 1 2892 0
 5494 000c 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5495 0010 13F0200F 		tst	r3, #32
 5496 0014 1BD0     		beq	.L555
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5497              		.loc 1 2895 0
 5498 0016 13F0400F 		tst	r3, #64
 5499 001a 10D0     		beq	.L556
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 5500              		.loc 1 2896 0
 5501 001c D4F80002 		ldr	r0, [r4, #512]
 5502              	.LVL788:
 5503 0020 0123     		movs	r3, #1
 5504 0022 D4F81822 		ldr	r2, [r4, #536]
 5505 0026 2146     		mov	r1, r4
 5506 0028 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 5507 002c FFF7FEFF 		bl	disk_write
 5508              	.LVL789:
 5509 0030 A0B9     		cbnz	r0, .L560
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5510              		.loc 1 2898 0
 5511 0032 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5512 0036 23F04003 		bic	r3, r3, #64
 5513 003a 84F80632 		strb	r3, [r4, #518]
 5514              	.L556:
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
 5515              		.loc 1 2902 0
 5516 003e D4F81C12 		ldr	r1, [r4, #540]
 5517 0042 D4F80002 		ldr	r0, [r4, #512]
 5518 0046 FFF7FEFF 		bl	move_window
 5519              	.LVL790:
2903:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fp->dir_ptr;
 5520              		.loc 1 2903 0
 5521 004a 0546     		mov	r5, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 188


 5522 004c 68B1     		cbz	r0, .L561
 5523              	.LVL791:
 5524              	.L555:
2918:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5525              		.loc 1 2918 0
 5526 004e 2946     		mov	r1, r5
 5527 0050 D4F80002 		ldr	r0, [r4, #512]
 5528 0054 FFF7FEFF 		bl	unlock_fs
 5529              	.LVL792:
 5530              	.L558:
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5531              		.loc 1 2919 0
 5532 0058 2846     		mov	r0, r5
 5533 005a 38BD     		pop	{r3, r4, r5, pc}
 5534              	.LVL793:
 5535              	.L560:
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 5536              		.loc 1 2897 0
 5537 005c 0121     		movs	r1, #1
 5538 005e D4F80002 		ldr	r0, [r4, #512]
 5539 0062 FFF7FEFF 		bl	unlock_fs
 5540              	.LVL794:
 5541 0066 0125     		movs	r5, #1
 5542 0068 F6E7     		b	.L558
 5543              	.LVL795:
 5544              	.L561:
2904:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 5545              		.loc 1 2904 0
 5546 006a D4F82052 		ldr	r5, [r4, #544]
 5547              	.LVL796:
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
 5548              		.loc 1 2905 0
 5549 006e EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5550 0070 43F02003 		orr	r3, r3, #32
 5551 0074 EB72     		strb	r3, [r5, #11]
2906:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 5552              		.loc 1 2906 0
 5553 0076 94F80C32 		ldrb	r3, [r4, #524]	@ zero_extendqisi2
 5554 007a 2B77     		strb	r3, [r5, #28]
 5555 007c B4F80C32 		ldrh	r3, [r4, #524]
 5556 0080 1B0A     		lsrs	r3, r3, #8
 5557 0082 6B77     		strb	r3, [r5, #29]
 5558 0084 94F80E32 		ldrb	r3, [r4, #526]	@ zero_extendqisi2
 5559 0088 AB77     		strb	r3, [r5, #30]
 5560 008a 94F80F32 		ldrb	r3, [r4, #527]	@ zero_extendqisi2
 5561 008e EB77     		strb	r3, [r5, #31]
2907:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
 5562              		.loc 1 2907 0
 5563 0090 D4F81012 		ldr	r1, [r4, #528]
 5564 0094 2846     		mov	r0, r5
 5565              	.LVL797:
 5566 0096 FFF7FEFF 		bl	st_clust
 5567              	.LVL798:
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 5568              		.loc 1 2908 0
 5569 009a FFF7FEFF 		bl	get_fattime
 5570              	.LVL799:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 189


2909:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
 5571              		.loc 1 2909 0
 5572 009e A875     		strb	r0, [r5, #22]
 5573 00a0 C0F30723 		ubfx	r3, r0, #8, #8
 5574 00a4 EB75     		strb	r3, [r5, #23]
 5575 00a6 C0F30743 		ubfx	r3, r0, #16, #8
 5576 00aa 2B76     		strb	r3, [r5, #24]
 5577 00ac 000E     		lsrs	r0, r0, #24
 5578              	.LVL800:
 5579 00ae 6876     		strb	r0, [r5, #25]
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 5580              		.loc 1 2910 0
 5581 00b0 0023     		movs	r3, #0
 5582 00b2 AB74     		strb	r3, [r5, #18]
 5583 00b4 EB74     		strb	r3, [r5, #19]
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
 5584              		.loc 1 2911 0
 5585 00b6 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5586 00ba 23F02003 		bic	r3, r3, #32
 5587 00be 84F80632 		strb	r3, [r4, #518]
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
 5588              		.loc 1 2912 0
 5589 00c2 D4F80032 		ldr	r3, [r4, #512]
 5590 00c6 0122     		movs	r2, #1
 5591 00c8 83F80422 		strb	r2, [r3, #516]
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5592              		.loc 1 2913 0
 5593 00cc D4F80002 		ldr	r0, [r4, #512]
 5594 00d0 FFF7FEFF 		bl	sync_fs
 5595              	.LVL801:
 5596 00d4 0546     		mov	r5, r0
 5597              	.LVL802:
 5598 00d6 BAE7     		b	.L555
 5599              		.cfi_endproc
 5600              	.LFE169:
 5602              		.section	.text.f_close,"ax",%progbits
 5603              		.align	1
 5604              		.global	f_close
 5605              		.syntax unified
 5606              		.thumb
 5607              		.thumb_func
 5608              		.fpu fpv4-sp-d16
 5610              	f_close:
 5611              	.LFB170:
2933:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5612              		.loc 1 2933 0
 5613              		.cfi_startproc
 5614              		@ args = 0, pretend = 0, frame = 0
 5615              		@ frame_needed = 0, uses_anonymous_args = 0
 5616              	.LVL803:
 5617 0000 70B5     		push	{r4, r5, r6, lr}
 5618              	.LCFI71:
 5619              		.cfi_def_cfa_offset 16
 5620              		.cfi_offset 4, -16
 5621              		.cfi_offset 5, -12
 5622              		.cfi_offset 6, -8
 5623              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 190


 5624 0002 0546     		mov	r5, r0
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 5625              		.loc 1 2938 0
 5626 0004 FFF7FEFF 		bl	f_sync
 5627              	.LVL804:
2939:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5628              		.loc 1 2939 0
 5629 0008 0446     		mov	r4, r0
 5630 000a 08B1     		cbz	r0, .L566
 5631              	.LVL805:
 5632              	.L563:
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5633              		.loc 1 2958 0
 5634 000c 2046     		mov	r0, r4
 5635 000e 70BD     		pop	{r4, r5, r6, pc}
 5636              	.LVL806:
 5637              	.L566:
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 5638              		.loc 1 2942 0
 5639 0010 2846     		mov	r0, r5
 5640              	.LVL807:
 5641 0012 FFF7FEFF 		bl	validate
 5642              	.LVL808:
2943:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 5643              		.loc 1 2943 0
 5644 0016 0446     		mov	r4, r0
 5645 0018 0028     		cmp	r0, #0
 5646 001a F7D1     		bne	.L563
 5647              	.LBB2:
2945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5648              		.loc 1 2945 0
 5649 001c D5F80062 		ldr	r6, [r5, #512]
 5650              	.LVL809:
2948:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 5651              		.loc 1 2948 0
 5652 0020 D5F82802 		ldr	r0, [r5, #552]
 5653              	.LVL810:
 5654 0024 FFF7FEFF 		bl	dec_lock
 5655              	.LVL811:
2949:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5656              		.loc 1 2949 0
 5657 0028 0446     		mov	r4, r0
 5658 002a 10B9     		cbnz	r0, .L564
2951:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 5659              		.loc 1 2951 0
 5660 002c 0023     		movs	r3, #0
 5661 002e C5F80032 		str	r3, [r5, #512]
 5662              	.L564:
2953:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5663              		.loc 1 2953 0
 5664 0032 0021     		movs	r1, #0
 5665 0034 3046     		mov	r0, r6
 5666              	.LVL812:
 5667 0036 FFF7FEFF 		bl	unlock_fs
 5668              	.LVL813:
 5669 003a E7E7     		b	.L563
 5670              	.LBE2:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 191


 5671              		.cfi_endproc
 5672              	.LFE170:
 5674              		.section	.text.f_lseek,"ax",%progbits
 5675              		.align	1
 5676              		.global	f_lseek
 5677              		.syntax unified
 5678              		.thumb
 5679              		.thumb_func
 5680              		.fpu fpv4-sp-d16
 5682              	f_lseek:
 5683              	.LFB171:
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5684              		.loc 1 3106 0
 5685              		.cfi_startproc
 5686              		@ args = 0, pretend = 0, frame = 0
 5687              		@ frame_needed = 0, uses_anonymous_args = 0
 5688              	.LVL814:
 5689 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5690              	.LCFI72:
 5691              		.cfi_def_cfa_offset 40
 5692              		.cfi_offset 3, -40
 5693              		.cfi_offset 4, -36
 5694              		.cfi_offset 5, -32
 5695              		.cfi_offset 6, -28
 5696              		.cfi_offset 7, -24
 5697              		.cfi_offset 8, -20
 5698              		.cfi_offset 9, -16
 5699              		.cfi_offset 10, -12
 5700              		.cfi_offset 11, -8
 5701              		.cfi_offset 14, -4
 5702 0004 0446     		mov	r4, r0
 5703 0006 0D46     		mov	r5, r1
3114:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 5704              		.loc 1 3114 0
 5705 0008 FFF7FEFF 		bl	validate
 5706              	.LVL815:
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)						/* Check error */
 5707              		.loc 1 3115 0
 5708 000c 0646     		mov	r6, r0
 5709 000e D8B9     		cbnz	r0, .L612
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 5710              		.loc 1 3116 0
 5711 0010 94F80712 		ldrb	r1, [r4, #519]	@ zero_extendqisi2
 5712 0014 F1B9     		cbnz	r1, .L613
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 5713              		.loc 1 3120 0
 5714 0016 D4F82432 		ldr	r3, [r4, #548]
 5715 001a 002B     		cmp	r3, #0
 5716 001c 00F0C680 		beq	.L571
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 5717              		.loc 1 3121 0
 5718 0020 B5F1FF3F 		cmp	r5, #-1
 5719 0024 1DD0     		beq	.L614
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs = fp->fsize;
 5720              		.loc 1 3147 0
 5721 0026 D4F80C72 		ldr	r7, [r4, #524]
 5722 002a BD42     		cmp	r5, r7
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 192


 5723 002c 00D8     		bhi	.L580
 5724 002e 2F46     		mov	r7, r5
 5725              	.L580:
 5726              	.LVL816:
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 5727              		.loc 1 3149 0
 5728 0030 C4F80872 		str	r7, [r4, #520]
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 5729              		.loc 1 3150 0
 5730 0034 002F     		cmp	r7, #0
 5731 0036 61D1     		bne	.L615
 5732              	.LVL817:
 5733              	.L579:
3250:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5734              		.loc 1 3250 0
 5735 0038 3146     		mov	r1, r6
 5736 003a D4F80002 		ldr	r0, [r4, #512]
 5737 003e FFF7FEFF 		bl	unlock_fs
 5738              	.LVL818:
 5739              	.L569:
3251:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5740              		.loc 1 3251 0
 5741 0042 3046     		mov	r0, r6
 5742 0044 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5743              	.LVL819:
 5744              	.L612:
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)						/* Check error */
 5745              		.loc 1 3115 0 discriminator 1
 5746 0048 0146     		mov	r1, r0
 5747 004a D4F80002 		ldr	r0, [r4, #512]
 5748              	.LVL820:
 5749 004e FFF7FEFF 		bl	unlock_fs
 5750              	.LVL821:
 5751 0052 F6E7     		b	.L569
 5752              	.LVL822:
 5753              	.L613:
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5754              		.loc 1 3117 0
 5755 0054 D4F80002 		ldr	r0, [r4, #512]
 5756              	.LVL823:
 5757 0058 FFF7FEFF 		bl	unlock_fs
 5758              	.LVL824:
 5759 005c 94F80762 		ldrb	r6, [r4, #519]	@ zero_extendqisi2
 5760 0060 EFE7     		b	.L569
 5761              	.LVL825:
 5762              	.L614:
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 5763              		.loc 1 3123 0
 5764 0062 03F1040B 		add	fp, r3, #4
 5765              	.LVL826:
 5766 0066 D3F800A0 		ldr	r10, [r3]
 5767              	.LVL827:
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 5768              		.loc 1 3124 0
 5769 006a D4F81092 		ldr	r9, [r4, #528]
 5770              	.LVL828:
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 193


 5771              		.loc 1 3125 0
 5772 006e B9F1000F 		cmp	r9, #0
 5773 0072 36D0     		beq	.L605
 5774 0074 4FF00208 		mov	r8, #2
 5775              	.LVL829:
 5776              	.L578:
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 5777              		.loc 1 3128 0
 5778 0078 08F10208 		add	r8, r8, #2
 5779              	.LVL830:
 5780 007c 4D46     		mov	r5, r9
 5781 007e 0027     		movs	r7, #0
 5782              	.LVL831:
 5783              	.L576:
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(fp->fs, cl);
 5784              		.loc 1 3130 0
 5785 0080 0137     		adds	r7, r7, #1
 5786              	.LVL832:
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 5787              		.loc 1 3131 0
 5788 0082 2946     		mov	r1, r5
 5789 0084 D4F80002 		ldr	r0, [r4, #512]
 5790 0088 FFF7FEFF 		bl	get_fat
 5791              	.LVL833:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5792              		.loc 1 3132 0
 5793 008c 0128     		cmp	r0, #1
 5794 008e 16D9     		bls	.L616
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 5795              		.loc 1 3133 0
 5796 0090 B0F1FF3F 		cmp	r0, #-1
 5797 0094 1CD0     		beq	.L617
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 5798              		.loc 1 3134 0
 5799 0096 6B1C     		adds	r3, r5, #1
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 5800              		.loc 1 3131 0
 5801 0098 0546     		mov	r5, r0
 5802              	.LVL834:
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 5803              		.loc 1 3134 0
 5804 009a 9842     		cmp	r0, r3
 5805 009c F0D0     		beq	.L576
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 5806              		.loc 1 3135 0
 5807 009e C245     		cmp	r10, r8
 5808 00a0 05D3     		bcc	.L577
 5809              	.LVL835:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5810              		.loc 1 3136 0
 5811 00a2 5B46     		mov	r3, fp
 5812              	.LVL836:
 5813 00a4 43F8087B 		str	r7, [r3], #8
 5814              	.LVL837:
 5815 00a8 CBF80490 		str	r9, [fp, #4]
 5816 00ac 9B46     		mov	fp, r3
 5817              	.LVL838:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 194


 5818              	.L577:
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5819              		.loc 1 3138 0
 5820 00ae D4F80032 		ldr	r3, [r4, #512]
 5821 00b2 D3F81832 		ldr	r3, [r3, #536]
 5822 00b6 9842     		cmp	r0, r3
 5823 00b8 15D2     		bcs	.L573
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 5824              		.loc 1 3131 0
 5825 00ba 8146     		mov	r9, r0
 5826              	.LVL839:
 5827 00bc DCE7     		b	.L578
 5828              	.LVL840:
 5829              	.L616:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5830              		.loc 1 3132 0 discriminator 1
 5831 00be 0226     		movs	r6, #2
 5832 00c0 84F80762 		strb	r6, [r4, #519]
 5833 00c4 3146     		mov	r1, r6
 5834 00c6 D4F80002 		ldr	r0, [r4, #512]
 5835              	.LVL841:
 5836 00ca FFF7FEFF 		bl	unlock_fs
 5837              	.LVL842:
 5838 00ce B8E7     		b	.L569
 5839              	.LVL843:
 5840              	.L617:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 5841              		.loc 1 3133 0 discriminator 1
 5842 00d0 0126     		movs	r6, #1
 5843 00d2 84F80762 		strb	r6, [r4, #519]
 5844 00d6 3146     		mov	r1, r6
 5845 00d8 D4F80002 		ldr	r0, [r4, #512]
 5846              	.LVL844:
 5847 00dc FFF7FEFF 		bl	unlock_fs
 5848              	.LVL845:
 5849 00e0 AFE7     		b	.L569
 5850              	.LVL846:
 5851              	.L605:
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 5852              		.loc 1 3123 0
 5853 00e2 4FF00208 		mov	r8, #2
 5854              	.LVL847:
 5855              	.L573:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen)
 5856              		.loc 1 3140 0
 5857 00e6 D4F82432 		ldr	r3, [r4, #548]
 5858 00ea C3F80080 		str	r8, [r3]
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 5859              		.loc 1 3141 0
 5860 00ee D045     		cmp	r8, r10
 5861 00f0 00F25381 		bhi	.L607
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
 5862              		.loc 1 3142 0
 5863 00f4 0023     		movs	r3, #0
 5864 00f6 CBF80030 		str	r3, [fp]
 5865 00fa 9DE7     		b	.L579
 5866              	.LVL848:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 195


 5867              	.L615:
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 5868              		.loc 1 3151 0
 5869 00fc 07F1FF38 		add	r8, r7, #-1
 5870 0100 4146     		mov	r1, r8
 5871 0102 2046     		mov	r0, r4
 5872              	.LVL849:
 5873 0104 FFF7FEFF 		bl	clmt_clust
 5874              	.LVL850:
 5875 0108 0146     		mov	r1, r0
 5876 010a C4F81402 		str	r0, [r4, #532]
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
 5877              		.loc 1 3152 0
 5878 010e D4F80052 		ldr	r5, [r4, #512]
 5879 0112 2846     		mov	r0, r5
 5880 0114 FFF7FEFF 		bl	clust2sect
 5881              	.LVL851:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 5882              		.loc 1 3153 0
 5883 0118 70B3     		cbz	r0, .L618
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 5884              		.loc 1 3154 0
 5885 011a 95F80212 		ldrb	r1, [r5, #514]	@ zero_extendqisi2
 5886 011e 0139     		subs	r1, r1, #1
 5887 0120 01EA5821 		and	r1, r1, r8, lsr #9
 5888 0124 00EB0108 		add	r8, r0, r1
 5889              	.LVL852:
3155:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5890              		.loc 1 3155 0
 5891 0128 C7F30807 		ubfx	r7, r7, #0, #9
 5892              	.LVL853:
 5893 012c 002F     		cmp	r7, #0
 5894 012e 83D0     		beq	.L579
3155:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5895              		.loc 1 3155 0 is_stmt 0 discriminator 1
 5896 0130 D4F81822 		ldr	r2, [r4, #536]
 5897 0134 9045     		cmp	r8, r2
 5898 0136 3FF47FAF 		beq	.L579
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5899              		.loc 1 3158 0 is_stmt 1
 5900 013a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5901 013e 13F0400F 		tst	r3, #64
 5902 0142 0CD0     		beq	.L582
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
 5903              		.loc 1 3159 0
 5904 0144 0123     		movs	r3, #1
 5905 0146 2146     		mov	r1, r4
 5906 0148 95F80102 		ldrb	r0, [r5, #513]	@ zero_extendqisi2
 5907 014c FFF7FEFF 		bl	disk_write
 5908              	.LVL854:
 5909 0150 D0B9     		cbnz	r0, .L619
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5910              		.loc 1 3161 0
 5911 0152 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5912 0156 23F04003 		bic	r3, r3, #64
 5913 015a 84F80632 		strb	r3, [r4, #518]
 5914              	.L582:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 196


3164:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 5915              		.loc 1 3164 0
 5916 015e D4F80002 		ldr	r0, [r4, #512]
 5917 0162 0123     		movs	r3, #1
 5918 0164 4246     		mov	r2, r8
 5919 0166 2146     		mov	r1, r4
 5920 0168 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 5921 016c FFF7FEFF 		bl	disk_read
 5922              	.LVL855:
 5923 0170 98B9     		cbnz	r0, .L620
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5924              		.loc 1 3167 0
 5925 0172 C4F81882 		str	r8, [r4, #536]
 5926 0176 5FE7     		b	.L579
 5927              	.LVL856:
 5928              	.L618:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 5929              		.loc 1 3153 0 discriminator 1
 5930 0178 0226     		movs	r6, #2
 5931 017a 84F80762 		strb	r6, [r4, #519]
 5932 017e 3146     		mov	r1, r6
 5933 0180 2846     		mov	r0, r5
 5934              	.LVL857:
 5935 0182 FFF7FEFF 		bl	unlock_fs
 5936              	.LVL858:
 5937 0186 5CE7     		b	.L569
 5938              	.LVL859:
 5939              	.L619:
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= ~FA__DIRTY;
 5940              		.loc 1 3160 0
 5941 0188 0126     		movs	r6, #1
 5942 018a 84F80762 		strb	r6, [r4, #519]
 5943 018e 3146     		mov	r1, r6
 5944 0190 D4F80002 		ldr	r0, [r4, #512]
 5945 0194 FFF7FEFF 		bl	unlock_fs
 5946              	.LVL860:
 5947 0198 53E7     		b	.L569
 5948              	.L620:
3165:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5949              		.loc 1 3165 0
 5950 019a 0126     		movs	r6, #1
 5951 019c 84F80762 		strb	r6, [r4, #519]
 5952 01a0 3146     		mov	r1, r6
 5953 01a2 D4F80002 		ldr	r0, [r4, #512]
 5954 01a6 FFF7FEFF 		bl	unlock_fs
 5955              	.LVL861:
 5956 01aa 4AE7     		b	.L569
 5957              	.LVL862:
 5958              	.L571:
3176:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5959              		.loc 1 3176 0
 5960 01ac D4F80C32 		ldr	r3, [r4, #524]
 5961 01b0 9D42     		cmp	r5, r3
 5962 01b2 05D9     		bls	.L585
3178:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5963              		.loc 1 3178 0
 5964 01b4 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 197


 5965 01b8 12F0020F 		tst	r2, #2
 5966 01bc 00D1     		bne	.L585
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5967              		.loc 1 3180 0
 5968 01be 1D46     		mov	r5, r3
 5969              	.LVL863:
 5970              	.L585:
3182:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 5971              		.loc 1 3182 0
 5972 01c0 D4F80832 		ldr	r3, [r4, #520]
 5973              	.LVL864:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 5974              		.loc 1 3183 0
 5975 01c4 0022     		movs	r2, #0
 5976 01c6 C4F80822 		str	r2, [r4, #520]
3184:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 5977              		.loc 1 3184 0
 5978 01ca 0DB3     		cbz	r5, .L586
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 5979              		.loc 1 3185 0
 5980 01cc D4F80002 		ldr	r0, [r4, #512]
 5981              	.LVL865:
 5982 01d0 90F80282 		ldrb	r8, [r0, #514]	@ zero_extendqisi2
 5983 01d4 4FEA4828 		lsl	r8, r8, #9
 5984              	.LVL866:
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 5985              		.loc 1 3186 0
 5986 01d8 83B1     		cbz	r3, .L587
3187:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 5987              		.loc 1 3187 0 discriminator 1
 5988 01da 6A1E     		subs	r2, r5, #1
 5989 01dc B2FBF8F2 		udiv	r2, r2, r8
 5990 01e0 013B     		subs	r3, r3, #1
 5991              	.LVL867:
 5992 01e2 B3FBF8F1 		udiv	r1, r3, r8
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 5993              		.loc 1 3186 0 discriminator 1
 5994 01e6 8A42     		cmp	r2, r1
 5995 01e8 08D3     		bcc	.L587
3188:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 5996              		.loc 1 3188 0
 5997 01ea C8F10007 		rsb	r7, r8, #0
 5998 01ee 1F40     		ands	r7, r7, r3
 5999 01f0 C4F80872 		str	r7, [r4, #520]
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 6000              		.loc 1 3189 0
 6001 01f4 EF1B     		subs	r7, r5, r7
 6002              	.LVL868:
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 6003              		.loc 1 3190 0
 6004 01f6 D4F81452 		ldr	r5, [r4, #532]
 6005              	.LVL869:
 6006 01fa 07E0     		b	.L588
 6007              	.LVL870:
 6008              	.L587:
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6009              		.loc 1 3192 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 198


 6010 01fc D4F81032 		ldr	r3, [r4, #528]
 6011              	.LVL871:
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(fp->fs, 0);
 6012              		.loc 1 3194 0
 6013 0200 002B     		cmp	r3, #0
 6014 0202 42D0     		beq	.L621
 6015              	.L589:
3201:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6016              		.loc 1 3201 0
 6017 0204 C4F81432 		str	r3, [r4, #532]
 6018 0208 2F46     		mov	r7, r5
 6019 020a 1D46     		mov	r5, r3
 6020              	.LVL872:
 6021              	.L588:
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 6022              		.loc 1 3203 0
 6023 020c 002D     		cmp	r5, #0
 6024 020e 74D1     		bne	.L592
 6025              	.LVL873:
 6026              	.L586:
3228:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6027              		.loc 1 3228 0
 6028 0210 D4F80832 		ldr	r3, [r4, #520]
 6029 0214 C3F30803 		ubfx	r3, r3, #0, #9
 6030 0218 3BB3     		cbz	r3, .L601
3228:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6031              		.loc 1 3228 0 is_stmt 0 discriminator 1
 6032 021a D4F81822 		ldr	r2, [r4, #536]
 6033 021e 9542     		cmp	r5, r2
 6034 0220 23D0     		beq	.L601
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 6035              		.loc 1 3231 0 is_stmt 1
 6036 0222 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6037 0226 13F0400F 		tst	r3, #64
 6038 022a 10D0     		beq	.L602
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6039              		.loc 1 3232 0
 6040 022c D4F80002 		ldr	r0, [r4, #512]
 6041 0230 0123     		movs	r3, #1
 6042 0232 2146     		mov	r1, r4
 6043 0234 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 6044 0238 FFF7FEFF 		bl	disk_write
 6045              	.LVL874:
 6046 023c 0028     		cmp	r0, #0
 6047 023e 40F09A80 		bne	.L622
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6048              		.loc 1 3234 0
 6049 0242 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6050 0246 23F04003 		bic	r3, r3, #64
 6051 024a 84F80632 		strb	r3, [r4, #518]
 6052              	.L602:
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 6053              		.loc 1 3237 0
 6054 024e D4F80002 		ldr	r0, [r4, #512]
 6055 0252 0123     		movs	r3, #1
 6056 0254 2A46     		mov	r2, r5
 6057 0256 2146     		mov	r1, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 199


 6058 0258 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 6059 025c FFF7FEFF 		bl	disk_read
 6060              	.LVL875:
 6061 0260 0028     		cmp	r0, #0
 6062 0262 40F09180 		bne	.L623
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6063              		.loc 1 3240 0
 6064 0266 C4F81852 		str	r5, [r4, #536]
 6065              	.L601:
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;
 6066              		.loc 1 3243 0
 6067 026a D4F80832 		ldr	r3, [r4, #520]
 6068 026e D4F80C22 		ldr	r2, [r4, #524]
 6069 0272 9342     		cmp	r3, r2
 6070 0274 7FF6E0AE 		bls	.L579
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
 6071              		.loc 1 3244 0
 6072 0278 C4F80C32 		str	r3, [r4, #524]
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6073              		.loc 1 3245 0
 6074 027c 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6075 0280 43F02003 		orr	r3, r3, #32
 6076 0284 84F80632 		strb	r3, [r4, #518]
 6077 0288 D6E6     		b	.L579
 6078              	.LVL876:
 6079              	.L621:
3195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 6080              		.loc 1 3195 0
 6081 028a 0021     		movs	r1, #0
 6082 028c FFF7FEFF 		bl	create_chain
 6083              	.LVL877:
 6084 0290 0346     		mov	r3, r0
 6085              	.LVL878:
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6086              		.loc 1 3196 0
 6087 0292 0128     		cmp	r0, #1
 6088 0294 05D0     		beq	.L624
3197:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust = clst;
 6089              		.loc 1 3197 0
 6090 0296 B0F1FF3F 		cmp	r0, #-1
 6091 029a 0BD0     		beq	.L625
3198:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6092              		.loc 1 3198 0
 6093 029c C4F81002 		str	r0, [r4, #528]
 6094 02a0 B0E7     		b	.L589
 6095              	.L624:
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6096              		.loc 1 3196 0 discriminator 1
 6097 02a2 0226     		movs	r6, #2
 6098 02a4 84F80762 		strb	r6, [r4, #519]
 6099 02a8 3146     		mov	r1, r6
 6100 02aa D4F80002 		ldr	r0, [r4, #512]
 6101              	.LVL879:
 6102 02ae FFF7FEFF 		bl	unlock_fs
 6103              	.LVL880:
 6104 02b2 C6E6     		b	.L569
 6105              	.LVL881:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 200


 6106              	.L625:
3197:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust = clst;
 6107              		.loc 1 3197 0 discriminator 1
 6108 02b4 0126     		movs	r6, #1
 6109 02b6 84F80762 		strb	r6, [r4, #519]
 6110 02ba 3146     		mov	r1, r6
 6111 02bc D4F80002 		ldr	r0, [r4, #512]
 6112              	.LVL882:
 6113 02c0 FFF7FEFF 		bl	unlock_fs
 6114              	.LVL883:
 6115 02c4 BDE6     		b	.L569
 6116              	.LVL884:
 6117              	.L593:
3213:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6118              		.loc 1 3213 0
 6119 02c6 2946     		mov	r1, r5
 6120 02c8 D4F80002 		ldr	r0, [r4, #512]
 6121 02cc FFF7FEFF 		bl	get_fat
 6122              	.LVL885:
 6123 02d0 0546     		mov	r5, r0
 6124              	.LVL886:
 6125              	.L595:
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 6126              		.loc 1 3214 0
 6127 02d2 B5F1FF3F 		cmp	r5, #-1
 6128 02d6 32D0     		beq	.L626
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 6129              		.loc 1 3215 0
 6130 02d8 012D     		cmp	r5, #1
 6131 02da 39D9     		bls	.L597
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 6132              		.loc 1 3215 0 is_stmt 0 discriminator 2
 6133 02dc D4F80032 		ldr	r3, [r4, #512]
 6134 02e0 D3F81832 		ldr	r3, [r3, #536]
 6135 02e4 9D42     		cmp	r5, r3
 6136 02e6 33D2     		bcs	.L597
3216:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fptr += bcs;
 6137              		.loc 1 3216 0 is_stmt 1
 6138 02e8 C4F81452 		str	r5, [r4, #532]
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
 6139              		.loc 1 3217 0
 6140 02ec D4F80832 		ldr	r3, [r4, #520]
 6141 02f0 4344     		add	r3, r3, r8
 6142 02f2 C4F80832 		str	r3, [r4, #520]
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6143              		.loc 1 3218 0
 6144 02f6 A7EB0807 		sub	r7, r7, r8
 6145              	.LVL887:
 6146              	.L592:
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6147              		.loc 1 3204 0
 6148 02fa 4745     		cmp	r7, r8
 6149 02fc 0DD9     		bls	.L594
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 6150              		.loc 1 3206 0
 6151 02fe 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6152 0302 13F0020F 		tst	r3, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 201


 6153 0306 DED0     		beq	.L593
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 6154              		.loc 1 3207 0
 6155 0308 2946     		mov	r1, r5
 6156 030a D4F80002 		ldr	r0, [r4, #512]
 6157 030e FFF7FEFF 		bl	create_chain
 6158              	.LVL888:
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = bcs; break;
 6159              		.loc 1 3208 0
 6160 0312 0546     		mov	r5, r0
 6161 0314 0028     		cmp	r0, #0
 6162 0316 DCD1     		bne	.L595
3209:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 6163              		.loc 1 3209 0
 6164 0318 4746     		mov	r7, r8
 6165              	.LVL889:
 6166              	.L594:
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fp->fs)) {
 6167              		.loc 1 3220 0
 6168 031a D4F80832 		ldr	r3, [r4, #520]
 6169 031e 3B44     		add	r3, r3, r7
 6170 0320 C4F80832 		str	r3, [r4, #520]
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 6171              		.loc 1 3221 0
 6172 0324 C7F30803 		ubfx	r3, r7, #0, #9
 6173 0328 1BB3     		cbz	r3, .L610
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 6174              		.loc 1 3222 0
 6175 032a D4F80082 		ldr	r8, [r4, #512]
 6176              	.LVL890:
 6177 032e 2946     		mov	r1, r5
 6178 0330 4046     		mov	r0, r8
 6179 0332 FFF7FEFF 		bl	clust2sect
 6180              	.LVL891:
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += ofs / SS(fp->fs);
 6181              		.loc 1 3223 0
 6182 0336 A0B1     		cbz	r0, .L627
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6183              		.loc 1 3224 0
 6184 0338 00EB5725 		add	r5, r0, r7, lsr #9
 6185              	.LVL892:
 6186 033c 68E7     		b	.L586
 6187              	.LVL893:
 6188              	.L626:
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 6189              		.loc 1 3214 0 discriminator 1
 6190 033e 0126     		movs	r6, #1
 6191 0340 84F80762 		strb	r6, [r4, #519]
 6192 0344 3146     		mov	r1, r6
 6193 0346 D4F80002 		ldr	r0, [r4, #512]
 6194              	.LVL894:
 6195 034a FFF7FEFF 		bl	unlock_fs
 6196              	.LVL895:
 6197 034e 78E6     		b	.L569
 6198              	.LVL896:
 6199              	.L597:
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 202


 6200              		.loc 1 3215 0 discriminator 3
 6201 0350 0226     		movs	r6, #2
 6202 0352 84F80762 		strb	r6, [r4, #519]
 6203 0356 3146     		mov	r1, r6
 6204 0358 D4F80002 		ldr	r0, [r4, #512]
 6205              	.LVL897:
 6206 035c FFF7FEFF 		bl	unlock_fs
 6207              	.LVL898:
 6208 0360 6FE6     		b	.L569
 6209              	.LVL899:
 6210              	.L627:
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += ofs / SS(fp->fs);
 6211              		.loc 1 3223 0 discriminator 1
 6212 0362 0226     		movs	r6, #2
 6213 0364 84F80762 		strb	r6, [r4, #519]
 6214 0368 3146     		mov	r1, r6
 6215 036a 4046     		mov	r0, r8
 6216              	.LVL900:
 6217 036c FFF7FEFF 		bl	unlock_fs
 6218              	.LVL901:
 6219 0370 67E6     		b	.L569
 6220              	.LVL902:
 6221              	.L610:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 6222              		.loc 1 3183 0
 6223 0372 0025     		movs	r5, #0
 6224              	.LVL903:
 6225 0374 4CE7     		b	.L586
 6226              	.LVL904:
 6227              	.L622:
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 6228              		.loc 1 3233 0
 6229 0376 0126     		movs	r6, #1
 6230 0378 84F80762 		strb	r6, [r4, #519]
 6231 037c 3146     		mov	r1, r6
 6232 037e D4F80002 		ldr	r0, [r4, #512]
 6233 0382 FFF7FEFF 		bl	unlock_fs
 6234              	.LVL905:
 6235 0386 5CE6     		b	.L569
 6236              	.L623:
3238:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6237              		.loc 1 3238 0
 6238 0388 0126     		movs	r6, #1
 6239 038a 84F80762 		strb	r6, [r4, #519]
 6240 038e 3146     		mov	r1, r6
 6241 0390 D4F80002 		ldr	r0, [r4, #512]
 6242 0394 FFF7FEFF 		bl	unlock_fs
 6243              	.LVL906:
 6244 0398 53E6     		b	.L569
 6245              	.LVL907:
 6246              	.L607:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6247              		.loc 1 3144 0
 6248 039a 1126     		movs	r6, #17
 6249 039c 4CE6     		b	.L579
 6250              		.cfi_endproc
 6251              	.LFE171:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 203


 6253              		.section	.text.f_opendir,"ax",%progbits
 6254              		.align	1
 6255              		.global	f_opendir
 6256              		.syntax unified
 6257              		.thumb
 6258              		.thumb_func
 6259              		.fpu fpv4-sp-d16
 6261              	f_opendir:
 6262              	.LFB172:
3264:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6263              		.loc 1 3264 0
 6264              		.cfi_startproc
 6265              		@ args = 0, pretend = 0, frame = 24
 6266              		@ frame_needed = 0, uses_anonymous_args = 0
 6267              	.LVL908:
 6268 0000 30B5     		push	{r4, r5, lr}
 6269              	.LCFI73:
 6270              		.cfi_def_cfa_offset 12
 6271              		.cfi_offset 4, -12
 6272              		.cfi_offset 5, -8
 6273              		.cfi_offset 14, -4
 6274 0002 87B0     		sub	sp, sp, #28
 6275              	.LCFI74:
 6276              		.cfi_def_cfa_offset 40
 6277 0004 0191     		str	r1, [sp, #4]
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6278              		.loc 1 3270 0
 6279 0006 0028     		cmp	r0, #0
 6280 0008 4ED0     		beq	.L635
 6281 000a 0546     		mov	r5, r0
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6282              		.loc 1 3273 0
 6283 000c 0022     		movs	r2, #0
 6284 000e 01A9     		add	r1, sp, #4
 6285              	.LVL909:
 6286 0010 05A8     		add	r0, sp, #20
 6287              	.LVL910:
 6288 0012 FFF7FEFF 		bl	find_volume
 6289              	.LVL911:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fs = fs;
 6290              		.loc 1 3274 0
 6291 0016 0446     		mov	r4, r0
 6292 0018 50B1     		cbz	r0, .L640
 6293              	.LVL912:
 6294              	.L630:
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6295              		.loc 1 3304 0
 6296 001a 14B1     		cbz	r4, .L634
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6297              		.loc 1 3304 0 is_stmt 0 discriminator 1
 6298 001c 0023     		movs	r3, #0
 6299 001e C5F80032 		str	r3, [r5, #512]
 6300              	.L634:
3306:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6301              		.loc 1 3306 0 is_stmt 1
 6302 0022 2146     		mov	r1, r4
 6303 0024 0598     		ldr	r0, [sp, #20]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 204


 6304 0026 FFF7FEFF 		bl	unlock_fs
 6305              	.LVL913:
 6306              	.L629:
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6307              		.loc 1 3307 0
 6308 002a 2046     		mov	r0, r4
 6309 002c 07B0     		add	sp, sp, #28
 6310              	.LCFI75:
 6311              		.cfi_remember_state
 6312              		.cfi_def_cfa_offset 12
 6313              		@ sp needed
 6314 002e 30BD     		pop	{r4, r5, pc}
 6315              	.LVL914:
 6316              	.L640:
 6317              	.LCFI76:
 6318              		.cfi_restore_state
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(*dp);
 6319              		.loc 1 3275 0
 6320 0030 059B     		ldr	r3, [sp, #20]
 6321 0032 C5F80032 		str	r3, [r5, #512]
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 6322              		.loc 1 3276 0
 6323 0036 02AB     		add	r3, sp, #8
 6324 0038 C5F81832 		str	r3, [r5, #536]
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 6325              		.loc 1 3277 0
 6326 003c 0199     		ldr	r1, [sp, #4]
 6327 003e 2846     		mov	r0, r5
 6328              	.LVL915:
 6329 0040 FFF7FEFF 		bl	follow_path
 6330              	.LVL916:
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
 6331              		.loc 1 3279 0
 6332 0044 0446     		mov	r4, r0
 6333 0046 70B9     		cbnz	r0, .L631
3280:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 6334              		.loc 1 3280 0
 6335 0048 D5F81412 		ldr	r1, [r5, #532]
 6336 004c 51B1     		cbz	r1, .L632
3281:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 6337              		.loc 1 3281 0
 6338 004e CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 6339 0050 13F0100F 		tst	r3, #16
 6340 0054 05D0     		beq	.L636
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 				else							/* The object is a file */
 6341              		.loc 1 3282 0
 6342 0056 0598     		ldr	r0, [sp, #20]
 6343              	.LVL917:
 6344 0058 FFF7FEFF 		bl	ld_clust
 6345              	.LVL918:
 6346 005c C5F80802 		str	r0, [r5, #520]
 6347 0060 00E0     		b	.L632
 6348              	.LVL919:
 6349              	.L636:
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6350              		.loc 1 3284 0
 6351 0062 0524     		movs	r4, #5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 205


 6352              	.LVL920:
 6353              	.L632:
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->id = fs->id;
 6354              		.loc 1 3286 0
 6355 0064 1CB1     		cbz	r4, .L641
 6356              	.LVL921:
 6357              	.L631:
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6358              		.loc 1 3302 0
 6359 0066 042C     		cmp	r4, #4
 6360 0068 D7D1     		bne	.L630
 6361 006a 0524     		movs	r4, #5
 6362              	.LVL922:
 6363 006c D5E7     		b	.L630
 6364              	.LVL923:
 6365              	.L641:
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 6366              		.loc 1 3287 0
 6367 006e 059B     		ldr	r3, [sp, #20]
 6368 0070 B3F80632 		ldrh	r3, [r3, #518]
 6369 0074 A5F80432 		strh	r3, [r5, #516]	@ movhi
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 6370              		.loc 1 3288 0
 6371 0078 0021     		movs	r1, #0
 6372 007a 2846     		mov	r0, r5
 6373 007c FFF7FEFF 		bl	dir_sdi
 6374              	.LVL924:
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dp->sclust) {
 6375              		.loc 1 3290 0
 6376 0080 0446     		mov	r4, r0
 6377 0082 0028     		cmp	r0, #0
 6378 0084 EFD1     		bne	.L631
3291:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 6379              		.loc 1 3291 0
 6380 0086 D5F80832 		ldr	r3, [r5, #520]
 6381 008a 1BB9     		cbnz	r3, .L642
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6382              		.loc 1 3296 0
 6383 008c 0023     		movs	r3, #0
 6384 008e C5F81C32 		str	r3, [r5, #540]
 6385 0092 E8E7     		b	.L631
 6386              	.L642:
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!dp->lockid)
 6387              		.loc 1 3292 0
 6388 0094 0021     		movs	r1, #0
 6389 0096 2846     		mov	r0, r5
 6390              	.LVL925:
 6391 0098 FFF7FEFF 		bl	inc_lock
 6392              	.LVL926:
 6393 009c C5F81C02 		str	r0, [r5, #540]
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
 6394              		.loc 1 3293 0
 6395 00a0 0028     		cmp	r0, #0
 6396 00a2 E0D1     		bne	.L631
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 6397              		.loc 1 3294 0
 6398 00a4 1224     		movs	r4, #18
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 206


 6399 00a6 DEE7     		b	.L631
 6400              	.LVL927:
 6401              	.L635:
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6402              		.loc 1 3270 0
 6403 00a8 0924     		movs	r4, #9
 6404 00aa BEE7     		b	.L629
 6405              		.cfi_endproc
 6406              	.LFE172:
 6408              		.section	.text.f_closedir,"ax",%progbits
 6409              		.align	1
 6410              		.global	f_closedir
 6411              		.syntax unified
 6412              		.thumb
 6413              		.thumb_func
 6414              		.fpu fpv4-sp-d16
 6416              	f_closedir:
 6417              	.LFB173:
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6418              		.loc 1 3319 0
 6419              		.cfi_startproc
 6420              		@ args = 0, pretend = 0, frame = 0
 6421              		@ frame_needed = 0, uses_anonymous_args = 0
 6422              	.LVL928:
 6423 0000 70B5     		push	{r4, r5, r6, lr}
 6424              	.LCFI77:
 6425              		.cfi_def_cfa_offset 16
 6426              		.cfi_offset 4, -16
 6427              		.cfi_offset 5, -12
 6428              		.cfi_offset 6, -8
 6429              		.cfi_offset 14, -4
 6430 0002 0546     		mov	r5, r0
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6431              		.loc 1 3323 0
 6432 0004 FFF7FEFF 		bl	validate
 6433              	.LVL929:
3324:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 6434              		.loc 1 3324 0
 6435 0008 0446     		mov	r4, r0
 6436 000a 60B9     		cbnz	r0, .L644
 6437              	.LBB3:
3326:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6438              		.loc 1 3326 0
 6439 000c D5F80062 		ldr	r6, [r5, #512]
 6440              	.LVL930:
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->lockid);
 6441              		.loc 1 3329 0
 6442 0010 D5F81C02 		ldr	r0, [r5, #540]
 6443              	.LVL931:
 6444 0014 48B9     		cbnz	r0, .L648
 6445              	.L645:
 6446              	.LVL932:
3331:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6447              		.loc 1 3331 0
 6448 0016 14B9     		cbnz	r4, .L646
3333:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 6449              		.loc 1 3333 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 207


 6450 0018 0023     		movs	r3, #0
 6451 001a C5F80032 		str	r3, [r5, #512]
 6452              	.L646:
3335:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6453              		.loc 1 3335 0
 6454 001e 0021     		movs	r1, #0
 6455 0020 3046     		mov	r0, r6
 6456 0022 FFF7FEFF 		bl	unlock_fs
 6457              	.LVL933:
 6458              	.L644:
 6459              	.LBE3:
3339:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6460              		.loc 1 3339 0
 6461 0026 2046     		mov	r0, r4
 6462 0028 70BD     		pop	{r4, r5, r6, pc}
 6463              	.LVL934:
 6464              	.L648:
 6465              	.LBB4:
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
 6466              		.loc 1 3330 0
 6467 002a FFF7FEFF 		bl	dec_lock
 6468              	.LVL935:
 6469 002e 0446     		mov	r4, r0
 6470              	.LVL936:
 6471 0030 F1E7     		b	.L645
 6472              	.LBE4:
 6473              		.cfi_endproc
 6474              	.LFE173:
 6476              		.section	.text.f_readdir,"ax",%progbits
 6477              		.align	1
 6478              		.global	f_readdir
 6479              		.syntax unified
 6480              		.thumb
 6481              		.thumb_func
 6482              		.fpu fpv4-sp-d16
 6484              	f_readdir:
 6485              	.LFB174:
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6486              		.loc 1 3352 0
 6487              		.cfi_startproc
 6488              		@ args = 0, pretend = 0, frame = 16
 6489              		@ frame_needed = 0, uses_anonymous_args = 0
 6490              	.LVL937:
 6491 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6492              	.LCFI78:
 6493              		.cfi_def_cfa_offset 20
 6494              		.cfi_offset 4, -20
 6495              		.cfi_offset 5, -16
 6496              		.cfi_offset 6, -12
 6497              		.cfi_offset 7, -8
 6498              		.cfi_offset 14, -4
 6499 0002 85B0     		sub	sp, sp, #20
 6500              	.LCFI79:
 6501              		.cfi_def_cfa_offset 40
 6502 0004 0546     		mov	r5, r0
 6503 0006 0F46     		mov	r7, r1
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 208


 6504              		.loc 1 3357 0
 6505 0008 FFF7FEFF 		bl	validate
 6506              	.LVL938:
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 6507              		.loc 1 3358 0
 6508 000c 0446     		mov	r4, r0
 6509 000e 60B9     		cbnz	r0, .L650
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 6510              		.loc 1 3359 0
 6511 0010 9FB1     		cbz	r7, .L655
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 6512              		.loc 1 3362 0
 6513 0012 01AB     		add	r3, sp, #4
 6514 0014 C5F81832 		str	r3, [r5, #536]
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 6515              		.loc 1 3363 0
 6516 0018 0021     		movs	r1, #0
 6517 001a 2846     		mov	r0, r5
 6518              	.LVL939:
 6519 001c FFF7FEFF 		bl	dir_read
 6520              	.LVL940:
 6521 0020 0646     		mov	r6, r0
 6522              	.LVL941:
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0;
 6523              		.loc 1 3364 0
 6524 0022 0428     		cmp	r0, #4
 6525 0024 0FD0     		beq	.L656
 6526              	.LVL942:
 6527              	.L652:
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 6528              		.loc 1 3368 0
 6529 0026 9EB1     		cbz	r6, .L657
 6530 0028 3446     		mov	r4, r6
 6531              	.LVL943:
 6532              	.L650:
3380:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6533              		.loc 1 3380 0
 6534 002a 2146     		mov	r1, r4
 6535 002c D5F80002 		ldr	r0, [r5, #512]
 6536 0030 FFF7FEFF 		bl	unlock_fs
 6537              	.LVL944:
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6538              		.loc 1 3381 0
 6539 0034 2046     		mov	r0, r4
 6540 0036 05B0     		add	sp, sp, #20
 6541              	.LCFI80:
 6542              		.cfi_remember_state
 6543              		.cfi_def_cfa_offset 20
 6544              		@ sp needed
 6545 0038 F0BD     		pop	{r4, r5, r6, r7, pc}
 6546              	.LVL945:
 6547              	.L655:
 6548              	.LCFI81:
 6549              		.cfi_restore_state
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 6550              		.loc 1 3360 0
 6551 003a 0021     		movs	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 209


 6552 003c 2846     		mov	r0, r5
 6553              	.LVL946:
 6554 003e FFF7FEFF 		bl	dir_sdi
 6555              	.LVL947:
 6556 0042 0446     		mov	r4, r0
 6557              	.LVL948:
 6558 0044 F1E7     		b	.L650
 6559              	.LVL949:
 6560              	.L656:
3365:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 6561              		.loc 1 3365 0
 6562 0046 0023     		movs	r3, #0
 6563 0048 C5F81032 		str	r3, [r5, #528]
 6564              	.LVL950:
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6565              		.loc 1 3366 0
 6566 004c 2646     		mov	r6, r4
 6567 004e EAE7     		b	.L652
 6568              	.LVL951:
 6569              	.L657:
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 6570              		.loc 1 3369 0
 6571 0050 3946     		mov	r1, r7
 6572 0052 2846     		mov	r0, r5
 6573 0054 FFF7FEFF 		bl	get_fileinfo
 6574              	.LVL952:
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {
 6575              		.loc 1 3370 0
 6576 0058 0021     		movs	r1, #0
 6577 005a 2846     		mov	r0, r5
 6578 005c FFF7FEFF 		bl	dir_next
 6579              	.LVL953:
 6580 0060 0446     		mov	r4, r0
 6581              	.LVL954:
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0;
 6582              		.loc 1 3371 0
 6583 0062 0428     		cmp	r0, #4
 6584 0064 E1D1     		bne	.L650
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_OK;
 6585              		.loc 1 3372 0
 6586 0066 0023     		movs	r3, #0
 6587 0068 C5F81032 		str	r3, [r5, #528]
 6588              	.LVL955:
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6589              		.loc 1 3373 0
 6590 006c 3446     		mov	r4, r6
 6591 006e DCE7     		b	.L650
 6592              		.cfi_endproc
 6593              	.LFE174:
 6595              		.section	.text.f_stat,"ax",%progbits
 6596              		.align	1
 6597              		.global	f_stat
 6598              		.syntax unified
 6599              		.thumb
 6600              		.thumb_func
 6601              		.fpu fpv4-sp-d16
 6603              	f_stat:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 210


 6604              	.LFB175:
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6605              		.loc 1 3446 0
 6606              		.cfi_startproc
 6607              		@ args = 0, pretend = 0, frame = 568
 6608              		@ frame_needed = 0, uses_anonymous_args = 0
 6609              	.LVL956:
 6610 0000 30B5     		push	{r4, r5, lr}
 6611              	.LCFI82:
 6612              		.cfi_def_cfa_offset 12
 6613              		.cfi_offset 4, -12
 6614              		.cfi_offset 5, -8
 6615              		.cfi_offset 14, -4
 6616 0002 ADF50F7D 		sub	sp, sp, #572
 6617              	.LCFI83:
 6618              		.cfi_def_cfa_offset 584
 6619 0006 0190     		str	r0, [sp, #4]
 6620 0008 0D46     		mov	r5, r1
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6621              		.loc 1 3453 0
 6622 000a 0022     		movs	r2, #0
 6623 000c 01A9     		add	r1, sp, #4
 6624              	.LVL957:
 6625 000e 86A8     		add	r0, sp, #536
 6626              	.LVL958:
 6627 0010 FFF7FEFF 		bl	find_volume
 6628              	.LVL959:
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 6629              		.loc 1 3454 0
 6630 0014 0446     		mov	r4, r0
 6631 0016 38B1     		cbz	r0, .L662
 6632              	.LVL960:
 6633              	.L659:
3467:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6634              		.loc 1 3467 0
 6635 0018 2146     		mov	r1, r4
 6636 001a 8698     		ldr	r0, [sp, #536]
 6637 001c FFF7FEFF 		bl	unlock_fs
 6638              	.LVL961:
3468:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6639              		.loc 1 3468 0
 6640 0020 2046     		mov	r0, r4
 6641 0022 0DF50F7D 		add	sp, sp, #572
 6642              	.LCFI84:
 6643              		.cfi_remember_state
 6644              		.cfi_def_cfa_offset 12
 6645              		@ sp needed
 6646 0026 30BD     		pop	{r4, r5, pc}
 6647              	.LVL962:
 6648              	.L662:
 6649              	.LCFI85:
 6650              		.cfi_restore_state
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 6651              		.loc 1 3455 0
 6652 0028 03AB     		add	r3, sp, #12
 6653 002a 8C93     		str	r3, [sp, #560]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 211


 6654              		.loc 1 3456 0
 6655 002c 0199     		ldr	r1, [sp, #4]
 6656 002e 06A8     		add	r0, sp, #24
 6657              	.LVL963:
 6658 0030 FFF7FEFF 		bl	follow_path
 6659              	.LVL964:
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.dir) {		/* Found an object */
 6660              		.loc 1 3457 0
 6661 0034 0446     		mov	r4, r0
 6662 0036 0028     		cmp	r0, #0
 6663 0038 EED1     		bne	.L659
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 6664              		.loc 1 3458 0
 6665 003a 8B9B     		ldr	r3, [sp, #556]
 6666 003c 33B1     		cbz	r3, .L660
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
 6667              		.loc 1 3459 0
 6668 003e 002D     		cmp	r5, #0
 6669 0040 EAD0     		beq	.L659
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
 6670              		.loc 1 3459 0 is_stmt 0 discriminator 1
 6671 0042 2946     		mov	r1, r5
 6672 0044 06A8     		add	r0, sp, #24
 6673              	.LVL965:
 6674 0046 FFF7FEFF 		bl	get_fileinfo
 6675              	.LVL966:
 6676 004a E5E7     		b	.L659
 6677              	.LVL967:
 6678              	.L660:
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6679              		.loc 1 3461 0 is_stmt 1
 6680 004c 0624     		movs	r4, #6
 6681 004e E3E7     		b	.L659
 6682              		.cfi_endproc
 6683              	.LFE175:
 6685              		.section	.text.f_getfree,"ax",%progbits
 6686              		.align	1
 6687              		.global	f_getfree
 6688              		.syntax unified
 6689              		.thumb
 6690              		.thumb_func
 6691              		.fpu fpv4-sp-d16
 6693              	f_getfree:
 6694              	.LFB176:
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6695              		.loc 1 3482 0
 6696              		.cfi_startproc
 6697              		@ args = 0, pretend = 0, frame = 8
 6698              		@ frame_needed = 0, uses_anonymous_args = 0
 6699              	.LVL968:
 6700 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6701              	.LCFI86:
 6702              		.cfi_def_cfa_offset 32
 6703              		.cfi_offset 4, -32
 6704              		.cfi_offset 5, -28
 6705              		.cfi_offset 6, -24
 6706              		.cfi_offset 7, -20
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 212


 6707              		.cfi_offset 8, -16
 6708              		.cfi_offset 9, -12
 6709              		.cfi_offset 10, -8
 6710              		.cfi_offset 14, -4
 6711 0004 82B0     		sub	sp, sp, #8
 6712              	.LCFI87:
 6713              		.cfi_def_cfa_offset 40
 6714 0006 02AB     		add	r3, sp, #8
 6715 0008 43F8040D 		str	r0, [r3, #-4]!
 6716 000c 8946     		mov	r9, r1
 6717 000e 1446     		mov	r4, r2
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = *fatfs;
 6718              		.loc 1 3491 0
 6719 0010 0022     		movs	r2, #0
 6720              	.LVL969:
 6721 0012 1946     		mov	r1, r3
 6722              	.LVL970:
 6723 0014 2046     		mov	r0, r4
 6724              	.LVL971:
 6725 0016 FFF7FEFF 		bl	find_volume
 6726              	.LVL972:
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6727              		.loc 1 3492 0
 6728 001a 2568     		ldr	r5, [r4]
 6729              	.LVL973:
3493:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
 6730              		.loc 1 3493 0
 6731 001c 8046     		mov	r8, r0
 6732 001e 0028     		cmp	r0, #0
 6733 0020 66D1     		bne	.L664
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clust;
 6734              		.loc 1 3495 0
 6735 0022 D5F81432 		ldr	r3, [r5, #532]
 6736 0026 D5F81842 		ldr	r4, [r5, #536]
 6737              	.LVL974:
 6738 002a A21E     		subs	r2, r4, #2
 6739 002c 9342     		cmp	r3, r2
 6740 002e 09D9     		bls	.L679
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = 0;
 6741              		.loc 1 3499 0
 6742 0030 95F80072 		ldrb	r7, [r5, #512]	@ zero_extendqisi2
 6743              	.LVL975:
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2;
 6744              		.loc 1 3501 0
 6745 0034 012F     		cmp	r7, #1
 6746 0036 08D0     		beq	.L680
 6747              	.LVL976:
3511:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; p = 0;
 6748              		.loc 1 3511 0
 6749 0038 D5F82412 		ldr	r1, [r5, #548]
 6750              	.LVL977:
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 6751              		.loc 1 3512 0
 6752 003c 0022     		movs	r2, #0
 6753 003e 1046     		mov	r0, r2
 6754              	.LVL978:
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fat == FS_FAT12) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 213


 6755              		.loc 1 3500 0
 6756 0040 1646     		mov	r6, r2
 6757 0042 32E0     		b	.L675
 6758              	.LVL979:
 6759              	.L679:
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 6760              		.loc 1 3496 0
 6761 0044 C9F80030 		str	r3, [r9]
 6762 0048 52E0     		b	.L664
 6763              	.LVL980:
 6764              	.L680:
 6765 004a 0224     		movs	r4, #2
 6766 004c 0026     		movs	r6, #0
 6767 004e 04E0     		b	.L669
 6768              	.LVL981:
 6769              	.L668:
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 6770              		.loc 1 3508 0
 6771 0050 0134     		adds	r4, r4, #1
 6772              	.LVL982:
 6773 0052 D5F81832 		ldr	r3, [r5, #536]
 6774 0056 9C42     		cmp	r4, r3
 6775 0058 40D2     		bcs	.L667
 6776              	.LVL983:
 6777              	.L669:
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 6778              		.loc 1 3504 0
 6779 005a 2146     		mov	r1, r4
 6780 005c 2846     		mov	r0, r5
 6781 005e FFF7FEFF 		bl	get_fat
 6782              	.LVL984:
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 6783              		.loc 1 3505 0
 6784 0062 B0F1FF3F 		cmp	r0, #-1
 6785 0066 37D0     		beq	.L676
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
 6786              		.loc 1 3506 0
 6787 0068 0128     		cmp	r0, #1
 6788 006a 49D0     		beq	.L677
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 6789              		.loc 1 3507 0
 6790 006c 0028     		cmp	r0, #0
 6791 006e EFD1     		bne	.L668
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 6792              		.loc 1 3507 0 is_stmt 0 discriminator 1
 6793 0070 0136     		adds	r6, r6, #1
 6794              	.LVL985:
 6795 0072 EDE7     		b	.L668
 6796              	.LVL986:
 6797              	.L681:
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
 6798              		.loc 1 3515 0 is_stmt 1
 6799 0074 01F1010A 		add	r10, r1, #1
 6800              	.LVL987:
 6801 0078 2846     		mov	r0, r5
 6802              	.LVL988:
 6803 007a FFF7FEFF 		bl	move_window
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 214


 6804              	.LVL989:
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 						p = fs->win.d8;
 6805              		.loc 1 3516 0
 6806 007e 8046     		mov	r8, r0
 6807 0080 60BB     		cbnz	r0, .L667
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = SS(fs);
 6808              		.loc 1 3517 0
 6809 0082 2A46     		mov	r2, r5
 6810              	.LVL990:
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
 6811              		.loc 1 3515 0
 6812 0084 5146     		mov	r1, r10
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6813              		.loc 1 3518 0
 6814 0086 4FF40070 		mov	r0, #512
 6815              	.LVL991:
 6816 008a 10E0     		b	.L670
 6817              	.LVL992:
 6818              	.L682:
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 2; i -= 2;
 6819              		.loc 1 3521 0
 6820 008c 92F801E0 		ldrb	lr, [r2, #1]	@ zero_extendqisi2
 6821 0090 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 6822 0092 43EA0E23 		orr	r3, r3, lr, lsl #8
 6823 0096 1BB2     		sxth	r3, r3
 6824 0098 03B9     		cbnz	r3, .L672
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 2; i -= 2;
 6825              		.loc 1 3521 0 is_stmt 0 discriminator 1
 6826 009a 0136     		adds	r6, r6, #1
 6827              	.LVL993:
 6828              	.L672:
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 6829              		.loc 1 3522 0 is_stmt 1
 6830 009c 0232     		adds	r2, r2, #2
 6831              	.LVL994:
 6832 009e 0238     		subs	r0, r0, #2
 6833              	.LVL995:
 6834 00a0 01E0     		b	.L673
 6835              	.L674:
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6836              		.loc 1 3525 0
 6837 00a2 0432     		adds	r2, r2, #4
 6838              	.LVL996:
 6839 00a4 0438     		subs	r0, r0, #4
 6840              	.LVL997:
 6841              	.L673:
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6842              		.loc 1 3527 0
 6843 00a6 013C     		subs	r4, r4, #1
 6844              	.LVL998:
 6845 00a8 18D0     		beq	.L667
 6846              	.LVL999:
 6847              	.L675:
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(fs, sect++);
 6848              		.loc 1 3514 0
 6849 00aa 0028     		cmp	r0, #0
 6850 00ac E2D0     		beq	.L681
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 215


 6851              	.LVL1000:
 6852              	.L670:
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 6853              		.loc 1 3520 0
 6854 00ae 022F     		cmp	r7, #2
 6855 00b0 ECD0     		beq	.L682
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 4; i -= 4;
 6856              		.loc 1 3524 0
 6857 00b2 92F803E0 		ldrb	lr, [r2, #3]	@ zero_extendqisi2
 6858 00b6 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 6859 00b8 1B04     		lsls	r3, r3, #16
 6860 00ba 43EA0E63 		orr	r3, r3, lr, lsl #24
 6861 00be 92F801E0 		ldrb	lr, [r2, #1]	@ zero_extendqisi2
 6862 00c2 43EA0E23 		orr	r3, r3, lr, lsl #8
 6863 00c6 92F800E0 		ldrb	lr, [r2]	@ zero_extendqisi2
 6864 00ca 43EA0E03 		orr	r3, r3, lr
 6865 00ce 33F07043 		bics	r3, r3, #-268435456
 6866 00d2 E6D1     		bne	.L674
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 4; i -= 4;
 6867              		.loc 1 3524 0 is_stmt 0 discriminator 1
 6868 00d4 0136     		adds	r6, r6, #1
 6869              	.LVL1001:
 6870 00d6 E4E7     		b	.L674
 6871              	.LVL1002:
 6872              	.L676:
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 6873              		.loc 1 3505 0 is_stmt 1
 6874 00d8 4FF00108 		mov	r8, #1
 6875              	.LVL1003:
 6876              	.L667:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 6877              		.loc 1 3529 0
 6878 00dc C5F81462 		str	r6, [r5, #532]
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = n;
 6879              		.loc 1 3530 0
 6880 00e0 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
 6881 00e4 43F00103 		orr	r3, r3, #1
 6882 00e8 85F80532 		strb	r3, [r5, #517]
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6883              		.loc 1 3531 0
 6884 00ec C9F80060 		str	r6, [r9]
 6885              	.LVL1004:
 6886              	.L664:
3534:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6887              		.loc 1 3534 0
 6888 00f0 4146     		mov	r1, r8
 6889 00f2 2846     		mov	r0, r5
 6890 00f4 FFF7FEFF 		bl	unlock_fs
 6891              	.LVL1005:
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6892              		.loc 1 3535 0
 6893 00f8 4046     		mov	r0, r8
 6894 00fa 02B0     		add	sp, sp, #8
 6895              	.LCFI88:
 6896              		.cfi_remember_state
 6897              		.cfi_def_cfa_offset 32
 6898              		@ sp needed
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 216


 6899 00fc BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 6900              	.LVL1006:
 6901              	.L677:
 6902              	.LCFI89:
 6903              		.cfi_restore_state
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
 6904              		.loc 1 3506 0
 6905 0100 4FF00208 		mov	r8, #2
 6906 0104 EAE7     		b	.L667
 6907              		.cfi_endproc
 6908              	.LFE176:
 6910              		.section	.text.f_truncate,"ax",%progbits
 6911              		.align	1
 6912              		.global	f_truncate
 6913              		.syntax unified
 6914              		.thumb
 6915              		.thumb_func
 6916              		.fpu fpv4-sp-d16
 6918              	f_truncate:
 6919              	.LFB177:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6920              		.loc 1 3547 0
 6921              		.cfi_startproc
 6922              		@ args = 0, pretend = 0, frame = 0
 6923              		@ frame_needed = 0, uses_anonymous_args = 0
 6924              	.LVL1007:
 6925 0000 70B5     		push	{r4, r5, r6, lr}
 6926              	.LCFI90:
 6927              		.cfi_def_cfa_offset 16
 6928              		.cfi_offset 4, -16
 6929              		.cfi_offset 5, -12
 6930              		.cfi_offset 6, -8
 6931              		.cfi_offset 14, -4
 6932 0002 0446     		mov	r4, r0
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6933              		.loc 1 3552 0
 6934 0004 FFF7FEFF 		bl	validate
 6935              	.LVL1008:
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->err) {						/* Check error */
 6936              		.loc 1 3553 0
 6937 0008 0546     		mov	r5, r0
 6938 000a 50B9     		cbnz	r0, .L684
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = (FRESULT)fp->err;
 6939              		.loc 1 3554 0
 6940 000c 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 6941 0010 33B9     		cbnz	r3, .L691
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DENIED;
 6942              		.loc 1 3557 0
 6943 0012 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6944 0016 13F0020F 		tst	r3, #2
 6945 001a 02D1     		bne	.L684
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6946              		.loc 1 3558 0
 6947 001c 0725     		movs	r5, #7
 6948 001e 00E0     		b	.L684
 6949              	.L691:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 217


 6950              		.loc 1 3555 0
 6951 0020 1D46     		mov	r5, r3
 6952              	.L684:
 6953              	.LVL1009:
3561:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fsize > fp->fptr) {
 6954              		.loc 1 3561 0
 6955 0022 0DBB     		cbnz	r5, .L685
3562:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 6956              		.loc 1 3562 0
 6957 0024 D4F80C22 		ldr	r2, [r4, #524]
 6958 0028 D4F80832 		ldr	r3, [r4, #520]
 6959 002c 9A42     		cmp	r2, r3
 6960 002e 18D9     		bls	.L686
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
 6961              		.loc 1 3563 0
 6962 0030 C4F80C32 		str	r3, [r4, #524]
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 6963              		.loc 1 3564 0
 6964 0034 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 6965 0038 42F02002 		orr	r2, r2, #32
 6966 003c 84F80622 		strb	r2, [r4, #518]
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 6967              		.loc 1 3565 0
 6968 0040 CBB9     		cbnz	r3, .L687
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->sclust = 0;
 6969              		.loc 1 3566 0
 6970 0042 D4F81012 		ldr	r1, [r4, #528]
 6971 0046 D4F80002 		ldr	r0, [r4, #512]
 6972 004a FFF7FEFF 		bl	remove_chain
 6973              	.LVL1010:
 6974 004e 0546     		mov	r5, r0
 6975              	.LVL1011:
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
 6976              		.loc 1 3567 0
 6977 0050 0023     		movs	r3, #0
 6978 0052 C4F81032 		str	r3, [r4, #528]
 6979              	.LVL1012:
 6980              	.L688:
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 6981              		.loc 1 3579 0
 6982 0056 25B9     		cbnz	r5, .L686
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 6983              		.loc 1 3579 0 is_stmt 0 discriminator 1
 6984 0058 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6985 005c 13F0400F 		tst	r3, #64
 6986 0060 31D1     		bne	.L697
 6987              	.LVL1013:
 6988              	.L686:
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6989              		.loc 1 3587 0 is_stmt 1
 6990 0062 0DB1     		cbz	r5, .L685
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6991              		.loc 1 3587 0 is_stmt 0 discriminator 1
 6992 0064 84F80752 		strb	r5, [r4, #519]
 6993              	.L685:
3590:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6994              		.loc 1 3590 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 218


 6995 0068 2946     		mov	r1, r5
 6996 006a D4F80002 		ldr	r0, [r4, #512]
 6997 006e FFF7FEFF 		bl	unlock_fs
 6998              	.LVL1014:
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6999              		.loc 1 3591 0
 7000 0072 2846     		mov	r0, r5
 7001 0074 70BD     		pop	{r4, r5, r6, pc}
 7002              	.LVL1015:
 7003              	.L687:
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 7004              		.loc 1 3569 0
 7005 0076 D4F81412 		ldr	r1, [r4, #532]
 7006 007a D4F80002 		ldr	r0, [r4, #512]
 7007 007e FFF7FEFF 		bl	get_fat
 7008              	.LVL1016:
 7009 0082 0646     		mov	r6, r0
 7010              	.LVL1017:
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 7011              		.loc 1 3571 0
 7012 0084 B0F1FF3F 		cmp	r0, #-1
 7013 0088 19D0     		beq	.L698
 7014              	.L689:
 7015              	.LVL1018:
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 7016              		.loc 1 3572 0
 7017 008a 012E     		cmp	r6, #1
 7018 008c 19D0     		beq	.L699
 7019              	.LVL1019:
 7020              	.L690:
3573:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 7021              		.loc 1 3573 0
 7022 008e 002D     		cmp	r5, #0
 7023 0090 E1D1     		bne	.L688
3573:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 7024              		.loc 1 3573 0 is_stmt 0 discriminator 1
 7025 0092 D4F80002 		ldr	r0, [r4, #512]
 7026              	.LVL1020:
 7027 0096 D0F81832 		ldr	r3, [r0, #536]
 7028 009a 9E42     		cmp	r6, r3
 7029 009c DBD2     		bcs	.L688
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 7030              		.loc 1 3574 0 is_stmt 1
 7031 009e 6FF07042 		mvn	r2, #-268435456
 7032 00a2 D4F81412 		ldr	r1, [r4, #532]
 7033 00a6 FFF7FEFF 		bl	put_fat
 7034              	.LVL1021:
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7035              		.loc 1 3575 0
 7036 00aa 0546     		mov	r5, r0
 7037 00ac 0028     		cmp	r0, #0
 7038 00ae D2D1     		bne	.L688
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7039              		.loc 1 3575 0 is_stmt 0 discriminator 1
 7040 00b0 3146     		mov	r1, r6
 7041 00b2 D4F80002 		ldr	r0, [r4, #512]
 7042              	.LVL1022:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 219


 7043 00b6 FFF7FEFF 		bl	remove_chain
 7044              	.LVL1023:
 7045 00ba 0546     		mov	r5, r0
 7046              	.LVL1024:
 7047 00bc CBE7     		b	.L688
 7048              	.LVL1025:
 7049              	.L698:
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 7050              		.loc 1 3571 0 is_stmt 1
 7051 00be 0125     		movs	r5, #1
 7052 00c0 E3E7     		b	.L689
 7053              	.LVL1026:
 7054              	.L699:
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 7055              		.loc 1 3572 0
 7056 00c2 0225     		movs	r5, #2
 7057              	.LVL1027:
 7058 00c4 E3E7     		b	.L690
 7059              	.LVL1028:
 7060              	.L697:
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DISK_ERR;
 7061              		.loc 1 3580 0
 7062 00c6 D4F80002 		ldr	r0, [r4, #512]
 7063 00ca 0123     		movs	r3, #1
 7064 00cc D4F81822 		ldr	r2, [r4, #536]
 7065 00d0 2146     		mov	r1, r4
 7066 00d2 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 7067 00d6 FFF7FEFF 		bl	disk_write
 7068              	.LVL1029:
 7069 00da 30B9     		cbnz	r0, .L695
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7070              		.loc 1 3583 0
 7071 00dc 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 7072 00e0 23F04003 		bic	r3, r3, #64
 7073 00e4 84F80632 		strb	r3, [r4, #518]
 7074 00e8 BBE7     		b	.L686
 7075              	.L695:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
 7076              		.loc 1 3581 0
 7077 00ea 0125     		movs	r5, #1
 7078              	.LVL1030:
 7079 00ec B9E7     		b	.L686
 7080              		.cfi_endproc
 7081              	.LFE177:
 7083              		.section	.text.f_unlink,"ax",%progbits
 7084              		.align	1
 7085              		.global	f_unlink
 7086              		.syntax unified
 7087              		.thumb
 7088              		.thumb_func
 7089              		.fpu fpv4-sp-d16
 7091              	f_unlink:
 7092              	.LFB178:
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7093              		.loc 1 3603 0
 7094              		.cfi_startproc
 7095              		@ args = 0, pretend = 0, frame = 1112
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 220


 7096              		@ frame_needed = 0, uses_anonymous_args = 0
 7097              	.LVL1031:
 7098 0000 70B5     		push	{r4, r5, r6, lr}
 7099              	.LCFI91:
 7100              		.cfi_def_cfa_offset 16
 7101              		.cfi_offset 4, -16
 7102              		.cfi_offset 5, -12
 7103              		.cfi_offset 6, -8
 7104              		.cfi_offset 14, -4
 7105 0002 ADF58B6D 		sub	sp, sp, #1112
 7106              	.LCFI92:
 7107              		.cfi_def_cfa_offset 1128
 7108 0006 0190     		str	r0, [sp, #4]
 7109              	.LVL1032:
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7110              		.loc 1 3612 0
 7111 0008 0122     		movs	r2, #1
 7112 000a 01A9     		add	r1, sp, #4
 7113 000c 0DF58760 		add	r0, sp, #1080
 7114              	.LVL1033:
 7115 0010 FFF7FEFF 		bl	find_volume
 7116              	.LVL1034:
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7117              		.loc 1 3613 0
 7118 0014 0446     		mov	r4, r0
 7119 0016 40B1     		cbz	r0, .L712
 7120              	.LVL1035:
 7121              	.L701:
3659:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7122              		.loc 1 3659 0
 7123 0018 2146     		mov	r1, r4
 7124 001a DDF83804 		ldr	r0, [sp, #1080]
 7125 001e FFF7FEFF 		bl	unlock_fs
 7126              	.LVL1036:
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7127              		.loc 1 3660 0
 7128 0022 2046     		mov	r0, r4
 7129 0024 0DF58B6D 		add	sp, sp, #1112
 7130              	.LCFI93:
 7131              		.cfi_remember_state
 7132              		.cfi_def_cfa_offset 16
 7133              		@ sp needed
 7134 0028 70BD     		pop	{r4, r5, r6, pc}
 7135              	.LVL1037:
 7136              	.L712:
 7137              	.LCFI94:
 7138              		.cfi_restore_state
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7139              		.loc 1 3614 0
 7140 002a 03AB     		add	r3, sp, #12
 7141 002c CDF85034 		str	r3, [sp, #1104]
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
 7142              		.loc 1 3615 0
 7143 0030 0199     		ldr	r1, [sp, #4]
 7144 0032 8EA8     		add	r0, sp, #568
 7145              	.LVL1038:
 7146 0034 FFF7FEFF 		bl	follow_path
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 221


 7147              	.LVL1039:
3619:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7148              		.loc 1 3619 0
 7149 0038 0446     		mov	r4, r0
 7150 003a 20B9     		cbnz	r0, .L702
3619:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7151              		.loc 1 3619 0 is_stmt 0 discriminator 1
 7152 003c 0221     		movs	r1, #2
 7153 003e 8EA8     		add	r0, sp, #568
 7154              	.LVL1040:
 7155 0040 FFF7FEFF 		bl	chk_lock
 7156              	.LVL1041:
 7157 0044 0446     		mov	r4, r0
 7158              	.LVL1042:
 7159              	.L702:
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 7160              		.loc 1 3621 0 is_stmt 1
 7161 0046 002C     		cmp	r4, #0
 7162 0048 E6D1     		bne	.L701
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {
 7163              		.loc 1 3622 0
 7164 004a DDF84C54 		ldr	r5, [sp, #1100]
 7165              	.LVL1043:
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 7166              		.loc 1 3623 0
 7167 004e 3DB3     		cbz	r5, .L707
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 7168              		.loc 1 3626 0
 7169 0050 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 7170 0052 13F0010F 		tst	r3, #1
 7171 0056 25D1     		bne	.L708
 7172              	.LVL1044:
 7173              	.L703:
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 				dclst = ld_clust(dj.fs, dir);
 7174              		.loc 1 3629 0
 7175 0058 34BB     		cbnz	r4, .L709
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dclst && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-directory ? */
 7176              		.loc 1 3630 0
 7177 005a 2946     		mov	r1, r5
 7178 005c DDF83804 		ldr	r0, [sp, #1080]
 7179 0060 FFF7FEFF 		bl	ld_clust
 7180              	.LVL1045:
3631:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 7181              		.loc 1 3631 0
 7182 0064 0646     		mov	r6, r0
 7183 0066 00B3     		cbz	r0, .L704
3631:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 7184              		.loc 1 3631 0 is_stmt 0 discriminator 1
 7185 0068 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 7186 006a 13F0100F 		tst	r3, #16
 7187 006e 1CD0     		beq	.L704
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.sclust = dclst;
 7188              		.loc 1 3638 0 is_stmt 1
 7189 0070 4FF40872 		mov	r2, #544
 7190 0074 8EA9     		add	r1, sp, #568
 7191 0076 06A8     		add	r0, sp, #24
 7192              	.LVL1046:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 222


 7193 0078 FFF7FEFF 		bl	mem_cpy
 7194              	.LVL1047:
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 2);
 7195              		.loc 1 3639 0
 7196 007c 8896     		str	r6, [sp, #544]
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 7197              		.loc 1 3640 0
 7198 007e 0221     		movs	r1, #2
 7199 0080 06A8     		add	r0, sp, #24
 7200 0082 FFF7FEFF 		bl	dir_sdi
 7201              	.LVL1048:
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
 7202              		.loc 1 3641 0
 7203 0086 0446     		mov	r4, r0
 7204 0088 78B9     		cbnz	r0, .L704
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
 7205              		.loc 1 3642 0
 7206 008a 0021     		movs	r1, #0
 7207 008c 06A8     		add	r0, sp, #24
 7208              	.LVL1049:
 7209 008e FFF7FEFF 		bl	dir_read
 7210              	.LVL1050:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
 7211              		.loc 1 3643 0
 7212 0092 0346     		mov	r3, r0
 7213 0094 00B9     		cbnz	r0, .L705
 7214 0096 0723     		movs	r3, #7
 7215              	.L705:
 7216              	.LVL1051:
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 7217              		.loc 1 3644 0
 7218 0098 042B     		cmp	r3, #4
 7219 009a 06D0     		beq	.L704
 7220 009c 1C46     		mov	r4, r3
 7221 009e 04E0     		b	.L704
 7222              	.LVL1052:
 7223              	.L707:
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7224              		.loc 1 3624 0
 7225 00a0 0624     		movs	r4, #6
 7226              	.LVL1053:
 7227 00a2 D9E7     		b	.L703
 7228              	.LVL1054:
 7229              	.L708:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7230              		.loc 1 3627 0
 7231 00a4 0724     		movs	r4, #7
 7232              	.LVL1055:
 7233 00a6 D7E7     		b	.L703
 7234              	.LVL1056:
 7235              	.L709:
3607:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
 7236              		.loc 1 3607 0
 7237 00a8 0026     		movs	r6, #0
 7238              	.LVL1057:
 7239              	.L704:
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 223


 7240              		.loc 1 3649 0
 7241 00aa 002C     		cmp	r4, #0
 7242 00ac B4D1     		bne	.L701
3650:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
 7243              		.loc 1 3650 0
 7244 00ae 8EA8     		add	r0, sp, #568
 7245 00b0 FFF7FEFF 		bl	dir_remove
 7246              	.LVL1058:
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 7247              		.loc 1 3651 0
 7248 00b4 0446     		mov	r4, r0
 7249 00b6 00B9     		cbnz	r0, .L706
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 7250              		.loc 1 3651 0 is_stmt 0 discriminator 1
 7251 00b8 3EB9     		cbnz	r6, .L713
 7252              	.LVL1059:
 7253              	.L706:
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7254              		.loc 1 3653 0 is_stmt 1
 7255 00ba 002C     		cmp	r4, #0
 7256 00bc ACD1     		bne	.L701
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7257              		.loc 1 3653 0 is_stmt 0 discriminator 1
 7258 00be DDF83804 		ldr	r0, [sp, #1080]
 7259 00c2 FFF7FEFF 		bl	sync_fs
 7260              	.LVL1060:
 7261 00c6 0446     		mov	r4, r0
 7262              	.LVL1061:
 7263 00c8 A6E7     		b	.L701
 7264              	.LVL1062:
 7265              	.L713:
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
 7266              		.loc 1 3652 0 is_stmt 1
 7267 00ca 3146     		mov	r1, r6
 7268 00cc DDF83804 		ldr	r0, [sp, #1080]
 7269              	.LVL1063:
 7270 00d0 FFF7FEFF 		bl	remove_chain
 7271              	.LVL1064:
 7272 00d4 0446     		mov	r4, r0
 7273              	.LVL1065:
 7274 00d6 F0E7     		b	.L706
 7275              		.cfi_endproc
 7276              	.LFE178:
 7278              		.section	.text.f_mkdir,"ax",%progbits
 7279              		.align	1
 7280              		.global	f_mkdir
 7281              		.syntax unified
 7282              		.thumb
 7283              		.thumb_func
 7284              		.fpu fpv4-sp-d16
 7286              	f_mkdir:
 7287              	.LFB179:
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7288              		.loc 1 3672 0
 7289              		.cfi_startproc
 7290              		@ args = 0, pretend = 0, frame = 568
 7291              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 224


 7292              	.LVL1066:
 7293 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7294              	.LCFI95:
 7295              		.cfi_def_cfa_offset 36
 7296              		.cfi_offset 4, -36
 7297              		.cfi_offset 5, -32
 7298              		.cfi_offset 6, -28
 7299              		.cfi_offset 7, -24
 7300              		.cfi_offset 8, -20
 7301              		.cfi_offset 9, -16
 7302              		.cfi_offset 10, -12
 7303              		.cfi_offset 11, -8
 7304              		.cfi_offset 14, -4
 7305 0004 ADF50F7D 		sub	sp, sp, #572
 7306              	.LCFI96:
 7307              		.cfi_def_cfa_offset 608
 7308 0008 0190     		str	r0, [sp, #4]
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
 7309              		.loc 1 3676 0
 7310 000a FFF7FEFF 		bl	get_fattime
 7311              	.LVL1067:
 7312 000e 0546     		mov	r5, r0
 7313              	.LVL1068:
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7314              		.loc 1 3681 0
 7315 0010 0122     		movs	r2, #1
 7316 0012 01A9     		add	r1, sp, #4
 7317 0014 86A8     		add	r0, sp, #536
 7318              	.LVL1069:
 7319 0016 FFF7FEFF 		bl	find_volume
 7320              	.LVL1070:
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7321              		.loc 1 3682 0
 7322 001a 0446     		mov	r4, r0
 7323 001c 40B1     		cbz	r0, .L734
 7324              	.LVL1071:
 7325              	.L715:
3733:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7326              		.loc 1 3733 0
 7327 001e 2146     		mov	r1, r4
 7328 0020 8698     		ldr	r0, [sp, #536]
 7329 0022 FFF7FEFF 		bl	unlock_fs
 7330              	.LVL1072:
3734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7331              		.loc 1 3734 0
 7332 0026 2046     		mov	r0, r4
 7333 0028 0DF50F7D 		add	sp, sp, #572
 7334              	.LCFI97:
 7335              		.cfi_remember_state
 7336              		.cfi_def_cfa_offset 36
 7337              		@ sp needed
 7338 002c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7339              	.LVL1073:
 7340              	.L734:
 7341              	.LCFI98:
 7342              		.cfi_restore_state
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 225


 7343              		.loc 1 3683 0
 7344 0030 03AB     		add	r3, sp, #12
 7345 0032 8C93     		str	r3, [sp, #560]
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 7346              		.loc 1 3684 0
 7347 0034 0199     		ldr	r1, [sp, #4]
 7348 0036 06A8     		add	r0, sp, #24
 7349              	.LVL1074:
 7350 0038 FFF7FEFF 		bl	follow_path
 7351              	.LVL1075:
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
 7352              		.loc 1 3685 0
 7353 003c 0346     		mov	r3, r0
 7354 003e 00B9     		cbnz	r0, .L716
 7355 0040 0823     		movs	r3, #8
 7356              	.L716:
 7357              	.LVL1076:
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 7358              		.loc 1 3688 0
 7359 0042 042B     		cmp	r3, #4
 7360 0044 01D0     		beq	.L735
 7361 0046 1C46     		mov	r4, r3
 7362 0048 E9E7     		b	.L715
 7363              	.L735:
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 7364              		.loc 1 3689 0
 7365 004a 0021     		movs	r1, #0
 7366 004c 8698     		ldr	r0, [sp, #536]
 7367 004e FFF7FEFF 		bl	create_chain
 7368              	.LVL1077:
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 7369              		.loc 1 3691 0
 7370 0052 8146     		mov	r9, r0
 7371 0054 00B9     		cbnz	r0, .L717
 7372 0056 0724     		movs	r4, #7
 7373              	.L717:
 7374              	.LVL1078:
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 7375              		.loc 1 3692 0
 7376 0058 B9F1010F 		cmp	r9, #1
 7377 005c 1FD0     		beq	.L736
 7378              	.LVL1079:
 7379              	.L718:
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 7380              		.loc 1 3693 0
 7381 005e B9F1FF3F 		cmp	r9, #-1
 7382 0062 1ED0     		beq	.L737
 7383              	.LVL1080:
 7384              	.L719:
3694:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_window(dj.fs);
 7385              		.loc 1 3694 0
 7386 0064 FCB1     		cbz	r4, .L738
 7387              	.LVL1081:
 7388              	.L720:
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
 7389              		.loc 1 3696 0
 7390 0066 1CB3     		cbz	r4, .L739
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 226


 7391              	.LVL1082:
 7392              	.L721:
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {
 7393              		.loc 1 3718 0
 7394 0068 002C     		cmp	r4, #0
 7395 006a 7AD0     		beq	.L740
 7396              	.L725:
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 7397              		.loc 1 3719 0
 7398 006c 002C     		cmp	r4, #0
 7399 006e 7DD1     		bne	.L741
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 7400              		.loc 1 3722 0
 7401 0070 8B98     		ldr	r0, [sp, #556]
 7402              	.LVL1083:
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
 7403              		.loc 1 3723 0
 7404 0072 1023     		movs	r3, #16
 7405 0074 C372     		strb	r3, [r0, #11]
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 7406              		.loc 1 3724 0
 7407 0076 8575     		strb	r5, [r0, #22]
 7408 0078 C5F30723 		ubfx	r3, r5, #8, #8
 7409 007c C375     		strb	r3, [r0, #23]
 7410 007e C5F30743 		ubfx	r3, r5, #16, #8
 7411 0082 0376     		strb	r3, [r0, #24]
 7412 0084 2D0E     		lsrs	r5, r5, #24
 7413              	.LVL1084:
 7414 0086 4576     		strb	r5, [r0, #25]
3725:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 7415              		.loc 1 3725 0
 7416 0088 4946     		mov	r1, r9
 7417 008a FFF7FEFF 		bl	st_clust
 7418              	.LVL1085:
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 7419              		.loc 1 3726 0
 7420 008e 8698     		ldr	r0, [sp, #536]
 7421 0090 0123     		movs	r3, #1
 7422 0092 80F80432 		strb	r3, [r0, #516]
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7423              		.loc 1 3727 0
 7424 0096 FFF7FEFF 		bl	sync_fs
 7425              	.LVL1086:
 7426 009a 0446     		mov	r4, r0
 7427              	.LVL1087:
 7428 009c BFE7     		b	.L715
 7429              	.LVL1088:
 7430              	.L736:
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 7431              		.loc 1 3692 0
 7432 009e 0224     		movs	r4, #2
 7433              	.LVL1089:
 7434 00a0 DDE7     		b	.L718
 7435              	.LVL1090:
 7436              	.L737:
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 7437              		.loc 1 3693 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 227


 7438 00a2 0124     		movs	r4, #1
 7439              	.LVL1091:
 7440 00a4 DEE7     		b	.L719
 7441              	.LVL1092:
 7442              	.L738:
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 7443              		.loc 1 3695 0
 7444 00a6 8698     		ldr	r0, [sp, #536]
 7445              	.LVL1093:
 7446 00a8 FFF7FEFF 		bl	sync_window
 7447              	.LVL1094:
 7448 00ac 0446     		mov	r4, r0
 7449              	.LVL1095:
 7450 00ae DAE7     		b	.L720
 7451              	.L739:
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.fs->win.d8;
 7452              		.loc 1 3697 0
 7453 00b0 869E     		ldr	r6, [sp, #536]
 7454 00b2 4946     		mov	r1, r9
 7455 00b4 3046     		mov	r0, r6
 7456 00b6 FFF7FEFF 		bl	clust2sect
 7457              	.LVL1096:
 7458 00ba 0746     		mov	r7, r0
 7459              	.LVL1097:
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
 7460              		.loc 1 3698 0
 7461 00bc B246     		mov	r10, r6
 7462              	.LVL1098:
3699:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
 7463              		.loc 1 3699 0
 7464 00be 4FF40072 		mov	r2, #512
 7465 00c2 0021     		movs	r1, #0
 7466 00c4 3046     		mov	r0, r6
 7467              	.LVL1099:
 7468 00c6 FFF7FEFF 		bl	mem_set
 7469              	.LVL1100:
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Name] = '.';
 7470              		.loc 1 3700 0
 7471 00ca 0B22     		movs	r2, #11
 7472 00cc 2021     		movs	r1, #32
 7473 00ce 3046     		mov	r0, r6
 7474 00d0 FFF7FEFF 		bl	mem_set
 7475              	.LVL1101:
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 7476              		.loc 1 3701 0
 7477 00d4 4FF02E0B 		mov	fp, #46
 7478 00d8 86F800B0 		strb	fp, [r6]
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 7479              		.loc 1 3702 0
 7480 00dc 1023     		movs	r3, #16
 7481 00de F372     		strb	r3, [r6, #11]
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7482              		.loc 1 3703 0
 7483 00e0 B575     		strb	r5, [r6, #22]
 7484 00e2 C5F30723 		ubfx	r3, r5, #8, #8
 7485 00e6 F375     		strb	r3, [r6, #23]
 7486 00e8 C5F30743 		ubfx	r3, r5, #16, #8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 228


 7487 00ec 3376     		strb	r3, [r6, #24]
 7488 00ee 2B0E     		lsrs	r3, r5, #24
 7489 00f0 7376     		strb	r3, [r6, #25]
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dir + SZ_DIRE, dir, SZ_DIRE); 	/* Create ".." entry */
 7490              		.loc 1 3704 0
 7491 00f2 4946     		mov	r1, r9
 7492 00f4 3046     		mov	r0, r6
 7493 00f6 FFF7FEFF 		bl	st_clust
 7494              	.LVL1102:
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
 7495              		.loc 1 3705 0
 7496 00fa 06F12008 		add	r8, r6, #32
 7497 00fe 2022     		movs	r2, #32
 7498 0100 3146     		mov	r1, r6
 7499 0102 4046     		mov	r0, r8
 7500 0104 FFF7FEFF 		bl	mem_cpy
 7501              	.LVL1103:
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 7502              		.loc 1 3706 0
 7503 0108 86F821B0 		strb	fp, [r6, #33]
 7504 010c 8899     		ldr	r1, [sp, #544]
 7505              	.LVL1104:
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
 7506              		.loc 1 3707 0
 7507 010e 869B     		ldr	r3, [sp, #536]
 7508 0110 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
 7509 0114 032A     		cmp	r2, #3
 7510 0116 1ED0     		beq	.L742
 7511              	.LVL1105:
 7512              	.L722:
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
 7513              		.loc 1 3709 0
 7514 0118 4046     		mov	r0, r8
 7515 011a FFF7FEFF 		bl	st_clust
 7516              	.LVL1106:
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
 7517              		.loc 1 3710 0
 7518 011e 869B     		ldr	r3, [sp, #536]
 7519 0120 93F80262 		ldrb	r6, [r3, #514]	@ zero_extendqisi2
 7520              	.LVL1107:
 7521              	.L723:
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
 7522              		.loc 1 3710 0 is_stmt 0 discriminator 1
 7523 0124 002E     		cmp	r6, #0
 7524 0126 9FD0     		beq	.L721
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
 7525              		.loc 1 3711 0 is_stmt 1
 7526 0128 8698     		ldr	r0, [sp, #536]
 7527 012a 07F10108 		add	r8, r7, #1
 7528              	.LVL1108:
 7529 012e C0F83072 		str	r7, [r0, #560]
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(dj.fs);
 7530              		.loc 1 3712 0
 7531 0132 0123     		movs	r3, #1
 7532 0134 80F80432 		strb	r3, [r0, #516]
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 7533              		.loc 1 3713 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 229


 7534 0138 FFF7FEFF 		bl	sync_window
 7535              	.LVL1109:
3714:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
 7536              		.loc 1 3714 0
 7537 013c 0446     		mov	r4, r0
 7538 013e 0028     		cmp	r0, #0
 7539 0140 92D1     		bne	.L721
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7540              		.loc 1 3715 0 discriminator 2
 7541 0142 4FF40072 		mov	r2, #512
 7542 0146 0021     		movs	r1, #0
 7543 0148 5046     		mov	r0, r10
 7544              	.LVL1110:
 7545 014a FFF7FEFF 		bl	mem_set
 7546              	.LVL1111:
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
 7547              		.loc 1 3710 0 discriminator 2
 7548 014e 013E     		subs	r6, r6, #1
 7549              	.LVL1112:
 7550 0150 F6B2     		uxtb	r6, r6
 7551              	.LVL1113:
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
 7552              		.loc 1 3711 0 discriminator 2
 7553 0152 4746     		mov	r7, r8
 7554 0154 E6E7     		b	.L723
 7555              	.LVL1114:
 7556              	.L742:
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
 7557              		.loc 1 3707 0 discriminator 1
 7558 0156 D3F82832 		ldr	r3, [r3, #552]
 7559 015a 9942     		cmp	r1, r3
 7560 015c DCD1     		bne	.L722
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir + SZ_DIRE, pcl);
 7561              		.loc 1 3708 0
 7562 015e 0021     		movs	r1, #0
 7563              	.LVL1115:
 7564 0160 DAE7     		b	.L722
 7565              	.LVL1116:
 7566              	.L740:
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {
 7567              		.loc 1 3718 0 discriminator 1
 7568 0162 06A8     		add	r0, sp, #24
 7569 0164 FFF7FEFF 		bl	dir_register
 7570              	.LVL1117:
 7571 0168 0446     		mov	r4, r0
 7572              	.LVL1118:
 7573 016a 7FE7     		b	.L725
 7574              	.L741:
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7575              		.loc 1 3720 0
 7576 016c 4946     		mov	r1, r9
 7577 016e 8698     		ldr	r0, [sp, #536]
 7578 0170 FFF7FEFF 		bl	remove_chain
 7579              	.LVL1119:
 7580 0174 53E7     		b	.L715
 7581              		.cfi_endproc
 7582              	.LFE179:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 230


 7584              		.section	.text.f_chmod,"ax",%progbits
 7585              		.align	1
 7586              		.global	f_chmod
 7587              		.syntax unified
 7588              		.thumb
 7589              		.thumb_func
 7590              		.fpu fpv4-sp-d16
 7592              	f_chmod:
 7593              	.LFB180:
3748:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7594              		.loc 1 3748 0
 7595              		.cfi_startproc
 7596              		@ args = 0, pretend = 0, frame = 568
 7597              		@ frame_needed = 0, uses_anonymous_args = 0
 7598              	.LVL1120:
 7599 0000 70B5     		push	{r4, r5, r6, lr}
 7600              	.LCFI99:
 7601              		.cfi_def_cfa_offset 16
 7602              		.cfi_offset 4, -16
 7603              		.cfi_offset 5, -12
 7604              		.cfi_offset 6, -8
 7605              		.cfi_offset 14, -4
 7606 0002 ADF50E7D 		sub	sp, sp, #568
 7607              	.LCFI100:
 7608              		.cfi_def_cfa_offset 584
 7609 0006 0190     		str	r0, [sp, #4]
 7610 0008 0E46     		mov	r6, r1
 7611 000a 1546     		mov	r5, r2
3756:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7612              		.loc 1 3756 0
 7613 000c 0122     		movs	r2, #1
 7614              	.LVL1121:
 7615 000e 01A9     		add	r1, sp, #4
 7616              	.LVL1122:
 7617 0010 86A8     		add	r0, sp, #536
 7618              	.LVL1123:
 7619 0012 FFF7FEFF 		bl	find_volume
 7620              	.LVL1124:
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7621              		.loc 1 3757 0
 7622 0016 0446     		mov	r4, r0
 7623 0018 38B1     		cbz	r0, .L747
 7624              	.LVL1125:
 7625              	.L744:
3776:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7626              		.loc 1 3776 0
 7627 001a 2146     		mov	r1, r4
 7628 001c 8698     		ldr	r0, [sp, #536]
 7629 001e FFF7FEFF 		bl	unlock_fs
 7630              	.LVL1126:
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7631              		.loc 1 3777 0
 7632 0022 2046     		mov	r0, r4
 7633 0024 0DF50E7D 		add	sp, sp, #568
 7634              	.LCFI101:
 7635              		.cfi_remember_state
 7636              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 231


 7637              		@ sp needed
 7638 0028 70BD     		pop	{r4, r5, r6, pc}
 7639              	.LVL1127:
 7640              	.L747:
 7641              	.LCFI102:
 7642              		.cfi_restore_state
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7643              		.loc 1 3758 0
 7644 002a 03AB     		add	r3, sp, #12
 7645 002c 8C93     		str	r3, [sp, #560]
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 7646              		.loc 1 3759 0
 7647 002e 0199     		ldr	r1, [sp, #4]
 7648 0030 06A8     		add	r0, sp, #24
 7649              	.LVL1128:
 7650 0032 FFF7FEFF 		bl	follow_path
 7651              	.LVL1129:
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 7652              		.loc 1 3763 0
 7653 0036 0446     		mov	r4, r0
 7654 0038 0028     		cmp	r0, #0
 7655 003a EED1     		bne	.L744
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 7656              		.loc 1 3764 0
 7657 003c 8B9B     		ldr	r3, [sp, #556]
 7658              	.LVL1130:
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 7659              		.loc 1 3765 0
 7660 003e 73B1     		cbz	r3, .L745
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = (attr & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 7661              		.loc 1 3768 0
 7662 0040 05F02705 		and	r5, r5, #39
 7663              	.LVL1131:
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 7664              		.loc 1 3769 0
 7665 0044 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 7666 0046 5640     		eors	r6, r6, r2
 7667 0048 3540     		ands	r5, r5, r6
 7668              	.LVL1132:
 7669 004a 5540     		eors	r5, r5, r2
 7670 004c DD72     		strb	r5, [r3, #11]
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 7671              		.loc 1 3770 0
 7672 004e 8698     		ldr	r0, [sp, #536]
 7673              	.LVL1133:
 7674 0050 0123     		movs	r3, #1
 7675              	.LVL1134:
 7676 0052 80F80432 		strb	r3, [r0, #516]
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7677              		.loc 1 3771 0
 7678 0056 FFF7FEFF 		bl	sync_fs
 7679              	.LVL1135:
 7680 005a 0446     		mov	r4, r0
 7681              	.LVL1136:
 7682 005c DDE7     		b	.L744
 7683              	.LVL1137:
 7684              	.L745:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 232


3766:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* File or sub directory */
 7685              		.loc 1 3766 0
 7686 005e 0624     		movs	r4, #6
 7687 0060 DBE7     		b	.L744
 7688              		.cfi_endproc
 7689              	.LFE180:
 7691              		.section	.text.f_rename,"ax",%progbits
 7692              		.align	1
 7693              		.global	f_rename
 7694              		.syntax unified
 7695              		.thumb
 7696              		.thumb_func
 7697              		.fpu fpv4-sp-d16
 7699              	f_rename:
 7700              	.LFB181:
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7701              		.loc 1 3790 0
 7702              		.cfi_startproc
 7703              		@ args = 0, pretend = 0, frame = 1136
 7704              		@ frame_needed = 0, uses_anonymous_args = 0
 7705              	.LVL1138:
 7706 0000 70B5     		push	{r4, r5, r6, lr}
 7707              	.LCFI103:
 7708              		.cfi_def_cfa_offset 16
 7709              		.cfi_offset 4, -16
 7710              		.cfi_offset 5, -12
 7711              		.cfi_offset 6, -8
 7712              		.cfi_offset 14, -4
 7713 0002 ADF58E6D 		sub	sp, sp, #1136
 7714              	.LCFI104:
 7715              		.cfi_def_cfa_offset 1152
 7716 0006 0190     		str	r0, [sp, #4]
 7717 0008 0091     		str	r1, [sp]
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7718              		.loc 1 3799 0
 7719 000a 0122     		movs	r2, #1
 7720 000c 01A9     		add	r1, sp, #4
 7721              	.LVL1139:
 7722 000e 0DF58A60 		add	r0, sp, #1104
 7723              	.LVL1140:
 7724 0012 FFF7FEFF 		bl	find_volume
 7725              	.LVL1141:
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 		djn.fs = djo.fs;
 7726              		.loc 1 3800 0
 7727 0016 0446     		mov	r4, r0
 7728 0018 40B1     		cbz	r0, .L759
 7729              	.LVL1142:
 7730              	.L749:
3854:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7731              		.loc 1 3854 0
 7732 001a 2146     		mov	r1, r4
 7733 001c DDF85004 		ldr	r0, [sp, #1104]
 7734 0020 FFF7FEFF 		bl	unlock_fs
 7735              	.LVL1143:
3855:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7736              		.loc 1 3855 0
 7737 0024 2046     		mov	r0, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 233


 7738 0026 0DF58E6D 		add	sp, sp, #1136
 7739              	.LCFI105:
 7740              		.cfi_remember_state
 7741              		.cfi_def_cfa_offset 16
 7742              		@ sp needed
 7743 002a 70BD     		pop	{r4, r5, r6, pc}
 7744              	.LVL1144:
 7745              	.L759:
 7746              	.LCFI106:
 7747              		.cfi_restore_state
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(djo);
 7748              		.loc 1 3801 0
 7749 002c DDF85034 		ldr	r3, [sp, #1104]
 7750 0030 8C93     		str	r3, [sp, #560]
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 7751              		.loc 1 3802 0
 7752 0032 03AB     		add	r3, sp, #12
 7753 0034 CDF86834 		str	r3, [sp, #1128]
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
 7754              		.loc 1 3803 0
 7755 0038 0199     		ldr	r1, [sp, #4]
 7756 003a 94A8     		add	r0, sp, #592
 7757              	.LVL1145:
 7758 003c FFF7FEFF 		bl	follow_path
 7759              	.LVL1146:
3807:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7760              		.loc 1 3807 0
 7761 0040 0446     		mov	r4, r0
 7762 0042 20B9     		cbnz	r0, .L750
3807:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7763              		.loc 1 3807 0 is_stmt 0 discriminator 1
 7764 0044 0221     		movs	r1, #2
 7765 0046 94A8     		add	r0, sp, #592
 7766              	.LVL1147:
 7767 0048 FFF7FEFF 		bl	chk_lock
 7768              	.LVL1148:
 7769 004c 0446     		mov	r4, r0
 7770              	.LVL1149:
 7771              	.L750:
3809:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 7772              		.loc 1 3809 0 is_stmt 1
 7773 004e 002C     		cmp	r4, #0
 7774 0050 E3D1     		bne	.L749
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_FILE;
 7775              		.loc 1 3810 0
 7776 0052 DDF86414 		ldr	r1, [sp, #1124]
 7777 0056 0029     		cmp	r1, #0
 7778 0058 6CD0     		beq	.L754
3813:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 7779              		.loc 1 3813 0
 7780 005a 1522     		movs	r2, #21
 7781 005c 0B31     		adds	r1, r1, #11
 7782 005e 06A8     		add	r0, sp, #24
 7783 0060 FFF7FEFF 		bl	mem_cpy
 7784              	.LVL1150:
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
 7785              		.loc 1 3814 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 234


 7786 0064 4FF40872 		mov	r2, #544
 7787 0068 94A9     		add	r1, sp, #592
 7788 006a 0CA8     		add	r0, sp, #48
 7789 006c FFF7FEFF 		bl	mem_cpy
 7790              	.LVL1151:
3815:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
 7791              		.loc 1 3815 0
 7792 0070 6846     		mov	r0, sp
 7793 0072 FFF7FEFF 		bl	get_ldnumber
 7794              	.LVL1152:
 7795 0076 0028     		cmp	r0, #0
 7796 0078 42DB     		blt	.L755
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
 7797              		.loc 1 3816 0
 7798 007a 0099     		ldr	r1, [sp]
 7799 007c 0CA8     		add	r0, sp, #48
 7800 007e FFF7FEFF 		bl	follow_path
 7801              	.LVL1153:
 7802 0082 0446     		mov	r4, r0
 7803              	.LVL1154:
 7804              	.L751:
3819:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
 7805              		.loc 1 3819 0
 7806 0084 04B9     		cbnz	r4, .L752
 7807 0086 0824     		movs	r4, #8
 7808              	.LVL1155:
 7809              	.L752:
3820:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 7810              		.loc 1 3820 0
 7811 0088 042C     		cmp	r4, #4
 7812 008a C6D1     		bne	.L749
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 7813              		.loc 1 3821 0
 7814 008c 0CA8     		add	r0, sp, #48
 7815 008e FFF7FEFF 		bl	dir_register
 7816              	.LVL1156:
3822:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
 7817              		.loc 1 3822 0
 7818 0092 0446     		mov	r4, r0
 7819 0094 0028     		cmp	r0, #0
 7820 0096 C0D1     		bne	.L749
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 7821              		.loc 1 3824 0
 7822 0098 919D     		ldr	r5, [sp, #580]
 7823              	.LVL1157:
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 7824              		.loc 1 3825 0
 7825 009a 1322     		movs	r2, #19
 7826 009c 0DF11A01 		add	r1, sp, #26
 7827 00a0 05F10D00 		add	r0, r5, #13
 7828              	.LVL1158:
 7829 00a4 FFF7FEFF 		bl	mem_cpy
 7830              	.LVL1159:
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 						djo.fs->wflag = 1;
 7831              		.loc 1 3826 0
 7832 00a8 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 7833 00ac 43F02003 		orr	r3, r3, #32
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 235


 7834 00b0 EB72     		strb	r3, [r5, #11]
3827:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
 7835              		.loc 1 3827 0
 7836 00b2 DDF85064 		ldr	r6, [sp, #1104]
 7837 00b6 0123     		movs	r3, #1
 7838 00b8 86F80432 		strb	r3, [r6, #516]
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 7839              		.loc 1 3828 0
 7840 00bc EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 7841 00be 13F0100F 		tst	r3, #16
 7842 00c2 0FD0     		beq	.L753
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 7843              		.loc 1 3828 0 is_stmt 0 discriminator 1
 7844 00c4 8E9B     		ldr	r3, [sp, #568]
 7845 00c6 DDF85824 		ldr	r2, [sp, #1112]
 7846 00ca 9A42     		cmp	r2, r3
 7847 00cc 0AD0     		beq	.L753
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 7848              		.loc 1 3829 0 is_stmt 1
 7849 00ce 2946     		mov	r1, r5
 7850 00d0 3046     		mov	r0, r6
 7851 00d2 FFF7FEFF 		bl	ld_clust
 7852              	.LVL1160:
 7853 00d6 0146     		mov	r1, r0
 7854 00d8 3046     		mov	r0, r6
 7855 00da FFF7FEFF 		bl	clust2sect
 7856              	.LVL1161:
3830:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 7857              		.loc 1 3830 0
 7858 00de 0146     		mov	r1, r0
 7859 00e0 80B9     		cbnz	r0, .L760
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
 7860              		.loc 1 3831 0
 7861 00e2 0224     		movs	r4, #2
 7862              	.LVL1162:
 7863              	.L753:
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
 7864              		.loc 1 3841 0
 7865 00e4 002C     		cmp	r4, #0
 7866 00e6 98D1     		bne	.L749
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK)
 7867              		.loc 1 3842 0
 7868 00e8 94A8     		add	r0, sp, #592
 7869 00ea FFF7FEFF 		bl	dir_remove
 7870              	.LVL1163:
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = sync_fs(djo.fs);
 7871              		.loc 1 3843 0
 7872 00ee 0446     		mov	r4, r0
 7873 00f0 0028     		cmp	r0, #0
 7874 00f2 92D1     		bne	.L749
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 7875              		.loc 1 3844 0
 7876 00f4 DDF85004 		ldr	r0, [sp, #1104]
 7877              	.LVL1164:
 7878 00f8 FFF7FEFF 		bl	sync_fs
 7879              	.LVL1165:
 7880 00fc 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 236


 7881              	.LVL1166:
 7882 00fe 8CE7     		b	.L749
 7883              	.L755:
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 7884              		.loc 1 3818 0
 7885 0100 0B24     		movs	r4, #11
 7886              	.LVL1167:
 7887 0102 BFE7     		b	.L751
 7888              	.LVL1168:
 7889              	.L760:
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
 7890              		.loc 1 3833 0
 7891 0104 3046     		mov	r0, r6
 7892              	.LVL1169:
 7893 0106 FFF7FEFF 		bl	move_window
 7894              	.LVL1170:
3834:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 7895              		.loc 1 3834 0
 7896 010a DDF85034 		ldr	r3, [sp, #1104]
 7897 010e 03F12002 		add	r2, r3, #32
 7898              	.LVL1171:
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
 7899              		.loc 1 3835 0
 7900 0112 0446     		mov	r4, r0
 7901 0114 0028     		cmp	r0, #0
 7902 0116 E5D1     		bne	.L753
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
 7903              		.loc 1 3835 0 is_stmt 0 discriminator 1
 7904 0118 93F82130 		ldrb	r3, [r3, #33]	@ zero_extendqisi2
 7905 011c 2E2B     		cmp	r3, #46
 7906 011e E1D1     		bne	.L753
3836:Middlewares/Third_Party/FatFs/src/ff.c **** 									djo.fs->wflag = 1;
 7907              		.loc 1 3836 0 is_stmt 1
 7908 0120 8E99     		ldr	r1, [sp, #568]
 7909 0122 1046     		mov	r0, r2
 7910              	.LVL1172:
 7911 0124 FFF7FEFF 		bl	st_clust
 7912              	.LVL1173:
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 7913              		.loc 1 3837 0
 7914 0128 0122     		movs	r2, #1
 7915 012a DDF85034 		ldr	r3, [sp, #1104]
 7916 012e 83F80422 		strb	r2, [r3, #516]
 7917 0132 D7E7     		b	.L753
 7918              	.LVL1174:
 7919              	.L754:
3811:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7920              		.loc 1 3811 0
 7921 0134 0424     		movs	r4, #4
 7922              	.LVL1175:
 7923 0136 70E7     		b	.L749
 7924              		.cfi_endproc
 7925              	.LFE181:
 7927              		.section	.text.f_utime,"ax",%progbits
 7928              		.align	1
 7929              		.global	f_utime
 7930              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 237


 7931              		.thumb
 7932              		.thumb_func
 7933              		.fpu fpv4-sp-d16
 7935              	f_utime:
 7936              	.LFB182:
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7937              		.loc 1 3868 0
 7938              		.cfi_startproc
 7939              		@ args = 0, pretend = 0, frame = 568
 7940              		@ frame_needed = 0, uses_anonymous_args = 0
 7941              	.LVL1176:
 7942 0000 30B5     		push	{r4, r5, lr}
 7943              	.LCFI107:
 7944              		.cfi_def_cfa_offset 12
 7945              		.cfi_offset 4, -12
 7946              		.cfi_offset 5, -8
 7947              		.cfi_offset 14, -4
 7948 0002 ADF50F7D 		sub	sp, sp, #572
 7949              	.LCFI108:
 7950              		.cfi_def_cfa_offset 584
 7951 0006 0190     		str	r0, [sp, #4]
 7952 0008 0D46     		mov	r5, r1
3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7953              		.loc 1 3876 0
 7954 000a 0122     		movs	r2, #1
 7955 000c 01A9     		add	r1, sp, #4
 7956              	.LVL1177:
 7957 000e 86A8     		add	r0, sp, #536
 7958              	.LVL1178:
 7959 0010 FFF7FEFF 		bl	find_volume
 7960              	.LVL1179:
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7961              		.loc 1 3877 0
 7962 0014 0446     		mov	r4, r0
 7963 0016 38B1     		cbz	r0, .L765
 7964              	.LVL1180:
 7965              	.L762:
3896:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7966              		.loc 1 3896 0
 7967 0018 2146     		mov	r1, r4
 7968 001a 8698     		ldr	r0, [sp, #536]
 7969 001c FFF7FEFF 		bl	unlock_fs
 7970              	.LVL1181:
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7971              		.loc 1 3897 0
 7972 0020 2046     		mov	r0, r4
 7973 0022 0DF50F7D 		add	sp, sp, #572
 7974              	.LCFI109:
 7975              		.cfi_remember_state
 7976              		.cfi_def_cfa_offset 12
 7977              		@ sp needed
 7978 0026 30BD     		pop	{r4, r5, pc}
 7979              	.LVL1182:
 7980              	.L765:
 7981              	.LCFI110:
 7982              		.cfi_restore_state
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 238


 7983              		.loc 1 3878 0
 7984 0028 03AB     		add	r3, sp, #12
 7985 002a 8C93     		str	r3, [sp, #560]
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 7986              		.loc 1 3879 0
 7987 002c 0199     		ldr	r1, [sp, #4]
 7988 002e 06A8     		add	r0, sp, #24
 7989              	.LVL1183:
 7990 0030 FFF7FEFF 		bl	follow_path
 7991              	.LVL1184:
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 7992              		.loc 1 3883 0
 7993 0034 0446     		mov	r4, r0
 7994 0036 0028     		cmp	r0, #0
 7995 0038 EED1     		bne	.L762
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {					/* Root directory */
 7996              		.loc 1 3884 0
 7997 003a 8B9B     		ldr	r3, [sp, #556]
 7998              	.LVL1185:
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 7999              		.loc 1 3885 0
 8000 003c 8BB1     		cbz	r3, .L763
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
 8001              		.loc 1 3888 0
 8002 003e AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 8003 0040 9A75     		strb	r2, [r3, #22]
 8004 0042 EA88     		ldrh	r2, [r5, #6]
 8005 0044 120A     		lsrs	r2, r2, #8
 8006 0046 DA75     		strb	r2, [r3, #23]
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 8007              		.loc 1 3889 0
 8008 0048 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 8009 004a 1A76     		strb	r2, [r3, #24]
 8010 004c AA88     		ldrh	r2, [r5, #4]
 8011 004e 120A     		lsrs	r2, r2, #8
 8012 0050 5A76     		strb	r2, [r3, #25]
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 8013              		.loc 1 3890 0
 8014 0052 8698     		ldr	r0, [sp, #536]
 8015              	.LVL1186:
 8016 0054 0123     		movs	r3, #1
 8017              	.LVL1187:
 8018 0056 80F80432 		strb	r3, [r0, #516]
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8019              		.loc 1 3891 0
 8020 005a FFF7FEFF 		bl	sync_fs
 8021              	.LVL1188:
 8022 005e 0446     		mov	r4, r0
 8023              	.LVL1189:
 8024 0060 DAE7     		b	.L762
 8025              	.LVL1190:
 8026              	.L763:
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* File or sub-directory */
 8027              		.loc 1 3886 0
 8028 0062 0624     		movs	r4, #6
 8029 0064 D8E7     		b	.L762
 8030              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 239


 8031              	.LFE182:
 8033              		.section	.text.f_mkfs,"ax",%progbits
 8034              		.align	1
 8035              		.global	f_mkfs
 8036              		.syntax unified
 8037              		.thumb
 8038              		.thumb_func
 8039              		.fpu fpv4-sp-d16
 8041              	f_mkfs:
 8042              	.LFB183:
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
 8043              		.loc 1 4143 0
 8044              		.cfi_startproc
 8045              		@ args = 0, pretend = 0, frame = 32
 8046              		@ frame_needed = 0, uses_anonymous_args = 0
 8047              	.LVL1191:
 8048 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8049              	.LCFI111:
 8050              		.cfi_def_cfa_offset 36
 8051              		.cfi_offset 4, -36
 8052              		.cfi_offset 5, -32
 8053              		.cfi_offset 6, -28
 8054              		.cfi_offset 7, -24
 8055              		.cfi_offset 8, -20
 8056              		.cfi_offset 9, -16
 8057              		.cfi_offset 10, -12
 8058              		.cfi_offset 11, -8
 8059              		.cfi_offset 14, -4
 8060 0004 89B0     		sub	sp, sp, #36
 8061              	.LCFI112:
 8062              		.cfi_def_cfa_offset 72
 8063 0006 0590     		str	r0, [sp, #20]
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
 8064              		.loc 1 4160 0
 8065 0008 0129     		cmp	r1, #1
 8066 000a 03D9     		bls	.L837
 8067 000c 1320     		movs	r0, #19
 8068              	.LVL1192:
 8069              	.L767:
4375:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8070              		.loc 1 4375 0
 8071 000e 09B0     		add	sp, sp, #36
 8072              	.LCFI113:
 8073              		.cfi_remember_state
 8074              		.cfi_def_cfa_offset 36
 8075              		@ sp needed
 8076 0010 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8077              	.LVL1193:
 8078              	.L837:
 8079              	.LCFI114:
 8080              		.cfi_restore_state
 8081 0014 0C46     		mov	r4, r1
 8082 0016 1546     		mov	r5, r2
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 8083              		.loc 1 4161 0
 8084 0018 05A8     		add	r0, sp, #20
 8085              	.LVL1194:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 240


 8086 001a FFF7FEFF 		bl	get_ldnumber
 8087              	.LVL1195:
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
 8088              		.loc 1 4162 0
 8089 001e 0028     		cmp	r0, #0
 8090 0020 C0F2C182 		blt	.L808
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 8091              		.loc 1 4163 0
 8092 0024 434B     		ldr	r3, .L847
 8093 0026 53F82060 		ldr	r6, [r3, r0, lsl #2]
 8094              	.LVL1196:
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
 8095              		.loc 1 4164 0
 8096 002a 002E     		cmp	r6, #0
 8097 002c 00F0BD82 		beq	.L809
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 8098              		.loc 1 4165 0
 8099 0030 0023     		movs	r3, #0
 8100 0032 86F80032 		strb	r3, [r6, #512]
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
 8101              		.loc 1 4166 0
 8102 0036 C7B2     		uxtb	r7, r0
 8103              	.LVL1197:
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 8104              		.loc 1 4170 0
 8105 0038 3846     		mov	r0, r7
 8106              	.LVL1198:
 8107 003a FFF7FEFF 		bl	disk_initialize
 8108              	.LVL1199:
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 8109              		.loc 1 4171 0
 8110 003e 10F0010F 		tst	r0, #1
 8111 0042 01D0     		beq	.L838
 8112 0044 0320     		movs	r0, #3
 8113              	.LVL1200:
 8114 0046 E2E7     		b	.L767
 8115              	.LVL1201:
 8116              	.L838:
4172:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 8117              		.loc 1 4172 0
 8118 0048 10F0040F 		tst	r0, #4
 8119 004c 01D0     		beq	.L839
 8120 004e 0A20     		movs	r0, #10
 8121              	.LVL1202:
 8122 0050 DDE7     		b	.L767
 8123              	.LVL1203:
 8124              	.L839:
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8125              		.loc 1 4187 0
 8126 0052 06AA     		add	r2, sp, #24
 8127 0054 0121     		movs	r1, #1
 8128 0056 3846     		mov	r0, r7
 8129              	.LVL1204:
 8130 0058 FFF7FEFF 		bl	disk_ioctl
 8131              	.LVL1205:
 8132 005c 0028     		cmp	r0, #0
 8133 005e 40F0A682 		bne	.L812
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 241


4187:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8134              		.loc 1 4187 0 is_stmt 0 discriminator 1
 8135 0062 069A     		ldr	r2, [sp, #24]
 8136 0064 7F2A     		cmp	r2, #127
 8137 0066 40F2A482 		bls	.L813
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 8138              		.loc 1 4189 0 is_stmt 1
 8139 006a 74B1     		cbz	r4, .L814
 8140 006c 0023     		movs	r3, #0
 8141 006e 0193     		str	r3, [sp, #4]
 8142              	.L768:
 8143              	.LVL1206:
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8144              		.loc 1 4190 0 discriminator 4
 8145 0070 019B     		ldr	r3, [sp, #4]
 8146 0072 D21A     		subs	r2, r2, r3
 8147 0074 0692     		str	r2, [sp, #24]
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
 8148              		.loc 1 4193 0 discriminator 4
 8149 0076 6B1E     		subs	r3, r5, #1
 8150 0078 1D42     		tst	r5, r3
 8151 007a 00D0     		beq	.L769
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
 8152              		.loc 1 4193 0 is_stmt 0
 8153 007c 0025     		movs	r5, #0
 8154              	.LVL1207:
 8155              	.L769:
4194:Middlewares/Third_Party/FatFs/src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 8156              		.loc 1 4194 0 is_stmt 1
 8157 007e 85B9     		cbnz	r5, .L770
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 8158              		.loc 1 4195 0
 8159 0080 4FF4FA63 		mov	r3, #2000
 8160 0084 B2FBF3F3 		udiv	r3, r2, r3
 8161              	.LVL1208:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
 8162              		.loc 1 4196 0
 8163 0088 03E0     		b	.L771
 8164              	.LVL1209:
 8165              	.L814:
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 8166              		.loc 1 4189 0
 8167 008a 3F23     		movs	r3, #63
 8168 008c 0193     		str	r3, [sp, #4]
 8169 008e EFE7     		b	.L768
 8170              	.LVL1210:
 8171              	.L772:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
 8172              		.loc 1 4196 0 discriminator 3
 8173 0090 0135     		adds	r5, r5, #1
 8174              	.LVL1211:
 8175              	.L771:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
 8176              		.loc 1 4196 0 is_stmt 0 discriminator 1
 8177 0092 2949     		ldr	r1, .L847+4
 8178 0094 31F81510 		ldrh	r1, [r1, r5, lsl #1]
 8179 0098 8B42     		cmp	r3, r1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 242


 8180 009a F9D3     		bcc	.L772
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8181              		.loc 1 4197 0 is_stmt 1
 8182 009c 274B     		ldr	r3, .L847+8
 8183              	.LVL1212:
 8184 009e 33F81550 		ldrh	r5, [r3, r5, lsl #1]
 8185              	.LVL1213:
 8186              	.L770:
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
 8187              		.loc 1 4199 0
 8188 00a2 B5F5007F 		cmp	r5, #512
 8189 00a6 00D3     		bcc	.L773
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
 8190              		.loc 1 4199 0 is_stmt 0 discriminator 1
 8191 00a8 6D0A     		lsrs	r5, r5, #9
 8192              	.LVL1214:
 8193              	.L773:
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au > 128) au = 128;
 8194              		.loc 1 4200 0 is_stmt 1
 8195 00aa 05B9     		cbnz	r5, .L774
 8196 00ac 0125     		movs	r5, #1
 8197              	.LVL1215:
 8198              	.L774:
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8199              		.loc 1 4201 0
 8200 00ae 802D     		cmp	r5, #128
 8201 00b0 00D9     		bls	.L775
 8202 00b2 8025     		movs	r5, #128
 8203              	.LVL1216:
 8204              	.L775:
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
 8205              		.loc 1 4204 0
 8206 00b4 B2FBF5F3 		udiv	r3, r2, r5
 8207              	.LVL1217:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 8208              		.loc 1 4206 0
 8209 00b8 40F6F571 		movw	r1, #4085
 8210 00bc 8B42     		cmp	r3, r1
 8211 00be 26D8     		bhi	.L818
4205:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 8212              		.loc 1 4205 0
 8213 00c0 4FF00108 		mov	r8, #1
 8214              	.L776:
 8215              	.LVL1218:
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8216              		.loc 1 4207 0
 8217 00c4 4FF6F571 		movw	r1, #65525
 8218 00c8 8B42     		cmp	r3, r1
 8219 00ca 01D9     		bls	.L777
 8220 00cc 4FF00308 		mov	r8, #3
 8221              	.LVL1219:
 8222              	.L777:
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 8223              		.loc 1 4210 0
 8224 00d0 B8F1030F 		cmp	r8, #3
 8225 00d4 1ED0     		beq	.L840
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 243


 8226              		.loc 1 4215 0
 8227 00d6 B8F1010F 		cmp	r8, #1
 8228 00da 25D0     		beq	.L841
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 8229              		.loc 1 4215 0 is_stmt 0 discriminator 2
 8230 00dc 0233     		adds	r3, r3, #2
 8231              	.LVL1220:
 8232 00de 5B00     		lsls	r3, r3, #1
 8233              	.LVL1221:
 8234              	.L781:
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 1;
 8235              		.loc 1 4216 0 is_stmt 1 discriminator 4
 8236 00e0 03F2FF13 		addw	r3, r3, #511
 8237              	.LVL1222:
 8238 00e4 4FEA5329 		lsr	r9, r3, #9
 8239              	.LVL1223:
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8240              		.loc 1 4218 0 discriminator 4
 8241 00e8 2023     		movs	r3, #32
 8242 00ea 0393     		str	r3, [sp, #12]
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
 8243              		.loc 1 4217 0 discriminator 4
 8244 00ec 4FF0010A 		mov	r10, #1
 8245              	.LVL1224:
 8246              	.L779:
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 8247              		.loc 1 4220 0
 8248 00f0 0199     		ldr	r1, [sp, #4]
 8249 00f2 0AEB0103 		add	r3, r10, r1
 8250 00f6 0093     		str	r3, [sp]
 8251              	.LVL1225:
4221:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 8252              		.loc 1 4221 0
 8253 00f8 09EB030B 		add	fp, r9, r3
 8254              	.LVL1226:
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 8255              		.loc 1 4222 0
 8256 00fc 039B     		ldr	r3, [sp, #12]
 8257              	.LVL1227:
 8258 00fe 9B44     		add	fp, fp, r3
 8259              	.LVL1228:
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8260              		.loc 1 4223 0
 8261 0100 05EB0B03 		add	r3, r5, fp
 8262 0104 5B1A     		subs	r3, r3, r1
 8263 0106 9A42     		cmp	r2, r3
 8264 0108 1AD2     		bcs	.L842
 8265 010a 0E20     		movs	r0, #14
 8266 010c 7FE7     		b	.L767
 8267              	.LVL1229:
 8268              	.L818:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 8269              		.loc 1 4206 0
 8270 010e 4FF00208 		mov	r8, #2
 8271 0112 D7E7     		b	.L776
 8272              	.LVL1230:
 8273              	.L840:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 244


4211:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 32;
 8274              		.loc 1 4211 0
 8275 0114 8233     		adds	r3, r3, #130
 8276              	.LVL1231:
 8277 0116 9B00     		lsls	r3, r3, #2
 8278              	.LVL1232:
 8279 0118 013B     		subs	r3, r3, #1
 8280 011a 4FEA5329 		lsr	r9, r3, #9
 8281              	.LVL1233:
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8282              		.loc 1 4213 0
 8283 011e 0023     		movs	r3, #0
 8284 0120 0393     		str	r3, [sp, #12]
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = 0;
 8285              		.loc 1 4212 0
 8286 0122 4FF0200A 		mov	r10, #32
 8287 0126 E3E7     		b	.L779
 8288              	.LVL1234:
 8289              	.L841:
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 8290              		.loc 1 4215 0 discriminator 1
 8291 0128 03EB4303 		add	r3, r3, r3, lsl #1
 8292              	.LVL1235:
 8293 012c 0133     		adds	r3, r3, #1
 8294 012e 5B08     		lsrs	r3, r3, #1
 8295 0130 0333     		adds	r3, r3, #3
 8296 0132 D5E7     		b	.L781
 8297              	.L848:
 8298              		.align	2
 8299              	.L847:
 8300 0134 00000000 		.word	.LANCHOR2
 8301 0138 00000000 		.word	.LANCHOR4
 8302 013c 00000000 		.word	.LANCHOR5
 8303              	.LVL1236:
 8304              	.L842:
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8305              		.loc 1 4226 0
 8306 0140 07AA     		add	r2, sp, #28
 8307              	.LVL1237:
 8308 0142 0321     		movs	r1, #3
 8309 0144 3846     		mov	r0, r7
 8310 0146 FFF7FEFF 		bl	disk_ioctl
 8311              	.LVL1238:
 8312 014a 20B9     		cbnz	r0, .L782
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8313              		.loc 1 4226 0 is_stmt 0 discriminator 2
 8314 014c 079B     		ldr	r3, [sp, #28]
 8315 014e 13B1     		cbz	r3, .L782
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8316              		.loc 1 4226 0 discriminator 4
 8317 0150 B3F5004F 		cmp	r3, #32768
 8318 0154 01D9     		bls	.L783
 8319              	.L782:
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8320              		.loc 1 4226 0 discriminator 5
 8321 0156 0123     		movs	r3, #1
 8322 0158 0793     		str	r3, [sp, #28]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 245


 8323              	.L783:
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (n - b_data) / N_FATS;
 8324              		.loc 1 4227 0 is_stmt 1
 8325 015a 079A     		ldr	r2, [sp, #28]
 8326 015c 0BEB0203 		add	r3, fp, r2
 8327 0160 013B     		subs	r3, r3, #1
 8328 0162 5242     		negs	r2, r2
 8329 0164 1340     		ands	r3, r3, r2
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 8330              		.loc 1 4228 0
 8331 0166 A3EB0B03 		sub	r3, r3, fp
 8332 016a 0793     		str	r3, [sp, #28]
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv += n;
 8333              		.loc 1 4229 0
 8334 016c B8F1030F 		cmp	r8, #3
 8335 0170 00F06B81 		beq	.L843
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8336              		.loc 1 4233 0
 8337 0174 9944     		add	r9, r9, r3
 8338              	.LVL1239:
 8339              	.L785:
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 8340              		.loc 1 4237 0
 8341 0176 069A     		ldr	r2, [sp, #24]
 8342 0178 A2EB0A03 		sub	r3, r2, r10
 8343 017c A3EB0903 		sub	r3, r3, r9
 8344 0180 0399     		ldr	r1, [sp, #12]
 8345 0182 5B1A     		subs	r3, r3, r1
 8346 0184 B3FBF5FB 		udiv	fp, r3, r5
 8347              	.LVL1240:
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 8348              		.loc 1 4238 0
 8349 0188 B8F1020F 		cmp	r8, #2
 8350 018c 00F06281 		beq	.L844
 8351              	.L786:
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
 8352              		.loc 1 4239 0
 8353 0190 B8F1030F 		cmp	r8, #3
 8354 0194 00F06581 		beq	.L845
 8355              	.L787:
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x0C;		/* FAT32X */
 8356              		.loc 1 4243 0
 8357 0198 B8F1030F 		cmp	r8, #3
 8358 019c 00F06881 		beq	.L823
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 8359              		.loc 1 4246 0
 8360 01a0 B8F1010F 		cmp	r8, #1
 8361 01a4 03D1     		bne	.L789
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 8362              		.loc 1 4246 0 is_stmt 0 discriminator 1
 8363 01a6 B2F5803F 		cmp	r2, #65536
 8364 01aa C0F06481 		bcc	.L824
 8365              	.L789:
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8366              		.loc 1 4249 0 is_stmt 1
 8367 01ae B2F5803F 		cmp	r2, #65536
 8368 01b2 80F06381 		bcs	.L825
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 246


 8369 01b6 0423     		movs	r3, #4
 8370 01b8 0293     		str	r3, [sp, #8]
 8371              	.L788:
 8372              	.LVL1241:
4261:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF0;
 8373              		.loc 1 4261 0
 8374 01ba 002C     		cmp	r4, #0
 8375 01bc 40F06181 		bne	.L826
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fs->win.d8 + MBR_Table;	/* Create partition table for single partition in the drive */
 8376              		.loc 1 4264 0
 8377 01c0 4FF40072 		mov	r2, #512
 8378 01c4 0021     		movs	r1, #0
 8379 01c6 3046     		mov	r0, r6
 8380 01c8 FFF7FEFF 		bl	mem_set
 8381              	.LVL1242:
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 8382              		.loc 1 4266 0
 8383 01cc 0123     		movs	r3, #1
 8384 01ce 86F8BF31 		strb	r3, [r6, #447]
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 8385              		.loc 1 4267 0
 8386 01d2 86F8C031 		strb	r3, [r6, #448]
4268:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[4] = sys;					/* System type */
 8387              		.loc 1 4268 0
 8388 01d6 0022     		movs	r2, #0
 8389 01d8 86F8C121 		strb	r2, [r6, #449]
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 8390              		.loc 1 4269 0
 8391 01dc 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
 8392 01e0 86F8C211 		strb	r1, [r6, #450]
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 8393              		.loc 1 4270 0
 8394 01e4 FE21     		movs	r1, #254
 8395 01e6 86F8C311 		strb	r1, [r6, #451]
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 8396              		.loc 1 4271 0
 8397 01ea 0699     		ldr	r1, [sp, #24]
 8398 01ec 0198     		ldr	r0, [sp, #4]
 8399 01ee 0844     		add	r0, r0, r1
 8400 01f0 43F6C164 		movw	r4, #16065
 8401 01f4 B0FBF4F0 		udiv	r0, r0, r4
 8402 01f8 0790     		str	r0, [sp, #28]
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 8403              		.loc 1 4272 0
 8404 01fa 8408     		lsrs	r4, r0, #2
 8405 01fc 44F03F04 		orr	r4, r4, #63
 8406 0200 86F8C441 		strb	r4, [r6, #452]
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
 8407              		.loc 1 4273 0
 8408 0204 86F8C501 		strb	r0, [r6, #453]
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
 8409              		.loc 1 4274 0
 8410 0208 3F20     		movs	r0, #63
 8411 020a 86F8C601 		strb	r0, [r6, #454]
 8412 020e 86F8C721 		strb	r2, [r6, #455]
 8413 0212 86F8C821 		strb	r2, [r6, #456]
 8414 0216 86F8C921 		strb	r2, [r6, #457]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 247


4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8415              		.loc 1 4275 0
 8416 021a 86F8CA11 		strb	r1, [r6, #458]
 8417 021e C1F30720 		ubfx	r0, r1, #8, #8
 8418 0222 86F8CB01 		strb	r0, [r6, #459]
 8419 0226 C1F30740 		ubfx	r0, r1, #16, #8
 8420 022a 86F8CC01 		strb	r0, [r6, #460]
 8421 022e 090E     		lsrs	r1, r1, #24
 8422 0230 86F8CD11 		strb	r1, [r6, #461]
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
 8423              		.loc 1 4276 0
 8424 0234 5521     		movs	r1, #85
 8425 0236 86F8FE11 		strb	r1, [r6, #510]
 8426 023a AA21     		movs	r1, #170
 8427 023c 86F8FF11 		strb	r1, [r6, #511]
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8428              		.loc 1 4277 0
 8429 0240 3146     		mov	r1, r6
 8430 0242 3846     		mov	r0, r7
 8431 0244 FFF7FEFF 		bl	disk_write
 8432              	.LVL1243:
 8433 0248 0028     		cmp	r0, #0
 8434 024a 40F0B481 		bne	.L827
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8435              		.loc 1 4279 0
 8436 024e F824     		movs	r4, #248
 8437              	.LVL1244:
 8438              	.L790:
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(tbl, 0, SS(fs));
 8439              		.loc 1 4284 0
 8440 0250 0296     		str	r6, [sp, #8]
 8441              	.LVL1245:
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
 8442              		.loc 1 4285 0
 8443 0252 4FF40072 		mov	r2, #512
 8444 0256 0021     		movs	r1, #0
 8445 0258 3046     		mov	r0, r6
 8446 025a FFF7FEFF 		bl	mem_set
 8447              	.LVL1246:
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SS(fs);								/* Sector size */
 8448              		.loc 1 4286 0
 8449 025e 0B22     		movs	r2, #11
 8450 0260 DA49     		ldr	r1, .L849
 8451 0262 3046     		mov	r0, r6
 8452 0264 FFF7FEFF 		bl	mem_cpy
 8453              	.LVL1247:
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 8454              		.loc 1 4288 0
 8455 0268 0023     		movs	r3, #0
 8456 026a F372     		strb	r3, [r6, #11]
 8457 026c 0223     		movs	r3, #2
 8458 026e 3373     		strb	r3, [r6, #12]
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
 8459              		.loc 1 4289 0
 8460 0270 7573     		strb	r5, [r6, #13]
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 8461              		.loc 1 4290 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 248


 8462 0272 86F80EA0 		strb	r10, [r6, #14]
 8463 0276 CAF3072A 		ubfx	r10, r10, #8, #8
 8464              	.LVL1248:
 8465 027a 86F80FA0 		strb	r10, [r6, #15]
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 8466              		.loc 1 4291 0
 8467 027e 0123     		movs	r3, #1
 8468 0280 3374     		strb	r3, [r6, #16]
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
 8469              		.loc 1 4292 0
 8470 0282 B8F1030F 		cmp	r8, #3
 8471 0286 40F0FE80 		bne	.L828
 8472              	.LVL1249:
 8473 028a 0023     		movs	r3, #0
 8474              	.L791:
 8475              	.LVL1250:
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 8476              		.loc 1 4293 0 discriminator 4
 8477 028c DAB2     		uxtb	r2, r3
 8478 028e 7274     		strb	r2, [r6, #17]
 8479 0290 9BB2     		uxth	r3, r3
 8480              	.LVL1251:
 8481 0292 1B0A     		lsrs	r3, r3, #8
 8482 0294 B374     		strb	r3, [r6, #18]
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
 8483              		.loc 1 4294 0 discriminator 4
 8484 0296 069B     		ldr	r3, [sp, #24]
 8485 0298 B3F5803F 		cmp	r3, #65536
 8486 029c 80F0F680 		bcs	.L792
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8487              		.loc 1 4295 0
 8488 02a0 F374     		strb	r3, [r6, #19]
 8489 02a2 C3F30723 		ubfx	r3, r3, #8, #8
 8490 02a6 3375     		strb	r3, [r6, #20]
 8491              	.L793:
4299:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
 8492              		.loc 1 4299 0
 8493 02a8 7475     		strb	r4, [r6, #21]
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
 8494              		.loc 1 4300 0
 8495 02aa 3F23     		movs	r3, #63
 8496 02ac 3376     		strb	r3, [r6, #24]
 8497 02ae 0023     		movs	r3, #0
 8498 02b0 7376     		strb	r3, [r6, #25]
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
 8499              		.loc 1 4301 0
 8500 02b2 FF22     		movs	r2, #255
 8501 02b4 B276     		strb	r2, [r6, #26]
 8502 02b6 F376     		strb	r3, [r6, #27]
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
 8503              		.loc 1 4302 0
 8504 02b8 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 8505 02bc 3377     		strb	r3, [r6, #28]
 8506 02be 0023     		movs	r3, #0
 8507 02c0 7377     		strb	r3, [r6, #29]
 8508 02c2 B377     		strb	r3, [r6, #30]
 8509 02c4 F377     		strb	r3, [r6, #31]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 249


4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 8510              		.loc 1 4303 0
 8511 02c6 FFF7FEFF 		bl	get_fattime
 8512              	.LVL1252:
 8513 02ca 0790     		str	r0, [sp, #28]
4304:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
 8514              		.loc 1 4304 0
 8515 02cc B8F1030F 		cmp	r8, #3
 8516 02d0 40F0EA80 		bne	.L794
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 8517              		.loc 1 4305 0
 8518 02d4 86F84300 		strb	r0, [r6, #67]
 8519 02d8 C0F30723 		ubfx	r3, r0, #8, #8
 8520 02dc 86F84430 		strb	r3, [r6, #68]
 8521 02e0 C0F30743 		ubfx	r3, r0, #16, #8
 8522 02e4 86F84530 		strb	r3, [r6, #69]
 8523 02e8 000E     		lsrs	r0, r0, #24
 8524 02ea 86F84600 		strb	r0, [r6, #70]
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 8525              		.loc 1 4306 0
 8526 02ee 86F82490 		strb	r9, [r6, #36]
 8527 02f2 C9F30723 		ubfx	r3, r9, #8, #8
 8528 02f6 86F82530 		strb	r3, [r6, #37]
 8529 02fa C9F30743 		ubfx	r3, r9, #16, #8
 8530 02fe 86F82630 		strb	r3, [r6, #38]
 8531 0302 4FEA1963 		lsr	r3, r9, #24
 8532 0306 86F82730 		strb	r3, [r6, #39]
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
 8533              		.loc 1 4307 0
 8534 030a 0223     		movs	r3, #2
 8535 030c 86F82C30 		strb	r3, [r6, #44]
 8536 0310 0023     		movs	r3, #0
 8537 0312 86F82D30 		strb	r3, [r6, #45]
 8538 0316 86F82E30 		strb	r3, [r6, #46]
 8539 031a 86F82F30 		strb	r3, [r6, #47]
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
 8540              		.loc 1 4308 0
 8541 031e 0122     		movs	r2, #1
 8542 0320 86F83020 		strb	r2, [r6, #48]
 8543 0324 86F83130 		strb	r3, [r6, #49]
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 8544              		.loc 1 4309 0
 8545 0328 0622     		movs	r2, #6
 8546 032a 86F83220 		strb	r2, [r6, #50]
 8547 032e 86F83330 		strb	r3, [r6, #51]
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 8548              		.loc 1 4310 0
 8549 0332 8023     		movs	r3, #128
 8550 0334 86F84030 		strb	r3, [r6, #64]
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 8551              		.loc 1 4311 0
 8552 0338 2923     		movs	r3, #41
 8553 033a 86F84230 		strb	r3, [r6, #66]
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8554              		.loc 1 4312 0
 8555 033e 1322     		movs	r2, #19
 8556 0340 A349     		ldr	r1, .L849+4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 250


 8557 0342 06F14700 		add	r0, r6, #71
 8558 0346 FFF7FEFF 		bl	mem_cpy
 8559              	.LVL1253:
 8560              	.L795:
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 8561              		.loc 1 4320 0
 8562 034a 5523     		movs	r3, #85
 8563 034c 86F8FE31 		strb	r3, [r6, #510]
 8564 0350 AA23     		movs	r3, #170
 8565 0352 86F8FF31 		strb	r3, [r6, #511]
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
 8566              		.loc 1 4321 0
 8567 0356 0123     		movs	r3, #1
 8568 0358 019A     		ldr	r2, [sp, #4]
 8569 035a 3146     		mov	r1, r6
 8570 035c 3846     		mov	r0, r7
 8571 035e FFF7FEFF 		bl	disk_write
 8572              	.LVL1254:
 8573 0362 0028     		cmp	r0, #0
 8574 0364 40F02981 		bne	.L829
4323:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 8575              		.loc 1 4323 0
 8576 0368 B8F1030F 		cmp	r8, #3
 8577 036c 06D1     		bne	.L796
4324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8578              		.loc 1 4324 0
 8579 036e 0123     		movs	r3, #1
 8580 0370 019A     		ldr	r2, [sp, #4]
 8581 0372 0632     		adds	r2, r2, #6
 8582 0374 3146     		mov	r1, r6
 8583 0376 3846     		mov	r0, r7
 8584 0378 FFF7FEFF 		bl	disk_write
 8585              	.LVL1255:
 8586              	.L796:
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8587              		.loc 1 4344 0 discriminator 1
 8588 037c 4FF0000A 		mov	r10, #0
 8589 0380 CDF810B0 		str	fp, [sp, #16]
 8590              	.LVL1256:
 8591              	.L797:
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 8592              		.loc 1 4328 0 discriminator 1
 8593 0384 BAF1000F 		cmp	r10, #0
 8594 0388 00F0AD80 		beq	.L803
 8595 038c DDF810B0 		ldr	fp, [sp, #16]
4350:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 8596              		.loc 1 4350 0
 8597 0390 B8F1030F 		cmp	r8, #3
 8598 0394 00D0     		beq	.L805
 8599 0396 039D     		ldr	r5, [sp, #12]
 8600              	.LVL1257:
 8601              	.L805:
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8602              		.loc 1 4352 0
 8603 0398 009A     		ldr	r2, [sp]
 8604 039a 541C     		adds	r4, r2, #1
 8605              	.LVL1258:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 251


 8606 039c 0123     		movs	r3, #1
 8607 039e 0299     		ldr	r1, [sp, #8]
 8608 03a0 3846     		mov	r0, r7
 8609 03a2 FFF7FEFF 		bl	disk_write
 8610              	.LVL1259:
 8611 03a6 0028     		cmp	r0, #0
 8612 03a8 40F00D81 		bne	.L834
 8613              	.LVL1260:
 8614 03ac 0094     		str	r4, [sp]
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8615              		.loc 1 4354 0
 8616 03ae 013D     		subs	r5, r5, #1
 8617              	.LVL1261:
 8618 03b0 F2D1     		bne	.L805
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
 8619              		.loc 1 4364 0
 8620 03b2 B8F1030F 		cmp	r8, #3
 8621 03b6 3FD1     		bne	.L806
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 8622              		.loc 1 4365 0
 8623 03b8 5223     		movs	r3, #82
 8624 03ba 3370     		strb	r3, [r6]
 8625 03bc 7370     		strb	r3, [r6, #1]
 8626 03be 6123     		movs	r3, #97
 8627 03c0 B370     		strb	r3, [r6, #2]
 8628 03c2 4122     		movs	r2, #65
 8629 03c4 F270     		strb	r2, [r6, #3]
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 8630              		.loc 1 4366 0
 8631 03c6 7221     		movs	r1, #114
 8632 03c8 86F8E411 		strb	r1, [r6, #484]
 8633 03cc 86F8E511 		strb	r1, [r6, #485]
 8634 03d0 86F8E621 		strb	r2, [r6, #486]
 8635 03d4 86F8E731 		strb	r3, [r6, #487]
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 8636              		.loc 1 4367 0
 8637 03d8 0BF1FF33 		add	r3, fp, #-1
 8638 03dc 86F8E831 		strb	r3, [r6, #488]
 8639 03e0 C3F30723 		ubfx	r3, r3, #8, #8
 8640 03e4 86F8E931 		strb	r3, [r6, #489]
 8641 03e8 0BF1FF33 		add	r3, fp, #-1
 8642 03ec C3F30742 		ubfx	r2, r3, #16, #8
 8643 03f0 86F8EA21 		strb	r2, [r6, #490]
 8644 03f4 1B0E     		lsrs	r3, r3, #24
 8645 03f6 86F8EB31 		strb	r3, [r6, #491]
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 8646              		.loc 1 4368 0
 8647 03fa 0223     		movs	r3, #2
 8648 03fc 86F8EC31 		strb	r3, [r6, #492]
 8649 0400 0023     		movs	r3, #0
 8650 0402 86F8ED31 		strb	r3, [r6, #493]
 8651 0406 86F8EE31 		strb	r3, [r6, #494]
 8652 040a 86F8EF31 		strb	r3, [r6, #495]
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 8653              		.loc 1 4369 0
 8654 040e 5523     		movs	r3, #85
 8655 0410 86F8FE31 		strb	r3, [r6, #510]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 252


 8656 0414 AA23     		movs	r3, #170
 8657 0416 86F8FF31 		strb	r3, [r6, #511]
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 8658              		.loc 1 4370 0
 8659 041a 0123     		movs	r3, #1
 8660 041c 019C     		ldr	r4, [sp, #4]
 8661              	.LVL1262:
 8662 041e 2246     		mov	r2, r4
 8663 0420 1A44     		add	r2, r2, r3
 8664 0422 3146     		mov	r1, r6
 8665 0424 3846     		mov	r0, r7
 8666 0426 FFF7FEFF 		bl	disk_write
 8667              	.LVL1263:
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8668              		.loc 1 4371 0
 8669 042a 0123     		movs	r3, #1
 8670 042c 2246     		mov	r2, r4
 8671 042e 0732     		adds	r2, r2, #7
 8672 0430 3146     		mov	r1, r6
 8673 0432 3846     		mov	r0, r7
 8674 0434 FFF7FEFF 		bl	disk_write
 8675              	.LVL1264:
 8676              	.L806:
4374:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8677              		.loc 1 4374 0
 8678 0438 0022     		movs	r2, #0
 8679 043a 1146     		mov	r1, r2
 8680 043c 3846     		mov	r0, r7
 8681 043e FFF7FEFF 		bl	disk_ioctl
 8682              	.LVL1265:
 8683 0442 0030     		adds	r0, r0, #0
 8684 0444 18BF     		it	ne
 8685 0446 0120     		movne	r0, #1
 8686 0448 E1E5     		b	.L767
 8687              	.LVL1266:
 8688              	.L843:
4230:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat += n;
 8689              		.loc 1 4230 0
 8690 044a 9A44     		add	r10, r10, r3
 8691              	.LVL1267:
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 8692              		.loc 1 4231 0
 8693 044c 009A     		ldr	r2, [sp]
 8694 044e 1A44     		add	r2, r2, r3
 8695 0450 0092     		str	r2, [sp]
 8696              	.LVL1268:
 8697 0452 90E6     		b	.L785
 8698              	.LVL1269:
 8699              	.L844:
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 8700              		.loc 1 4238 0 discriminator 1
 8701 0454 40F6F573 		movw	r3, #4085
 8702 0458 9B45     		cmp	fp, r3
 8703 045a 3FF699AE 		bhi	.L786
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8704              		.loc 1 4240 0
 8705 045e 0E20     		movs	r0, #14
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 253


 8706 0460 D5E5     		b	.L767
 8707              	.L845:
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
 8708              		.loc 1 4239 0 discriminator 1
 8709 0462 4FF6F573 		movw	r3, #65525
 8710 0466 9B45     		cmp	fp, r3
 8711 0468 3FF696AE 		bhi	.L787
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8712              		.loc 1 4240 0
 8713 046c 0E20     		movs	r0, #14
 8714 046e CEE5     		b	.L767
 8715              	.L823:
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8716              		.loc 1 4244 0
 8717 0470 0C23     		movs	r3, #12
 8718 0472 0293     		str	r3, [sp, #8]
 8719 0474 A1E6     		b	.L788
 8720              	.L824:
4247:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8721              		.loc 1 4247 0
 8722 0476 CDF80880 		str	r8, [sp, #8]
 8723 047a 9EE6     		b	.L788
 8724              	.L825:
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8725              		.loc 1 4249 0
 8726 047c 0623     		movs	r3, #6
 8727 047e 0293     		str	r3, [sp, #8]
 8728 0480 9BE6     		b	.L788
 8729              	.LVL1270:
 8730              	.L826:
4262:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {	/* Create partition table (FDISK) */
 8731              		.loc 1 4262 0
 8732 0482 F024     		movs	r4, #240
 8733 0484 E4E6     		b	.L790
 8734              	.LVL1271:
 8735              	.L828:
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
 8736              		.loc 1 4292 0
 8737 0486 4FF40073 		mov	r3, #512
 8738 048a FFE6     		b	.L791
 8739              	.LVL1272:
 8740              	.L792:
4297:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8741              		.loc 1 4297 0
 8742 048c 86F82030 		strb	r3, [r6, #32]
 8743 0490 C3F30722 		ubfx	r2, r3, #8, #8
 8744 0494 86F82120 		strb	r2, [r6, #33]
 8745 0498 C3F30742 		ubfx	r2, r3, #16, #8
 8746 049c 86F82220 		strb	r2, [r6, #34]
 8747 04a0 1B0E     		lsrs	r3, r3, #24
 8748 04a2 86F82330 		strb	r3, [r6, #35]
 8749 04a6 FFE6     		b	.L793
 8750              	.L794:
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 8751              		.loc 1 4314 0
 8752 04a8 86F82700 		strb	r0, [r6, #39]
 8753 04ac C0F30723 		ubfx	r3, r0, #8, #8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 254


 8754 04b0 86F82830 		strb	r3, [r6, #40]
 8755 04b4 C0F30743 		ubfx	r3, r0, #16, #8
 8756 04b8 86F82930 		strb	r3, [r6, #41]
 8757 04bc 000E     		lsrs	r0, r0, #24
 8758 04be 86F82A00 		strb	r0, [r6, #42]
4315:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 8759              		.loc 1 4315 0
 8760 04c2 86F81690 		strb	r9, [r6, #22]
 8761 04c6 C9F30723 		ubfx	r3, r9, #8, #8
 8762 04ca F375     		strb	r3, [r6, #23]
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 8763              		.loc 1 4316 0
 8764 04cc 8023     		movs	r3, #128
 8765 04ce 86F82430 		strb	r3, [r6, #36]
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 8766              		.loc 1 4317 0
 8767 04d2 2923     		movs	r3, #41
 8768 04d4 86F82630 		strb	r3, [r6, #38]
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8769              		.loc 1 4318 0
 8770 04d8 1322     		movs	r2, #19
 8771 04da 3E49     		ldr	r1, .L849+8
 8772 04dc 06F12B00 		add	r0, r6, #43
 8773 04e0 FFF7FEFF 		bl	mem_cpy
 8774              	.LVL1273:
 8775 04e4 31E7     		b	.L795
 8776              	.LVL1274:
 8777              	.L803:
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = md;								/* Media descriptor byte */
 8778              		.loc 1 4329 0
 8779 04e6 4FF40072 		mov	r2, #512
 8780 04ea 0021     		movs	r1, #0
 8781 04ec 0298     		ldr	r0, [sp, #8]
 8782 04ee FFF7FEFF 		bl	mem_set
 8783              	.LVL1275:
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt != FS_FAT32) {
 8784              		.loc 1 4330 0
 8785 04f2 2246     		mov	r2, r4
4331:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 8786              		.loc 1 4331 0
 8787 04f4 B8F1030F 		cmp	r8, #3
 8788 04f8 39D0     		beq	.L798
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 8789              		.loc 1 4332 0
 8790 04fa B8F1010F 		cmp	r8, #1
 8791 04fe 33D1     		bne	.L830
 8792 0500 354B     		ldr	r3, .L849+12
 8793              	.L799:
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 8794              		.loc 1 4332 0 is_stmt 0 discriminator 4
 8795 0502 1343     		orrs	r3, r3, r2
 8796 0504 0793     		str	r3, [sp, #28]
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8797              		.loc 1 4333 0 is_stmt 1 discriminator 4
 8798 0506 3370     		strb	r3, [r6]
 8799 0508 BDF81C30 		ldrh	r3, [sp, #28]
 8800 050c 1B0A     		lsrs	r3, r3, #8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 255


 8801 050e 7370     		strb	r3, [r6, #1]
 8802 0510 9DF81E30 		ldrb	r3, [sp, #30]	@ zero_extendqisi2
 8803 0514 B370     		strb	r3, [r6, #2]
 8804 0516 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 8805 051a F370     		strb	r3, [r6, #3]
 8806              	.L800:
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8807              		.loc 1 4340 0
 8808 051c 009A     		ldr	r2, [sp]
 8809 051e 02F1010B 		add	fp, r2, #1
 8810              	.LVL1276:
 8811 0522 0123     		movs	r3, #1
 8812 0524 0299     		ldr	r1, [sp, #8]
 8813 0526 3846     		mov	r0, r7
 8814 0528 FFF7FEFF 		bl	disk_write
 8815              	.LVL1277:
 8816 052c 0028     		cmp	r0, #0
 8817 052e 46D1     		bne	.L831
4342:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 8818              		.loc 1 4342 0
 8819 0530 4FF40072 		mov	r2, #512
 8820 0534 0021     		movs	r1, #0
 8821 0536 0298     		ldr	r0, [sp, #8]
 8822 0538 FFF7FEFF 		bl	mem_set
 8823              	.LVL1278:
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 8824              		.loc 1 4343 0
 8825 053c 0123     		movs	r3, #1
 8826 053e 0793     		str	r3, [sp, #28]
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8827              		.loc 1 4340 0
 8828 0540 CDF800B0 		str	fp, [sp]
 8829              	.L801:
 8830              	.LVL1279:
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 8831              		.loc 1 4343 0 discriminator 1
 8832 0544 079B     		ldr	r3, [sp, #28]
 8833 0546 9945     		cmp	r9, r3
 8834 0548 2AD9     		bls	.L846
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8835              		.loc 1 4344 0
 8836 054a 009A     		ldr	r2, [sp]
 8837 054c 02F1010B 		add	fp, r2, #1
 8838              	.LVL1280:
 8839 0550 0123     		movs	r3, #1
 8840 0552 0299     		ldr	r1, [sp, #8]
 8841 0554 3846     		mov	r0, r7
 8842 0556 FFF7FEFF 		bl	disk_write
 8843              	.LVL1281:
 8844 055a 90BB     		cbnz	r0, .L832
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 8845              		.loc 1 4343 0 discriminator 2
 8846 055c 079B     		ldr	r3, [sp, #28]
 8847 055e 0133     		adds	r3, r3, #1
 8848 0560 0793     		str	r3, [sp, #28]
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8849              		.loc 1 4344 0 discriminator 2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 256


 8850 0562 CDF800B0 		str	fp, [sp]
 8851 0566 EDE7     		b	.L801
 8852              	.LVL1282:
 8853              	.L830:
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 8854              		.loc 1 4332 0
 8855 0568 6FF0FF03 		mvn	r3, #255
 8856 056c C9E7     		b	.L799
 8857              	.L798:
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
 8858              		.loc 1 4335 0
 8859 056e 64F0FF03 		orn	r3, r4, #255
 8860 0572 0793     		str	r3, [sp, #28]
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
 8861              		.loc 1 4336 0
 8862 0574 3370     		strb	r3, [r6]
 8863 0576 BDF81C30 		ldrh	r3, [sp, #28]
 8864 057a 1B0A     		lsrs	r3, r3, #8
 8865 057c 7370     		strb	r3, [r6, #1]
 8866 057e 9DF81E30 		ldrb	r3, [sp, #30]	@ zero_extendqisi2
 8867 0582 B370     		strb	r3, [r6, #2]
 8868 0584 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 8869 0588 F370     		strb	r3, [r6, #3]
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 8870              		.loc 1 4337 0
 8871 058a FF23     		movs	r3, #255
 8872 058c 3371     		strb	r3, [r6, #4]
 8873 058e 7371     		strb	r3, [r6, #5]
 8874 0590 B371     		strb	r3, [r6, #6]
 8875 0592 F371     		strb	r3, [r6, #7]
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8876              		.loc 1 4338 0
 8877 0594 3372     		strb	r3, [r6, #8]
 8878 0596 7372     		strb	r3, [r6, #9]
 8879 0598 B372     		strb	r3, [r6, #10]
 8880 059a 0F23     		movs	r3, #15
 8881 059c F372     		strb	r3, [r6, #11]
 8882 059e BDE7     		b	.L800
 8883              	.L846:
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 8884              		.loc 1 4328 0 discriminator 2
 8885 05a0 0AF1010A 		add	r10, r10, #1
 8886              	.LVL1283:
 8887 05a4 EEE6     		b	.L797
 8888              	.LVL1284:
 8889              	.L808:
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
 8890              		.loc 1 4162 0
 8891 05a6 0B20     		movs	r0, #11
 8892              	.LVL1285:
 8893 05a8 31E5     		b	.L767
 8894              	.LVL1286:
 8895              	.L809:
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
 8896              		.loc 1 4164 0
 8897 05aa 0C20     		movs	r0, #12
 8898              	.LVL1287:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 257


 8899 05ac 2FE5     		b	.L767
 8900              	.LVL1288:
 8901              	.L812:
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
 8902              		.loc 1 4188 0
 8903 05ae 0120     		movs	r0, #1
 8904 05b0 2DE5     		b	.L767
 8905              	.L813:
 8906 05b2 0120     		movs	r0, #1
 8907 05b4 2BE5     		b	.L767
 8908              	.LVL1289:
 8909              	.L827:
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF8;
 8910              		.loc 1 4278 0
 8911 05b6 0120     		movs	r0, #1
 8912 05b8 29E5     		b	.L767
 8913              	.LVL1290:
 8914              	.L829:
4322:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR + 6) */
 8915              		.loc 1 4322 0
 8916 05ba 0120     		movs	r0, #1
 8917 05bc 27E5     		b	.L767
 8918              	.LVL1291:
 8919              	.L831:
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
 8920              		.loc 1 4341 0
 8921 05be 0120     		movs	r0, #1
 8922 05c0 25E5     		b	.L767
 8923              	.L832:
4345:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8924              		.loc 1 4345 0
 8925 05c2 0120     		movs	r0, #1
 8926 05c4 23E5     		b	.L767
 8927              	.LVL1292:
 8928              	.L834:
4353:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--i);
 8929              		.loc 1 4353 0
 8930 05c6 0120     		movs	r0, #1
 8931 05c8 21E5     		b	.L767
 8932              	.L850:
 8933 05ca 00BF     		.align	2
 8934              	.L849:
 8935 05cc 00000000 		.word	.LC1
 8936 05d0 0C000000 		.word	.LC2
 8937 05d4 20000000 		.word	.LC3
 8938 05d8 00FFFF00 		.word	16776960
 8939              		.cfi_endproc
 8940              	.LFE183:
 8942              		.section	.text.f_gets,"ax",%progbits
 8943              		.align	1
 8944              		.global	f_gets
 8945              		.syntax unified
 8946              		.thumb
 8947              		.thumb_func
 8948              		.fpu fpv4-sp-d16
 8950              	f_gets:
 8951              	.LFB184:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 258


4462:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 8952              		.loc 1 4462 0
 8953              		.cfi_startproc
 8954              		@ args = 0, pretend = 0, frame = 8
 8955              		@ frame_needed = 0, uses_anonymous_args = 0
 8956              	.LVL1293:
 8957 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8958              	.LCFI115:
 8959              		.cfi_def_cfa_offset 24
 8960              		.cfi_offset 4, -24
 8961              		.cfi_offset 5, -20
 8962              		.cfi_offset 6, -16
 8963              		.cfi_offset 7, -12
 8964              		.cfi_offset 8, -8
 8965              		.cfi_offset 14, -4
 8966 0004 82B0     		sub	sp, sp, #8
 8967              	.LCFI116:
 8968              		.cfi_def_cfa_offset 32
 8969 0006 8046     		mov	r8, r0
 8970 0008 0E46     		mov	r6, r1
 8971 000a 1746     		mov	r7, r2
 8972              	.LVL1294:
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 8973              		.loc 1 4464 0
 8974 000c 0546     		mov	r5, r0
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 8975              		.loc 1 4463 0
 8976 000e 0024     		movs	r4, #0
 8977              	.LVL1295:
 8978              	.L852:
4469:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 8979              		.loc 1 4469 0
 8980 0010 731E     		subs	r3, r6, #1
 8981 0012 9C42     		cmp	r4, r3
 8982 0014 14DA     		bge	.L853
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 8983              		.loc 1 4514 0
 8984 0016 6B46     		mov	r3, sp
 8985 0018 0122     		movs	r2, #1
 8986 001a 01A9     		add	r1, sp, #4
 8987 001c 3846     		mov	r0, r7
 8988 001e FFF7FEFF 		bl	f_read
 8989              	.LVL1296:
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 8990              		.loc 1 4515 0
 8991 0022 009B     		ldr	r3, [sp]
 8992 0024 012B     		cmp	r3, #1
 8993 0026 0BD1     		bne	.L853
4516:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8994              		.loc 1 4516 0
 8995 0028 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 8996              	.LVL1297:
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 8997              		.loc 1 4518 0
 8998 002c 0D2B     		cmp	r3, #13
 8999 002e EFD0     		beq	.L852
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 259


 9000              		.loc 1 4519 0
 9001 0030 6A1C     		adds	r2, r5, #1
 9002              	.LVL1298:
 9003 0032 2B70     		strb	r3, [r5]
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 9004              		.loc 1 4520 0
 9005 0034 0134     		adds	r4, r4, #1
 9006              	.LVL1299:
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9007              		.loc 1 4521 0
 9008 0036 0A2B     		cmp	r3, #10
 9009 0038 01D0     		beq	.L857
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 9010              		.loc 1 4519 0
 9011 003a 1546     		mov	r5, r2
 9012 003c E8E7     		b	.L852
 9013              	.L857:
 9014 003e 1546     		mov	r5, r2
 9015              	.LVL1300:
 9016              	.L853:
4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 9017              		.loc 1 4523 0
 9018 0040 0023     		movs	r3, #0
 9019 0042 2B70     		strb	r3, [r5]
4524:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9020              		.loc 1 4524 0
 9021 0044 1CB1     		cbz	r4, .L858
 9022 0046 4046     		mov	r0, r8
 9023              	.L851:
4525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9024              		.loc 1 4525 0
 9025 0048 02B0     		add	sp, sp, #8
 9026              	.LCFI117:
 9027              		.cfi_remember_state
 9028              		.cfi_def_cfa_offset 24
 9029              		@ sp needed
 9030 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 9031              	.LVL1301:
 9032              	.L858:
 9033              	.LCFI118:
 9034              		.cfi_restore_state
4524:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9035              		.loc 1 4524 0
 9036 004e 0020     		movs	r0, #0
 9037 0050 FAE7     		b	.L851
 9038              		.cfi_endproc
 9039              	.LFE184:
 9041              		.section	.text.f_putc,"ax",%progbits
 9042              		.align	1
 9043              		.global	f_putc
 9044              		.syntax unified
 9045              		.thumb
 9046              		.thumb_func
 9047              		.fpu fpv4-sp-d16
 9049              	f_putc:
 9050              	.LFB186:
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 260


4597:Middlewares/Third_Party/FatFs/src/ff.c **** 
4598:Middlewares/Third_Party/FatFs/src/ff.c **** 
4599:Middlewares/Third_Party/FatFs/src/ff.c **** int f_putc (
4600:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c,	/* A character to be output */
4601:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4602:Middlewares/Third_Party/FatFs/src/ff.c **** )
4603:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9051              		.loc 1 4603 0
 9052              		.cfi_startproc
 9053              		@ args = 0, pretend = 0, frame = 80
 9054              		@ frame_needed = 0, uses_anonymous_args = 0
 9055              	.LVL1302:
 9056 0000 00B5     		push	{lr}
 9057              	.LCFI119:
 9058              		.cfi_def_cfa_offset 4
 9059              		.cfi_offset 14, -4
 9060 0002 95B0     		sub	sp, sp, #84
 9061              	.LCFI120:
 9062              		.cfi_def_cfa_offset 88
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4605:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
4606:Middlewares/Third_Party/FatFs/src/ff.c **** 
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;			/* Initialize output buffer */
 9063              		.loc 1 4608 0
 9064 0004 0191     		str	r1, [sp, #4]
4609:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9065              		.loc 1 4609 0
 9066 0006 0023     		movs	r3, #0
 9067 0008 0293     		str	r3, [sp, #8]
 9068 000a 0393     		str	r3, [sp, #12]
4610:Middlewares/Third_Party/FatFs/src/ff.c **** 
4611:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_bfd(&pb, c);	/* Put a character */
 9069              		.loc 1 4611 0
 9070 000c 0146     		mov	r1, r0
 9071              	.LVL1303:
 9072 000e 01A8     		add	r0, sp, #4
 9073              	.LVL1304:
 9074 0010 FFF7FEFF 		bl	putc_bfd
 9075              	.LVL1305:
4612:Middlewares/Third_Party/FatFs/src/ff.c **** 
4613:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0	/* Flush buffered characters to the file */
 9076              		.loc 1 4613 0
 9077 0014 029A     		ldr	r2, [sp, #8]
 9078 0016 002A     		cmp	r2, #0
 9079 0018 0DDB     		blt	.L862
4614:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9080              		.loc 1 4614 0
 9081 001a 6B46     		mov	r3, sp
 9082 001c 04A9     		add	r1, sp, #16
 9083 001e 0198     		ldr	r0, [sp, #4]
 9084 0020 FFF7FEFF 		bl	f_write
 9085              	.LVL1306:
 9086 0024 50B9     		cbnz	r0, .L863
4615:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9087              		.loc 1 4615 0
 9088 0026 009B     		ldr	r3, [sp]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 261


 9089 0028 029A     		ldr	r2, [sp, #8]
 9090 002a 9A42     		cmp	r2, r3
 9091 002c 09D1     		bne	.L864
 9092              		.loc 1 4615 0 is_stmt 0 discriminator 1
 9093 002e 0398     		ldr	r0, [sp, #12]
 9094              	.L860:
4616:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4617:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9095              		.loc 1 4617 0 is_stmt 1
 9096 0030 15B0     		add	sp, sp, #84
 9097              	.LCFI121:
 9098              		.cfi_remember_state
 9099              		.cfi_def_cfa_offset 4
 9100              		@ sp needed
 9101 0032 5DF804FB 		ldr	pc, [sp], #4
 9102              	.L862:
 9103              	.LCFI122:
 9104              		.cfi_restore_state
4616:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 9105              		.loc 1 4616 0
 9106 0036 4FF0FF30 		mov	r0, #-1
 9107 003a F9E7     		b	.L860
 9108              	.L863:
 9109 003c 4FF0FF30 		mov	r0, #-1
 9110 0040 F6E7     		b	.L860
 9111              	.L864:
 9112 0042 4FF0FF30 		mov	r0, #-1
 9113 0046 F3E7     		b	.L860
 9114              		.cfi_endproc
 9115              	.LFE186:
 9117              		.section	.text.f_puts,"ax",%progbits
 9118              		.align	1
 9119              		.global	f_puts
 9120              		.syntax unified
 9121              		.thumb
 9122              		.thumb_func
 9123              		.fpu fpv4-sp-d16
 9125              	f_puts:
 9126              	.LFB187:
4618:Middlewares/Third_Party/FatFs/src/ff.c **** 
4619:Middlewares/Third_Party/FatFs/src/ff.c **** 
4620:Middlewares/Third_Party/FatFs/src/ff.c **** 
4621:Middlewares/Third_Party/FatFs/src/ff.c **** 
4622:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4623:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a string to the file                                              */
4624:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 
4626:Middlewares/Third_Party/FatFs/src/ff.c **** int f_puts (
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp				/* Pointer to the file object */
4629:Middlewares/Third_Party/FatFs/src/ff.c **** )
4630:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9127              		.loc 1 4630 0
 9128              		.cfi_startproc
 9129              		@ args = 0, pretend = 0, frame = 80
 9130              		@ frame_needed = 0, uses_anonymous_args = 0
 9131              	.LVL1307:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 262


 9132 0000 10B5     		push	{r4, lr}
 9133              	.LCFI123:
 9134              		.cfi_def_cfa_offset 8
 9135              		.cfi_offset 4, -8
 9136              		.cfi_offset 14, -4
 9137 0002 94B0     		sub	sp, sp, #80
 9138              	.LCFI124:
 9139              		.cfi_def_cfa_offset 88
 9140 0004 0446     		mov	r4, r0
4631:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
 9141              		.loc 1 4635 0
 9142 0006 0191     		str	r1, [sp, #4]
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9143              		.loc 1 4636 0
 9144 0008 0023     		movs	r3, #0
 9145 000a 0293     		str	r3, [sp, #8]
 9146 000c 0393     		str	r3, [sp, #12]
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str)			/* Put the string */
 9147              		.loc 1 4638 0
 9148 000e 03E0     		b	.L867
 9149              	.LVL1308:
 9150              	.L868:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(&pb, *str++);
 9151              		.loc 1 4639 0
 9152 0010 0134     		adds	r4, r4, #1
 9153              	.LVL1309:
 9154 0012 01A8     		add	r0, sp, #4
 9155 0014 FFF7FEFF 		bl	putc_bfd
 9156              	.LVL1310:
 9157              	.L867:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(&pb, *str++);
 9158              		.loc 1 4638 0
 9159 0018 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 9160 001a 0029     		cmp	r1, #0
 9161 001c F8D1     		bne	.L868
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 9162              		.loc 1 4641 0
 9163 001e 029A     		ldr	r2, [sp, #8]
 9164 0020 002A     		cmp	r2, #0
 9165 0022 0CDB     		blt	.L870
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9166              		.loc 1 4642 0
 9167 0024 6B46     		mov	r3, sp
 9168 0026 04A9     		add	r1, sp, #16
 9169 0028 0198     		ldr	r0, [sp, #4]
 9170 002a FFF7FEFF 		bl	f_write
 9171              	.LVL1311:
 9172 002e 48B9     		cbnz	r0, .L871
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9173              		.loc 1 4643 0
 9174 0030 009B     		ldr	r3, [sp]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 263


 9175 0032 029A     		ldr	r2, [sp, #8]
 9176 0034 9A42     		cmp	r2, r3
 9177 0036 08D1     		bne	.L872
 9178              		.loc 1 4643 0 is_stmt 0 discriminator 1
 9179 0038 0398     		ldr	r0, [sp, #12]
 9180              	.L866:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4645:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9181              		.loc 1 4645 0 is_stmt 1
 9182 003a 14B0     		add	sp, sp, #80
 9183              	.LCFI125:
 9184              		.cfi_remember_state
 9185              		.cfi_def_cfa_offset 8
 9186              		@ sp needed
 9187 003c 10BD     		pop	{r4, pc}
 9188              	.LVL1312:
 9189              	.L870:
 9190              	.LCFI126:
 9191              		.cfi_restore_state
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 9192              		.loc 1 4644 0
 9193 003e 4FF0FF30 		mov	r0, #-1
 9194 0042 FAE7     		b	.L866
 9195              	.L871:
 9196 0044 4FF0FF30 		mov	r0, #-1
 9197 0048 F7E7     		b	.L866
 9198              	.L872:
 9199 004a 4FF0FF30 		mov	r0, #-1
 9200 004e F4E7     		b	.L866
 9201              		.cfi_endproc
 9202              	.LFE187:
 9204              		.section	.text.f_printf,"ax",%progbits
 9205              		.align	1
 9206              		.global	f_printf
 9207              		.syntax unified
 9208              		.thumb
 9209              		.thumb_func
 9210              		.fpu fpv4-sp-d16
 9212              	f_printf:
 9213              	.LFB188:
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 
4650:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4651:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a formatted string to the file                                    */
4652:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 
4654:Middlewares/Third_Party/FatFs/src/ff.c **** int f_printf (
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 	...					/* Optional arguments... */
4658:Middlewares/Third_Party/FatFs/src/ff.c **** )
4659:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9214              		.loc 1 4659 0
 9215              		.cfi_startproc
 9216              		@ args = 4, pretend = 12, frame = 104
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 264


 9217              		@ frame_needed = 0, uses_anonymous_args = 1
 9218              	.LVL1313:
 9219 0000 0EB4     		push	{r1, r2, r3}
 9220              	.LCFI127:
 9221              		.cfi_def_cfa_offset 12
 9222              		.cfi_offset 1, -12
 9223              		.cfi_offset 2, -8
 9224              		.cfi_offset 3, -4
 9225 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 9226              	.LCFI128:
 9227              		.cfi_def_cfa_offset 44
 9228              		.cfi_offset 4, -44
 9229              		.cfi_offset 5, -40
 9230              		.cfi_offset 6, -36
 9231              		.cfi_offset 7, -32
 9232              		.cfi_offset 8, -28
 9233              		.cfi_offset 9, -24
 9234              		.cfi_offset 10, -20
 9235              		.cfi_offset 14, -16
 9236 0006 9BB0     		sub	sp, sp, #108
 9237              	.LCFI129:
 9238              		.cfi_def_cfa_offset 152
 9239 0008 23AB     		add	r3, sp, #140
 9240 000a 53F8046B 		ldr	r6, [r3], #4
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE f, r;
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw, i, j, w;
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD v;
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, d, s[16], *p;
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4666:Middlewares/Third_Party/FatFs/src/ff.c **** 
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
 9241              		.loc 1 4668 0
 9242 000e 0190     		str	r0, [sp, #4]
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9243              		.loc 1 4669 0
 9244 0010 0022     		movs	r2, #0
 9245 0012 0292     		str	r2, [sp, #8]
 9246 0014 0392     		str	r2, [sp, #12]
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_start(arp, fmt);
 9247              		.loc 1 4671 0
 9248 0016 1993     		str	r3, [sp, #100]
 9249              	.LVL1314:
 9250              	.L875:
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 
4673:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 9251              		.loc 1 4674 0
 9252 0018 741C     		adds	r4, r6, #1
 9253              	.LVL1315:
 9254 001a 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9255              	.LVL1316:
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 9256              		.loc 1 4675 0
 9257 001c 0029     		cmp	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 265


 9258 001e 00F0FF80 		beq	.L876
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 9259              		.loc 1 4676 0
 9260 0022 2529     		cmp	r1, #37
 9261 0024 04D0     		beq	.L877
4677:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 9262              		.loc 1 4677 0
 9263 0026 01A8     		add	r0, sp, #4
 9264 0028 FFF7FEFF 		bl	putc_bfd
 9265              	.LVL1317:
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 9266              		.loc 1 4674 0
 9267 002c 2646     		mov	r6, r4
4678:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 9268              		.loc 1 4678 0
 9269 002e F3E7     		b	.L875
 9270              	.LVL1318:
 9271              	.L877:
4679:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = f = 0;
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 9272              		.loc 1 4681 0
 9273 0030 0236     		adds	r6, r6, #2
 9274              	.LVL1319:
 9275 0032 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 9276              	.LVL1320:
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 9277              		.loc 1 4682 0
 9278 0034 3029     		cmp	r1, #48
 9279 0036 04D0     		beq	.L930
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 9280              		.loc 1 4685 0
 9281 0038 2D29     		cmp	r1, #45
 9282 003a 06D0     		beq	.L931
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 9283              		.loc 1 4680 0
 9284 003c 0027     		movs	r7, #0
 9285              	.LVL1321:
 9286              	.L880:
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 9287              		.loc 1 4683 0
 9288 003e 0024     		movs	r4, #0
 9289 0040 0EE0     		b	.L881
 9290              	.LVL1322:
 9291              	.L930:
 9292 0042 A61C     		adds	r6, r4, #2
 9293              	.LVL1323:
 9294 0044 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 9295              	.LVL1324:
 9296 0046 0127     		movs	r7, #1
 9297 0048 F9E7     		b	.L880
 9298              	.LVL1325:
 9299              	.L931:
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
 9300              		.loc 1 4686 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 266


 9301 004a A61C     		adds	r6, r4, #2
 9302              	.LVL1326:
 9303 004c 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 9304              	.LVL1327:
 9305 004e 0227     		movs	r7, #2
 9306 0050 F5E7     		b	.L880
 9307              	.LVL1328:
 9308              	.L882:
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4688:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 9309              		.loc 1 4690 0
 9310 0052 04EB8404 		add	r4, r4, r4, lsl #2
 9311              	.LVL1329:
 9312 0056 6300     		lsls	r3, r4, #1
 9313 0058 CC18     		adds	r4, r1, r3
 9314 005a 303C     		subs	r4, r4, #48
 9315              	.LVL1330:
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 9316              		.loc 1 4691 0
 9317 005c 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9318              	.LVL1331:
 9319 005e 0136     		adds	r6, r6, #1
 9320              	.LVL1332:
 9321              	.L881:
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 9322              		.loc 1 4689 0
 9323 0060 A1F13002 		sub	r2, r1, #48
 9324 0064 D2B2     		uxtb	r2, r2
 9325 0066 092A     		cmp	r2, #9
 9326 0068 F3D9     		bls	.L882
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 9327              		.loc 1 4693 0
 9328 006a 6C29     		cmp	r1, #108
 9329 006c 1ED0     		beq	.L883
 9330              		.loc 1 4693 0 is_stmt 0 discriminator 1
 9331 006e 4C29     		cmp	r1, #76
 9332 0070 1CD0     		beq	.L883
 9333              	.L884:
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) break;
 9334              		.loc 1 4696 0 is_stmt 1
 9335 0072 0029     		cmp	r1, #0
 9336 0074 00F0D480 		beq	.L876
 9337              	.LVL1333:
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsLower(d)) d -= 0x20;
 9338              		.loc 1 4698 0
 9339 0078 A1F16103 		sub	r3, r1, #97
 9340 007c DBB2     		uxtb	r3, r3
 9341 007e 192B     		cmp	r3, #25
 9342 0080 19D8     		bhi	.L921
 9343              		.loc 1 4698 0 is_stmt 0 discriminator 1
 9344 0082 A1F12003 		sub	r3, r1, #32
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 267


 9345 0086 DBB2     		uxtb	r3, r3
 9346              	.LVL1334:
 9347              	.L885:
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
 9348              		.loc 1 4699 0 is_stmt 1
 9349 0088 A3F14202 		sub	r2, r3, #66
 9350 008c 162A     		cmp	r2, #22
 9351 008e 4FD8     		bhi	.L886
 9352 0090 DFE802F0 		tbb	[pc, r2]
 9353              	.L888:
 9354 0094 52       		.byte	(.L887-.L888)/2
 9355 0095 40       		.byte	(.L889-.L888)/2
 9356 0096 48       		.byte	(.L890-.L888)/2
 9357 0097 4E       		.byte	(.L886-.L888)/2
 9358 0098 4E       		.byte	(.L886-.L888)/2
 9359 0099 4E       		.byte	(.L886-.L888)/2
 9360 009a 4E       		.byte	(.L886-.L888)/2
 9361 009b 4E       		.byte	(.L886-.L888)/2
 9362 009c 4E       		.byte	(.L886-.L888)/2
 9363 009d 4E       		.byte	(.L886-.L888)/2
 9364 009e 4E       		.byte	(.L886-.L888)/2
 9365 009f 4E       		.byte	(.L886-.L888)/2
 9366 00a0 4E       		.byte	(.L886-.L888)/2
 9367 00a1 55       		.byte	(.L922-.L888)/2
 9368 00a2 4E       		.byte	(.L886-.L888)/2
 9369 00a3 4E       		.byte	(.L886-.L888)/2
 9370 00a4 4E       		.byte	(.L886-.L888)/2
 9371 00a5 13       		.byte	(.L892-.L888)/2
 9372 00a6 4E       		.byte	(.L886-.L888)/2
 9373 00a7 48       		.byte	(.L890-.L888)/2
 9374 00a8 4E       		.byte	(.L886-.L888)/2
 9375 00a9 4E       		.byte	(.L886-.L888)/2
 9376 00aa 4B       		.byte	(.L893-.L888)/2
 9377              	.LVL1335:
 9378 00ab 00       		.p2align 1
 9379              	.L883:
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
 9380              		.loc 1 4694 0
 9381 00ac 47F00407 		orr	r7, r7, #4
 9382              	.LVL1336:
 9383 00b0 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9384              	.LVL1337:
 9385 00b2 0136     		adds	r6, r6, #1
 9386              	.LVL1338:
 9387 00b4 DDE7     		b	.L884
 9388              	.LVL1339:
 9389              	.L921:
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 9390              		.loc 1 4697 0
 9391 00b6 0B46     		mov	r3, r1
 9392 00b8 E6E7     		b	.L885
 9393              	.LVL1340:
 9394              	.L892:
4700:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = va_arg(arp, TCHAR*);
 9395              		.loc 1 4701 0
 9396 00ba 199B     		ldr	r3, [sp, #100]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 268


 9397              	.LVL1341:
 9398 00bc 1A1D     		adds	r2, r3, #4
 9399 00be 1992     		str	r2, [sp, #100]
 9400 00c0 D3F80080 		ldr	r8, [r3]
 9401              	.LVL1342:
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 9402              		.loc 1 4702 0
 9403 00c4 0025     		movs	r5, #0
 9404 00c6 00E0     		b	.L894
 9405              	.LVL1343:
 9406              	.L895:
 9407              		.loc 1 4702 0 is_stmt 0 discriminator 3
 9408 00c8 0135     		adds	r5, r5, #1
 9409              	.LVL1344:
 9410              	.L894:
 9411              		.loc 1 4702 0 discriminator 1
 9412 00ca 18F80530 		ldrb	r3, [r8, r5]	@ zero_extendqisi2
 9413 00ce 002B     		cmp	r3, #0
 9414 00d0 FAD1     		bne	.L895
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 9415              		.loc 1 4703 0 is_stmt 1
 9416 00d2 17F0020F 		tst	r7, #2
 9417 00d6 05D0     		beq	.L896
 9418 00d8 0EE0     		b	.L899
 9419              	.LVL1345:
 9420              	.L898:
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 9421              		.loc 1 4704 0 discriminator 2
 9422 00da 2021     		movs	r1, #32
 9423 00dc 01A8     		add	r0, sp, #4
 9424 00de FFF7FEFF 		bl	putc_bfd
 9425              	.LVL1346:
 9426 00e2 3D46     		mov	r5, r7
 9427              	.LVL1347:
 9428              	.L896:
 9429              		.loc 1 4704 0 is_stmt 0 discriminator 1
 9430 00e4 6F1C     		adds	r7, r5, #1
 9431              	.LVL1348:
 9432 00e6 A542     		cmp	r5, r4
 9433 00e8 F7D3     		bcc	.L898
 9434              		.loc 1 4704 0
 9435 00ea 3D46     		mov	r5, r7
 9436 00ec 04E0     		b	.L899
 9437              	.LVL1349:
 9438              	.L900:
4705:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
 9439              		.loc 1 4706 0 is_stmt 1 discriminator 2
 9440 00ee 08F10108 		add	r8, r8, #1
 9441              	.LVL1350:
 9442 00f2 01A8     		add	r0, sp, #4
 9443 00f4 FFF7FEFF 		bl	putc_bfd
 9444              	.LVL1351:
 9445              	.L899:
 9446              		.loc 1 4706 0 is_stmt 0 discriminator 1
 9447 00f8 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 9448 00fc 0029     		cmp	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 269


 9449 00fe F6D1     		bne	.L900
 9450 0100 04E0     		b	.L901
 9451              	.LVL1352:
 9452              	.L902:
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 9453              		.loc 1 4707 0 is_stmt 1 discriminator 2
 9454 0102 2021     		movs	r1, #32
 9455 0104 01A8     		add	r0, sp, #4
 9456 0106 FFF7FEFF 		bl	putc_bfd
 9457              	.LVL1353:
 9458 010a 3D46     		mov	r5, r7
 9459              	.LVL1354:
 9460              	.L901:
 9461              		.loc 1 4707 0 is_stmt 0 discriminator 1
 9462 010c 6F1C     		adds	r7, r5, #1
 9463              	.LVL1355:
 9464 010e A542     		cmp	r5, r4
 9465 0110 F7D3     		bcc	.L902
 9466 0112 81E7     		b	.L875
 9467              	.LVL1356:
 9468              	.L889:
4708:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
4709:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'C' :					/* Character */
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
 9469              		.loc 1 4710 0 is_stmt 1
 9470 0114 199B     		ldr	r3, [sp, #100]
 9471              	.LVL1357:
 9472 0116 1A1D     		adds	r2, r3, #4
 9473 0118 1992     		str	r2, [sp, #100]
 9474 011a 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 9475              	.LVL1358:
 9476 011c 01A8     		add	r0, sp, #4
 9477 011e FFF7FEFF 		bl	putc_bfd
 9478              	.LVL1359:
 9479 0122 79E7     		b	.L875
 9480              	.LVL1360:
 9481              	.L890:
4711:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 2; break;
4713:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
4714:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 8; break;
4715:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
4716:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'U' :					/* Unsigned decimal */
4717:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 10; break;
 9482              		.loc 1 4717 0
 9483 0124 4FF00A0C 		mov	ip, #10
 9484 0128 0BE0     		b	.L891
 9485              	.LVL1361:
 9486              	.L893:
4718:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'X' :					/* Hexdecimal */
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 16; break;
 9487              		.loc 1 4719 0
 9488 012a 4FF0100C 		mov	ip, #16
 9489 012e 08E0     		b	.L891
 9490              	.LVL1362:
 9491              	.L886:
4720:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:					/* Unknown type (pass-through) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 270


4721:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c); continue;
 9492              		.loc 1 4721 0
 9493 0130 01A8     		add	r0, sp, #4
 9494 0132 FFF7FEFF 		bl	putc_bfd
 9495              	.LVL1363:
 9496 0136 6FE7     		b	.L875
 9497              	.LVL1364:
 9498              	.L887:
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
 9499              		.loc 1 4712 0
 9500 0138 4FF0020C 		mov	ip, #2
 9501 013c 01E0     		b	.L891
 9502              	.L922:
4714:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
 9503              		.loc 1 4714 0
 9504 013e 4FF0080C 		mov	ip, #8
 9505              	.L891:
 9506              	.LVL1365:
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get an argument and put it in numeral */
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
 9507              		.loc 1 4725 0
 9508 0142 17F0040F 		tst	r7, #4
 9509 0146 0AD1     		bne	.L932
 9510              		.loc 1 4725 0 is_stmt 0 discriminator 2
 9511 0148 442B     		cmp	r3, #68
 9512 014a 0DD0     		beq	.L933
 9513              		.loc 1 4725 0
 9514 014c 199A     		ldr	r2, [sp, #100]
 9515 014e 101D     		adds	r0, r2, #4
 9516 0150 1990     		str	r0, [sp, #100]
 9517 0152 1068     		ldr	r0, [r2]
 9518              	.L904:
 9519              	.LVL1366:
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9520              		.loc 1 4726 0 is_stmt 1 discriminator 8
 9521 0154 442B     		cmp	r3, #68
 9522 0156 0CD0     		beq	.L934
 9523              	.L906:
 9524              	.LVL1367:
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
4729:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 9525              		.loc 1 4730 0
 9526 0158 4FF0000E 		mov	lr, #0
 9527 015c 1EE0     		b	.L910
 9528              	.LVL1368:
 9529              	.L932:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9530              		.loc 1 4725 0
 9531 015e 199A     		ldr	r2, [sp, #100]
 9532 0160 101D     		adds	r0, r2, #4
 9533 0162 1990     		str	r0, [sp, #100]
 9534 0164 1068     		ldr	r0, [r2]
 9535 0166 F5E7     		b	.L904
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 271


 9536              	.L933:
 9537 0168 199A     		ldr	r2, [sp, #100]
 9538 016a 101D     		adds	r0, r2, #4
 9539 016c 1990     		str	r0, [sp, #100]
 9540 016e 1068     		ldr	r0, [r2]
 9541 0170 F0E7     		b	.L904
 9542              	.LVL1369:
 9543              	.L934:
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9544              		.loc 1 4726 0 discriminator 1
 9545 0172 0028     		cmp	r0, #0
 9546 0174 F0DA     		bge	.L906
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 9547              		.loc 1 4727 0
 9548 0176 4042     		negs	r0, r0
 9549              	.LVL1370:
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9550              		.loc 1 4728 0
 9551 0178 47F00807 		orr	r7, r7, #8
 9552              	.LVL1371:
 9553 017c ECE7     		b	.L906
 9554              	.LVL1372:
 9555              	.L935:
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 9556              		.loc 1 4733 0
 9557 017e 2725     		movs	r5, #39
 9558              	.L908:
 9559              		.loc 1 4733 0 is_stmt 0 discriminator 5
 9560 0180 2A44     		add	r2, r2, r5
 9561              	.LVL1373:
 9562 0182 D2B2     		uxtb	r2, r2
 9563              	.LVL1374:
 9564              	.L907:
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9565              		.loc 1 4734 0 is_stmt 1
 9566 0184 0EF10105 		add	r5, lr, #1
 9567              	.LVL1375:
 9568 0188 3032     		adds	r2, r2, #48
 9569              	.LVL1376:
 9570 018a 0DF16808 		add	r8, sp, #104
 9571 018e F044     		add	r8, r8, lr
 9572 0190 08F8182C 		strb	r2, [r8, #-24]
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof s / sizeof s[0]);
 9573              		.loc 1 4735 0
 9574 0194 73B1     		cbz	r3, .L909
 9575              		.loc 1 4735 0 is_stmt 0 discriminator 1
 9576 0196 0F2D     		cmp	r5, #15
 9577 0198 0CD8     		bhi	.L909
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9578              		.loc 1 4734 0 is_stmt 1
 9579 019a AE46     		mov	lr, r5
 9580              	.LVL1377:
 9581              	.L910:
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 9582              		.loc 1 4732 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 272


 9583 019c B0FBFCF3 		udiv	r3, r0, ip
 9584 01a0 0CFB1302 		mls	r2, ip, r3, r0
 9585 01a4 D2B2     		uxtb	r2, r2
 9586              	.LVL1378:
 9587 01a6 1846     		mov	r0, r3
 9588              	.LVL1379:
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9589              		.loc 1 4733 0
 9590 01a8 092A     		cmp	r2, #9
 9591 01aa EBD9     		bls	.L907
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9592              		.loc 1 4733 0 is_stmt 0 discriminator 1
 9593 01ac 7829     		cmp	r1, #120
 9594 01ae E6D0     		beq	.L935
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9595              		.loc 1 4733 0
 9596 01b0 0725     		movs	r5, #7
 9597 01b2 E5E7     		b	.L908
 9598              	.LVL1380:
 9599              	.L909:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) s[i++] = '-';
 9600              		.loc 1 4736 0 is_stmt 1
 9601 01b4 17F0080F 		tst	r7, #8
 9602 01b8 06D0     		beq	.L911
 9603              	.LVL1381:
 9604              		.loc 1 4736 0 is_stmt 0 discriminator 1
 9605 01ba 1AAB     		add	r3, sp, #104
 9606 01bc 1D44     		add	r5, r5, r3
 9607 01be 2D23     		movs	r3, #45
 9608 01c0 05F8183C 		strb	r3, [r5, #-24]
 9609 01c4 0EF10205 		add	r5, lr, #2
 9610              	.LVL1382:
 9611              	.L911:
4737:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 9612              		.loc 1 4737 0 is_stmt 1
 9613 01c8 17F0010F 		tst	r7, #1
 9614 01cc 03D0     		beq	.L925
 9615 01ce 4FF0300A 		mov	r10, #48
 9616              	.L912:
 9617              	.LVL1383:
 9618              		.loc 1 4737 0 is_stmt 0 discriminator 4
 9619 01d2 A846     		mov	r8, r5
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 9620              		.loc 1 4738 0 is_stmt 1 discriminator 4
 9621 01d4 07E0     		b	.L913
 9622              	.LVL1384:
 9623              	.L925:
4737:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 9624              		.loc 1 4737 0
 9625 01d6 4FF0200A 		mov	r10, #32
 9626 01da FAE7     		b	.L912
 9627              	.LVL1385:
 9628              	.L915:
 9629              		.loc 1 4738 0 discriminator 3
 9630 01dc 5146     		mov	r1, r10
 9631 01de 01A8     		add	r0, sp, #4
 9632 01e0 FFF7FEFF 		bl	putc_bfd
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 273


 9633              	.LVL1386:
 9634 01e4 C846     		mov	r8, r9
 9635              	.LVL1387:
 9636              	.L913:
 9637              		.loc 1 4738 0 is_stmt 0 discriminator 1
 9638 01e6 17F0020F 		tst	r7, #2
 9639 01ea 04D1     		bne	.L916
 9640              		.loc 1 4738 0 discriminator 2
 9641 01ec 08F10109 		add	r9, r8, #1
 9642              	.LVL1388:
 9643 01f0 A045     		cmp	r8, r4
 9644 01f2 F3D3     		bcc	.L915
 9645              		.loc 1 4738 0
 9646 01f4 C846     		mov	r8, r9
 9647              	.LVL1389:
 9648              	.L916:
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
 9649              		.loc 1 4739 0 is_stmt 1 discriminator 1
 9650 01f6 013D     		subs	r5, r5, #1
 9651              	.LVL1390:
 9652 01f8 1AAB     		add	r3, sp, #104
 9653 01fa 2B44     		add	r3, r3, r5
 9654 01fc 13F8181C 		ldrb	r1, [r3, #-24]	@ zero_extendqisi2
 9655 0200 01A8     		add	r0, sp, #4
 9656 0202 FFF7FEFF 		bl	putc_bfd
 9657              	.LVL1391:
 9658 0206 002D     		cmp	r5, #0
 9659 0208 F5D1     		bne	.L916
 9660              	.LVL1392:
 9661              	.L917:
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 9662              		.loc 1 4740 0 discriminator 1
 9663 020a 08F10105 		add	r5, r8, #1
 9664              	.LVL1393:
 9665 020e A045     		cmp	r8, r4
 9666 0210 BFF402AF 		bcs	.L875
 9667              		.loc 1 4740 0 is_stmt 0 discriminator 2
 9668 0214 5146     		mov	r1, r10
 9669 0216 01A8     		add	r0, sp, #4
 9670 0218 FFF7FEFF 		bl	putc_bfd
 9671              	.LVL1394:
 9672 021c A846     		mov	r8, r5
 9673 021e F4E7     		b	.L917
 9674              	.LVL1395:
 9675              	.L876:
4741:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4742:Middlewares/Third_Party/FatFs/src/ff.c **** 
4743:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_end(arp);
4744:Middlewares/Third_Party/FatFs/src/ff.c **** 
4745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 9676              		.loc 1 4745 0 is_stmt 1
 9677 0220 029A     		ldr	r2, [sp, #8]
 9678 0222 002A     		cmp	r2, #0
 9679 0224 0FDB     		blt	.L926
4746:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9680              		.loc 1 4746 0
 9681 0226 18AB     		add	r3, sp, #96
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 274


 9682 0228 04A9     		add	r1, sp, #16
 9683              	.LVL1396:
 9684 022a 0198     		ldr	r0, [sp, #4]
 9685 022c FFF7FEFF 		bl	f_write
 9686              	.LVL1397:
 9687 0230 60B9     		cbnz	r0, .L927
4747:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9688              		.loc 1 4747 0
 9689 0232 189B     		ldr	r3, [sp, #96]
 9690 0234 029A     		ldr	r2, [sp, #8]
 9691 0236 9A42     		cmp	r2, r3
 9692 0238 0BD1     		bne	.L928
 9693              		.loc 1 4747 0 is_stmt 0 discriminator 1
 9694 023a 0398     		ldr	r0, [sp, #12]
 9695              	.L874:
4748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4749:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9696              		.loc 1 4749 0 is_stmt 1
 9697 023c 1BB0     		add	sp, sp, #108
 9698              	.LCFI130:
 9699              		.cfi_remember_state
 9700              		.cfi_def_cfa_offset 44
 9701              		@ sp needed
 9702 023e BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 9703              	.LCFI131:
 9704              		.cfi_restore 14
 9705              		.cfi_restore 10
 9706              		.cfi_restore 9
 9707              		.cfi_restore 8
 9708              		.cfi_restore 7
 9709              		.cfi_restore 6
 9710              		.cfi_restore 5
 9711              		.cfi_restore 4
 9712              		.cfi_def_cfa_offset 12
 9713 0242 03B0     		add	sp, sp, #12
 9714              	.LCFI132:
 9715              		.cfi_restore 3
 9716              		.cfi_restore 2
 9717              		.cfi_restore 1
 9718              		.cfi_def_cfa_offset 0
 9719 0244 7047     		bx	lr
 9720              	.LVL1398:
 9721              	.L926:
 9722              	.LCFI133:
 9723              		.cfi_restore_state
4748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 9724              		.loc 1 4748 0
 9725 0246 4FF0FF30 		mov	r0, #-1
 9726 024a F7E7     		b	.L874
 9727              	.LVL1399:
 9728              	.L927:
 9729 024c 4FF0FF30 		mov	r0, #-1
 9730 0250 F4E7     		b	.L874
 9731              	.L928:
 9732 0252 4FF0FF30 		mov	r0, #-1
 9733 0256 F1E7     		b	.L874
 9734              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 275


 9735              	.LFE188:
 9737              		.section	.bss.FatFs,"aw",%nobits
 9738              		.align	2
 9739              		.set	.LANCHOR2,. + 0
 9742              	FatFs:
 9743 0000 00000000 		.space	4
 9744              		.section	.bss.Files,"aw",%nobits
 9745              		.align	2
 9746              		.set	.LANCHOR0,. + 0
 9749              	Files:
 9750 0000 00000000 		.space	24
 9750      00000000 
 9750      00000000 
 9750      00000000 
 9750      00000000 
 9751              		.section	.bss.Fsid,"aw",%nobits
 9752              		.align	1
 9753              		.set	.LANCHOR3,. + 0
 9756              	Fsid:
 9757 0000 0000     		.space	2
 9758              		.section	.rodata.ExCvt,"a",%progbits
 9759              		.align	2
 9760              		.set	.LANCHOR1,. + 0
 9763              	ExCvt:
 9764 0000 80       		.byte	-128
 9765 0001 9A       		.byte	-102
 9766 0002 90       		.byte	-112
 9767 0003 B6       		.byte	-74
 9768 0004 8E       		.byte	-114
 9769 0005 B7       		.byte	-73
 9770 0006 8F       		.byte	-113
 9771 0007 80       		.byte	-128
 9772 0008 D2       		.byte	-46
 9773 0009 D3       		.byte	-45
 9774 000a D4       		.byte	-44
 9775 000b D8       		.byte	-40
 9776 000c D7       		.byte	-41
 9777 000d DE       		.byte	-34
 9778 000e 8E       		.byte	-114
 9779 000f 8F       		.byte	-113
 9780 0010 90       		.byte	-112
 9781 0011 92       		.byte	-110
 9782 0012 92       		.byte	-110
 9783 0013 E2       		.byte	-30
 9784 0014 99       		.byte	-103
 9785 0015 E3       		.byte	-29
 9786 0016 EA       		.byte	-22
 9787 0017 EB       		.byte	-21
 9788 0018 59       		.byte	89
 9789 0019 99       		.byte	-103
 9790 001a 9A       		.byte	-102
 9791 001b 9D       		.byte	-99
 9792 001c 9C       		.byte	-100
 9793 001d 9D       		.byte	-99
 9794 001e 9E       		.byte	-98
 9795 001f 9F       		.byte	-97
 9796 0020 B5       		.byte	-75
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 276


 9797 0021 D6       		.byte	-42
 9798 0022 E0       		.byte	-32
 9799 0023 E9       		.byte	-23
 9800 0024 A5       		.byte	-91
 9801 0025 A5       		.byte	-91
 9802 0026 A6       		.byte	-90
 9803 0027 A7       		.byte	-89
 9804 0028 A8       		.byte	-88
 9805 0029 A9       		.byte	-87
 9806 002a AA       		.byte	-86
 9807 002b AB       		.byte	-85
 9808 002c AC       		.byte	-84
 9809 002d 21       		.byte	33
 9810 002e AE       		.byte	-82
 9811 002f AF       		.byte	-81
 9812 0030 B0       		.byte	-80
 9813 0031 B1       		.byte	-79
 9814 0032 B2       		.byte	-78
 9815 0033 B3       		.byte	-77
 9816 0034 B4       		.byte	-76
 9817 0035 B5       		.byte	-75
 9818 0036 B6       		.byte	-74
 9819 0037 B7       		.byte	-73
 9820 0038 B8       		.byte	-72
 9821 0039 B9       		.byte	-71
 9822 003a BA       		.byte	-70
 9823 003b BB       		.byte	-69
 9824 003c BC       		.byte	-68
 9825 003d BD       		.byte	-67
 9826 003e BE       		.byte	-66
 9827 003f BF       		.byte	-65
 9828 0040 C0       		.byte	-64
 9829 0041 C1       		.byte	-63
 9830 0042 C2       		.byte	-62
 9831 0043 C3       		.byte	-61
 9832 0044 C4       		.byte	-60
 9833 0045 C5       		.byte	-59
 9834 0046 C7       		.byte	-57
 9835 0047 C7       		.byte	-57
 9836 0048 C8       		.byte	-56
 9837 0049 C9       		.byte	-55
 9838 004a CA       		.byte	-54
 9839 004b CB       		.byte	-53
 9840 004c CC       		.byte	-52
 9841 004d CD       		.byte	-51
 9842 004e CE       		.byte	-50
 9843 004f CF       		.byte	-49
 9844 0050 D0       		.byte	-48
 9845 0051 D1       		.byte	-47
 9846 0052 D2       		.byte	-46
 9847 0053 D3       		.byte	-45
 9848 0054 D4       		.byte	-44
 9849 0055 D5       		.byte	-43
 9850 0056 D6       		.byte	-42
 9851 0057 D7       		.byte	-41
 9852 0058 D8       		.byte	-40
 9853 0059 D9       		.byte	-39
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 277


 9854 005a DA       		.byte	-38
 9855 005b DB       		.byte	-37
 9856 005c DC       		.byte	-36
 9857 005d DD       		.byte	-35
 9858 005e DE       		.byte	-34
 9859 005f DF       		.byte	-33
 9860 0060 E0       		.byte	-32
 9861 0061 E1       		.byte	-31
 9862 0062 E2       		.byte	-30
 9863 0063 E3       		.byte	-29
 9864 0064 E5       		.byte	-27
 9865 0065 E5       		.byte	-27
 9866 0066 E6       		.byte	-26
 9867 0067 E7       		.byte	-25
 9868 0068 E7       		.byte	-25
 9869 0069 E9       		.byte	-23
 9870 006a EA       		.byte	-22
 9871 006b EB       		.byte	-21
 9872 006c ED       		.byte	-19
 9873 006d ED       		.byte	-19
 9874 006e EE       		.byte	-18
 9875 006f EF       		.byte	-17
 9876 0070 F0       		.byte	-16
 9877 0071 F1       		.byte	-15
 9878 0072 F2       		.byte	-14
 9879 0073 F3       		.byte	-13
 9880 0074 F4       		.byte	-12
 9881 0075 F5       		.byte	-11
 9882 0076 F6       		.byte	-10
 9883 0077 F7       		.byte	-9
 9884 0078 F8       		.byte	-8
 9885 0079 F9       		.byte	-7
 9886 007a FA       		.byte	-6
 9887 007b FB       		.byte	-5
 9888 007c FC       		.byte	-4
 9889 007d FD       		.byte	-3
 9890 007e FE       		.byte	-2
 9891 007f FF       		.byte	-1
 9892              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 9893              		.align	2
 9894              	.LC0:
 9895 0000 222A2B2C 		.ascii	"\"*+,:;<=>?[]|\177\000"
 9895      3A3B3C3D 
 9895      3E3F5B5D 
 9895      7C7F00
 9896              		.section	.rodata.cst.12153,"a",%progbits
 9897              		.align	2
 9898              		.set	.LANCHOR5,. + 0
 9901              	cst.12153:
 9902 0000 0080     		.short	-32768
 9903 0002 0040     		.short	16384
 9904 0004 0020     		.short	8192
 9905 0006 0010     		.short	4096
 9906 0008 0008     		.short	2048
 9907 000a 0040     		.short	16384
 9908 000c 0020     		.short	8192
 9909 000e 0010     		.short	4096
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 278


 9910 0010 0008     		.short	2048
 9911 0012 0004     		.short	1024
 9912 0014 0002     		.short	512
 9913              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 9914              		.align	2
 9915              	.LC1:
 9916 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 9916      53444F53 
 9916      352E3000 
 9917              	.LC2:
 9918 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 9918      414D4520 
 9918      20202046 
 9918      41543332 
 9918      20202000 
 9919              	.LC3:
 9920 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 9920      414D4520 
 9920      20202046 
 9920      41542020 
 9920      20202000 
 9921              		.section	.rodata.vst.12152,"a",%progbits
 9922              		.align	2
 9923              		.set	.LANCHOR4,. + 0
 9926              	vst.12152:
 9927 0000 0004     		.short	1024
 9928 0002 0002     		.short	512
 9929 0004 0001     		.short	256
 9930 0006 8000     		.short	128
 9931 0008 4000     		.short	64
 9932 000a 2000     		.short	32
 9933 000c 1000     		.short	16
 9934 000e 0800     		.short	8
 9935 0010 0400     		.short	4
 9936 0012 0200     		.short	2
 9937 0014 0000     		.short	0
 9938              		.text
 9939              	.Letext0:
 9940              		.file 2 "Middlewares/Third_Party/FatFs/src/integer.h"
 9941              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 9942              		.file 4 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 9943              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 9944              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 9945              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stdarg.h"
 9946              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdio.h"
 9947              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 9948              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 9949              		.file 11 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 9950              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 9951              		.file 13 "<built-in>"
 9952              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 9953              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 9954              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 9955              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 9956              		.file 18 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 9957              		.file 19 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 9958              		.file 20 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 279


 9959              		.file 21 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 9960              		.file 22 "Middlewares/Third_Party/FatFs/src/ff.h"
 9961              		.file 23 "Middlewares/Third_Party/FatFs/src/diskio.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 280


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:18     .text.mem_cpy:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:24     .text.mem_cpy:00000000 mem_cpy
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:58     .text.mem_set:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:64     .text.mem_set:00000000 mem_set
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:94     .text.mem_cmp:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:100    .text.mem_cmp:00000000 mem_cmp
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:160    .text.chk_chr:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:166    .text.chk_chr:00000000 chk_chr
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:196    .text.chk_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:202    .text.chk_lock:00000000 chk_lock
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:329    .text.chk_lock:00000088 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:334    .text.enq_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:340    .text.enq_lock:00000000 enq_lock
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:378    .text.enq_lock:00000020 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:383    .text.inc_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:389    .text.inc_lock:00000000 inc_lock
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:556    .text.inc_lock:000000cc $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:561    .text.dec_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:567    .text.dec_lock:00000000 dec_lock
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:636    .text.dec_lock:00000040 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:641    .text.clear_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:647    .text.clear_lock:00000000 clear_lock
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:704    .text.clear_lock:00000034 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:709    .text.clmt_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:715    .text.clmt_clust:00000000 clmt_clust
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:763    .text.ld_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:769    .text.ld_clust:00000000 ld_clust
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:806    .text.st_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:812    .text.st_clust:00000000 st_clust
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:835    .text.get_fileinfo:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:841    .text.get_fileinfo:00000000 get_fileinfo
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:950    .text.create_name:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:956    .text.create_name:00000000 create_name
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1195   .text.create_name:00000118 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1201   .text.get_ldnumber:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1207   .text.get_ldnumber:00000000 get_ldnumber
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1310   .text.sync_window:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1316   .text.sync_window:00000000 sync_window
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1407   .text.move_window:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1413   .text.move_window:00000000 move_window
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1474   .text.check_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1480   .text.check_fs:00000000 check_fs
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1562   .text.check_fs:0000008c $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1568   .text.lock_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1574   .text.lock_fs:00000000 lock_fs
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1597   .text.find_volume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:1603   .text.find_volume:00000000 find_volume
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2122   .text.find_volume:0000033c $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2132   .text.find_volume:00000350 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2193   .text.validate:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2199   .text.validate:00000000 validate
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2285   .text.unlock_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2291   .text.unlock_fs:00000000 unlock_fs
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2336   .text.sync_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2342   .text.sync_fs:00000000 sync_fs
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 281


C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2451   .text.clust2sect:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2458   .text.clust2sect:00000000 clust2sect
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2491   .text.get_fat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2498   .text.get_fat:00000000 get_fat
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2682   .text.dir_sdi:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2688   .text.dir_sdi:00000000 dir_sdi
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2843   .text.dir_remove:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2849   .text.dir_remove:00000000 dir_remove
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2908   .text.put_fat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:2915   .text.put_fat:00000000 put_fat
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3128   .text.create_chain:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3134   .text.create_chain:00000000 create_chain
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3316   .text.dir_next:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3322   .text.dir_next:00000000 dir_next
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3546   .text.dir_find:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3552   .text.dir_find:00000000 dir_find
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3631   .text.follow_path:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3637   .text.follow_path:00000000 follow_path
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3763   .text.dir_alloc:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3769   .text.dir_alloc:00000000 dir_alloc
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3856   .text.dir_register:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3862   .text.dir_register:00000000 dir_register
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3923   .text.dir_read:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:3929   .text.dir_read:00000000 dir_read
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4024   .text.remove_chain:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4030   .text.remove_chain:00000000 remove_chain
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4131   .text.f_mount:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4138   .text.f_mount:00000000 f_mount
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4265   .text.f_mount:00000088 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4270   .text.f_open:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4277   .text.f_open:00000000 f_open
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4603   .text.f_read:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4610   .text.f_read:00000000 f_read
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4969   .text.f_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:4976   .text.f_write:00000000 f_write
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5369   .text.putc_bfd:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5375   .text.putc_bfd:00000000 putc_bfd
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5465   .text.f_sync:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5472   .text.f_sync:00000000 f_sync
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5603   .text.f_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5610   .text.f_close:00000000 f_close
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5675   .text.f_lseek:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:5682   .text.f_lseek:00000000 f_lseek
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6254   .text.f_opendir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6261   .text.f_opendir:00000000 f_opendir
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6409   .text.f_closedir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6416   .text.f_closedir:00000000 f_closedir
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6477   .text.f_readdir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6484   .text.f_readdir:00000000 f_readdir
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6596   .text.f_stat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6603   .text.f_stat:00000000 f_stat
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6686   .text.f_getfree:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6693   .text.f_getfree:00000000 f_getfree
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6911   .text.f_truncate:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:6918   .text.f_truncate:00000000 f_truncate
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7084   .text.f_unlink:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7091   .text.f_unlink:00000000 f_unlink
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s 			page 282


C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7279   .text.f_mkdir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7286   .text.f_mkdir:00000000 f_mkdir
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7585   .text.f_chmod:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7592   .text.f_chmod:00000000 f_chmod
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7692   .text.f_rename:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7699   .text.f_rename:00000000 f_rename
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7928   .text.f_utime:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:7935   .text.f_utime:00000000 f_utime
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8034   .text.f_mkfs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8041   .text.f_mkfs:00000000 f_mkfs
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8300   .text.f_mkfs:00000134 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8306   .text.f_mkfs:00000140 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8935   .text.f_mkfs:000005cc $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8943   .text.f_gets:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:8950   .text.f_gets:00000000 f_gets
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9042   .text.f_putc:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9049   .text.f_putc:00000000 f_putc
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9118   .text.f_puts:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9125   .text.f_puts:00000000 f_puts
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9205   .text.f_printf:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9212   .text.f_printf:00000000 f_printf
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9354   .text.f_printf:00000094 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9738   .bss.FatFs:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9742   .bss.FatFs:00000000 FatFs
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9745   .bss.Files:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9749   .bss.Files:00000000 Files
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9752   .bss.Fsid:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9756   .bss.Fsid:00000000 Fsid
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9759   .rodata.ExCvt:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9763   .rodata.ExCvt:00000000 ExCvt
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9893   .rodata.create_name.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9897   .rodata.cst.12153:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9901   .rodata.cst.12153:00000000 cst.12153
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9914   .rodata.f_mkfs.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9922   .rodata.vst.12152:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9926   .rodata.vst.12152:00000000 vst.12152
                     .debug_frame:00000010 $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9378   .text.f_printf:000000ab $d
C:\Users\Student\AppData\Local\Temp\cc7BL0cc.s:9378   .text.f_printf:000000ac $t

UNDEFINED SYMBOLS
disk_write
disk_read
ff_req_grant
disk_status
disk_initialize
ff_rel_grant
disk_ioctl
ff_del_syncobj
ff_cre_syncobj
get_fattime
