ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32f4_discovery_audio.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.I2S3_Init,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	I2S3_Init:
  25              	.LFB142:
  26              		.file 1 "Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c"
   1:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
   2:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   ******************************************************************************
   3:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @file    stm32f4_discovery_audio.c
   4:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @author  MCD Application Team
   5:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @version V2.1.2
   6:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @date    27-January-2017
   7:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief   This file provides the Audio driver for the STM32F4-Discovery 
   8:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          board.  
   9:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   ******************************************************************************
  10:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @attention
  11:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *
  12:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * <h2><center>&copy; COPYRIGHT(c) 2017 STMicroelectronics</center></h2>
  13:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *
  14:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * Redistribution and use in source and binary forms, with or without modification,
  15:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * are permitted provided that the following conditions are met:
  16:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *   1. Redistributions of source code must retain the above copyright notice,
  17:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *      this list of conditions and the following disclaimer.
  18:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
  19:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *      this list of conditions and the following disclaimer in the documentation
  20:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *      and/or other materials provided with the distribution.
  21:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
  22:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *      may be used to endorse or promote products derived from this software
  23:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *      without specific prior written permission.
  24:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *
  25:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  26:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  27:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  28:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  29:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  30:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  31:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  32:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 2


  33:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  34:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  35:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *
  36:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   ******************************************************************************
  37:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
  38:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
  39:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /*==============================================================================
  40:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                              User NOTES
  41:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 1. How To use this driver:
  42:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** --------------------------
  43:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    - This driver supports STM32F4xx devices on STM32F4-Discovery Kit:
  44:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****         a) to play an audio file (all functions names start by BSP_AUDIO_OUT_xxx)
  45:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****         b) to record an audio file through MP45DT02, ST MEMS (all functions names start by AUDIO_IN
  46:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
  47:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** a) PLAY A FILE:
  48:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** ==============
  49:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_OUT_Init(
  50:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     OutputDevice: physical output mode (OUTPUT_DEVICE_SPEAKER, 
  51:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                                  OUTPUT_DEVICE_HEADPHONE, OUTPUT_DEVICE_AUTO or 
  52:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                                  OUTPUT_DEVICE_BOTH)
  53:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     Volume: initial volume to be set (0 is min (mute), 100 is max (
  54:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     AudioFreq: Audio frequency in Hz (8000, 16000, 22500, 32000 ...
  55:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     this parameter is relative to the audio file/stream type.
  56:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                    )
  57:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       This function configures all the hardware required for the audio application (codec, I2C, I2S
  58:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       GPIOs, DMA and interrupt if needed). This function returns 0 if configuration is OK.
  59:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       If the returned value is different from 0 or the function is stuck then the communication wit
  60:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       the codec (try to un-plug the power or reset device in this case).
  61:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       - OUTPUT_DEVICE_SPEAKER: only speaker will be set as output for the audio stream.
  62:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       - OUTPUT_DEVICE_HEADPHONE: only headphones will be set as output for the audio stream.
  63:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       - OUTPUT_DEVICE_AUTO: Selection of output device is made through external switch (implemented
  64:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****          into the audio jack on the discovery board). When the Headphone is connected it is used
  65:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****          as output. When the headphone is disconnected from the audio jack, the output is
  66:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****          automatically switched to Speaker.
  67:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       - OUTPUT_DEVICE_BOTH: both Speaker and Headphone are used as outputs for the audio stream
  68:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****          at the same time.
  69:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_OUT_Play(
  70:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                   pBuffer: pointer to the audio data file address
  71:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                   Size: size of the buffer to be sent in Bytes
  72:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                  )
  73:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       to start playing (for the first time) from the audio file/stream.
  74:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_OUT_Pause() to pause playing 
  75:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_OUT_Resume() to resume playing.
  76:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        Note. After calling BSP_AUDIO_OUT_Pause() function for pause, only BSP_AUDIO_OUT_Resume() sh
  77:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****           for resume (it is not allowed to call BSP_AUDIO_OUT_Play() in this case).
  78:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        Note. This function should be called only when the audio file is played or paused (not stopp
  79:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + For each mode, you may need to implement the relative callback functions into your code.
  80:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       The Callback functions are named BSP_AUDIO_OUT_XXXCallBack() and only their prototypes are de
  81:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       the stm32f4_discovery_audio.h file. (refer to the example for more details on the callbacks i
  82:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + To Stop playing, to modify the volume level, the frequency or to mute, use the functions
  83:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        BSP_AUDIO_OUT_Stop(), BSP_AUDIO_OUT_SetVolume(), AUDIO_OUT_SetFrequency() BSP_AUDIO_OUT_SetO
  84:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + The driver API and the callback functions are at the end of the stm32f4_discovery_audio.h file
  85:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    
  86:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** Driver architecture:
  87:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** --------------------
  88:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + This driver provide the High Audio Layer: consists of the function API exported in the stm32f4
  89:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        (BSP_AUDIO_OUT_Init(), BSP_AUDIO_OUT_Play() ...)
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 3


  90:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + This driver provide also the Media Access Layer (MAL): which consists of functions allowing to
  91:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        providing the audio file/stream. These functions are also included as local functions into
  92:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        the stm32f4_discovery_audio.c file (I2S3_Init()...)
  93:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
  94:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** Known Limitations:
  95:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** -------------------
  96:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    1- When using the Speaker, if the audio file quality is not high enough, the speaker output
  97:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       may produce high and uncomfortable noise level. To avoid this issue, to use speaker
  98:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       output properly, try to increase audio file sampling rate (typically higher than 48KHz).
  99:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       This operation will lead to larger file size.
 100:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    2- Communication with the audio codec (through I2C) may be corrupted if it is interrupted by som
 101:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       user interrupt routines (in this case, interrupts could be disabled just before the start of 
 102:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       communication then re-enabled when it is over). Note that this communication is only done at
 103:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       the configuration phase (BSP_AUDIO_OUT_Init() or BSP_AUDIO_OUT_Stop()) and when Volume contro
 104:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       performed (BSP_AUDIO_OUT_SetVolume() or BSP_AUDIO_OUT_SetMute()or BSP_AUDIO_OUT_SetOutputMode
 105:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       When the audio data is played, no communication is required with the audio codec.
 106:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    3- Parsing of audio file is not implemented (in order to determine audio file properties: Mono/S
 107:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       File size, Audio Frequency, Audio Data header size ...). The configuration is fixed for the g
 108:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    4- Supports only Stereo audio streaming. To play mono audio streams, each data should be sent tw
 109:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       on the I2S or should be duplicated on the source buffer. Or convert the stream in stereo befo
 110:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    5- Supports only 16-bits audio data size.
 111:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 112:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** b) RECORD A FILE:
 113:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** ================
 114:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_IN_Init(
 115:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     AudioFreq: Audio frequency in Hz (8000, 16000, 22500, 32000 ...
 116:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                                     )
 117:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       This function configures all the hardware required for the audio application (I2S, 
 118:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       GPIOs, DMA and interrupt if needed). This function returns 0 if configuration is OK.
 119:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 120:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function BSP_AUDIO_IN_Record(
 121:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                             pbuf Main buffer pointer for the recorded data storing  
 122:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                             size Current size of the recorded buffer
 123:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                             )
 124:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       to start recording from the microphone.
 125:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 126:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + User needs to implement user callbacks to retrieve data saved in the record buffer
 127:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       (AUDIO_IN_RxHalfCpltCallback/BSP_AUDIO_IN_ReceiveComplete_CallBack)
 128:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 129:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****    + Call the function AUDIO_IN_STOP() to stop recording 
 130:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 131:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** ==============================================================================*/
 132:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 133:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /* Includes ------------------------------------------------------------------*/
 134:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** #include "stm32f4_discovery_audio.h"
 135:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 136:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @addtogroup BSP
 137:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 138:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 139:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 140:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @addtogroup STM32F4_DISCOVERY
 141:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 142:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 143:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 144:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO STM32F4 DISCOVERY AUDIO
 145:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief This file includes the low layer audio driver available on STM32F4-Discovery
 146:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *        discovery board.
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 4


 147:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 148:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 149:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 150:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_Private_Types STM32F4 DISCOVERY AUDIO Private Types
 151:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 152:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 153:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 154:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 155:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 156:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 157:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_Private_Defines STM32F4 DISCOVERY AUDIO Private Defines
 158:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 159:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 160:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /* These PLL parameters are valid when the f(VCO clock) = 1Mhz */
 161:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** const uint32_t I2SFreq[8] = {8000, 11025, 16000, 22050, 32000, 44100, 48000, 96000};
 162:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** const uint32_t I2SPLLN[8] = {256, 429, 213, 429, 426, 271, 258, 344};
 163:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** const uint32_t I2SPLLR[8] = {5, 4, 4, 4, 4, 6, 3, 1};
 164:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 165:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 166:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 167:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 168:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_Private_Macros STM32F4 DISCOVERY AUDIO Private Macros
 169:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 170:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 171:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 172:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 173:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 174:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 175:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_Private_Variables STM32F4 DISCOVERY AUDIO Private Variables
 176:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 177:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 178:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /*##### PLAY #####*/
 179:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static AUDIO_DrvTypeDef           *pAudioDrv;
 180:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** I2S_HandleTypeDef                 hAudioOutI2s;
 181:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 182:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /*### RECORDER ###*/
 183:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** I2S_HandleTypeDef                 hAudioInI2s;
 184:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 185:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** PDMFilter_InitStruct Filter[DEFAULT_AUDIO_IN_CHANNEL_NBR];
 186:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __IO uint16_t AudioInVolume = DEFAULT_AUDIO_IN_VOLUME;
 187:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 188:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 189:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 190:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 191:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_Private_Function_Prototypes STM32F4 DISCOVERY AUDIO Private F
 192:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 193:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 194:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static uint8_t I2S3_Init(uint32_t AudioFreq);
 195:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static uint8_t I2S2_Init(uint32_t AudioFreq);
 196:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static void PDMDecoder_Init(uint32_t AudioFreq, uint32_t ChnlNbr);
 197:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 198:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 199:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 200:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 201:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_OUT_Private_Functions STM32F4 DISCOVERY AUDIO OUT Private Fun
 202:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 203:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 5


 204:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 205:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 206:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Configures the audio peripherals.
 207:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  OutputDevice: OUTPUT_DEVICE_SPEAKER, OUTPUT_DEVICE_HEADPHONE,
 208:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *                       OUTPUT_DEVICE_BOTH or OUTPUT_DEVICE_AUTO .
 209:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Volume: Initial volume level (from 0 (Mute) to 100 (Max))
 210:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency used to play the audio stream.
 211:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 212:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 213:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_Init(uint16_t OutputDevice, uint8_t Volume, uint32_t AudioFreq)
 214:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {    
 215:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint8_t ret = AUDIO_OK;
 216:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 217:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLL clock is set depending by the AudioFreq (44.1khz vs 48khz groups) */ 
 218:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   BSP_AUDIO_OUT_ClockConfig(&hAudioOutI2s, AudioFreq, NULL);
 219:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 220:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S data transfer preparation:
 221:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   Prepare the Media to be used for the audio transfer from memory to I2S peripheral */
 222:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Instance = I2S3;
 223:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_GetState(&hAudioOutI2s) == HAL_I2S_STATE_RESET)
 224:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 225:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Init the I2S MSP: this __weak function can be redefined by the application*/
 226:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_OUT_MspInit(&hAudioOutI2s, NULL);
 227:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 228:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 229:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S data transfer preparation:
 230:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   Prepare the Media to be used for the audio transfer from memory to I2S peripheral */
 231:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Configure the I2S peripheral */
 232:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(I2S3_Init(AudioFreq) != AUDIO_OK)
 233:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 234:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     ret = AUDIO_ERROR;
 235:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 236:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 237:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(ret == AUDIO_OK)
 238:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 239:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Retieve audio codec identifier */
 240:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     if(((cs43l22_drv.ReadID(AUDIO_I2C_ADDRESS)) & CS43L22_ID_MASK) == CS43L22_ID)
 241:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     {  
 242:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       /* Initialize the audio driver structure */
 243:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       pAudioDrv = &cs43l22_drv; 
 244:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 245:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     else
 246:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     {
 247:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       ret = AUDIO_ERROR;
 248:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 249:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 250:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 251:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(ret == AUDIO_OK)
 252:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 253:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     pAudioDrv->Init(AUDIO_I2C_ADDRESS, OutputDevice, Volume, AudioFreq);
 254:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 255:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 256:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return ret;
 257:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 258:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 259:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 260:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Starts playing audio stream from a data buffer for a determined size. 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 6


 261:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  pBuffer: Pointer to the buffer 
 262:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Size: Number of audio data BYTES.
 263:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 264:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 265:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_Play(uint16_t* pBuffer, uint32_t Size)
 266:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 267:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the audio Codec Play function */
 268:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->Play(AUDIO_I2C_ADDRESS, pBuffer, Size) != 0)
 269:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 270:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 271:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 272:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else 
 273:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 274:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Update the Media layer and enable it for play */  
 275:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_I2S_Transmit_DMA(&hAudioOutI2s, pBuffer, DMA_MAX(Size/AUDIODATA_SIZE)); 
 276:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 277:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 278:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 279:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 280:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 281:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 282:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 283:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Sends n-Bytes on the I2S interface.
 284:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  pData: Pointer to data address 
 285:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Size: Number of data to be written
 286:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 287:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void BSP_AUDIO_OUT_ChangeBuffer(uint16_t *pData, uint16_t Size)
 288:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 289:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_Transmit_DMA(&hAudioOutI2s, pData, Size); 
 290:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 291:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 292:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 293:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief   Pauses the audio file stream. In case of using DMA, the DMA Pause
 294:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          feature is used.
 295:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * WARNING: When calling BSP_AUDIO_OUT_Pause() function for pause, only the
 296:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          BSP_AUDIO_OUT_Resume() function should be called for resume (use of BSP_AUDIO_OUT_Play
 297:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          function for resume could lead to unexpected behavior).
 298:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval  AUDIO_OK if correct communication, else wrong communication
 299:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 300:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_Pause(void)
 301:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {    
 302:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Audio Codec Pause/Resume function */
 303:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->Pause(AUDIO_I2C_ADDRESS) != 0)
 304:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 305:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 306:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 307:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 308:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 309:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Call the Media layer pause function */
 310:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_I2S_DMAPause(&hAudioOutI2s);
 311:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 312:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 313:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 314:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 315:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 316:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 317:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 7


 318:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief   Resumes the audio file streaming.  
 319:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * WARNING: When calling BSP_AUDIO_OUT_Pause() function for pause, only
 320:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          BSP_AUDIO_OUT_Resume() function should be called for resume (use of BSP_AUDIO_OUT_Play
 321:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *          function for resume could lead to unexpected behavior).
 322:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval  AUDIO_OK if correct communication, else wrong communication
 323:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 324:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_Resume(void)
 325:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {    
 326:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Audio Codec Pause/Resume function */
 327:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->Resume(AUDIO_I2C_ADDRESS) != 0)
 328:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 329:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 330:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 331:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 332:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 333:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Call the Media layer resume function */
 334:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_I2S_DMAResume(&hAudioOutI2s);
 335:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 336:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 337:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 338:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 339:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 340:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 341:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 342:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Stops audio playing and Power down the Audio Codec. 
 343:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Option: could be one of the following parameters 
 344:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *           - CODEC_PDWN_HW: completely shut down the codec (physically). 
 345:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *                            Then need to reconfigure the Codec after power on.  
 346:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 347:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 348:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_Stop(uint32_t Option)
 349:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 350:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call DMA Stop to disable DMA stream before stopping codec */
 351:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_DMAStop(&hAudioOutI2s);
 352:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 353:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call Audio Codec Stop function */
 354:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->Stop(AUDIO_I2C_ADDRESS, Option) != 0)
 355:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 356:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 357:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 358:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 359:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 360:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     if(Option == CODEC_PDWN_HW)
 361:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     { 
 362:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       /* Wait at least 1ms */
 363:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       HAL_Delay(1);
 364:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       
 365:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       /* Reset the pin */
 366:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       HAL_GPIO_WritePin(AUDIO_RESET_GPIO, AUDIO_RESET_PIN, GPIO_PIN_RESET);
 367:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 368:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 369:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 370:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 371:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 372:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 373:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 374:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 8


 375:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Controls the current audio volume level. 
 376:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Volume: Volume level to be set in percentage from 0% to 100% (0 for 
 377:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         Mute and 100 for Max volume level).
 378:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 379:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 380:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_SetVolume(uint8_t Volume)
 381:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 382:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the codec volume control function with converted volume value */
 383:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->SetVolume(AUDIO_I2C_ADDRESS, Volume) != 0)
 384:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 385:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 386:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 387:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 388:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 389:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 390:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 391:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 392:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 393:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 394:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 395:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Enables or disables the MUTE mode by software 
 396:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Cmd: could be AUDIO_MUTE_ON to mute sound or AUDIO_MUTE_OFF to 
 397:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         unmute the codec and restore previous volume level.
 398:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 399:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 400:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_SetMute(uint32_t Cmd)
 401:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** { 
 402:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Codec Mute function */
 403:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->SetMute(AUDIO_I2C_ADDRESS, Cmd) != 0)
 404:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 405:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 406:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 407:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 408:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 409:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
 410:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 411:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 412:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 413:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 414:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 415:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Switch dynamically (while audio file is played) the output target 
 416:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         (speaker or headphone).
 417:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @note   This function modifies a global variable of the audio codec driver: OutputDev.
 418:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Output: specifies the audio output target: OUTPUT_DEVICE_SPEAKER,
 419:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         OUTPUT_DEVICE_HEADPHONE, OUTPUT_DEVICE_BOTH or OUTPUT_DEVICE_AUTO 
 420:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 421:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 422:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_OUT_SetOutputMode(uint8_t Output)
 423:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 424:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Codec output Device function */
 425:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(pAudioDrv->SetOutputMode(AUDIO_I2C_ADDRESS, Output) != 0)
 426:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 427:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 428:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 429:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 430:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 431:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Return AUDIO_OK when all operations are correctly done */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 9


 432:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
 433:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 434:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 435:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 436:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 437:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Update the audio frequency.
 438:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency used to play the audio stream.
 439:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @note   This API should be called after the BSP_AUDIO_OUT_Init() to adjust the
 440:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         audio frequency. 
 441:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 442:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void BSP_AUDIO_OUT_SetFrequency(uint32_t AudioFreq)
 443:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 444:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLL clock is set depending by the AudioFreq (44.1khz vs 48khz groups) */ 
 445:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   BSP_AUDIO_OUT_ClockConfig(&hAudioOutI2s, AudioFreq, NULL);
 446:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 447:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Update the I2S audio frequency configuration */
 448:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_Init(AudioFreq);
 449:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 450:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 451:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 452:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Tx Transfer completed callbacks.
 453:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 454:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 455:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void HAL_I2S_TxCpltCallback(I2S_HandleTypeDef *hi2s)
 456:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 457:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 458:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 459:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Call the user function which will manage directly transfer complete */  
 460:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_OUT_TransferComplete_CallBack();       
 461:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 462:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 463:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 464:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 465:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Tx Half Transfer completed callbacks.
 466:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 467:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 468:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void HAL_I2S_TxHalfCpltCallback(I2S_HandleTypeDef *hi2s)
 469:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 470:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 471:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 472:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Manage the remaining file size and new address offset: This function should
 473:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        be coded by user (its prototype is already declared in stm32f4_discovery_audio.h) */  
 474:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_OUT_HalfTransfer_CallBack();
 475:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 476:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 477:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 478:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 479:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Clock Config.
 480:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: might be required to set audio peripheral predivider if any.
 481:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency used to play the audio stream.
 482:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @note   This API is called by BSP_AUDIO_OUT_Init() and BSP_AUDIO_OUT_SetFrequency()
 483:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         Being __weak it can be overwritten by the application     
 484:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.
 485:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 486:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_ClockConfig(I2S_HandleTypeDef *hi2s, uint32_t AudioFreq, void *Params)
 487:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** { 
 488:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   RCC_PeriphCLKInitTypeDef rccclkinit;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 10


 489:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint8_t index = 0, freqindex = 0xFF;
 490:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 491:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   for(index = 0; index < 8; index++)
 492:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 493:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     if(I2SFreq[index] == AudioFreq)
 494:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     {
 495:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       freqindex = index;
 496:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 497:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 498:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable PLLI2S clock */
 499:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_RCCEx_GetPeriphCLKConfig(&rccclkinit);
 500:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLLI2S_VCO Input = HSE_VALUE/PLL_M = 1 Mhz */
 501:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if ((freqindex & 0x7) == 0)
 502:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 503:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* I2S clock config 
 504:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input)  (PLLI2SN/PLLM)
 505:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     I2SCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SR */
 506:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
 507:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = I2SPLLN[freqindex];
 508:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = I2SPLLR[freqindex];
 509:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 510:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 511:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else 
 512:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 513:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* I2S clock config 
 514:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input)  (PLLI2SN/PLLM)
 515:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     I2SCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SR */
 516:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
 517:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 258;
 518:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 3;
 519:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 520:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 521:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 522:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 523:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 524:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  AUDIO OUT I2S MSP Init.
 525:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: might be required to set audio peripheral predivider if any.
 526:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.
 527:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 528:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_MspInit(I2S_HandleTypeDef *hi2s, void *Params)
 529:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 530:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   static DMA_HandleTypeDef hdma_i2sTx;
 531:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  GPIO_InitStruct;
 532:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 533:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable I2S3 clock */
 534:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_CLK_ENABLE();
 535:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 536:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /*** Configure the GPIOs ***/  
 537:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable I2S GPIO clocks */
 538:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_SCK_SD_CLK_ENABLE();
 539:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_WS_CLK_ENABLE();
 540:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 541:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S3 pins configuration: WS, SCK and SD pins ----------------------------*/
 542:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin         = I2S3_SCK_PIN | I2S3_SD_PIN; 
 543:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Mode        = GPIO_MODE_AF_PP;
 544:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pull        = GPIO_NOPULL;
 545:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Speed       = GPIO_SPEED_FAST;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 11


 546:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate   = I2S3_SCK_SD_WS_AF;
 547:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_SCK_SD_GPIO_PORT, &GPIO_InitStruct);
 548:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 549:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin         = I2S3_WS_PIN ;
 550:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_WS_GPIO_PORT, &GPIO_InitStruct); 
 551:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 552:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S3 pins configuration: MCK pin */
 553:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_MCK_CLK_ENABLE();
 554:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin         = I2S3_MCK_PIN; 
 555:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_MCK_GPIO_PORT, &GPIO_InitStruct);   
 556:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 557:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable the I2S DMA clock */
 558:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_DMAx_CLK_ENABLE(); 
 559:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 560:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 561:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 562:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Configure the hdma_i2sTx handle parameters */   
 563:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Channel             = I2S3_DMAx_CHANNEL;  
 564:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Direction           = DMA_MEMORY_TO_PERIPH;
 565:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphInc           = DMA_PINC_DISABLE;
 566:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemInc              = DMA_MINC_ENABLE;
 567:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphDataAlignment = I2S3_DMAx_PERIPH_DATA_SIZE;
 568:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemDataAlignment    = I2S3_DMAx_MEM_DATA_SIZE;
 569:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Mode                = DMA_NORMAL;
 570:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Priority            = DMA_PRIORITY_HIGH;
 571:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.FIFOMode            = DMA_FIFOMODE_ENABLE;         
 572:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.FIFOThreshold       = DMA_FIFO_THRESHOLD_FULL;
 573:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemBurst            = DMA_MBURST_SINGLE;
 574:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphBurst         = DMA_PBURST_SINGLE; 
 575:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 576:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Instance                 = I2S3_DMAx_STREAM;
 577:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 578:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Associate the DMA handle */
 579:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     __HAL_LINKDMA(hi2s, hdmatx, hdma_i2sTx);
 580:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 581:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Deinitialize the Stream for new transfer */
 582:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_DeInit(&hdma_i2sTx);
 583:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 584:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Configure the DMA Stream */
 585:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_Init(&hdma_i2sTx);
 586:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 587:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 588:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S DMA IRQ Channel configuration */
 589:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_SetPriority(I2S3_DMAx_IRQ, AUDIO_OUT_IRQ_PREPRIO, 0);
 590:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_EnableIRQ(I2S3_DMAx_IRQ); 
 591:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 592:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 593:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 594:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  De-Initializes BSP_AUDIO_OUT MSP.
 595:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: might be required to set audio peripheral predivider if any.
 596:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.
 597:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 598:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_MspDeInit(I2S_HandleTypeDef *hi2s, void *Params)
 599:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {  
 600:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  GPIO_InitStruct;
 601:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 602:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S DMA IRQ Channel deactivation */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 12


 603:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_DisableIRQ(I2S3_DMAx_IRQ); 
 604:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 605:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 606:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 607:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Deinitialize the Stream for new transfer */
 608:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_DeInit(hi2s->hdmatx);
 609:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 610:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 611:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****  /* Disable I2S block */
 612:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   __HAL_I2S_DISABLE(hi2s);
 613:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 614:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* CODEC_I2S pins configuration: SCK and SD pins */
 615:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin = I2S3_SCK_PIN | I2S3_SD_PIN;
 616:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_DeInit(I2S3_SCK_SD_GPIO_PORT, GPIO_InitStruct.Pin);
 617:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 618:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* CODEC_I2S pins configuration: WS pin */
 619:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin = I2S3_WS_PIN;
 620:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_DeInit(I2S3_WS_GPIO_PORT, GPIO_InitStruct.Pin);
 621:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 622:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* CODEC_I2S pins configuration: MCK pin */
 623:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin = I2S3_MCK_PIN;
 624:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_DeInit(I2S3_MCK_GPIO_PORT, GPIO_InitStruct.Pin); 
 625:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 626:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Disable I2S clock */
 627:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_CLK_DISABLE();
 628:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 629:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* GPIO pins clock and DMA clock can be shut down in the applic 
 630:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      by surcgarging this __weak function */   
 631:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 632:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 633:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 634:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Manages the DMA full Transfer complete event.
 635:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 636:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_TransferComplete_CallBack(void)
 637:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 638:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 639:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 640:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 641:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Manages the DMA Half Transfer complete event.
 642:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 643:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_HalfTransfer_CallBack(void)
 644:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 645:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 646:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 647:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 648:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Manages the DMA FIFO error event.
 649:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 650:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_OUT_Error_CallBack(void)
 651:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 652:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 653:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 654:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /*******************************************************************************
 655:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                             Static Functions
 656:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** *******************************************************************************/
 657:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 658:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 659:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Initializes the Audio Codec audio interface (I2S).
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 13


 660:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency to be configured for the I2S peripheral. 
 661:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 662:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static uint8_t I2S3_Init(uint32_t AudioFreq)
 663:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
  27              		.loc 1 663 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 664:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Initialize the hAudioOutI2s Instance parameter */
 665:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Instance         = I2S3;
  37              		.loc 1 665 0
  38 0002 0D4B     		ldr	r3, .L6
  39 0004 0D4A     		ldr	r2, .L6+4
  40 0006 1A60     		str	r2, [r3]
 666:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 667:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****  /* Disable I2S block */
 668:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   __HAL_I2S_DISABLE(&hAudioOutI2s);
  41              		.loc 1 668 0
  42 0008 D169     		ldr	r1, [r2, #28]
  43 000a 21F48061 		bic	r1, r1, #1024
  44 000e 0904     		lsls	r1, r1, #16
  45 0010 090C     		lsrs	r1, r1, #16
  46 0012 D161     		str	r1, [r2, #28]
 669:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 670:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S3 peripheral configuration */
 671:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.AudioFreq   = AudioFreq;
  47              		.loc 1 671 0
  48 0014 5861     		str	r0, [r3, #20]
 672:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.ClockSource = I2S_CLOCK_PLL;
  49              		.loc 1 672 0
  50 0016 0022     		movs	r2, #0
  51 0018 DA61     		str	r2, [r3, #28]
 673:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.CPOL        = I2S_CPOL_LOW;
  52              		.loc 1 673 0
  53 001a 9A61     		str	r2, [r3, #24]
 674:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.DataFormat  = I2S_DATAFORMAT_16B;
  54              		.loc 1 674 0
  55 001c DA60     		str	r2, [r3, #12]
 675:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.MCLKOutput  = I2S_MCLKOUTPUT_ENABLE;
  56              		.loc 1 675 0
  57 001e 4FF40071 		mov	r1, #512
  58 0022 1961     		str	r1, [r3, #16]
 676:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.Mode        = I2S_MODE_MASTER_TX;
  59              		.loc 1 676 0
  60 0024 5960     		str	r1, [r3, #4]
 677:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioOutI2s.Init.Standard    = I2S_STANDARD;
  61              		.loc 1 677 0
  62 0026 9A60     		str	r2, [r3, #8]
 678:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Initialize the I2S peripheral with the structure above */  
 679:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_Init(&hAudioOutI2s) != HAL_OK)
  63              		.loc 1 679 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 14


  64 0028 1846     		mov	r0, r3
  65              	.LVL1:
  66 002a FFF7FEFF 		bl	HAL_I2S_Init
  67              	.LVL2:
  68 002e 08B9     		cbnz	r0, .L5
 680:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 681:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
 682:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 683:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 684:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 685:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK;
  69              		.loc 1 685 0
  70 0030 0020     		movs	r0, #0
 686:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 687:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
  71              		.loc 1 687 0
  72 0032 08BD     		pop	{r3, pc}
  73              	.L5:
 681:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
  74              		.loc 1 681 0
  75 0034 0120     		movs	r0, #1
  76 0036 08BD     		pop	{r3, pc}
  77              	.L7:
  78              		.align	2
  79              	.L6:
  80 0038 00000000 		.word	hAudioOutI2s
  81 003c 003C0040 		.word	1073757184
  82              		.cfi_endproc
  83              	.LFE142:
  85              		.section	.text.I2S2_Init,"ax",%progbits
  86              		.align	1
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  90              		.fpu fpv4-sp-d16
  92              	I2S2_Init:
  93              	.LFB159:
 688:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 689:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 690:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
 691:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 692:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 693:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_IN_Private_Functions STM32F4 DISCOVERY AUDIO IN Private Funct
 694:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
 695:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
 696:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 697:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 698:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Initializes wave recording.
 699:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency to be configured for the I2S peripheral. 
 700:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  BitRes: Audio frequency to be configured for the I2S peripheral.
 701:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  ChnlNbr: Audio frequency to be configured for the I2S peripheral.
 702:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 703:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 704:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_Init(uint32_t AudioFreq, uint32_t BitRes, uint32_t ChnlNbr)
 705:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 706:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 707:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Configure PLL clock */ 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 15


 708:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   BSP_AUDIO_IN_ClockConfig(&hAudioInI2s, AudioFreq, NULL);
 709:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 710:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Configure the PDM library */
 711:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   PDMDecoder_Init(AudioFreq, ChnlNbr);
 712:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 713:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Configure the I2S peripheral */
 714:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Instance = I2S2;
 715:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_GetState(&hAudioInI2s) == HAL_I2S_STATE_RESET)
 716:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   { 
 717:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Initialize the I2S Msp: this __weak function can be rewritten by the application */
 718:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_IN_MspInit(&hAudioInI2s, NULL);
 719:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 720:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 721:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Configure the I2S2 */
 722:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_Init(AudioFreq);
 723:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 724:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 725:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return AUDIO_OK;
 726:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 727:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 728:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 729:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Starts audio recording.
 730:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  pbuf: Main buffer pointer for the recorded data storing  
 731:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  size: Current size of the recorded buffer
 732:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 733:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 734:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_Record(uint16_t* pbuf, uint32_t size)
 735:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 736:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t ret = AUDIO_ERROR;
 737:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 738:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Start the process receive DMA */
 739:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_Receive_DMA(&hAudioInI2s, pbuf, size);
 740:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 741:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 742:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   ret = AUDIO_OK;
 743:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 744:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return ret;
 745:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 746:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 747:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 748:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Stops audio recording.
 749:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 750:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 751:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_Stop(void)
 752:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 753:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t ret = AUDIO_ERROR;
 754:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 755:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Media layer pause function */
 756:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_DMAStop(&hAudioInI2s);  
 757:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 758:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 759:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   ret = AUDIO_OK;
 760:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 761:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return ret;
 762:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 763:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 764:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 16


 765:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Pauses the audio file stream.
 766:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 767:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 768:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_Pause(void)
 769:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {    
 770:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Media layer pause function */
 771:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_DMAPause(&hAudioInI2s);
 772:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 773:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 774:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return AUDIO_OK;
 775:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 776:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 777:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 778:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Resumes the audio file stream.    
 779:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 780:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 781:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_Resume(void)
 782:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {    
 783:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Media layer pause/resume function */
 784:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_DMAResume(&hAudioInI2s);
 785:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 786:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 787:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return AUDIO_OK;
 788:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 789:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 790:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 791:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Controls the audio in volume level. 
 792:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Volume: Volume level to be set in percentage from 0% to 100% (0 for 
 793:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         Mute and 100 for Max volume level).
 794:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 795:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 796:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_SetVolume(uint8_t Volume)
 797:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 798:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Set the Global variable AudioInVolume */
 799:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   AudioInVolume = Volume; 
 800:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 801:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 802:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return AUDIO_OK;
 803:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 804:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 805:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 806:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Converts audio format from PDM to PCM.
 807:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  PDMBuf: Pointer to data PDM buffer
 808:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  PCMBuf: Pointer to data PCM buffer
 809:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @retval AUDIO_OK if correct communication, else wrong communication
 810:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 811:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** uint8_t BSP_AUDIO_IN_PDMToPCM(uint16_t *PDMBuf, uint16_t *PCMBuf)
 812:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 813:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint16_t AppPDM[INTERNAL_BUFF_SIZE/2];
 814:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t index = 0; 
 815:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 816:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PDM Demux */
 817:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   for(index = 0; index<INTERNAL_BUFF_SIZE/2; index++)
 818:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 819:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     AppPDM[index] = HTONS(PDMBuf[index]);
 820:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 821:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 17


 822:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   for(index = 0; index < DEFAULT_AUDIO_IN_CHANNEL_NBR; index++)
 823:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 824:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* PDM to PCM filter */
 825:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PDM_Filter_64_LSB((uint8_t*)&AppPDM[index], (uint16_t*)&(PCMBuf[index]), AudioInVolume , (PDMFi
 826:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 827:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Duplicate samples since a single microphone in mounted on STM32F4-Discovery */
 828:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   for(index = 0; index < PCM_OUT_SIZE; index++)
 829:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 830:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PCMBuf[(index<<1)+1] = PCMBuf[index<<1];
 831:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 832:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 833:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Return AUDIO_OK when all operations are correctly done */
 834:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   return AUDIO_OK; 
 835:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 836:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 837:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 838:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Rx Transfer completed callbacks
 839:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 840:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 841:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void HAL_I2S_RxCpltCallback(I2S_HandleTypeDef *hi2s)
 842:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 843:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the record update function to get the next buffer to fill and its size (size is ignored) 
 844:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   BSP_AUDIO_IN_TransferComplete_CallBack();
 845:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 846:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 847:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 848:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Rx Half Transfer completed callbacks.
 849:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 850:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 851:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void HAL_I2S_RxHalfCpltCallback(I2S_HandleTypeDef *hi2s)
 852:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 853:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Manage the remaining file size and new address offset: This function 
 854:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      should be coded by user (its prototype is already declared in stm32f4_discovery_audio.h) */
 855:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   BSP_AUDIO_IN_HalfTransfer_CallBack();
 856:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 857:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 858:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 859:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Audio In Clock Config.
 860:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 861:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency used to record the audio stream.  
 862:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.   
 863:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @note   This API is called by BSP_AUDIO_IN_Init()
 864:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         Being __weak it can be overwritten by the application
 865:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 866:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_ClockConfig(I2S_HandleTypeDef *hi2s, uint32_t AudioFreq, void *Params)
 867:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 868:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   RCC_PeriphCLKInitTypeDef rccclkinit;
 869:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 870:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /*Enable PLLI2S clock*/
 871:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_RCCEx_GetPeriphCLKConfig(&rccclkinit);
 872:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLLI2S_VCO Input = HSE_VALUE/PLL_M = 1 Mhz */
 873:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if ((AudioFreq & 0x7) == 0)
 874:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 875:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Audio frequency multiple of 8 (8/16/32/48/96/192)*/
 876:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* PLLI2S_VCO Output = PLLI2S_VCO Input * PLLI2SN = 192 Mhz */
 877:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* I2SCLK = PLLI2S_VCO Output/PLLI2SR = 192/6 = 32 Mhz */
 878:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 18


 879:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 192;
 880:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 6;
 881:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 882:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 883:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
 884:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 885:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Other Frequency (11.025/22.500/44.100) */
 886:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* PLLI2S_VCO Output = PLLI2S_VCO Input * PLLI2SN = 290 Mhz */
 887:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* I2SCLK = PLLI2S_VCO Output/PLLI2SR = 290/2 = 145 Mhz */
 888:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
 889:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 290;
 890:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 2;
 891:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 892:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 893:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 894:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 895:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 896:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  BSP AUDIO IN MSP Init.
 897:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 898:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.
 899:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 900:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_MspInit(I2S_HandleTypeDef *hi2s, void *Params)
 901:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 902:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   static DMA_HandleTypeDef hdma_i2sRx;
 903:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  GPIO_InitStruct;
 904:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 905:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable the I2S2 peripheral clock */
 906:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_CLK_ENABLE();
 907:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 908:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable I2S GPIO clocks */
 909:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_SCK_GPIO_CLK_ENABLE();
 910:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_MOSI_GPIO_CLK_ENABLE();
 911:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 912:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S2 pins configuration: SCK and MOSI pins ------------------------------*/
 913:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Mode      = GPIO_MODE_AF_PP;
 914:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pull      = GPIO_NOPULL;
 915:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Speed     = GPIO_SPEED_FAST;
 916:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 917:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin       = I2S2_SCK_PIN; 
 918:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate = I2S2_SCK_AF;
 919:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S2_SCK_GPIO_PORT, &GPIO_InitStruct);
 920:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 921:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin       = I2S2_MOSI_PIN ;
 922:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate = I2S2_MOSI_AF;
 923:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S2_MOSI_GPIO_PORT, &GPIO_InitStruct); 
 924:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 925:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable the DMA clock */
 926:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_DMAx_CLK_ENABLE();
 927:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 928:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S2)
 929:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 930:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Configure the hdma_i2sRx handle parameters */   
 931:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Channel             = I2S2_DMAx_CHANNEL;
 932:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Direction           = DMA_PERIPH_TO_MEMORY;
 933:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphInc           = DMA_PINC_DISABLE;
 934:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemInc              = DMA_MINC_ENABLE;
 935:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphDataAlignment = I2S2_DMAx_PERIPH_DATA_SIZE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 19


 936:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemDataAlignment    = I2S2_DMAx_MEM_DATA_SIZE;
 937:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Mode                = DMA_CIRCULAR;
 938:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Priority            = DMA_PRIORITY_HIGH;
 939:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.FIFOMode            = DMA_FIFOMODE_DISABLE;         
 940:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.FIFOThreshold       = DMA_FIFO_THRESHOLD_FULL;
 941:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemBurst            = DMA_MBURST_SINGLE;
 942:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphBurst         = DMA_MBURST_SINGLE; 
 943:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 944:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Instance = I2S2_DMAx_STREAM;
 945:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 946:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Associate the DMA handle */
 947:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     __HAL_LINKDMA(hi2s, hdmarx, hdma_i2sRx);
 948:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 949:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Deinitialize the Stream for new transfer */
 950:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_DeInit(&hdma_i2sRx);
 951:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 952:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Configure the DMA Stream */
 953:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_Init(&hdma_i2sRx);      
 954:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 955:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 956:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S DMA IRQ Channel configuration */
 957:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_SetPriority(I2S2_DMAx_IRQ, AUDIO_IN_IRQ_PREPRIO, 0);
 958:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_EnableIRQ(I2S2_DMAx_IRQ); 
 959:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 960:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 961:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 962:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  DeInitializes BSP_AUDIO_IN MSP.
 963:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
 964:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  Params : pointer on additional configuration parameters, can be NULL.
 965:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 966:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_MspDeInit(I2S_HandleTypeDef *hi2s, void *Params)
 967:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 968:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  gpio_init_structure;
 969:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 970:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S DMA IRQ Channel deactivation */
 971:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_DisableIRQ(I2S2_DMAx_IRQ); 
 972:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 973:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S2)
 974:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 975:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Deinitialize the Stream for new transfer */
 976:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_DMA_DeInit(hi2s->hdmarx);
 977:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 978:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 979:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****  /* Disable I2S block */
 980:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   __HAL_I2S_DISABLE(hi2s);
 981:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 982:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Disable pins: SCK and SD pins */
 983:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   gpio_init_structure.Pin = I2S2_SCK_PIN;
 984:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_DeInit(I2S2_SCK_GPIO_PORT, gpio_init_structure.Pin);
 985:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   gpio_init_structure.Pin = I2S2_MOSI_PIN;
 986:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_DeInit(I2S2_MOSI_GPIO_PORT, gpio_init_structure.Pin); 
 987:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 988:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Disable I2S clock */
 989:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_CLK_DISABLE();
 990:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 991:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* GPIO pins clock and DMA clock can be shut down in the applic 
 992:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      by surcgarging this __weak function */ 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 20


 993:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 994:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 995:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
 996:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  User callback when record buffer is filled.
 997:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
 998:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_TransferComplete_CallBack(void)
 999:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
1000:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function should be implemented by the user application.
1001:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      It is called into this driver when the current buffer is filled
1002:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      to prepare the next buffer pointer and its size. */
1003:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
1004:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1005:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1006:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Manages the DMA Half Transfer complete event.
1007:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1008:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_HalfTransfer_CallBack(void)
1009:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
1010:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function should be implemented by the user application.
1011:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      It is called into this driver when the current buffer is filled
1012:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      to prepare the next buffer pointer and its size. */
1013:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
1014:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1015:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1016:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Audio IN Error callback function.
1017:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1018:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** __weak void BSP_AUDIO_IN_Error_Callback(void)
1019:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {   
1020:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function is called when an Interrupt due to transfer error on or peripheral
1021:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      error occurs. */
1022:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
1023:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1024:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /*******************************************************************************
1025:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****                             Static Functions
1026:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** *******************************************************************************/
1027:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1028:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1029:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Initialize the PDM library.
1030:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio sampling frequency
1031:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  ChnlNbr: Number of audio channels (1: mono; 2: stereo)
1032:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1033:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static void PDMDecoder_Init(uint32_t AudioFreq, uint32_t ChnlNbr)
1034:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** { 
1035:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t i = 0;
1036:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
1037:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Enable CRC peripheral to unlock the PDM library */
1038:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   __CRC_CLK_ENABLE();
1039:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
1040:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   for(i = 0; i < ChnlNbr; i++)
1041:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
1042:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* Filter LP and HP Init */
1043:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].LP_HZ = AudioFreq / 2;
1044:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].HP_HZ = 10;
1045:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].Fs = AudioFreq;
1046:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* On STM32F4-Discovery a single microphone is mounted, samples are duplicated
1047:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****        to make stereo audio streams */
1048:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].Out_MicChannels = 2;
1049:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].In_MicChannels = ChnlNbr; 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 21


1050:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PDM_Filter_Init((PDMFilter_InitStruct *)&Filter[i]);
1051:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }  
1052:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
1053:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1054:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1055:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  Initializes the Audio Codec audio interface (I2S)
1056:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @note   This function assumes that the I2S input clock (through PLL_R in 
1057:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         Devices RevA/Z and through dedicated PLLI2S_R in Devices RevB/Y)
1058:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   *         is already configured and ready to be used.    
1059:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  AudioFreq: Audio frequency to be configured for the I2S peripheral. 
1060:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1061:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** static uint8_t I2S2_Init(uint32_t AudioFreq)
1062:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
  94              		.loc 1 1062 0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 0
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98              	.LVL3:
  99 0000 08B5     		push	{r3, lr}
 100              	.LCFI1:
 101              		.cfi_def_cfa_offset 8
 102              		.cfi_offset 3, -8
 103              		.cfi_offset 14, -4
1063:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Initialize the hAudioInI2s Instance parameter */
1064:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Instance          = I2S2;
 104              		.loc 1 1064 0
 105 0002 0F4B     		ldr	r3, .L13
 106 0004 0F4A     		ldr	r2, .L13+4
 107 0006 1A60     		str	r2, [r3]
1065:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
1066:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Disable I2S block */
1067:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   __HAL_I2S_DISABLE(&hAudioInI2s);
 108              		.loc 1 1067 0
 109 0008 D169     		ldr	r1, [r2, #28]
 110 000a 21F48061 		bic	r1, r1, #1024
 111 000e 0904     		lsls	r1, r1, #16
 112 0010 090C     		lsrs	r1, r1, #16
 113 0012 D161     		str	r1, [r2, #28]
1068:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
1069:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* I2S2 peripheral configuration */
1070:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.AudioFreq    = 2 * AudioFreq;
 114              		.loc 1 1070 0
 115 0014 4000     		lsls	r0, r0, #1
 116              	.LVL4:
 117 0016 5861     		str	r0, [r3, #20]
1071:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.ClockSource  = I2S_CLOCK_PLL;
 118              		.loc 1 1071 0
 119 0018 0022     		movs	r2, #0
 120 001a DA61     		str	r2, [r3, #28]
1072:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.CPOL         = I2S_CPOL_HIGH;
 121              		.loc 1 1072 0
 122 001c 0821     		movs	r1, #8
 123 001e 9961     		str	r1, [r3, #24]
1073:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.DataFormat   = I2S_DATAFORMAT_16B;
 124              		.loc 1 1073 0
 125 0020 DA60     		str	r2, [r3, #12]
1074:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.MCLKOutput   = I2S_MCLKOUTPUT_DISABLE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 22


 126              		.loc 1 1074 0
 127 0022 1A61     		str	r2, [r3, #16]
1075:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.Mode         = I2S_MODE_MASTER_RX;
 128              		.loc 1 1075 0
 129 0024 4FF44072 		mov	r2, #768
 130 0028 5A60     		str	r2, [r3, #4]
1076:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   hAudioInI2s.Init.Standard     = I2S_STANDARD_LSB;
 131              		.loc 1 1076 0
 132 002a 2022     		movs	r2, #32
 133 002c 9A60     		str	r2, [r3, #8]
1077:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1078:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Initialize the I2S peripheral with the structure above */  
1079:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_Init(&hAudioInI2s) != HAL_OK)
 134              		.loc 1 1079 0
 135 002e 1846     		mov	r0, r3
 136 0030 FFF7FEFF 		bl	HAL_I2S_Init
 137              	.LVL5:
 138 0034 08B9     		cbnz	r0, .L12
1080:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
1081:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_ERROR;
1082:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
1083:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   else
1084:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
1085:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     return AUDIO_OK; 
 139              		.loc 1 1085 0
 140 0036 0020     		movs	r0, #0
1086:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
1087:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }  
 141              		.loc 1 1087 0
 142 0038 08BD     		pop	{r3, pc}
 143              	.L12:
1081:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 144              		.loc 1 1081 0
 145 003a 0120     		movs	r0, #1
 146 003c 08BD     		pop	{r3, pc}
 147              	.L14:
 148 003e 00BF     		.align	2
 149              	.L13:
 150 0040 00000000 		.word	hAudioInI2s
 151 0044 00380040 		.word	1073756160
 152              		.cfi_endproc
 153              	.LFE159:
 155              		.section	.text.PDMDecoder_Init,"ax",%progbits
 156              		.align	1
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu fpv4-sp-d16
 162              	PDMDecoder_Init:
 163              	.LFB158:
1034:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t i = 0;
 164              		.loc 1 1034 0
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 8
 167              		@ frame_needed = 0, uses_anonymous_args = 0
 168              	.LVL6:
 169 0000 70B5     		push	{r4, r5, r6, lr}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 23


 170              	.LCFI2:
 171              		.cfi_def_cfa_offset 16
 172              		.cfi_offset 4, -16
 173              		.cfi_offset 5, -12
 174              		.cfi_offset 6, -8
 175              		.cfi_offset 14, -4
 176 0002 82B0     		sub	sp, sp, #8
 177              	.LCFI3:
 178              		.cfi_def_cfa_offset 24
 179 0004 0646     		mov	r6, r0
 180 0006 0D46     		mov	r5, r1
 181              	.LVL7:
 182              	.LBB2:
1038:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 183              		.loc 1 1038 0
 184 0008 0024     		movs	r4, #0
 185 000a 0194     		str	r4, [sp, #4]
 186 000c 114B     		ldr	r3, .L19
 187 000e 1A6B     		ldr	r2, [r3, #48]
 188 0010 42F48052 		orr	r2, r2, #4096
 189 0014 1A63     		str	r2, [r3, #48]
 190 0016 1B6B     		ldr	r3, [r3, #48]
 191 0018 03F48053 		and	r3, r3, #4096
 192 001c 0193     		str	r3, [sp, #4]
 193 001e 019B     		ldr	r3, [sp, #4]
 194              	.LVL8:
 195              	.L16:
 196              	.LBE2:
1040:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 197              		.loc 1 1040 0 discriminator 1
 198 0020 AC42     		cmp	r4, r5
 199 0022 01D3     		bcc	.L17
1052:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 200              		.loc 1 1052 0
 201 0024 02B0     		add	sp, sp, #8
 202              	.LCFI4:
 203              		.cfi_remember_state
 204              		.cfi_def_cfa_offset 16
 205              		@ sp needed
 206 0026 70BD     		pop	{r4, r5, r6, pc}
 207              	.LVL9:
 208              	.L17:
 209              	.LCFI5:
 210              		.cfi_restore_state
1043:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].HP_HZ = 10;
 211              		.loc 1 1043 0 discriminator 3
 212 0028 7308     		lsrs	r3, r6, #1
 213 002a 0B49     		ldr	r1, .L19+4
 214 002c 3422     		movs	r2, #52
 215 002e 02FB04F2 		mul	r2, r2, r4
 216 0032 8818     		adds	r0, r1, r2
 217 0034 07EE903A 		vmov	s15, r3	@ int
 218 0038 F8EE677A 		vcvt.f32.u32	s15, s15
 219 003c C0ED017A 		vstr.32	s15, [r0, #4]
1044:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].Fs = AudioFreq;
 220              		.loc 1 1044 0 discriminator 3
 221 0040 064B     		ldr	r3, .L19+8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 24


 222 0042 8360     		str	r3, [r0, #8]	@ float
1045:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     /* On STM32F4-Discovery a single microphone is mounted, samples are duplicated
 223              		.loc 1 1045 0 discriminator 3
 224 0044 8E52     		strh	r6, [r1, r2]	@ movhi
1048:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     Filter[i].In_MicChannels = ChnlNbr; 
 225              		.loc 1 1048 0 discriminator 3
 226 0046 0223     		movs	r3, #2
 227 0048 C381     		strh	r3, [r0, #14]	@ movhi
1049:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     PDM_Filter_Init((PDMFilter_InitStruct *)&Filter[i]);
 228              		.loc 1 1049 0 discriminator 3
 229 004a 8581     		strh	r5, [r0, #12]	@ movhi
1050:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }  
 230              		.loc 1 1050 0 discriminator 3
 231 004c FFF7FEFF 		bl	PDM_Filter_Init
 232              	.LVL10:
1040:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 233              		.loc 1 1040 0 discriminator 3
 234 0050 0134     		adds	r4, r4, #1
 235              	.LVL11:
 236 0052 E5E7     		b	.L16
 237              	.L20:
 238              		.align	2
 239              	.L19:
 240 0054 00380240 		.word	1073887232
 241 0058 00000000 		.word	Filter
 242 005c 00002041 		.word	1092616192
 243              		.cfi_endproc
 244              	.LFE158:
 246              		.section	.text.BSP_AUDIO_OUT_Play,"ax",%progbits
 247              		.align	1
 248              		.global	BSP_AUDIO_OUT_Play
 249              		.syntax unified
 250              		.thumb
 251              		.thumb_func
 252              		.fpu fpv4-sp-d16
 254              	BSP_AUDIO_OUT_Play:
 255              	.LFB125:
 266:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the audio Codec Play function */
 256              		.loc 1 266 0
 257              		.cfi_startproc
 258              		@ args = 0, pretend = 0, frame = 0
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260              	.LVL12:
 261 0000 38B5     		push	{r3, r4, r5, lr}
 262              	.LCFI6:
 263              		.cfi_def_cfa_offset 16
 264              		.cfi_offset 3, -16
 265              		.cfi_offset 4, -12
 266              		.cfi_offset 5, -8
 267              		.cfi_offset 14, -4
 268 0002 0546     		mov	r5, r0
 269 0004 0C46     		mov	r4, r1
 268:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 270              		.loc 1 268 0
 271 0006 0C4B     		ldr	r3, .L27
 272 0008 1B68     		ldr	r3, [r3]
 273 000a DB68     		ldr	r3, [r3, #12]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 25


 274 000c 8AB2     		uxth	r2, r1
 275 000e 0146     		mov	r1, r0
 276              	.LVL13:
 277 0010 9420     		movs	r0, #148
 278              	.LVL14:
 279 0012 9847     		blx	r3
 280              	.LVL15:
 281 0014 68B9     		cbnz	r0, .L24
 275:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 282              		.loc 1 275 0
 283 0016 B4F5003F 		cmp	r4, #131072
 284 001a 07D2     		bcs	.L25
 275:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 285              		.loc 1 275 0 is_stmt 0 discriminator 1
 286 001c C4F34F02 		ubfx	r2, r4, #1, #16
 287              	.L23:
 275:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 288              		.loc 1 275 0 discriminator 4
 289 0020 2946     		mov	r1, r5
 290 0022 0648     		ldr	r0, .L27+4
 291 0024 FFF7FEFF 		bl	HAL_I2S_Transmit_DMA
 292              	.LVL16:
 278:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 293              		.loc 1 278 0 is_stmt 1 discriminator 4
 294 0028 0020     		movs	r0, #0
 295 002a 38BD     		pop	{r3, r4, r5, pc}
 296              	.LVL17:
 297              	.L25:
 275:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 298              		.loc 1 275 0
 299 002c 4FF6FF72 		movw	r2, #65535
 300 0030 F6E7     		b	.L23
 301              	.L24:
 270:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 302              		.loc 1 270 0
 303 0032 0120     		movs	r0, #1
 280:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 304              		.loc 1 280 0
 305 0034 38BD     		pop	{r3, r4, r5, pc}
 306              	.LVL18:
 307              	.L28:
 308 0036 00BF     		.align	2
 309              	.L27:
 310 0038 00000000 		.word	.LANCHOR0
 311 003c 00000000 		.word	hAudioOutI2s
 312              		.cfi_endproc
 313              	.LFE125:
 315              		.section	.text.BSP_AUDIO_OUT_ChangeBuffer,"ax",%progbits
 316              		.align	1
 317              		.global	BSP_AUDIO_OUT_ChangeBuffer
 318              		.syntax unified
 319              		.thumb
 320              		.thumb_func
 321              		.fpu fpv4-sp-d16
 323              	BSP_AUDIO_OUT_ChangeBuffer:
 324              	.LFB126:
 288:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_I2S_Transmit_DMA(&hAudioOutI2s, pData, Size); 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 26


 325              		.loc 1 288 0
 326              		.cfi_startproc
 327              		@ args = 0, pretend = 0, frame = 0
 328              		@ frame_needed = 0, uses_anonymous_args = 0
 329              	.LVL19:
 330 0000 08B5     		push	{r3, lr}
 331              	.LCFI7:
 332              		.cfi_def_cfa_offset 8
 333              		.cfi_offset 3, -8
 334              		.cfi_offset 14, -4
 289:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 335              		.loc 1 289 0
 336 0002 0A46     		mov	r2, r1
 337 0004 0146     		mov	r1, r0
 338              	.LVL20:
 339 0006 0248     		ldr	r0, .L31
 340              	.LVL21:
 341 0008 FFF7FEFF 		bl	HAL_I2S_Transmit_DMA
 342              	.LVL22:
 343 000c 08BD     		pop	{r3, pc}
 344              	.L32:
 345 000e 00BF     		.align	2
 346              	.L31:
 347 0010 00000000 		.word	hAudioOutI2s
 348              		.cfi_endproc
 349              	.LFE126:
 351              		.section	.text.BSP_AUDIO_OUT_Pause,"ax",%progbits
 352              		.align	1
 353              		.global	BSP_AUDIO_OUT_Pause
 354              		.syntax unified
 355              		.thumb
 356              		.thumb_func
 357              		.fpu fpv4-sp-d16
 359              	BSP_AUDIO_OUT_Pause:
 360              	.LFB127:
 301:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Audio Codec Pause/Resume function */
 361              		.loc 1 301 0
 362              		.cfi_startproc
 363              		@ args = 0, pretend = 0, frame = 0
 364              		@ frame_needed = 0, uses_anonymous_args = 0
 365 0000 08B5     		push	{r3, lr}
 366              	.LCFI8:
 367              		.cfi_def_cfa_offset 8
 368              		.cfi_offset 3, -8
 369              		.cfi_offset 14, -4
 303:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 370              		.loc 1 303 0
 371 0002 064B     		ldr	r3, .L38
 372 0004 1B68     		ldr	r3, [r3]
 373 0006 1B69     		ldr	r3, [r3, #16]
 374 0008 9420     		movs	r0, #148
 375 000a 9847     		blx	r3
 376              	.LVL23:
 377 000c 08B1     		cbz	r0, .L37
 305:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 378              		.loc 1 305 0
 379 000e 0120     		movs	r0, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 27


 315:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 380              		.loc 1 315 0
 381 0010 08BD     		pop	{r3, pc}
 382              	.L37:
 310:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 383              		.loc 1 310 0
 384 0012 0348     		ldr	r0, .L38+4
 385 0014 FFF7FEFF 		bl	HAL_I2S_DMAPause
 386              	.LVL24:
 313:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 387              		.loc 1 313 0
 388 0018 0020     		movs	r0, #0
 389 001a 08BD     		pop	{r3, pc}
 390              	.L39:
 391              		.align	2
 392              	.L38:
 393 001c 00000000 		.word	.LANCHOR0
 394 0020 00000000 		.word	hAudioOutI2s
 395              		.cfi_endproc
 396              	.LFE127:
 398              		.section	.text.BSP_AUDIO_OUT_Resume,"ax",%progbits
 399              		.align	1
 400              		.global	BSP_AUDIO_OUT_Resume
 401              		.syntax unified
 402              		.thumb
 403              		.thumb_func
 404              		.fpu fpv4-sp-d16
 406              	BSP_AUDIO_OUT_Resume:
 407              	.LFB128:
 325:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Audio Codec Pause/Resume function */
 408              		.loc 1 325 0
 409              		.cfi_startproc
 410              		@ args = 0, pretend = 0, frame = 0
 411              		@ frame_needed = 0, uses_anonymous_args = 0
 412 0000 08B5     		push	{r3, lr}
 413              	.LCFI9:
 414              		.cfi_def_cfa_offset 8
 415              		.cfi_offset 3, -8
 416              		.cfi_offset 14, -4
 327:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 417              		.loc 1 327 0
 418 0002 064B     		ldr	r3, .L45
 419 0004 1B68     		ldr	r3, [r3]
 420 0006 5B69     		ldr	r3, [r3, #20]
 421 0008 9420     		movs	r0, #148
 422 000a 9847     		blx	r3
 423              	.LVL25:
 424 000c 08B1     		cbz	r0, .L44
 329:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 425              		.loc 1 329 0
 426 000e 0120     		movs	r0, #1
 339:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 427              		.loc 1 339 0
 428 0010 08BD     		pop	{r3, pc}
 429              	.L44:
 334:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 430              		.loc 1 334 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 28


 431 0012 0348     		ldr	r0, .L45+4
 432 0014 FFF7FEFF 		bl	HAL_I2S_DMAResume
 433              	.LVL26:
 337:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 434              		.loc 1 337 0
 435 0018 0020     		movs	r0, #0
 436 001a 08BD     		pop	{r3, pc}
 437              	.L46:
 438              		.align	2
 439              	.L45:
 440 001c 00000000 		.word	.LANCHOR0
 441 0020 00000000 		.word	hAudioOutI2s
 442              		.cfi_endproc
 443              	.LFE128:
 445              		.section	.text.BSP_AUDIO_OUT_Stop,"ax",%progbits
 446              		.align	1
 447              		.global	BSP_AUDIO_OUT_Stop
 448              		.syntax unified
 449              		.thumb
 450              		.thumb_func
 451              		.fpu fpv4-sp-d16
 453              	BSP_AUDIO_OUT_Stop:
 454              	.LFB129:
 349:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call DMA Stop to disable DMA stream before stopping codec */
 455              		.loc 1 349 0
 456              		.cfi_startproc
 457              		@ args = 0, pretend = 0, frame = 0
 458              		@ frame_needed = 0, uses_anonymous_args = 0
 459              	.LVL27:
 460 0000 10B5     		push	{r4, lr}
 461              	.LCFI10:
 462              		.cfi_def_cfa_offset 8
 463              		.cfi_offset 4, -8
 464              		.cfi_offset 14, -4
 465 0002 0446     		mov	r4, r0
 351:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 466              		.loc 1 351 0
 467 0004 0C48     		ldr	r0, .L53
 468              	.LVL28:
 469 0006 FFF7FEFF 		bl	HAL_I2S_DMAStop
 470              	.LVL29:
 354:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 471              		.loc 1 354 0
 472 000a 0C4B     		ldr	r3, .L53+4
 473 000c 1B68     		ldr	r3, [r3]
 474 000e 9B69     		ldr	r3, [r3, #24]
 475 0010 2146     		mov	r1, r4
 476 0012 9420     		movs	r0, #148
 477 0014 9847     		blx	r3
 478              	.LVL30:
 479 0016 68B9     		cbnz	r0, .L49
 360:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     { 
 480              		.loc 1 360 0
 481 0018 012C     		cmp	r4, #1
 482 001a 01D0     		beq	.L52
 370:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 483              		.loc 1 370 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 29


 484 001c 0020     		movs	r0, #0
 372:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 485              		.loc 1 372 0
 486 001e 10BD     		pop	{r4, pc}
 487              	.LVL31:
 488              	.L52:
 363:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****       
 489              		.loc 1 363 0
 490 0020 0120     		movs	r0, #1
 491 0022 FFF7FEFF 		bl	HAL_Delay
 492              	.LVL32:
 366:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 493              		.loc 1 366 0
 494 0026 0022     		movs	r2, #0
 495 0028 1021     		movs	r1, #16
 496 002a 0548     		ldr	r0, .L53+8
 497 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 498              	.LVL33:
 370:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 499              		.loc 1 370 0
 500 0030 0020     		movs	r0, #0
 501 0032 10BD     		pop	{r4, pc}
 502              	.LVL34:
 503              	.L49:
 356:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 504              		.loc 1 356 0
 505 0034 0120     		movs	r0, #1
 506 0036 10BD     		pop	{r4, pc}
 507              	.LVL35:
 508              	.L54:
 509              		.align	2
 510              	.L53:
 511 0038 00000000 		.word	hAudioOutI2s
 512 003c 00000000 		.word	.LANCHOR0
 513 0040 000C0240 		.word	1073875968
 514              		.cfi_endproc
 515              	.LFE129:
 517              		.section	.text.BSP_AUDIO_OUT_SetVolume,"ax",%progbits
 518              		.align	1
 519              		.global	BSP_AUDIO_OUT_SetVolume
 520              		.syntax unified
 521              		.thumb
 522              		.thumb_func
 523              		.fpu fpv4-sp-d16
 525              	BSP_AUDIO_OUT_SetVolume:
 526              	.LFB130:
 381:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the codec volume control function with converted volume value */
 527              		.loc 1 381 0
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 0
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531              	.LVL36:
 532 0000 08B5     		push	{r3, lr}
 533              	.LCFI11:
 534              		.cfi_def_cfa_offset 8
 535              		.cfi_offset 3, -8
 536              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 30


 383:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 537              		.loc 1 383 0
 538 0002 054B     		ldr	r3, .L60
 539 0004 1B68     		ldr	r3, [r3]
 540 0006 1B6A     		ldr	r3, [r3, #32]
 541 0008 0146     		mov	r1, r0
 542 000a 9420     		movs	r0, #148
 543              	.LVL37:
 544 000c 9847     		blx	r3
 545              	.LVL38:
 546 000e 08B9     		cbnz	r0, .L59
 390:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 547              		.loc 1 390 0
 548 0010 0020     		movs	r0, #0
 392:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 549              		.loc 1 392 0
 550 0012 08BD     		pop	{r3, pc}
 551              	.L59:
 385:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 552              		.loc 1 385 0
 553 0014 0120     		movs	r0, #1
 554 0016 08BD     		pop	{r3, pc}
 555              	.L61:
 556              		.align	2
 557              	.L60:
 558 0018 00000000 		.word	.LANCHOR0
 559              		.cfi_endproc
 560              	.LFE130:
 562              		.section	.text.BSP_AUDIO_OUT_SetMute,"ax",%progbits
 563              		.align	1
 564              		.global	BSP_AUDIO_OUT_SetMute
 565              		.syntax unified
 566              		.thumb
 567              		.thumb_func
 568              		.fpu fpv4-sp-d16
 570              	BSP_AUDIO_OUT_SetMute:
 571              	.LFB131:
 401:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Codec Mute function */
 572              		.loc 1 401 0
 573              		.cfi_startproc
 574              		@ args = 0, pretend = 0, frame = 0
 575              		@ frame_needed = 0, uses_anonymous_args = 0
 576              	.LVL39:
 577 0000 08B5     		push	{r3, lr}
 578              	.LCFI12:
 579              		.cfi_def_cfa_offset 8
 580              		.cfi_offset 3, -8
 581              		.cfi_offset 14, -4
 403:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 582              		.loc 1 403 0
 583 0002 054B     		ldr	r3, .L67
 584 0004 1B68     		ldr	r3, [r3]
 585 0006 5B6A     		ldr	r3, [r3, #36]
 586 0008 0146     		mov	r1, r0
 587 000a 9420     		movs	r0, #148
 588              	.LVL40:
 589 000c 9847     		blx	r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 31


 590              	.LVL41:
 591 000e 08B9     		cbnz	r0, .L66
 410:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 592              		.loc 1 410 0
 593 0010 0020     		movs	r0, #0
 412:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 594              		.loc 1 412 0
 595 0012 08BD     		pop	{r3, pc}
 596              	.L66:
 405:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 597              		.loc 1 405 0
 598 0014 0120     		movs	r0, #1
 599 0016 08BD     		pop	{r3, pc}
 600              	.L68:
 601              		.align	2
 602              	.L67:
 603 0018 00000000 		.word	.LANCHOR0
 604              		.cfi_endproc
 605              	.LFE131:
 607              		.section	.text.BSP_AUDIO_OUT_SetOutputMode,"ax",%progbits
 608              		.align	1
 609              		.global	BSP_AUDIO_OUT_SetOutputMode
 610              		.syntax unified
 611              		.thumb
 612              		.thumb_func
 613              		.fpu fpv4-sp-d16
 615              	BSP_AUDIO_OUT_SetOutputMode:
 616              	.LFB132:
 423:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Codec output Device function */
 617              		.loc 1 423 0
 618              		.cfi_startproc
 619              		@ args = 0, pretend = 0, frame = 0
 620              		@ frame_needed = 0, uses_anonymous_args = 0
 621              	.LVL42:
 622 0000 08B5     		push	{r3, lr}
 623              	.LCFI13:
 624              		.cfi_def_cfa_offset 8
 625              		.cfi_offset 3, -8
 626              		.cfi_offset 14, -4
 425:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 627              		.loc 1 425 0
 628 0002 054B     		ldr	r3, .L74
 629 0004 1B68     		ldr	r3, [r3]
 630 0006 9B6A     		ldr	r3, [r3, #40]
 631 0008 0146     		mov	r1, r0
 632 000a 9420     		movs	r0, #148
 633              	.LVL43:
 634 000c 9847     		blx	r3
 635              	.LVL44:
 636 000e 08B9     		cbnz	r0, .L73
 432:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 637              		.loc 1 432 0
 638 0010 0020     		movs	r0, #0
 434:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 639              		.loc 1 434 0
 640 0012 08BD     		pop	{r3, pc}
 641              	.L73:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 32


 427:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 642              		.loc 1 427 0
 643 0014 0120     		movs	r0, #1
 644 0016 08BD     		pop	{r3, pc}
 645              	.L75:
 646              		.align	2
 647              	.L74:
 648 0018 00000000 		.word	.LANCHOR0
 649              		.cfi_endproc
 650              	.LFE132:
 652              		.section	.text.BSP_AUDIO_OUT_ClockConfig,"ax",%progbits
 653              		.align	1
 654              		.weak	BSP_AUDIO_OUT_ClockConfig
 655              		.syntax unified
 656              		.thumb
 657              		.thumb_func
 658              		.fpu fpv4-sp-d16
 660              	BSP_AUDIO_OUT_ClockConfig:
 661              	.LFB136:
 487:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   RCC_PeriphCLKInitTypeDef rccclkinit;
 662              		.loc 1 487 0
 663              		.cfi_startproc
 664              		@ args = 0, pretend = 0, frame = 16
 665              		@ frame_needed = 0, uses_anonymous_args = 0
 666              	.LVL45:
 667 0000 10B5     		push	{r4, lr}
 668              	.LCFI14:
 669              		.cfi_def_cfa_offset 8
 670              		.cfi_offset 4, -8
 671              		.cfi_offset 14, -4
 672 0002 84B0     		sub	sp, sp, #16
 673              	.LCFI15:
 674              		.cfi_def_cfa_offset 24
 675              	.LVL46:
 489:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 676              		.loc 1 489 0
 677 0004 FF24     		movs	r4, #255
 491:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 678              		.loc 1 491 0
 679 0006 0023     		movs	r3, #0
 680 0008 01E0     		b	.L77
 681              	.LVL47:
 682              	.L78:
 491:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 683              		.loc 1 491 0 is_stmt 0 discriminator 2
 684 000a 0133     		adds	r3, r3, #1
 685              	.LVL48:
 686 000c DBB2     		uxtb	r3, r3
 687              	.LVL49:
 688              	.L77:
 491:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 689              		.loc 1 491 0 discriminator 1
 690 000e 072B     		cmp	r3, #7
 691 0010 06D8     		bhi	.L84
 493:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     {
 692              		.loc 1 493 0 is_stmt 1
 693 0012 134A     		ldr	r2, .L86
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 33


 694 0014 52F82320 		ldr	r2, [r2, r3, lsl #2]
 695 0018 8A42     		cmp	r2, r1
 696 001a F6D1     		bne	.L78
 495:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 697              		.loc 1 495 0
 698 001c 1C46     		mov	r4, r3
 699              	.LVL50:
 700 001e F4E7     		b	.L78
 701              	.LVL51:
 702              	.L84:
 499:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLLI2S_VCO Input = HSE_VALUE/PLL_M = 1 Mhz */
 703              		.loc 1 499 0
 704 0020 6846     		mov	r0, sp
 705              	.LVL52:
 706 0022 FFF7FEFF 		bl	HAL_RCCEx_GetPeriphCLKConfig
 707              	.LVL53:
 501:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 708              		.loc 1 501 0
 709 0026 14F0070F 		tst	r4, #7
 710 002a 0BD0     		beq	.L85
 516:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 258;
 711              		.loc 1 516 0
 712 002c 0123     		movs	r3, #1
 713 002e 0093     		str	r3, [sp]
 517:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 3;
 714              		.loc 1 517 0
 715 0030 4FF48173 		mov	r3, #258
 716 0034 0193     		str	r3, [sp, #4]
 518:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 717              		.loc 1 518 0
 718 0036 0323     		movs	r3, #3
 719 0038 0293     		str	r3, [sp, #8]
 519:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 720              		.loc 1 519 0
 721 003a 6846     		mov	r0, sp
 722 003c FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 723              	.LVL54:
 724              	.L76:
 521:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 725              		.loc 1 521 0
 726 0040 04B0     		add	sp, sp, #16
 727              	.LCFI16:
 728              		.cfi_remember_state
 729              		.cfi_def_cfa_offset 8
 730              		@ sp needed
 731 0042 10BD     		pop	{r4, pc}
 732              	.LVL55:
 733              	.L85:
 734              	.LCFI17:
 735              		.cfi_restore_state
 506:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = I2SPLLN[freqindex];
 736              		.loc 1 506 0
 737 0044 0123     		movs	r3, #1
 738 0046 0093     		str	r3, [sp]
 507:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = I2SPLLR[freqindex];
 739              		.loc 1 507 0
 740 0048 064B     		ldr	r3, .L86+4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 34


 741 004a 53F82430 		ldr	r3, [r3, r4, lsl #2]
 742 004e 0193     		str	r3, [sp, #4]
 508:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 743              		.loc 1 508 0
 744 0050 054B     		ldr	r3, .L86+8
 745 0052 53F82430 		ldr	r3, [r3, r4, lsl #2]
 746 0056 0293     		str	r3, [sp, #8]
 509:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 747              		.loc 1 509 0
 748 0058 6846     		mov	r0, sp
 749 005a FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 750              	.LVL56:
 751 005e EFE7     		b	.L76
 752              	.L87:
 753              		.align	2
 754              	.L86:
 755 0060 00000000 		.word	.LANCHOR1
 756 0064 00000000 		.word	.LANCHOR2
 757 0068 00000000 		.word	.LANCHOR3
 758              		.cfi_endproc
 759              	.LFE136:
 761              		.section	.text.BSP_AUDIO_OUT_SetFrequency,"ax",%progbits
 762              		.align	1
 763              		.global	BSP_AUDIO_OUT_SetFrequency
 764              		.syntax unified
 765              		.thumb
 766              		.thumb_func
 767              		.fpu fpv4-sp-d16
 769              	BSP_AUDIO_OUT_SetFrequency:
 770              	.LFB133:
 443:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLL clock is set depending by the AudioFreq (44.1khz vs 48khz groups) */ 
 771              		.loc 1 443 0
 772              		.cfi_startproc
 773              		@ args = 0, pretend = 0, frame = 0
 774              		@ frame_needed = 0, uses_anonymous_args = 0
 775              	.LVL57:
 776 0000 10B5     		push	{r4, lr}
 777              	.LCFI18:
 778              		.cfi_def_cfa_offset 8
 779              		.cfi_offset 4, -8
 780              		.cfi_offset 14, -4
 781 0002 0446     		mov	r4, r0
 445:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 782              		.loc 1 445 0
 783 0004 0022     		movs	r2, #0
 784 0006 0146     		mov	r1, r0
 785 0008 0348     		ldr	r0, .L90
 786              	.LVL58:
 787 000a FFF7FEFF 		bl	BSP_AUDIO_OUT_ClockConfig
 788              	.LVL59:
 448:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 789              		.loc 1 448 0
 790 000e 2046     		mov	r0, r4
 791 0010 FFF7FEFF 		bl	I2S3_Init
 792              	.LVL60:
 793 0014 10BD     		pop	{r4, pc}
 794              	.LVL61:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 35


 795              	.L91:
 796 0016 00BF     		.align	2
 797              	.L90:
 798 0018 00000000 		.word	hAudioOutI2s
 799              		.cfi_endproc
 800              	.LFE133:
 802              		.section	.text.BSP_AUDIO_OUT_MspInit,"ax",%progbits
 803              		.align	1
 804              		.weak	BSP_AUDIO_OUT_MspInit
 805              		.syntax unified
 806              		.thumb
 807              		.thumb_func
 808              		.fpu fpv4-sp-d16
 810              	BSP_AUDIO_OUT_MspInit:
 811              	.LFB137:
 529:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   static DMA_HandleTypeDef hdma_i2sTx;
 812              		.loc 1 529 0
 813              		.cfi_startproc
 814              		@ args = 0, pretend = 0, frame = 40
 815              		@ frame_needed = 0, uses_anonymous_args = 0
 816              	.LVL62:
 817 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 818              	.LCFI19:
 819              		.cfi_def_cfa_offset 20
 820              		.cfi_offset 4, -20
 821              		.cfi_offset 5, -16
 822              		.cfi_offset 6, -12
 823              		.cfi_offset 7, -8
 824              		.cfi_offset 14, -4
 825 0002 8BB0     		sub	sp, sp, #44
 826              	.LCFI20:
 827              		.cfi_def_cfa_offset 64
 828 0004 0646     		mov	r6, r0
 829              	.LBB3:
 534:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 830              		.loc 1 534 0
 831 0006 0025     		movs	r5, #0
 832 0008 0095     		str	r5, [sp]
 833 000a 3E4C     		ldr	r4, .L96
 834 000c 236C     		ldr	r3, [r4, #64]
 835 000e 43F40043 		orr	r3, r3, #32768
 836 0012 2364     		str	r3, [r4, #64]
 837 0014 236C     		ldr	r3, [r4, #64]
 838 0016 03F40043 		and	r3, r3, #32768
 839 001a 0093     		str	r3, [sp]
 840 001c 009B     		ldr	r3, [sp]
 841              	.LBE3:
 842              	.LBB4:
 538:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S3_WS_CLK_ENABLE();
 843              		.loc 1 538 0
 844 001e 0195     		str	r5, [sp, #4]
 845 0020 236B     		ldr	r3, [r4, #48]
 846 0022 43F00403 		orr	r3, r3, #4
 847 0026 2363     		str	r3, [r4, #48]
 848 0028 236B     		ldr	r3, [r4, #48]
 849 002a 03F00403 		and	r3, r3, #4
 850 002e 0193     		str	r3, [sp, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 36


 851 0030 019B     		ldr	r3, [sp, #4]
 852              	.LBE4:
 853              	.LBB5:
 539:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 854              		.loc 1 539 0
 855 0032 0295     		str	r5, [sp, #8]
 856 0034 236B     		ldr	r3, [r4, #48]
 857 0036 43F00103 		orr	r3, r3, #1
 858 003a 2363     		str	r3, [r4, #48]
 859 003c 236B     		ldr	r3, [r4, #48]
 860 003e 03F00103 		and	r3, r3, #1
 861 0042 0293     		str	r3, [sp, #8]
 862 0044 029B     		ldr	r3, [sp, #8]
 863              	.LBE5:
 542:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Mode        = GPIO_MODE_AF_PP;
 864              		.loc 1 542 0
 865 0046 4FF4A053 		mov	r3, #5120
 866 004a 0593     		str	r3, [sp, #20]
 543:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pull        = GPIO_NOPULL;
 867              		.loc 1 543 0
 868 004c 0223     		movs	r3, #2
 869 004e 0693     		str	r3, [sp, #24]
 544:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Speed       = GPIO_SPEED_FAST;
 870              		.loc 1 544 0
 871 0050 0795     		str	r5, [sp, #28]
 545:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate   = I2S3_SCK_SD_WS_AF;
 872              		.loc 1 545 0
 873 0052 0893     		str	r3, [sp, #32]
 546:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_SCK_SD_GPIO_PORT, &GPIO_InitStruct);
 874              		.loc 1 546 0
 875 0054 0623     		movs	r3, #6
 876 0056 0993     		str	r3, [sp, #36]
 547:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 877              		.loc 1 547 0
 878 0058 2B4F     		ldr	r7, .L96+4
 879 005a 05A9     		add	r1, sp, #20
 880              	.LVL63:
 881 005c 3846     		mov	r0, r7
 882              	.LVL64:
 883 005e FFF7FEFF 		bl	HAL_GPIO_Init
 884              	.LVL65:
 549:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_WS_GPIO_PORT, &GPIO_InitStruct); 
 885              		.loc 1 549 0
 886 0062 1023     		movs	r3, #16
 887 0064 0593     		str	r3, [sp, #20]
 550:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 888              		.loc 1 550 0
 889 0066 05A9     		add	r1, sp, #20
 890 0068 2848     		ldr	r0, .L96+8
 891 006a FFF7FEFF 		bl	HAL_GPIO_Init
 892              	.LVL66:
 893              	.LBB6:
 553:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pin         = I2S3_MCK_PIN; 
 894              		.loc 1 553 0
 895 006e 0395     		str	r5, [sp, #12]
 896 0070 236B     		ldr	r3, [r4, #48]
 897 0072 43F00403 		orr	r3, r3, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 37


 898 0076 2363     		str	r3, [r4, #48]
 899 0078 236B     		ldr	r3, [r4, #48]
 900 007a 03F00403 		and	r3, r3, #4
 901 007e 0393     		str	r3, [sp, #12]
 902 0080 039B     		ldr	r3, [sp, #12]
 903              	.LBE6:
 554:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S3_MCK_GPIO_PORT, &GPIO_InitStruct);   
 904              		.loc 1 554 0
 905 0082 8023     		movs	r3, #128
 906 0084 0593     		str	r3, [sp, #20]
 555:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 907              		.loc 1 555 0
 908 0086 05A9     		add	r1, sp, #20
 909 0088 3846     		mov	r0, r7
 910 008a FFF7FEFF 		bl	HAL_GPIO_Init
 911              	.LVL67:
 912              	.LBB7:
 558:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 913              		.loc 1 558 0
 914 008e 0495     		str	r5, [sp, #16]
 915 0090 236B     		ldr	r3, [r4, #48]
 916 0092 43F40013 		orr	r3, r3, #2097152
 917 0096 2363     		str	r3, [r4, #48]
 918 0098 236B     		ldr	r3, [r4, #48]
 919 009a 03F40013 		and	r3, r3, #2097152
 920 009e 0493     		str	r3, [sp, #16]
 921 00a0 049B     		ldr	r3, [sp, #16]
 922              	.LBE7:
 560:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 923              		.loc 1 560 0
 924 00a2 3268     		ldr	r2, [r6]
 925 00a4 1A4B     		ldr	r3, .L96+12
 926 00a6 9A42     		cmp	r2, r3
 927 00a8 09D0     		beq	.L95
 928              	.L93:
 589:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_EnableIRQ(I2S3_DMAx_IRQ); 
 929              		.loc 1 589 0
 930 00aa 0022     		movs	r2, #0
 931 00ac 0E21     		movs	r1, #14
 932 00ae 2F20     		movs	r0, #47
 933 00b0 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 934              	.LVL68:
 590:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 935              		.loc 1 590 0
 936 00b4 2F20     		movs	r0, #47
 937 00b6 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 938              	.LVL69:
 591:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 939              		.loc 1 591 0
 940 00ba 0BB0     		add	sp, sp, #44
 941              	.LCFI21:
 942              		.cfi_remember_state
 943              		.cfi_def_cfa_offset 20
 944              		@ sp needed
 945 00bc F0BD     		pop	{r4, r5, r6, r7, pc}
 946              	.LVL70:
 947              	.L95:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 38


 948              	.LCFI22:
 949              		.cfi_restore_state
 563:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Direction           = DMA_MEMORY_TO_PERIPH;
 950              		.loc 1 563 0
 951 00be 154C     		ldr	r4, .L96+16
 952 00c0 6560     		str	r5, [r4, #4]
 564:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphInc           = DMA_PINC_DISABLE;
 953              		.loc 1 564 0
 954 00c2 4022     		movs	r2, #64
 955 00c4 A260     		str	r2, [r4, #8]
 565:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemInc              = DMA_MINC_ENABLE;
 956              		.loc 1 565 0
 957 00c6 E560     		str	r5, [r4, #12]
 566:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphDataAlignment = I2S3_DMAx_PERIPH_DATA_SIZE;
 958              		.loc 1 566 0
 959 00c8 4FF48062 		mov	r2, #1024
 960 00cc 2261     		str	r2, [r4, #16]
 567:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemDataAlignment    = I2S3_DMAx_MEM_DATA_SIZE;
 961              		.loc 1 567 0
 962 00ce 4FF40062 		mov	r2, #2048
 963 00d2 6261     		str	r2, [r4, #20]
 568:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Mode                = DMA_NORMAL;
 964              		.loc 1 568 0
 965 00d4 4FF40052 		mov	r2, #8192
 966 00d8 A261     		str	r2, [r4, #24]
 569:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.Priority            = DMA_PRIORITY_HIGH;
 967              		.loc 1 569 0
 968 00da E561     		str	r5, [r4, #28]
 570:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.FIFOMode            = DMA_FIFOMODE_ENABLE;         
 969              		.loc 1 570 0
 970 00dc 4FF40032 		mov	r2, #131072
 971 00e0 2262     		str	r2, [r4, #32]
 571:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.FIFOThreshold       = DMA_FIFO_THRESHOLD_FULL;
 972              		.loc 1 571 0
 973 00e2 0422     		movs	r2, #4
 974 00e4 6262     		str	r2, [r4, #36]
 572:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.MemBurst            = DMA_MBURST_SINGLE;
 975              		.loc 1 572 0
 976 00e6 0322     		movs	r2, #3
 977 00e8 A262     		str	r2, [r4, #40]
 573:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sTx.Init.PeriphBurst         = DMA_PBURST_SINGLE; 
 978              		.loc 1 573 0
 979 00ea E562     		str	r5, [r4, #44]
 574:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 980              		.loc 1 574 0
 981 00ec 2563     		str	r5, [r4, #48]
 576:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 982              		.loc 1 576 0
 983 00ee 0A4B     		ldr	r3, .L96+20
 984 00f0 2360     		str	r3, [r4]
 579:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 985              		.loc 1 579 0
 986 00f2 B463     		str	r4, [r6, #56]
 987 00f4 A663     		str	r6, [r4, #56]
 582:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 988              		.loc 1 582 0
 989 00f6 2046     		mov	r0, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 39


 990 00f8 FFF7FEFF 		bl	HAL_DMA_DeInit
 991              	.LVL71:
 585:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 992              		.loc 1 585 0
 993 00fc 2046     		mov	r0, r4
 994 00fe FFF7FEFF 		bl	HAL_DMA_Init
 995              	.LVL72:
 996 0102 D2E7     		b	.L93
 997              	.L97:
 998              		.align	2
 999              	.L96:
 1000 0104 00380240 		.word	1073887232
 1001 0108 00080240 		.word	1073874944
 1002 010c 00000240 		.word	1073872896
 1003 0110 003C0040 		.word	1073757184
 1004 0114 00000000 		.word	.LANCHOR4
 1005 0118 B8600240 		.word	1073897656
 1006              		.cfi_endproc
 1007              	.LFE137:
 1009              		.section	.text.BSP_AUDIO_OUT_Init,"ax",%progbits
 1010              		.align	1
 1011              		.global	BSP_AUDIO_OUT_Init
 1012              		.syntax unified
 1013              		.thumb
 1014              		.thumb_func
 1015              		.fpu fpv4-sp-d16
 1017              	BSP_AUDIO_OUT_Init:
 1018              	.LFB124:
 214:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint8_t ret = AUDIO_OK;
 1019              		.loc 1 214 0
 1020              		.cfi_startproc
 1021              		@ args = 0, pretend = 0, frame = 0
 1022              		@ frame_needed = 0, uses_anonymous_args = 0
 1023              	.LVL73:
 1024 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1025              	.LCFI23:
 1026              		.cfi_def_cfa_offset 24
 1027              		.cfi_offset 4, -24
 1028              		.cfi_offset 5, -20
 1029              		.cfi_offset 6, -16
 1030              		.cfi_offset 7, -12
 1031              		.cfi_offset 8, -8
 1032              		.cfi_offset 14, -4
 1033 0004 8046     		mov	r8, r0
 1034 0006 0F46     		mov	r7, r1
 1035 0008 1546     		mov	r5, r2
 1036              	.LVL74:
 218:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1037              		.loc 1 218 0
 1038 000a 194C     		ldr	r4, .L110
 1039 000c 0022     		movs	r2, #0
 1040              	.LVL75:
 1041 000e 2946     		mov	r1, r5
 1042              	.LVL76:
 1043 0010 2046     		mov	r0, r4
 1044              	.LVL77:
 1045 0012 FFF7FEFF 		bl	BSP_AUDIO_OUT_ClockConfig
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 40


 1046              	.LVL78:
 222:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_GetState(&hAudioOutI2s) == HAL_I2S_STATE_RESET)
 1047              		.loc 1 222 0
 1048 0016 174B     		ldr	r3, .L110+4
 1049 0018 2360     		str	r3, [r4]
 223:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1050              		.loc 1 223 0
 1051 001a 2046     		mov	r0, r4
 1052 001c FFF7FEFF 		bl	HAL_I2S_GetState
 1053              	.LVL79:
 1054 0020 50B1     		cbz	r0, .L106
 1055              	.L99:
 232:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1056              		.loc 1 232 0
 1057 0022 2846     		mov	r0, r5
 1058 0024 FFF7FEFF 		bl	I2S3_Init
 1059              	.LVL80:
 1060 0028 0446     		mov	r4, r0
 1061 002a 00B1     		cbz	r0, .L100
 234:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1062              		.loc 1 234 0
 1063 002c 0124     		movs	r4, #1
 1064              	.L100:
 1065              	.LVL81:
 237:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1066              		.loc 1 237 0
 1067 002e 44B1     		cbz	r4, .L107
 1068              	.LVL82:
 1069              	.L101:
 251:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1070              		.loc 1 251 0
 1071 0030 ACB1     		cbz	r4, .L108
 1072              	.L102:
 257:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1073              		.loc 1 257 0
 1074 0032 2046     		mov	r0, r4
 1075 0034 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1076              	.LVL83:
 1077              	.L106:
 226:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1078              		.loc 1 226 0
 1079 0038 0021     		movs	r1, #0
 1080 003a 2046     		mov	r0, r4
 1081 003c FFF7FEFF 		bl	BSP_AUDIO_OUT_MspInit
 1082              	.LVL84:
 1083 0040 EFE7     		b	.L99
 1084              	.LVL85:
 1085              	.L107:
 240:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     {  
 1086              		.loc 1 240 0
 1087 0042 0D4B     		ldr	r3, .L110+8
 1088 0044 9B68     		ldr	r3, [r3, #8]
 1089 0046 9420     		movs	r0, #148
 1090 0048 9847     		blx	r3
 1091              	.LVL86:
 1092 004a 00F0F800 		and	r0, r0, #248
 1093 004e E028     		cmp	r0, #224
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 41


 1094 0050 01D0     		beq	.L109
 247:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 1095              		.loc 1 247 0
 1096 0052 0124     		movs	r4, #1
 1097              	.LVL87:
 1098 0054 ECE7     		b	.L101
 1099              	.LVL88:
 1100              	.L109:
 243:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     }
 1101              		.loc 1 243 0
 1102 0056 084A     		ldr	r2, .L110+8
 1103 0058 084B     		ldr	r3, .L110+12
 1104 005a 1A60     		str	r2, [r3]
 1105 005c E8E7     		b	.L101
 1106              	.L108:
 253:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1107              		.loc 1 253 0
 1108 005e 074B     		ldr	r3, .L110+12
 1109 0060 1B68     		ldr	r3, [r3]
 1110 0062 1E68     		ldr	r6, [r3]
 1111 0064 2B46     		mov	r3, r5
 1112 0066 3A46     		mov	r2, r7
 1113 0068 4146     		mov	r1, r8
 1114 006a 9420     		movs	r0, #148
 1115 006c B047     		blx	r6
 1116              	.LVL89:
 1117 006e E0E7     		b	.L102
 1118              	.L111:
 1119              		.align	2
 1120              	.L110:
 1121 0070 00000000 		.word	hAudioOutI2s
 1122 0074 003C0040 		.word	1073757184
 1123 0078 00000000 		.word	cs43l22_drv
 1124 007c 00000000 		.word	.LANCHOR0
 1125              		.cfi_endproc
 1126              	.LFE124:
 1128              		.section	.text.BSP_AUDIO_OUT_MspDeInit,"ax",%progbits
 1129              		.align	1
 1130              		.weak	BSP_AUDIO_OUT_MspDeInit
 1131              		.syntax unified
 1132              		.thumb
 1133              		.thumb_func
 1134              		.fpu fpv4-sp-d16
 1136              	BSP_AUDIO_OUT_MspDeInit:
 1137              	.LFB138:
 599:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  GPIO_InitStruct;
 1138              		.loc 1 599 0
 1139              		.cfi_startproc
 1140              		@ args = 0, pretend = 0, frame = 0
 1141              		@ frame_needed = 0, uses_anonymous_args = 0
 1142              	.LVL90:
 1143 0000 10B5     		push	{r4, lr}
 1144              	.LCFI24:
 1145              		.cfi_def_cfa_offset 8
 1146              		.cfi_offset 4, -8
 1147              		.cfi_offset 14, -4
 1148 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 42


 603:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1149              		.loc 1 603 0
 1150 0004 2F20     		movs	r0, #47
 1151              	.LVL91:
 1152 0006 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1153              	.LVL92:
 605:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1154              		.loc 1 605 0
 1155 000a 2268     		ldr	r2, [r4]
 1156 000c 104B     		ldr	r3, .L116
 1157 000e 9A42     		cmp	r2, r3
 1158 0010 1AD0     		beq	.L115
 1159              	.L113:
 612:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1160              		.loc 1 612 0
 1161 0012 2268     		ldr	r2, [r4]
 1162 0014 D369     		ldr	r3, [r2, #28]
 1163 0016 23F48063 		bic	r3, r3, #1024
 1164 001a 1B04     		lsls	r3, r3, #16
 1165 001c 1B0C     		lsrs	r3, r3, #16
 1166 001e D361     		str	r3, [r2, #28]
 616:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1167              		.loc 1 616 0
 1168 0020 0C4C     		ldr	r4, .L116+4
 1169              	.LVL93:
 1170 0022 4FF4A051 		mov	r1, #5120
 1171 0026 2046     		mov	r0, r4
 1172 0028 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1173              	.LVL94:
 620:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1174              		.loc 1 620 0
 1175 002c 1021     		movs	r1, #16
 1176 002e 0A48     		ldr	r0, .L116+8
 1177 0030 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1178              	.LVL95:
 624:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1179              		.loc 1 624 0
 1180 0034 8021     		movs	r1, #128
 1181 0036 2046     		mov	r0, r4
 1182 0038 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1183              	.LVL96:
 627:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1184              		.loc 1 627 0
 1185 003c 074A     		ldr	r2, .L116+12
 1186 003e 136C     		ldr	r3, [r2, #64]
 1187 0040 23F40043 		bic	r3, r3, #32768
 1188 0044 1364     		str	r3, [r2, #64]
 1189 0046 10BD     		pop	{r4, pc}
 1190              	.LVL97:
 1191              	.L115:
 608:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1192              		.loc 1 608 0
 1193 0048 A06B     		ldr	r0, [r4, #56]
 1194 004a FFF7FEFF 		bl	HAL_DMA_DeInit
 1195              	.LVL98:
 1196 004e E0E7     		b	.L113
 1197              	.L117:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 43


 1198              		.align	2
 1199              	.L116:
 1200 0050 003C0040 		.word	1073757184
 1201 0054 00080240 		.word	1073874944
 1202 0058 00000240 		.word	1073872896
 1203 005c 00380240 		.word	1073887232
 1204              		.cfi_endproc
 1205              	.LFE138:
 1207              		.section	.text.BSP_AUDIO_OUT_TransferComplete_CallBack,"ax",%progbits
 1208              		.align	1
 1209              		.weak	BSP_AUDIO_OUT_TransferComplete_CallBack
 1210              		.syntax unified
 1211              		.thumb
 1212              		.thumb_func
 1213              		.fpu fpv4-sp-d16
 1215              	BSP_AUDIO_OUT_TransferComplete_CallBack:
 1216              	.LFB139:
 637:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 1217              		.loc 1 637 0
 1218              		.cfi_startproc
 1219              		@ args = 0, pretend = 0, frame = 0
 1220              		@ frame_needed = 0, uses_anonymous_args = 0
 1221              		@ link register save eliminated.
 1222 0000 7047     		bx	lr
 1223              		.cfi_endproc
 1224              	.LFE139:
 1226              		.section	.text.HAL_I2S_TxCpltCallback,"ax",%progbits
 1227              		.align	1
 1228              		.global	HAL_I2S_TxCpltCallback
 1229              		.syntax unified
 1230              		.thumb
 1231              		.thumb_func
 1232              		.fpu fpv4-sp-d16
 1234              	HAL_I2S_TxCpltCallback:
 1235              	.LFB134:
 456:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 1236              		.loc 1 456 0
 1237              		.cfi_startproc
 1238              		@ args = 0, pretend = 0, frame = 0
 1239              		@ frame_needed = 0, uses_anonymous_args = 0
 1240              	.LVL99:
 456:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 1241              		.loc 1 456 0
 1242 0000 08B5     		push	{r3, lr}
 1243              	.LCFI25:
 1244              		.cfi_def_cfa_offset 8
 1245              		.cfi_offset 3, -8
 1246              		.cfi_offset 14, -4
 457:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1247              		.loc 1 457 0
 1248 0002 0268     		ldr	r2, [r0]
 1249 0004 034B     		ldr	r3, .L123
 1250 0006 9A42     		cmp	r2, r3
 1251 0008 00D0     		beq	.L122
 1252              	.LVL100:
 1253              	.L119:
 1254 000a 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 44


 1255              	.LVL101:
 1256              	.L122:
 460:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1257              		.loc 1 460 0
 1258 000c FFF7FEFF 		bl	BSP_AUDIO_OUT_TransferComplete_CallBack
 1259              	.LVL102:
 462:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1260              		.loc 1 462 0
 1261 0010 FBE7     		b	.L119
 1262              	.L124:
 1263 0012 00BF     		.align	2
 1264              	.L123:
 1265 0014 003C0040 		.word	1073757184
 1266              		.cfi_endproc
 1267              	.LFE134:
 1269              		.section	.text.BSP_AUDIO_OUT_HalfTransfer_CallBack,"ax",%progbits
 1270              		.align	1
 1271              		.weak	BSP_AUDIO_OUT_HalfTransfer_CallBack
 1272              		.syntax unified
 1273              		.thumb
 1274              		.thumb_func
 1275              		.fpu fpv4-sp-d16
 1277              	BSP_AUDIO_OUT_HalfTransfer_CallBack:
 1278              	.LFB140:
 644:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 1279              		.loc 1 644 0
 1280              		.cfi_startproc
 1281              		@ args = 0, pretend = 0, frame = 0
 1282              		@ frame_needed = 0, uses_anonymous_args = 0
 1283              		@ link register save eliminated.
 1284 0000 7047     		bx	lr
 1285              		.cfi_endproc
 1286              	.LFE140:
 1288              		.section	.text.HAL_I2S_TxHalfCpltCallback,"ax",%progbits
 1289              		.align	1
 1290              		.global	HAL_I2S_TxHalfCpltCallback
 1291              		.syntax unified
 1292              		.thumb
 1293              		.thumb_func
 1294              		.fpu fpv4-sp-d16
 1296              	HAL_I2S_TxHalfCpltCallback:
 1297              	.LFB135:
 469:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 1298              		.loc 1 469 0
 1299              		.cfi_startproc
 1300              		@ args = 0, pretend = 0, frame = 0
 1301              		@ frame_needed = 0, uses_anonymous_args = 0
 1302              	.LVL103:
 469:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 1303              		.loc 1 469 0
 1304 0000 08B5     		push	{r3, lr}
 1305              	.LCFI26:
 1306              		.cfi_def_cfa_offset 8
 1307              		.cfi_offset 3, -8
 1308              		.cfi_offset 14, -4
 470:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1309              		.loc 1 470 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 45


 1310 0002 0268     		ldr	r2, [r0]
 1311 0004 034B     		ldr	r3, .L130
 1312 0006 9A42     		cmp	r2, r3
 1313 0008 00D0     		beq	.L129
 1314              	.LVL104:
 1315              	.L126:
 1316 000a 08BD     		pop	{r3, pc}
 1317              	.LVL105:
 1318              	.L129:
 474:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1319              		.loc 1 474 0
 1320 000c FFF7FEFF 		bl	BSP_AUDIO_OUT_HalfTransfer_CallBack
 1321              	.LVL106:
 476:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1322              		.loc 1 476 0
 1323 0010 FBE7     		b	.L126
 1324              	.L131:
 1325 0012 00BF     		.align	2
 1326              	.L130:
 1327 0014 003C0040 		.word	1073757184
 1328              		.cfi_endproc
 1329              	.LFE135:
 1331              		.section	.text.BSP_AUDIO_OUT_Error_CallBack,"ax",%progbits
 1332              		.align	1
 1333              		.weak	BSP_AUDIO_OUT_Error_CallBack
 1334              		.syntax unified
 1335              		.thumb
 1336              		.thumb_func
 1337              		.fpu fpv4-sp-d16
 1339              	BSP_AUDIO_OUT_Error_CallBack:
 1340              	.LFB141:
 651:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 1341              		.loc 1 651 0
 1342              		.cfi_startproc
 1343              		@ args = 0, pretend = 0, frame = 0
 1344              		@ frame_needed = 0, uses_anonymous_args = 0
 1345              		@ link register save eliminated.
 1346 0000 7047     		bx	lr
 1347              		.cfi_endproc
 1348              	.LFE141:
 1350              		.section	.text.BSP_AUDIO_IN_Record,"ax",%progbits
 1351              		.align	1
 1352              		.global	BSP_AUDIO_IN_Record
 1353              		.syntax unified
 1354              		.thumb
 1355              		.thumb_func
 1356              		.fpu fpv4-sp-d16
 1358              	BSP_AUDIO_IN_Record:
 1359              	.LFB144:
 735:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t ret = AUDIO_ERROR;
 1360              		.loc 1 735 0
 1361              		.cfi_startproc
 1362              		@ args = 0, pretend = 0, frame = 0
 1363              		@ frame_needed = 0, uses_anonymous_args = 0
 1364              	.LVL107:
 735:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t ret = AUDIO_ERROR;
 1365              		.loc 1 735 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 46


 1366 0000 08B5     		push	{r3, lr}
 1367              	.LCFI27:
 1368              		.cfi_def_cfa_offset 8
 1369              		.cfi_offset 3, -8
 1370              		.cfi_offset 14, -4
 1371              	.LVL108:
 739:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1372              		.loc 1 739 0
 1373 0002 8AB2     		uxth	r2, r1
 1374 0004 0146     		mov	r1, r0
 1375              	.LVL109:
 1376 0006 0248     		ldr	r0, .L135
 1377              	.LVL110:
 1378 0008 FFF7FEFF 		bl	HAL_I2S_Receive_DMA
 1379              	.LVL111:
 745:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1380              		.loc 1 745 0
 1381 000c 0020     		movs	r0, #0
 1382 000e 08BD     		pop	{r3, pc}
 1383              	.L136:
 1384              		.align	2
 1385              	.L135:
 1386 0010 00000000 		.word	hAudioInI2s
 1387              		.cfi_endproc
 1388              	.LFE144:
 1390              		.section	.text.BSP_AUDIO_IN_Stop,"ax",%progbits
 1391              		.align	1
 1392              		.global	BSP_AUDIO_IN_Stop
 1393              		.syntax unified
 1394              		.thumb
 1395              		.thumb_func
 1396              		.fpu fpv4-sp-d16
 1398              	BSP_AUDIO_IN_Stop:
 1399              	.LFB145:
 752:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint32_t ret = AUDIO_ERROR;
 1400              		.loc 1 752 0
 1401              		.cfi_startproc
 1402              		@ args = 0, pretend = 0, frame = 0
 1403              		@ frame_needed = 0, uses_anonymous_args = 0
 1404 0000 08B5     		push	{r3, lr}
 1405              	.LCFI28:
 1406              		.cfi_def_cfa_offset 8
 1407              		.cfi_offset 3, -8
 1408              		.cfi_offset 14, -4
 1409              	.LVL112:
 756:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1410              		.loc 1 756 0
 1411 0002 0248     		ldr	r0, .L139
 1412 0004 FFF7FEFF 		bl	HAL_I2S_DMAStop
 1413              	.LVL113:
 762:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1414              		.loc 1 762 0
 1415 0008 0020     		movs	r0, #0
 1416 000a 08BD     		pop	{r3, pc}
 1417              	.L140:
 1418              		.align	2
 1419              	.L139:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 47


 1420 000c 00000000 		.word	hAudioInI2s
 1421              		.cfi_endproc
 1422              	.LFE145:
 1424              		.section	.text.BSP_AUDIO_IN_Pause,"ax",%progbits
 1425              		.align	1
 1426              		.global	BSP_AUDIO_IN_Pause
 1427              		.syntax unified
 1428              		.thumb
 1429              		.thumb_func
 1430              		.fpu fpv4-sp-d16
 1432              	BSP_AUDIO_IN_Pause:
 1433              	.LFB146:
 769:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Media layer pause function */
 1434              		.loc 1 769 0
 1435              		.cfi_startproc
 1436              		@ args = 0, pretend = 0, frame = 0
 1437              		@ frame_needed = 0, uses_anonymous_args = 0
 1438 0000 08B5     		push	{r3, lr}
 1439              	.LCFI29:
 1440              		.cfi_def_cfa_offset 8
 1441              		.cfi_offset 3, -8
 1442              		.cfi_offset 14, -4
 771:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1443              		.loc 1 771 0
 1444 0002 0248     		ldr	r0, .L143
 1445 0004 FFF7FEFF 		bl	HAL_I2S_DMAPause
 1446              	.LVL114:
 775:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1447              		.loc 1 775 0
 1448 0008 0020     		movs	r0, #0
 1449 000a 08BD     		pop	{r3, pc}
 1450              	.L144:
 1451              		.align	2
 1452              	.L143:
 1453 000c 00000000 		.word	hAudioInI2s
 1454              		.cfi_endproc
 1455              	.LFE146:
 1457              		.section	.text.BSP_AUDIO_IN_Resume,"ax",%progbits
 1458              		.align	1
 1459              		.global	BSP_AUDIO_IN_Resume
 1460              		.syntax unified
 1461              		.thumb
 1462              		.thumb_func
 1463              		.fpu fpv4-sp-d16
 1465              	BSP_AUDIO_IN_Resume:
 1466              	.LFB147:
 782:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the Media layer pause/resume function */
 1467              		.loc 1 782 0
 1468              		.cfi_startproc
 1469              		@ args = 0, pretend = 0, frame = 0
 1470              		@ frame_needed = 0, uses_anonymous_args = 0
 1471 0000 08B5     		push	{r3, lr}
 1472              	.LCFI30:
 1473              		.cfi_def_cfa_offset 8
 1474              		.cfi_offset 3, -8
 1475              		.cfi_offset 14, -4
 784:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 48


 1476              		.loc 1 784 0
 1477 0002 0248     		ldr	r0, .L147
 1478 0004 FFF7FEFF 		bl	HAL_I2S_DMAResume
 1479              	.LVL115:
 788:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1480              		.loc 1 788 0
 1481 0008 0020     		movs	r0, #0
 1482 000a 08BD     		pop	{r3, pc}
 1483              	.L148:
 1484              		.align	2
 1485              	.L147:
 1486 000c 00000000 		.word	hAudioInI2s
 1487              		.cfi_endproc
 1488              	.LFE147:
 1490              		.section	.text.BSP_AUDIO_IN_SetVolume,"ax",%progbits
 1491              		.align	1
 1492              		.global	BSP_AUDIO_IN_SetVolume
 1493              		.syntax unified
 1494              		.thumb
 1495              		.thumb_func
 1496              		.fpu fpv4-sp-d16
 1498              	BSP_AUDIO_IN_SetVolume:
 1499              	.LFB148:
 797:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Set the Global variable AudioInVolume */
 1500              		.loc 1 797 0
 1501              		.cfi_startproc
 1502              		@ args = 0, pretend = 0, frame = 0
 1503              		@ frame_needed = 0, uses_anonymous_args = 0
 1504              		@ link register save eliminated.
 1505              	.LVL116:
 799:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1506              		.loc 1 799 0
 1507 0000 014B     		ldr	r3, .L150
 1508 0002 1880     		strh	r0, [r3]	@ movhi
 803:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1509              		.loc 1 803 0
 1510 0004 0020     		movs	r0, #0
 1511              	.LVL117:
 1512 0006 7047     		bx	lr
 1513              	.L151:
 1514              		.align	2
 1515              	.L150:
 1516 0008 00000000 		.word	.LANCHOR5
 1517              		.cfi_endproc
 1518              	.LFE148:
 1520              		.section	.text.BSP_AUDIO_IN_PDMToPCM,"ax",%progbits
 1521              		.align	1
 1522              		.global	BSP_AUDIO_IN_PDMToPCM
 1523              		.syntax unified
 1524              		.thumb
 1525              		.thumb_func
 1526              		.fpu fpv4-sp-d16
 1528              	BSP_AUDIO_IN_PDMToPCM:
 1529              	.LFB149:
 812:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   uint16_t AppPDM[INTERNAL_BUFF_SIZE/2];
 1530              		.loc 1 812 0
 1531              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 49


 1532              		@ args = 0, pretend = 0, frame = 128
 1533              		@ frame_needed = 0, uses_anonymous_args = 0
 1534              	.LVL118:
 1535 0000 30B5     		push	{r4, r5, lr}
 1536              	.LCFI31:
 1537              		.cfi_def_cfa_offset 12
 1538              		.cfi_offset 4, -12
 1539              		.cfi_offset 5, -8
 1540              		.cfi_offset 14, -4
 1541 0002 A1B0     		sub	sp, sp, #132
 1542              	.LCFI32:
 1543              		.cfi_def_cfa_offset 144
 1544 0004 0C46     		mov	r4, r1
 1545              	.LVL119:
 817:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1546              		.loc 1 817 0
 1547 0006 0023     		movs	r3, #0
 1548 0008 0AE0     		b	.L153
 1549              	.LVL120:
 1550              	.L154:
 819:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1551              		.loc 1 819 0 discriminator 3
 1552 000a 30F81310 		ldrh	r1, [r0, r3, lsl #1]
 1553 000e 0A02     		lsls	r2, r1, #8
 1554 0010 42EA1122 		orr	r2, r2, r1, lsr #8
 1555 0014 20A9     		add	r1, sp, #128
 1556 0016 01EB4301 		add	r1, r1, r3, lsl #1
 1557 001a 21F8802C 		strh	r2, [r1, #-128]	@ movhi
 817:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1558              		.loc 1 817 0 discriminator 3
 1559 001e 0133     		adds	r3, r3, #1
 1560              	.LVL121:
 1561              	.L153:
 817:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1562              		.loc 1 817 0 is_stmt 0 discriminator 1
 1563 0020 3F2B     		cmp	r3, #63
 1564 0022 F2D9     		bls	.L154
 1565 0024 0025     		movs	r5, #0
 1566 0026 0CE0     		b	.L155
 1567              	.LVL122:
 1568              	.L156:
 825:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1569              		.loc 1 825 0 is_stmt 1 discriminator 3
 1570 0028 6800     		lsls	r0, r5, #1
 1571 002a 0D4B     		ldr	r3, .L160
 1572 002c 1A88     		ldrh	r2, [r3]
 1573 002e 0D4B     		ldr	r3, .L160+4
 1574 0030 3421     		movs	r1, #52
 1575 0032 01FB0533 		mla	r3, r1, r5, r3
 1576 0036 92B2     		uxth	r2, r2
 1577 0038 2118     		adds	r1, r4, r0
 1578 003a 6844     		add	r0, r0, sp
 1579 003c FFF7FEFF 		bl	PDM_Filter_64_LSB
 1580              	.LVL123:
 822:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1581              		.loc 1 822 0 discriminator 3
 1582 0040 0135     		adds	r5, r5, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 50


 1583              	.LVL124:
 1584              	.L155:
 822:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1585              		.loc 1 822 0 is_stmt 0 discriminator 1
 1586 0042 002D     		cmp	r5, #0
 1587 0044 F0D0     		beq	.L156
 1588 0046 0023     		movs	r3, #0
 1589 0048 05E0     		b	.L157
 1590              	.LVL125:
 1591              	.L158:
 830:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1592              		.loc 1 830 0 is_stmt 1 discriminator 3
 1593 004a 9A00     		lsls	r2, r3, #2
 1594 004c 0232     		adds	r2, r2, #2
 1595 004e 34F82310 		ldrh	r1, [r4, r3, lsl #2]
 1596 0052 A152     		strh	r1, [r4, r2]	@ movhi
 828:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1597              		.loc 1 828 0 discriminator 3
 1598 0054 0133     		adds	r3, r3, #1
 1599              	.LVL126:
 1600              	.L157:
 828:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1601              		.loc 1 828 0 is_stmt 0 discriminator 1
 1602 0056 0F2B     		cmp	r3, #15
 1603 0058 F7D9     		bls	.L158
 835:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1604              		.loc 1 835 0 is_stmt 1
 1605 005a 0020     		movs	r0, #0
 1606 005c 21B0     		add	sp, sp, #132
 1607              	.LCFI33:
 1608              		.cfi_def_cfa_offset 12
 1609              		@ sp needed
 1610 005e 30BD     		pop	{r4, r5, pc}
 1611              	.LVL127:
 1612              	.L161:
 1613              		.align	2
 1614              	.L160:
 1615 0060 00000000 		.word	.LANCHOR5
 1616 0064 00000000 		.word	Filter
 1617              		.cfi_endproc
 1618              	.LFE149:
 1620              		.section	.text.BSP_AUDIO_IN_ClockConfig,"ax",%progbits
 1621              		.align	1
 1622              		.weak	BSP_AUDIO_IN_ClockConfig
 1623              		.syntax unified
 1624              		.thumb
 1625              		.thumb_func
 1626              		.fpu fpv4-sp-d16
 1628              	BSP_AUDIO_IN_ClockConfig:
 1629              	.LFB152:
 867:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   RCC_PeriphCLKInitTypeDef rccclkinit;
 1630              		.loc 1 867 0
 1631              		.cfi_startproc
 1632              		@ args = 0, pretend = 0, frame = 16
 1633              		@ frame_needed = 0, uses_anonymous_args = 0
 1634              	.LVL128:
 1635 0000 10B5     		push	{r4, lr}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 51


 1636              	.LCFI34:
 1637              		.cfi_def_cfa_offset 8
 1638              		.cfi_offset 4, -8
 1639              		.cfi_offset 14, -4
 1640 0002 84B0     		sub	sp, sp, #16
 1641              	.LCFI35:
 1642              		.cfi_def_cfa_offset 24
 1643 0004 0C46     		mov	r4, r1
 871:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* PLLI2S_VCO Input = HSE_VALUE/PLL_M = 1 Mhz */
 1644              		.loc 1 871 0
 1645 0006 6846     		mov	r0, sp
 1646              	.LVL129:
 1647 0008 FFF7FEFF 		bl	HAL_RCCEx_GetPeriphCLKConfig
 1648              	.LVL130:
 873:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1649              		.loc 1 873 0
 1650 000c 14F0070F 		tst	r4, #7
 1651 0010 0BD0     		beq	.L166
 888:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 290;
 1652              		.loc 1 888 0
 1653 0012 0123     		movs	r3, #1
 1654 0014 0093     		str	r3, [sp]
 889:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 2;
 1655              		.loc 1 889 0
 1656 0016 4FF49173 		mov	r3, #290
 1657 001a 0193     		str	r3, [sp, #4]
 890:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 1658              		.loc 1 890 0
 1659 001c 0223     		movs	r3, #2
 1660 001e 0293     		str	r3, [sp, #8]
 891:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1661              		.loc 1 891 0
 1662 0020 6846     		mov	r0, sp
 1663 0022 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 1664              	.LVL131:
 1665              	.L162:
 893:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1666              		.loc 1 893 0
 1667 0026 04B0     		add	sp, sp, #16
 1668              	.LCFI36:
 1669              		.cfi_remember_state
 1670              		.cfi_def_cfa_offset 8
 1671              		@ sp needed
 1672 0028 10BD     		pop	{r4, pc}
 1673              	.LVL132:
 1674              	.L166:
 1675              	.LCFI37:
 1676              		.cfi_restore_state
 878:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SN = 192;
 1677              		.loc 1 878 0
 1678 002a 0123     		movs	r3, #1
 1679 002c 0093     		str	r3, [sp]
 879:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     rccclkinit.PLLI2S.PLLI2SR = 6;
 1680              		.loc 1 879 0
 1681 002e C023     		movs	r3, #192
 1682 0030 0193     		str	r3, [sp, #4]
 880:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 52


 1683              		.loc 1 880 0
 1684 0032 0623     		movs	r3, #6
 1685 0034 0293     		str	r3, [sp, #8]
 881:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1686              		.loc 1 881 0
 1687 0036 6846     		mov	r0, sp
 1688 0038 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 1689              	.LVL133:
 1690 003c F3E7     		b	.L162
 1691              		.cfi_endproc
 1692              	.LFE152:
 1694              		.section	.text.BSP_AUDIO_IN_MspInit,"ax",%progbits
 1695              		.align	1
 1696              		.weak	BSP_AUDIO_IN_MspInit
 1697              		.syntax unified
 1698              		.thumb
 1699              		.thumb_func
 1700              		.fpu fpv4-sp-d16
 1702              	BSP_AUDIO_IN_MspInit:
 1703              	.LFB153:
 901:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   static DMA_HandleTypeDef hdma_i2sRx;
 1704              		.loc 1 901 0
 1705              		.cfi_startproc
 1706              		@ args = 0, pretend = 0, frame = 40
 1707              		@ frame_needed = 0, uses_anonymous_args = 0
 1708              	.LVL134:
 1709 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1710              	.LCFI38:
 1711              		.cfi_def_cfa_offset 20
 1712              		.cfi_offset 4, -20
 1713              		.cfi_offset 5, -16
 1714              		.cfi_offset 6, -12
 1715              		.cfi_offset 7, -8
 1716              		.cfi_offset 14, -4
 1717 0002 8BB0     		sub	sp, sp, #44
 1718              	.LCFI39:
 1719              		.cfi_def_cfa_offset 64
 1720 0004 0646     		mov	r6, r0
 1721              	.LBB8:
 906:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1722              		.loc 1 906 0
 1723 0006 0025     		movs	r5, #0
 1724 0008 0195     		str	r5, [sp, #4]
 1725 000a 364C     		ldr	r4, .L171
 1726 000c 236C     		ldr	r3, [r4, #64]
 1727 000e 43F48043 		orr	r3, r3, #16384
 1728 0012 2364     		str	r3, [r4, #64]
 1729 0014 236C     		ldr	r3, [r4, #64]
 1730 0016 03F48043 		and	r3, r3, #16384
 1731 001a 0193     		str	r3, [sp, #4]
 1732 001c 019B     		ldr	r3, [sp, #4]
 1733              	.LBE8:
 1734              	.LBB9:
 909:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   I2S2_MOSI_GPIO_CLK_ENABLE();
 1735              		.loc 1 909 0
 1736 001e 0295     		str	r5, [sp, #8]
 1737 0020 236B     		ldr	r3, [r4, #48]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 53


 1738 0022 43F00203 		orr	r3, r3, #2
 1739 0026 2363     		str	r3, [r4, #48]
 1740 0028 236B     		ldr	r3, [r4, #48]
 1741 002a 03F00203 		and	r3, r3, #2
 1742 002e 0293     		str	r3, [sp, #8]
 1743 0030 029B     		ldr	r3, [sp, #8]
 1744              	.LBE9:
 1745              	.LBB10:
 910:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1746              		.loc 1 910 0
 1747 0032 0395     		str	r5, [sp, #12]
 1748 0034 236B     		ldr	r3, [r4, #48]
 1749 0036 43F00403 		orr	r3, r3, #4
 1750 003a 2363     		str	r3, [r4, #48]
 1751 003c 236B     		ldr	r3, [r4, #48]
 1752 003e 03F00403 		and	r3, r3, #4
 1753 0042 0393     		str	r3, [sp, #12]
 1754 0044 039B     		ldr	r3, [sp, #12]
 1755              	.LBE10:
 913:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Pull      = GPIO_NOPULL;
 1756              		.loc 1 913 0
 1757 0046 0223     		movs	r3, #2
 1758 0048 0693     		str	r3, [sp, #24]
 914:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Speed     = GPIO_SPEED_FAST;
 1759              		.loc 1 914 0
 1760 004a 0795     		str	r5, [sp, #28]
 915:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1761              		.loc 1 915 0
 1762 004c 0893     		str	r3, [sp, #32]
 917:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate = I2S2_SCK_AF;
 1763              		.loc 1 917 0
 1764 004e 4FF48063 		mov	r3, #1024
 1765 0052 0593     		str	r3, [sp, #20]
 918:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S2_SCK_GPIO_PORT, &GPIO_InitStruct);
 1766              		.loc 1 918 0
 1767 0054 0527     		movs	r7, #5
 1768 0056 0997     		str	r7, [sp, #36]
 919:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1769              		.loc 1 919 0
 1770 0058 05A9     		add	r1, sp, #20
 1771              	.LVL135:
 1772 005a 2348     		ldr	r0, .L171+4
 1773              	.LVL136:
 1774 005c FFF7FEFF 		bl	HAL_GPIO_Init
 1775              	.LVL137:
 921:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitStruct.Alternate = I2S2_MOSI_AF;
 1776              		.loc 1 921 0
 1777 0060 0823     		movs	r3, #8
 1778 0062 0593     		str	r3, [sp, #20]
 922:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_GPIO_Init(I2S2_MOSI_GPIO_PORT, &GPIO_InitStruct); 
 1779              		.loc 1 922 0
 1780 0064 0997     		str	r7, [sp, #36]
 923:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1781              		.loc 1 923 0
 1782 0066 05A9     		add	r1, sp, #20
 1783 0068 2048     		ldr	r0, .L171+8
 1784 006a FFF7FEFF 		bl	HAL_GPIO_Init
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 54


 1785              	.LVL138:
 1786              	.LBB11:
 926:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 1787              		.loc 1 926 0
 1788 006e 0495     		str	r5, [sp, #16]
 1789 0070 236B     		ldr	r3, [r4, #48]
 1790 0072 43F40013 		orr	r3, r3, #2097152
 1791 0076 2363     		str	r3, [r4, #48]
 1792 0078 236B     		ldr	r3, [r4, #48]
 1793 007a 03F40013 		and	r3, r3, #2097152
 1794 007e 0493     		str	r3, [sp, #16]
 1795 0080 049B     		ldr	r3, [sp, #16]
 1796              	.LBE11:
 928:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1797              		.loc 1 928 0
 1798 0082 3268     		ldr	r2, [r6]
 1799 0084 1A4B     		ldr	r3, .L171+12
 1800 0086 9A42     		cmp	r2, r3
 1801 0088 09D0     		beq	.L170
 1802              	.L168:
 957:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   HAL_NVIC_EnableIRQ(I2S2_DMAx_IRQ); 
 1803              		.loc 1 957 0
 1804 008a 0022     		movs	r2, #0
 1805 008c 0F21     		movs	r1, #15
 1806 008e 0E20     		movs	r0, #14
 1807 0090 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 1808              	.LVL139:
 958:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 1809              		.loc 1 958 0
 1810 0094 0E20     		movs	r0, #14
 1811 0096 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1812              	.LVL140:
 959:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1813              		.loc 1 959 0
 1814 009a 0BB0     		add	sp, sp, #44
 1815              	.LCFI40:
 1816              		.cfi_remember_state
 1817              		.cfi_def_cfa_offset 20
 1818              		@ sp needed
 1819 009c F0BD     		pop	{r4, r5, r6, r7, pc}
 1820              	.LVL141:
 1821              	.L170:
 1822              	.LCFI41:
 1823              		.cfi_restore_state
 931:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Direction           = DMA_PERIPH_TO_MEMORY;
 1824              		.loc 1 931 0
 1825 009e 154C     		ldr	r4, .L171+16
 1826 00a0 6560     		str	r5, [r4, #4]
 932:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphInc           = DMA_PINC_DISABLE;
 1827              		.loc 1 932 0
 1828 00a2 A560     		str	r5, [r4, #8]
 933:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemInc              = DMA_MINC_ENABLE;
 1829              		.loc 1 933 0
 1830 00a4 E560     		str	r5, [r4, #12]
 934:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphDataAlignment = I2S2_DMAx_PERIPH_DATA_SIZE;
 1831              		.loc 1 934 0
 1832 00a6 4FF48062 		mov	r2, #1024
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 55


 1833 00aa 2261     		str	r2, [r4, #16]
 935:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemDataAlignment    = I2S2_DMAx_MEM_DATA_SIZE;
 1834              		.loc 1 935 0
 1835 00ac 4FF40062 		mov	r2, #2048
 1836 00b0 6261     		str	r2, [r4, #20]
 936:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Mode                = DMA_CIRCULAR;
 1837              		.loc 1 936 0
 1838 00b2 4FF40052 		mov	r2, #8192
 1839 00b6 A261     		str	r2, [r4, #24]
 937:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.Priority            = DMA_PRIORITY_HIGH;
 1840              		.loc 1 937 0
 1841 00b8 4FF48072 		mov	r2, #256
 1842 00bc E261     		str	r2, [r4, #28]
 938:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.FIFOMode            = DMA_FIFOMODE_DISABLE;         
 1843              		.loc 1 938 0
 1844 00be 4FF40032 		mov	r2, #131072
 1845 00c2 2262     		str	r2, [r4, #32]
 939:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.FIFOThreshold       = DMA_FIFO_THRESHOLD_FULL;
 1846              		.loc 1 939 0
 1847 00c4 6562     		str	r5, [r4, #36]
 940:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.MemBurst            = DMA_MBURST_SINGLE;
 1848              		.loc 1 940 0
 1849 00c6 0322     		movs	r2, #3
 1850 00c8 A262     		str	r2, [r4, #40]
 941:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     hdma_i2sRx.Init.PeriphBurst         = DMA_MBURST_SINGLE; 
 1851              		.loc 1 941 0
 1852 00ca E562     		str	r5, [r4, #44]
 942:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 1853              		.loc 1 942 0
 1854 00cc 2563     		str	r5, [r4, #48]
 944:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 1855              		.loc 1 944 0
 1856 00ce 0A4B     		ldr	r3, .L171+20
 1857 00d0 2360     		str	r3, [r4]
 947:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 1858              		.loc 1 947 0
 1859 00d2 F463     		str	r4, [r6, #60]
 1860 00d4 A663     		str	r6, [r4, #56]
 950:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     
 1861              		.loc 1 950 0
 1862 00d6 2046     		mov	r0, r4
 1863 00d8 FFF7FEFF 		bl	HAL_DMA_DeInit
 1864              	.LVL142:
 953:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1865              		.loc 1 953 0
 1866 00dc 2046     		mov	r0, r4
 1867 00de FFF7FEFF 		bl	HAL_DMA_Init
 1868              	.LVL143:
 1869 00e2 D2E7     		b	.L168
 1870              	.L172:
 1871              		.align	2
 1872              	.L171:
 1873 00e4 00380240 		.word	1073887232
 1874 00e8 00040240 		.word	1073873920
 1875 00ec 00080240 		.word	1073874944
 1876 00f0 00380040 		.word	1073756160
 1877 00f4 00000000 		.word	.LANCHOR6
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 56


 1878 00f8 58600240 		.word	1073897560
 1879              		.cfi_endproc
 1880              	.LFE153:
 1882              		.section	.text.BSP_AUDIO_IN_Init,"ax",%progbits
 1883              		.align	1
 1884              		.global	BSP_AUDIO_IN_Init
 1885              		.syntax unified
 1886              		.thumb
 1887              		.thumb_func
 1888              		.fpu fpv4-sp-d16
 1890              	BSP_AUDIO_IN_Init:
 1891              	.LFB143:
 705:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1892              		.loc 1 705 0
 1893              		.cfi_startproc
 1894              		@ args = 0, pretend = 0, frame = 0
 1895              		@ frame_needed = 0, uses_anonymous_args = 0
 1896              	.LVL144:
 1897 0000 70B5     		push	{r4, r5, r6, lr}
 1898              	.LCFI42:
 1899              		.cfi_def_cfa_offset 16
 1900              		.cfi_offset 4, -16
 1901              		.cfi_offset 5, -12
 1902              		.cfi_offset 6, -8
 1903              		.cfi_offset 14, -4
 1904 0002 0446     		mov	r4, r0
 1905 0004 1646     		mov	r6, r2
 708:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1906              		.loc 1 708 0
 1907 0006 0D4D     		ldr	r5, .L177
 1908 0008 0022     		movs	r2, #0
 1909              	.LVL145:
 1910 000a 0146     		mov	r1, r0
 1911              	.LVL146:
 1912 000c 2846     		mov	r0, r5
 1913              	.LVL147:
 1914 000e FFF7FEFF 		bl	BSP_AUDIO_IN_ClockConfig
 1915              	.LVL148:
 711:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1916              		.loc 1 711 0
 1917 0012 3146     		mov	r1, r6
 1918 0014 2046     		mov	r0, r4
 1919 0016 FFF7FEFF 		bl	PDMDecoder_Init
 1920              	.LVL149:
 714:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(HAL_I2S_GetState(&hAudioInI2s) == HAL_I2S_STATE_RESET)
 1921              		.loc 1 714 0
 1922 001a 094B     		ldr	r3, .L177+4
 1923 001c 2B60     		str	r3, [r5]
 715:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   { 
 1924              		.loc 1 715 0
 1925 001e 2846     		mov	r0, r5
 1926 0020 FFF7FEFF 		bl	HAL_I2S_GetState
 1927              	.LVL150:
 1928 0024 20B1     		cbz	r0, .L176
 1929              	.L174:
 722:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1930              		.loc 1 722 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 57


 1931 0026 2046     		mov	r0, r4
 1932 0028 FFF7FEFF 		bl	I2S2_Init
 1933              	.LVL151:
 726:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1934              		.loc 1 726 0
 1935 002c 0020     		movs	r0, #0
 1936 002e 70BD     		pop	{r4, r5, r6, pc}
 1937              	.LVL152:
 1938              	.L176:
 718:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 1939              		.loc 1 718 0
 1940 0030 0021     		movs	r1, #0
 1941 0032 2846     		mov	r0, r5
 1942 0034 FFF7FEFF 		bl	BSP_AUDIO_IN_MspInit
 1943              	.LVL153:
 1944 0038 F5E7     		b	.L174
 1945              	.L178:
 1946 003a 00BF     		.align	2
 1947              	.L177:
 1948 003c 00000000 		.word	hAudioInI2s
 1949 0040 00380040 		.word	1073756160
 1950              		.cfi_endproc
 1951              	.LFE143:
 1953              		.section	.text.BSP_AUDIO_IN_MspDeInit,"ax",%progbits
 1954              		.align	1
 1955              		.weak	BSP_AUDIO_IN_MspDeInit
 1956              		.syntax unified
 1957              		.thumb
 1958              		.thumb_func
 1959              		.fpu fpv4-sp-d16
 1961              	BSP_AUDIO_IN_MspDeInit:
 1962              	.LFB154:
 967:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   GPIO_InitTypeDef  gpio_init_structure;
 1963              		.loc 1 967 0
 1964              		.cfi_startproc
 1965              		@ args = 0, pretend = 0, frame = 0
 1966              		@ frame_needed = 0, uses_anonymous_args = 0
 1967              	.LVL154:
 1968 0000 10B5     		push	{r4, lr}
 1969              	.LCFI43:
 1970              		.cfi_def_cfa_offset 8
 1971              		.cfi_offset 4, -8
 1972              		.cfi_offset 14, -4
 1973 0002 0446     		mov	r4, r0
 971:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
 1974              		.loc 1 971 0
 1975 0004 0E20     		movs	r0, #14
 1976              	.LVL155:
 1977 0006 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1978              	.LVL156:
 973:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
 1979              		.loc 1 973 0
 1980 000a 2268     		ldr	r2, [r4]
 1981 000c 0E4B     		ldr	r3, .L183
 1982 000e 9A42     		cmp	r2, r3
 1983 0010 15D0     		beq	.L182
 1984              	.L180:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 58


 980:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1985              		.loc 1 980 0
 1986 0012 2268     		ldr	r2, [r4]
 1987 0014 D369     		ldr	r3, [r2, #28]
 1988 0016 23F48063 		bic	r3, r3, #1024
 1989 001a 1B04     		lsls	r3, r3, #16
 1990 001c 1B0C     		lsrs	r3, r3, #16
 1991 001e D361     		str	r3, [r2, #28]
 984:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   gpio_init_structure.Pin = I2S2_MOSI_PIN;
 1992              		.loc 1 984 0
 1993 0020 4FF48061 		mov	r1, #1024
 1994 0024 0948     		ldr	r0, .L183+4
 1995 0026 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1996              	.LVL157:
 986:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 1997              		.loc 1 986 0
 1998 002a 0821     		movs	r1, #8
 1999 002c 0848     		ldr	r0, .L183+8
 2000 002e FFF7FEFF 		bl	HAL_GPIO_DeInit
 2001              	.LVL158:
 989:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
 2002              		.loc 1 989 0
 2003 0032 084A     		ldr	r2, .L183+12
 2004 0034 136C     		ldr	r3, [r2, #64]
 2005 0036 23F48043 		bic	r3, r3, #16384
 2006 003a 1364     		str	r3, [r2, #64]
 2007 003c 10BD     		pop	{r4, pc}
 2008              	.LVL159:
 2009              	.L182:
 976:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 2010              		.loc 1 976 0
 2011 003e E06B     		ldr	r0, [r4, #60]
 2012 0040 FFF7FEFF 		bl	HAL_DMA_DeInit
 2013              	.LVL160:
 2014 0044 E5E7     		b	.L180
 2015              	.L184:
 2016 0046 00BF     		.align	2
 2017              	.L183:
 2018 0048 00380040 		.word	1073756160
 2019 004c 00040240 		.word	1073873920
 2020 0050 00080240 		.word	1073874944
 2021 0054 00380240 		.word	1073887232
 2022              		.cfi_endproc
 2023              	.LFE154:
 2025              		.section	.text.BSP_AUDIO_IN_TransferComplete_CallBack,"ax",%progbits
 2026              		.align	1
 2027              		.weak	BSP_AUDIO_IN_TransferComplete_CallBack
 2028              		.syntax unified
 2029              		.thumb
 2030              		.thumb_func
 2031              		.fpu fpv4-sp-d16
 2033              	BSP_AUDIO_IN_TransferComplete_CallBack:
 2034              	.LFB155:
 999:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function should be implemented by the user application.
 2035              		.loc 1 999 0
 2036              		.cfi_startproc
 2037              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 59


 2038              		@ frame_needed = 0, uses_anonymous_args = 0
 2039              		@ link register save eliminated.
 2040 0000 7047     		bx	lr
 2041              		.cfi_endproc
 2042              	.LFE155:
 2044              		.section	.text.HAL_I2S_RxCpltCallback,"ax",%progbits
 2045              		.align	1
 2046              		.global	HAL_I2S_RxCpltCallback
 2047              		.syntax unified
 2048              		.thumb
 2049              		.thumb_func
 2050              		.fpu fpv4-sp-d16
 2052              	HAL_I2S_RxCpltCallback:
 2053              	.LFB150:
 842:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the record update function to get the next buffer to fill and its size (size is ignored) 
 2054              		.loc 1 842 0
 2055              		.cfi_startproc
 2056              		@ args = 0, pretend = 0, frame = 0
 2057              		@ frame_needed = 0, uses_anonymous_args = 0
 2058              	.LVL161:
 842:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Call the record update function to get the next buffer to fill and its size (size is ignored) 
 2059              		.loc 1 842 0
 2060 0000 08B5     		push	{r3, lr}
 2061              	.LCFI44:
 2062              		.cfi_def_cfa_offset 8
 2063              		.cfi_offset 3, -8
 2064              		.cfi_offset 14, -4
 844:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 2065              		.loc 1 844 0
 2066 0002 FFF7FEFF 		bl	BSP_AUDIO_IN_TransferComplete_CallBack
 2067              	.LVL162:
 2068 0006 08BD     		pop	{r3, pc}
 2069              		.cfi_endproc
 2070              	.LFE150:
 2072              		.section	.text.BSP_AUDIO_IN_HalfTransfer_CallBack,"ax",%progbits
 2073              		.align	1
 2074              		.weak	BSP_AUDIO_IN_HalfTransfer_CallBack
 2075              		.syntax unified
 2076              		.thumb
 2077              		.thumb_func
 2078              		.fpu fpv4-sp-d16
 2080              	BSP_AUDIO_IN_HalfTransfer_CallBack:
 2081              	.LFB156:
1009:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function should be implemented by the user application.
 2082              		.loc 1 1009 0
 2083              		.cfi_startproc
 2084              		@ args = 0, pretend = 0, frame = 0
 2085              		@ frame_needed = 0, uses_anonymous_args = 0
 2086              		@ link register save eliminated.
 2087 0000 7047     		bx	lr
 2088              		.cfi_endproc
 2089              	.LFE156:
 2091              		.section	.text.HAL_I2S_RxHalfCpltCallback,"ax",%progbits
 2092              		.align	1
 2093              		.global	HAL_I2S_RxHalfCpltCallback
 2094              		.syntax unified
 2095              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 60


 2096              		.thumb_func
 2097              		.fpu fpv4-sp-d16
 2099              	HAL_I2S_RxHalfCpltCallback:
 2100              	.LFB151:
 852:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Manage the remaining file size and new address offset: This function 
 2101              		.loc 1 852 0
 2102              		.cfi_startproc
 2103              		@ args = 0, pretend = 0, frame = 0
 2104              		@ frame_needed = 0, uses_anonymous_args = 0
 2105              	.LVL163:
 852:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Manage the remaining file size and new address offset: This function 
 2106              		.loc 1 852 0
 2107 0000 08B5     		push	{r3, lr}
 2108              	.LCFI45:
 2109              		.cfi_def_cfa_offset 8
 2110              		.cfi_offset 3, -8
 2111              		.cfi_offset 14, -4
 855:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
 2112              		.loc 1 855 0
 2113 0002 FFF7FEFF 		bl	BSP_AUDIO_IN_HalfTransfer_CallBack
 2114              	.LVL164:
 2115 0006 08BD     		pop	{r3, pc}
 2116              		.cfi_endproc
 2117              	.LFE151:
 2119              		.section	.text.BSP_AUDIO_IN_Error_Callback,"ax",%progbits
 2120              		.align	1
 2121              		.weak	BSP_AUDIO_IN_Error_Callback
 2122              		.syntax unified
 2123              		.thumb
 2124              		.thumb_func
 2125              		.fpu fpv4-sp-d16
 2127              	BSP_AUDIO_IN_Error_Callback:
 2128              	.LFB157:
1019:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* This function is called when an Interrupt due to transfer error on or peripheral
 2129              		.loc 1 1019 0
 2130              		.cfi_startproc
 2131              		@ args = 0, pretend = 0, frame = 0
 2132              		@ frame_needed = 0, uses_anonymous_args = 0
 2133              		@ link register save eliminated.
 2134 0000 7047     		bx	lr
 2135              		.cfi_endproc
 2136              	.LFE157:
 2138              		.section	.text.HAL_I2S_ErrorCallback,"ax",%progbits
 2139              		.align	1
 2140              		.global	HAL_I2S_ErrorCallback
 2141              		.syntax unified
 2142              		.thumb
 2143              		.thumb_func
 2144              		.fpu fpv4-sp-d16
 2146              	HAL_I2S_ErrorCallback:
 2147              	.LFB160:
1088:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1089:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1090:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @}
1091:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1092:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** 
1093:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /** @defgroup STM32F4_DISCOVERY_AUDIO_IN_OUT_Private_Functions STM32F4 DISCOVERY AUDIO IN OUT Priva
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 61


1094:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @{
1095:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */ 
1096:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   
1097:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** /**
1098:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @brief  I2S error callbacks.
1099:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   * @param  hi2s: I2S handle
1100:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   */
1101:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** void HAL_I2S_ErrorCallback(I2S_HandleTypeDef *hi2s)
1102:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** {
 2148              		.loc 1 1102 0
 2149              		.cfi_startproc
 2150              		@ args = 0, pretend = 0, frame = 0
 2151              		@ frame_needed = 0, uses_anonymous_args = 0
 2152              	.LVL165:
 2153              		.loc 1 1102 0
 2154 0000 10B5     		push	{r4, lr}
 2155              	.LCFI46:
 2156              		.cfi_def_cfa_offset 8
 2157              		.cfi_offset 4, -8
 2158              		.cfi_offset 14, -4
 2159 0002 0446     		mov	r4, r0
1103:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   /* Manage the error generated on DMA FIFO: This function 
1104:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****      should be coded by user (its prototype is already declared in stm32f4_discovery_audio.h) */  
1105:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S3)
 2160              		.loc 1 1105 0
 2161 0004 0268     		ldr	r2, [r0]
 2162 0006 074B     		ldr	r3, .L198
 2163 0008 9A42     		cmp	r2, r3
 2164 000a 04D0     		beq	.L196
 2165              	.LVL166:
 2166              	.L193:
1106:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
1107:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_OUT_Error_CallBack();
1108:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
1109:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   if(hi2s->Instance == I2S2)
 2167              		.loc 1 1109 0
 2168 000c 2268     		ldr	r2, [r4]
 2169 000e 064B     		ldr	r3, .L198+4
 2170 0010 9A42     		cmp	r2, r3
 2171 0012 03D0     		beq	.L197
 2172              	.L192:
 2173 0014 10BD     		pop	{r4, pc}
 2174              	.LVL167:
 2175              	.L196:
1107:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
 2176              		.loc 1 1107 0
 2177 0016 FFF7FEFF 		bl	BSP_AUDIO_OUT_Error_CallBack
 2178              	.LVL168:
 2179 001a F7E7     		b	.L193
 2180              	.L197:
1110:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   {
1111:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****     BSP_AUDIO_IN_Error_Callback();
 2181              		.loc 1 1111 0
 2182 001c FFF7FEFF 		bl	BSP_AUDIO_IN_Error_Callback
 2183              	.LVL169:
1112:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c ****   }
1113:Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 62


 2184              		.loc 1 1113 0
 2185 0020 F8E7     		b	.L192
 2186              	.L199:
 2187 0022 00BF     		.align	2
 2188              	.L198:
 2189 0024 003C0040 		.word	1073757184
 2190 0028 00380040 		.word	1073756160
 2191              		.cfi_endproc
 2192              	.LFE160:
 2194              		.global	AudioInVolume
 2195              		.comm	Filter,52,4
 2196              		.comm	hAudioInI2s,72,4
 2197              		.comm	hAudioOutI2s,72,4
 2198              		.global	I2SPLLR
 2199              		.global	I2SPLLN
 2200              		.global	I2SFreq
 2201              		.section	.bss.hdma_i2sRx.9852,"aw",%nobits
 2202              		.align	2
 2203              		.set	.LANCHOR6,. + 0
 2206              	hdma_i2sRx.9852:
 2207 0000 00000000 		.space	96
 2207      00000000 
 2207      00000000 
 2207      00000000 
 2207      00000000 
 2208              		.section	.bss.hdma_i2sTx.9774,"aw",%nobits
 2209              		.align	2
 2210              		.set	.LANCHOR4,. + 0
 2213              	hdma_i2sTx.9774:
 2214 0000 00000000 		.space	96
 2214      00000000 
 2214      00000000 
 2214      00000000 
 2214      00000000 
 2215              		.section	.bss.pAudioDrv,"aw",%nobits
 2216              		.align	2
 2217              		.set	.LANCHOR0,. + 0
 2220              	pAudioDrv:
 2221 0000 00000000 		.space	4
 2222              		.section	.data.AudioInVolume,"aw",%progbits
 2223              		.align	1
 2224              		.set	.LANCHOR5,. + 0
 2227              	AudioInVolume:
 2228 0000 4000     		.short	64
 2229              		.section	.rodata.I2SFreq,"a",%progbits
 2230              		.align	2
 2231              		.set	.LANCHOR1,. + 0
 2234              	I2SFreq:
 2235 0000 401F0000 		.word	8000
 2236 0004 112B0000 		.word	11025
 2237 0008 803E0000 		.word	16000
 2238 000c 22560000 		.word	22050
 2239 0010 007D0000 		.word	32000
 2240 0014 44AC0000 		.word	44100
 2241 0018 80BB0000 		.word	48000
 2242 001c 00770100 		.word	96000
 2243              		.section	.rodata.I2SPLLN,"a",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 63


 2244              		.align	2
 2245              		.set	.LANCHOR2,. + 0
 2248              	I2SPLLN:
 2249 0000 00010000 		.word	256
 2250 0004 AD010000 		.word	429
 2251 0008 D5000000 		.word	213
 2252 000c AD010000 		.word	429
 2253 0010 AA010000 		.word	426
 2254 0014 0F010000 		.word	271
 2255 0018 02010000 		.word	258
 2256 001c 58010000 		.word	344
 2257              		.section	.rodata.I2SPLLR,"a",%progbits
 2258              		.align	2
 2259              		.set	.LANCHOR3,. + 0
 2262              	I2SPLLR:
 2263 0000 05000000 		.word	5
 2264 0004 04000000 		.word	4
 2265 0008 04000000 		.word	4
 2266 000c 04000000 		.word	4
 2267 0010 04000000 		.word	4
 2268 0014 06000000 		.word	6
 2269 0018 03000000 		.word	3
 2270 001c 01000000 		.word	1
 2271              		.text
 2272              	.Letext0:
 2273              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 2274              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 2275              		.file 4 "Drivers/BSP/STM32F4-Discovery/../Components/cs43l22/../Common/audio.h"
 2276              		.file 5 "Drivers/BSP/STM32F4-Discovery/../Components/cs43l22/cs43l22.h"
 2277              		.file 6 "Drivers/CMSIS/Include/core_cm4.h"
 2278              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 2279              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 2280              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 2281              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 2282              		.file 11 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 2283              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 2284              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2285              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc_ex.h"
 2286              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 2287              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2288              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2s.h"
 2289              		.file 18 "Drivers/BSP/STM32F4-Discovery/../../../Middlewares/ST/STM32_Audio/Addons/PDM/pdm_filter.
 2290              		.file 19 "Drivers/BSP/STM32F4-Discovery/stm32f4_discovery_audio.h"
 2291              		.file 20 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 2292              		.file 21 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 64


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f4_discovery_audio.c
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:18     .text.I2S3_Init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:24     .text.I2S3_Init:00000000 I2S3_Init
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:80     .text.I2S3_Init:00000038 $d
                            *COM*:00000048 hAudioOutI2s
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:86     .text.I2S2_Init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:92     .text.I2S2_Init:00000000 I2S2_Init
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:150    .text.I2S2_Init:00000040 $d
                            *COM*:00000048 hAudioInI2s
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:156    .text.PDMDecoder_Init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:162    .text.PDMDecoder_Init:00000000 PDMDecoder_Init
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:240    .text.PDMDecoder_Init:00000054 $d
                            *COM*:00000034 Filter
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:247    .text.BSP_AUDIO_OUT_Play:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:254    .text.BSP_AUDIO_OUT_Play:00000000 BSP_AUDIO_OUT_Play
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:310    .text.BSP_AUDIO_OUT_Play:00000038 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:316    .text.BSP_AUDIO_OUT_ChangeBuffer:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:323    .text.BSP_AUDIO_OUT_ChangeBuffer:00000000 BSP_AUDIO_OUT_ChangeBuffer
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:347    .text.BSP_AUDIO_OUT_ChangeBuffer:00000010 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:352    .text.BSP_AUDIO_OUT_Pause:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:359    .text.BSP_AUDIO_OUT_Pause:00000000 BSP_AUDIO_OUT_Pause
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:393    .text.BSP_AUDIO_OUT_Pause:0000001c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:399    .text.BSP_AUDIO_OUT_Resume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:406    .text.BSP_AUDIO_OUT_Resume:00000000 BSP_AUDIO_OUT_Resume
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:440    .text.BSP_AUDIO_OUT_Resume:0000001c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:446    .text.BSP_AUDIO_OUT_Stop:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:453    .text.BSP_AUDIO_OUT_Stop:00000000 BSP_AUDIO_OUT_Stop
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:511    .text.BSP_AUDIO_OUT_Stop:00000038 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:518    .text.BSP_AUDIO_OUT_SetVolume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:525    .text.BSP_AUDIO_OUT_SetVolume:00000000 BSP_AUDIO_OUT_SetVolume
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:558    .text.BSP_AUDIO_OUT_SetVolume:00000018 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:563    .text.BSP_AUDIO_OUT_SetMute:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:570    .text.BSP_AUDIO_OUT_SetMute:00000000 BSP_AUDIO_OUT_SetMute
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:603    .text.BSP_AUDIO_OUT_SetMute:00000018 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:608    .text.BSP_AUDIO_OUT_SetOutputMode:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:615    .text.BSP_AUDIO_OUT_SetOutputMode:00000000 BSP_AUDIO_OUT_SetOutputMode
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:648    .text.BSP_AUDIO_OUT_SetOutputMode:00000018 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:653    .text.BSP_AUDIO_OUT_ClockConfig:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:660    .text.BSP_AUDIO_OUT_ClockConfig:00000000 BSP_AUDIO_OUT_ClockConfig
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:755    .text.BSP_AUDIO_OUT_ClockConfig:00000060 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:762    .text.BSP_AUDIO_OUT_SetFrequency:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:769    .text.BSP_AUDIO_OUT_SetFrequency:00000000 BSP_AUDIO_OUT_SetFrequency
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:798    .text.BSP_AUDIO_OUT_SetFrequency:00000018 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:803    .text.BSP_AUDIO_OUT_MspInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:810    .text.BSP_AUDIO_OUT_MspInit:00000000 BSP_AUDIO_OUT_MspInit
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1000   .text.BSP_AUDIO_OUT_MspInit:00000104 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1010   .text.BSP_AUDIO_OUT_Init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1017   .text.BSP_AUDIO_OUT_Init:00000000 BSP_AUDIO_OUT_Init
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1121   .text.BSP_AUDIO_OUT_Init:00000070 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1129   .text.BSP_AUDIO_OUT_MspDeInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1136   .text.BSP_AUDIO_OUT_MspDeInit:00000000 BSP_AUDIO_OUT_MspDeInit
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1200   .text.BSP_AUDIO_OUT_MspDeInit:00000050 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1208   .text.BSP_AUDIO_OUT_TransferComplete_CallBack:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1215   .text.BSP_AUDIO_OUT_TransferComplete_CallBack:00000000 BSP_AUDIO_OUT_TransferComplete_CallBack
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1227   .text.HAL_I2S_TxCpltCallback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1234   .text.HAL_I2S_TxCpltCallback:00000000 HAL_I2S_TxCpltCallback
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 65


C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1265   .text.HAL_I2S_TxCpltCallback:00000014 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1270   .text.BSP_AUDIO_OUT_HalfTransfer_CallBack:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1277   .text.BSP_AUDIO_OUT_HalfTransfer_CallBack:00000000 BSP_AUDIO_OUT_HalfTransfer_CallBack
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1289   .text.HAL_I2S_TxHalfCpltCallback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1296   .text.HAL_I2S_TxHalfCpltCallback:00000000 HAL_I2S_TxHalfCpltCallback
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1327   .text.HAL_I2S_TxHalfCpltCallback:00000014 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1332   .text.BSP_AUDIO_OUT_Error_CallBack:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1339   .text.BSP_AUDIO_OUT_Error_CallBack:00000000 BSP_AUDIO_OUT_Error_CallBack
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1351   .text.BSP_AUDIO_IN_Record:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1358   .text.BSP_AUDIO_IN_Record:00000000 BSP_AUDIO_IN_Record
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1386   .text.BSP_AUDIO_IN_Record:00000010 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1391   .text.BSP_AUDIO_IN_Stop:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1398   .text.BSP_AUDIO_IN_Stop:00000000 BSP_AUDIO_IN_Stop
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1420   .text.BSP_AUDIO_IN_Stop:0000000c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1425   .text.BSP_AUDIO_IN_Pause:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1432   .text.BSP_AUDIO_IN_Pause:00000000 BSP_AUDIO_IN_Pause
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1453   .text.BSP_AUDIO_IN_Pause:0000000c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1458   .text.BSP_AUDIO_IN_Resume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1465   .text.BSP_AUDIO_IN_Resume:00000000 BSP_AUDIO_IN_Resume
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1486   .text.BSP_AUDIO_IN_Resume:0000000c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1491   .text.BSP_AUDIO_IN_SetVolume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1498   .text.BSP_AUDIO_IN_SetVolume:00000000 BSP_AUDIO_IN_SetVolume
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1516   .text.BSP_AUDIO_IN_SetVolume:00000008 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1521   .text.BSP_AUDIO_IN_PDMToPCM:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1528   .text.BSP_AUDIO_IN_PDMToPCM:00000000 BSP_AUDIO_IN_PDMToPCM
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1615   .text.BSP_AUDIO_IN_PDMToPCM:00000060 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1621   .text.BSP_AUDIO_IN_ClockConfig:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1628   .text.BSP_AUDIO_IN_ClockConfig:00000000 BSP_AUDIO_IN_ClockConfig
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1695   .text.BSP_AUDIO_IN_MspInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1702   .text.BSP_AUDIO_IN_MspInit:00000000 BSP_AUDIO_IN_MspInit
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1873   .text.BSP_AUDIO_IN_MspInit:000000e4 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1883   .text.BSP_AUDIO_IN_Init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1890   .text.BSP_AUDIO_IN_Init:00000000 BSP_AUDIO_IN_Init
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1948   .text.BSP_AUDIO_IN_Init:0000003c $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1954   .text.BSP_AUDIO_IN_MspDeInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:1961   .text.BSP_AUDIO_IN_MspDeInit:00000000 BSP_AUDIO_IN_MspDeInit
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2018   .text.BSP_AUDIO_IN_MspDeInit:00000048 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2026   .text.BSP_AUDIO_IN_TransferComplete_CallBack:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2033   .text.BSP_AUDIO_IN_TransferComplete_CallBack:00000000 BSP_AUDIO_IN_TransferComplete_CallBack
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2045   .text.HAL_I2S_RxCpltCallback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2052   .text.HAL_I2S_RxCpltCallback:00000000 HAL_I2S_RxCpltCallback
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2073   .text.BSP_AUDIO_IN_HalfTransfer_CallBack:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2080   .text.BSP_AUDIO_IN_HalfTransfer_CallBack:00000000 BSP_AUDIO_IN_HalfTransfer_CallBack
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2092   .text.HAL_I2S_RxHalfCpltCallback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2099   .text.HAL_I2S_RxHalfCpltCallback:00000000 HAL_I2S_RxHalfCpltCallback
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2120   .text.BSP_AUDIO_IN_Error_Callback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2127   .text.BSP_AUDIO_IN_Error_Callback:00000000 BSP_AUDIO_IN_Error_Callback
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2139   .text.HAL_I2S_ErrorCallback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2146   .text.HAL_I2S_ErrorCallback:00000000 HAL_I2S_ErrorCallback
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2189   .text.HAL_I2S_ErrorCallback:00000024 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2227   .data.AudioInVolume:00000000 AudioInVolume
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2262   .rodata.I2SPLLR:00000000 I2SPLLR
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2248   .rodata.I2SPLLN:00000000 I2SPLLN
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2234   .rodata.I2SFreq:00000000 I2SFreq
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2202   .bss.hdma_i2sRx.9852:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2206   .bss.hdma_i2sRx.9852:00000000 hdma_i2sRx.9852
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2209   .bss.hdma_i2sTx.9774:00000000 $d
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc96vh7k.s 			page 66


C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2213   .bss.hdma_i2sTx.9774:00000000 hdma_i2sTx.9774
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2216   .bss.pAudioDrv:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2220   .bss.pAudioDrv:00000000 pAudioDrv
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2223   .data.AudioInVolume:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2230   .rodata.I2SFreq:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2244   .rodata.I2SPLLN:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc96vh7k.s:2258   .rodata.I2SPLLR:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_I2S_Init
PDM_Filter_Init
HAL_I2S_Transmit_DMA
HAL_I2S_DMAPause
HAL_I2S_DMAResume
HAL_I2S_DMAStop
HAL_Delay
HAL_GPIO_WritePin
HAL_RCCEx_GetPeriphCLKConfig
HAL_RCCEx_PeriphCLKConfig
HAL_GPIO_Init
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_DMA_DeInit
HAL_DMA_Init
HAL_I2S_GetState
cs43l22_drv
HAL_NVIC_DisableIRQ
HAL_GPIO_DeInit
HAL_I2S_Receive_DMA
PDM_Filter_64_LSB
